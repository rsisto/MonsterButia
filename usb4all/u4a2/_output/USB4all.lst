MP2COD 4.22, COFF to COD File Converter
Copyright (c) 2008 Microchip Technology Inc.
Listing File Generated: Wed May 13 21:05:36 2009


Address  Value    Disassembly              Source                                                                           File
-------  -------  -----------------------  -------------------------------------------------------------------------------  -----
                                           /* $Id: c018i.c,v 1.7 2006/11/15 22:53:12 moshtaa Exp $ */                       C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* Copyright (c)1999 Microchip Technology */                                     C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* MPLAB-C18 startup code, including initialized data */                         C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* external reference to __init() function */                                    C:\MCC18\src\traditional\startup\c018i.c
                                           extern void __init (void);                                                       C:\MCC18\src\traditional\startup\c018i.c
                                           /* external reference to the user's main routine */                              C:\MCC18\src\traditional\startup\c018i.c
                                           extern void main (void);                                                         C:\MCC18\src\traditional\startup\c018i.c
                                           /* prototype for the startup function */                                         C:\MCC18\src\traditional\startup\c018i.c
                                           void _entry (void);                                                              C:\MCC18\src\traditional\startup\c018i.c
                                           void _startup (void);                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* prototype for the initialized data setup */                                   C:\MCC18\src\traditional\startup\c018i.c
                                           void _do_cinit (void);                                                           C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           extern volatile near unsigned long short TBLPTR;                                 C:\MCC18\src\traditional\startup\c018i.c
                                           extern near unsigned FSR0;                                                       C:\MCC18\src\traditional\startup\c018i.c
                                           extern near char __FPFLAGS;                                                      C:\MCC18\src\traditional\startup\c018i.c
                                           #define RND 6                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma code _entry_scn=0x000000                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           void                                                                             C:\MCC18\src\traditional\startup\c018i.c
                                           _entry (void)                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
000000   ef90     GOTO      0x2f20         _asm goto _startup _endasm                                                       C:\MCC18\src\traditional\startup\c018i.c
000002   f017                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
000004   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma code _startup_scn                                                        C:\MCC18\src\traditional\startup\c018i.c
                                           void                                                                             C:\MCC18\src\traditional\startup\c018i.c
                                           _startup (void)                                                                  C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                             _asm                                                                           C:\MCC18\src\traditional\startup\c018i.c
                                               // Initialize the stack pointer                                              C:\MCC18\src\traditional\startup\c018i.c
002f20   ee13     LFSR      0x1,0x300          lfsr 1, _stack                                                               C:\MCC18\src\traditional\startup\c018i.c
002f22   f000                                                                                                               
002f24   ee23     LFSR      0x2,0x300          lfsr 2, _stack                                                               C:\MCC18\src\traditional\startup\c018i.c
002f26   f000                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
002f28   6af8     CLRF      0xf8,0x0           clrf TBLPTRU, 0 // 1st silicon doesn't do this on POR                        C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
002f2a   9c0f     BCF       0xf,0x6,0x0        bcf __FPFLAGS,RND,0 // Initialize rounding flag for floating point libs      C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                               _endasm                                                                      C:\MCC18\src\traditional\startup\c018i.c
002f2c   ece2     CALL      0x2dc4,0x0         _do_cinit ();                                                                C:\MCC18\src\traditional\startup\c018i.c
002f2e   f016                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           loop:                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             // If user defined __init is not found, the one in clib.lib will be used       C:\MCC18\src\traditional\startup\c018i.c
002f30   eca5     CALL      0x2f4a,0x0       __init ();                                                                     C:\MCC18\src\traditional\startup\c018i.c
002f32   f017                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             // Call the user's main routine                                                C:\MCC18\src\traditional\startup\c018i.c
002f34   ec1b     CALL      0x1436,0x0       main ();                                                                       C:\MCC18\src\traditional\startup\c018i.c
002f36   f00a                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
002f38   d7fb     BRA       0x2f30           goto loop;                                                                     C:\MCC18\src\traditional\startup\c018i.c
002f3a   0012     RETURN    0x0            }                               /* end _startup() */                             C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           /* MPLAB-C18 initialized data memory support */                                  C:\MCC18\src\traditional\startup\c018i.c
                                           /* The linker will populate the _cinit table */                                  C:\MCC18\src\traditional\startup\c018i.c
                                           extern far rom struct                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                             unsigned short num_init;                                                       C:\MCC18\src\traditional\startup\c018i.c
                                             struct _init_entry                                                             C:\MCC18\src\traditional\startup\c018i.c
                                             {                                                                              C:\MCC18\src\traditional\startup\c018i.c
                                               unsigned long from;                                                          C:\MCC18\src\traditional\startup\c018i.c
                                               unsigned long to;                                                            C:\MCC18\src\traditional\startup\c018i.c
                                               unsigned long size;                                                          C:\MCC18\src\traditional\startup\c018i.c
                                             }                                                                              C:\MCC18\src\traditional\startup\c018i.c
                                             entries[];                                                                     C:\MCC18\src\traditional\startup\c018i.c
                                           }                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                           _cinit;                                                                          C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           #pragma code _cinit_scn                                                          C:\MCC18\src\traditional\startup\c018i.c
                                           void                                                                             C:\MCC18\src\traditional\startup\c018i.c
                                           _do_cinit (void)                                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           {                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                             /* we'll make the assumption in the following code that these statics          C:\MCC18\src\traditional\startup\c018i.c
                                              * will be allocated into the same bank.                                       C:\MCC18\src\traditional\startup\c018i.c
                                              */                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             static short long prom;                                                        C:\MCC18\src\traditional\startup\c018i.c
                                             static unsigned short curr_byte;                                               C:\MCC18\src\traditional\startup\c018i.c
                                             static unsigned short curr_entry;                                              C:\MCC18\src\traditional\startup\c018i.c
                                             static short long data_ptr;                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                             // Initialized data...                                                         C:\MCC18\src\traditional\startup\c018i.c
002dc4   0e00     MOVLW     0x0              TBLPTR = (short long)&_cinit;                                                  C:\MCC18\src\traditional\startup\c018i.c
002dc6   6ef6     MOVWF     0xf6,0x0                                                                                        
002dc8   0e0d     MOVLW     0xd                                                                                             
002dca   6ef7     MOVWF     0xf7,0x0                                                                                        
002dcc   0e00     MOVLW     0x0                                                                                             
002dce   6ef8     MOVWF     0xf8,0x0                                                                                        
                                             _asm                                                                           C:\MCC18\src\traditional\startup\c018i.c
002dd0   0101     MOVLB     0x1                movlb data_ptr                                                               C:\MCC18\src\traditional\startup\c018i.c
002dd2   0009     TBLRDPOSTINC                 tblrdpostinc                                                                 C:\MCC18\src\traditional\startup\c018i.c
002dd4   50f5     MOVF      0xf5,0x0,0x0       movf TABLAT, 0, 0                                                            C:\MCC18\src\traditional\startup\c018i.c
002dd6   6f4c     MOVWF     0x4c,0x1           movwf curr_entry, 1                                                          C:\MCC18\src\traditional\startup\c018i.c
002dd8   0009     TBLRDPOSTINC                 tblrdpostinc                                                                 C:\MCC18\src\traditional\startup\c018i.c
002dda   50f5     MOVF      0xf5,0x0,0x0       movf TABLAT, 0, 0                                                            C:\MCC18\src\traditional\startup\c018i.c
002ddc   6f4d     MOVWF     0x4d,0x1           movwf curr_entry+1, 1                                                        C:\MCC18\src\traditional\startup\c018i.c
                                             _endasm                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                               //while (curr_entry)                                                         C:\MCC18\src\traditional\startup\c018i.c
                                               //{                                                                          C:\MCC18\src\traditional\startup\c018i.c
                                               test:                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                               _asm                                                                         C:\MCC18\src\traditional\startup\c018i.c
002dde   e103     BNZ       0x2de6              bnz 3                                                                       C:\MCC18\src\traditional\startup\c018i.c
002de0   674c     TSTFSZ    0x4c,0x1           tstfsz curr_entry, 1                                                         C:\MCC18\src\traditional\startup\c018i.c
002de2   d001     BRA       0x2de6             bra 1                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                               _endasm                                                                      C:\MCC18\src\traditional\startup\c018i.c
002de4   d03d     BRA       0x2e60             goto done;                                                                   C:\MCC18\src\traditional\startup\c018i.c
                                                 /* Count down so we only have to look up the data in _cinit                C:\MCC18\src\traditional\startup\c018i.c
                                                  * once.                                                                   C:\MCC18\src\traditional\startup\c018i.c
                                                  *                                                                         C:\MCC18\src\traditional\startup\c018i.c
                                                  * At this point we know that TBLPTR points to the top of the current      C:\MCC18\src\traditional\startup\c018i.c
                                                  * entry in _cinit, so we can just start reading the from, to, and         C:\MCC18\src\traditional\startup\c018i.c
                                                  * size values.                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                  */                                                                        C:\MCC18\src\traditional\startup\c018i.c
                                                 _asm                                                                       C:\MCC18\src\traditional\startup\c018i.c
                                           	/* read the source address */                                                   C:\MCC18\src\traditional\startup\c018i.c
002de6   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
002de8   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
002dea   6f47     MOVWF     0x47,0x1       	movwf prom, 1                                                                   C:\MCC18\src\traditional\startup\c018i.c
002dec   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
002dee   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
002df0   6f48     MOVWF     0x48,0x1       	movwf prom+1, 1                                                                 C:\MCC18\src\traditional\startup\c018i.c
002df2   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
002df4   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
002df6   6f49     MOVWF     0x49,0x1       	movwf prom+2, 1                                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           	/* skip a byte since it's stored as a 32bit int */                              C:\MCC18\src\traditional\startup\c018i.c
002df8   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                           	/* read the destination address directly into FSR0 */                           C:\MCC18\src\traditional\startup\c018i.c
002dfa   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
002dfc   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
002dfe   6ee9     MOVWF     0xe9,0x0       	movwf FSR0L, 0                                                                  C:\MCC18\src\traditional\startup\c018i.c
002e00   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
002e02   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
002e04   6eea     MOVWF     0xea,0x0       	movwf FSR0H, 0                                                                  C:\MCC18\src\traditional\startup\c018i.c
                                           	/* skip two bytes since it's stored as a 32bit int */                           C:\MCC18\src\traditional\startup\c018i.c
002e06   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
002e08   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                           	/* read the destination address directly into FSR0 */                           C:\MCC18\src\traditional\startup\c018i.c
002e0a   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
002e0c   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
002e0e   6f4a     MOVWF     0x4a,0x1       	movwf curr_byte, 1                                                              C:\MCC18\src\traditional\startup\c018i.c
002e10   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
002e12   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
002e14   6f4b     MOVWF     0x4b,0x1       	movwf curr_byte+1, 1                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           	/* skip two bytes since it's stored as a 32bit int */                           C:\MCC18\src\traditional\startup\c018i.c
002e16   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
002e18   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                 _endasm                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                 //prom = data_ptr->from;                                                   C:\MCC18\src\traditional\startup\c018i.c
                                                 //FSR0 = data_ptr->to;                                                     C:\MCC18\src\traditional\startup\c018i.c
                                                 //curr_byte = (unsigned short) data_ptr->size;                             C:\MCC18\src\traditional\startup\c018i.c
                                                 /* the table pointer now points to the next entry. Save it                 C:\MCC18\src\traditional\startup\c018i.c
                                                  * off since we'll be using the table pointer to do the copying            C:\MCC18\src\traditional\startup\c018i.c
                                                  * for the entry.                                                          C:\MCC18\src\traditional\startup\c018i.c
                                                  */                                                                        C:\MCC18\src\traditional\startup\c018i.c
002e1a   cff6     MOVFF     0xff6,0x14e          data_ptr = TBLPTR;                                                         C:\MCC18\src\traditional\startup\c018i.c
002e1c   f14e                                                                                                               
002e1e   cff7     MOVFF     0xff7,0x14f                                                                                     
002e20   f14f                                                                                                               
002e22   cff8     MOVFF     0xff8,0x150                                                                                     
002e24   f150                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                 /* now assign the source address to the table pointer */                   C:\MCC18\src\traditional\startup\c018i.c
002e26   c147     MOVFF     0x147,0xff6          TBLPTR = prom;                                                             C:\MCC18\src\traditional\startup\c018i.c
002e28   fff6                                                                                                               
002e2a   c148     MOVFF     0x148,0xff7                                                                                     
002e2c   fff7                                                                                                               
002e2e   c149     MOVFF     0x149,0xff8                                                                                     
002e30   fff8                                                                                                               
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                 /* do the copy loop */                                                     C:\MCC18\src\traditional\startup\c018i.c
                                                 _asm                                                                       C:\MCC18\src\traditional\startup\c018i.c
                                                   // determine if we have any more bytes to copy                           C:\MCC18\src\traditional\startup\c018i.c
002e32   0101     MOVLB     0x1            	movlb curr_byte                                                                 C:\MCC18\src\traditional\startup\c018i.c
002e34   534a     MOVF      0x4a,0x1,0x1   	movf curr_byte, 1, 1                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           copy_loop:                                                                       C:\MCC18\src\traditional\startup\c018i.c
002e36   e102     BNZ       0x2e3c         	bnz 2 // copy_one_byte                                                          C:\MCC18\src\traditional\startup\c018i.c
002e38   534b     MOVF      0x4b,0x1,0x1   	movf curr_byte + 1, 1, 1                                                        C:\MCC18\src\traditional\startup\c018i.c
002e3a   e007     BZ        0x2e4a         	bz 7 // done_copying                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           copy_one_byte:                                                                   C:\MCC18\src\traditional\startup\c018i.c
002e3c   0009     TBLRDPOSTINC             	tblrdpostinc                                                                    C:\MCC18\src\traditional\startup\c018i.c
002e3e   50f5     MOVF      0xf5,0x0,0x0   	movf TABLAT, 0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
002e40   6eee     MOVWF     0xee,0x0       	movwf POSTINC0, 0                                                               C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           	// decrement byte counter                                                       C:\MCC18\src\traditional\startup\c018i.c
002e42   074a     DECF      0x4a,0x1,0x1   	decf curr_byte, 1, 1                                                            C:\MCC18\src\traditional\startup\c018i.c
002e44   e2f8     BC        0x2e36         	bc -8 // copy_loop                                                              C:\MCC18\src\traditional\startup\c018i.c
002e46   074b     DECF      0x4b,0x1,0x1           decf curr_byte + 1, 1, 1                                                 C:\MCC18\src\traditional\startup\c018i.c
002e48   d7f9     BRA       0x2e3c         	bra -7 // copy_one_byte                                                         C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           done_copying:                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                                 _endasm                                                                    C:\MCC18\src\traditional\startup\c018i.c
                                                 /* restore the table pointer for the next entry */                         C:\MCC18\src\traditional\startup\c018i.c
002e4a   c14e     MOVFF     0x14e,0xff6          TBLPTR = data_ptr;                                                         C:\MCC18\src\traditional\startup\c018i.c
002e4c   fff6                                                                                                               
002e4e   c14f     MOVFF     0x14f,0xff7                                                                                     
002e50   fff7                                                                                                               
002e52   c150     MOVFF     0x150,0xff8                                                                                     
002e54   fff8                                                                                                               
                                                 /* next entry... */                                                        C:\MCC18\src\traditional\startup\c018i.c
002e56   0101     MOVLB     0x1                  curr_entry--;                                                              C:\MCC18\src\traditional\startup\c018i.c
002e58   074c     DECF      0x4c,0x1,0x1                                                                                    
002e5a   0e00     MOVLW     0x0                                                                                             
002e5c   5b4d     SUBWFB    0x4d,0x1,0x1                                                                                    
002e5e   d7bf     BRA       0x2dde               goto test;                                                                 C:\MCC18\src\traditional\startup\c018i.c
                                           done:                                                                            C:\MCC18\src\traditional\startup\c018i.c
                                           ;                                                                                C:\MCC18\src\traditional\startup\c018i.c
002e60   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\startup\c018i.c
                                           /*********************************************************************           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *********************************************************************           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * FileName:        usbdrv.c                                                     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Dependencies:    See INCLUDES section below                                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Processor:       PIC18                                                        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Compiler:        C18 2.30.01+                                                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Company:         Microchip Technology, Inc.                                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Software License Agreement                                                    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * civil liability for the breach of the terms and conditions of this            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * license.                                                                      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Author               Date        Comment                                      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            ********************************************************************/           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           #include <p18cxxx.h>                                                             C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           #include "system\typedefs.h"                                                     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           #include "system\usb\usb.h"                                                      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           #include "io_cfg.h"             // Required for USBCheckBusStatus()              C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USBModuleEnable(void);                                                      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USBModuleDisable(void);                                                     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USBSuspend(void);                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USBWakeFromSuspend(void);                                                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USBProtocolResetHandler(void);                                              C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USB_SOF_Handler(void);                                                      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USBStallHandler(void);                                                      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USBErrorHandler(void);                                                      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           #pragma code sys                                                                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBCheckBusStatus(void)                                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine enables/disables the USB module by monitoring   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  the USB power signal.                                        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USBCheckBusStatus(void)                                                     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               /**************************************************************************  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * Bus Attachment & Detachment Detection                                     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * usb_bus_sense is an i/o pin defined in io_cfg.h                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                *************************************************************************/  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               #define USB_BUS_ATTACHED    1                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               #define USB_BUS_DETACHED    0                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               if(usb_bus_sense == USB_BUS_ATTACHED)       // Is USB bus attached?          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d1a   a66d     BTFSS     0x6d,0x3,0x0           if(UCONbits.USBEN == 0)                 // Is the module off?            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d1c   d80f     RCALL     0xd3c                      USBModuleEnable();                  // Is off, enable it             C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               }                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d1e   d002     BRA       0xd24              else                                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d20   b66d     BTFSC     0x6d,0x3,0x0           if(UCONbits.USBEN == 1)                 // Is the module on?             C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d22   d813     RCALL     0xd4a                      USBModuleDisable();                 // Is on, disable it             C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               }//end if(usb_bus_sense...)                                                  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * After enabling the USB module, it takes some time for the voltage         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * on the D+ or D- line to rise high enough to get out of the SE0 condition. C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * The USB Reset interrupt should not be unmasked until the SE0 condition is C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * cleared. This helps preventing the firmware from misinterpreting this     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * unique event as a USB bus reset from the USB host.                        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d24   0101     MOVLB     0x1                if(usb_device_state == ATTACHED_STATE)                                       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d26   0572     DECF      0x72,0x0,0x1                                                                                    
000d28   e108     BNZ       0xd3a                                                                                           
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d2a   ba6d     BTFSC     0x6d,0x5,0x0           if(!UCONbits.SE0)                                                        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d2c   d006     BRA       0xd3a                                                                                           
                                                   {                                                                        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d2e   6a68     CLRF      0x68,0x0                   UIR = 0;                        // Clear all USB interrupts          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d30   6a69     CLRF      0x69,0x0                   UIE = 0;                        // Mask all USB interrupts           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d32   8069     BSF       0x69,0x0,0x0               UIEbits.URSTIE = 1;             // Unmask RESET interrupt            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d34   8869     BSF       0x69,0x4,0x0               UIEbits.IDLEIE = 1;             // Unmask IDLE interrupt             C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d36   0e02     MOVLW     0x2                        usb_device_state = POWERED_STATE;                                    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d38   6f72     MOVWF     0x72,0x1                                                                                        
                                                   }//end if                           // else wait until SE0 is cleared    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               }//end if(usb_device_state == ATTACHED_STATE)                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d3a   0012     RETURN    0x0            }//end USBCheckBusStatus                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBModuleEnable(void)                                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine enables the USB module.                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  An end designer should never have to call this routine       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  manually. This routine should only be called from            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  USBCheckBusStatus().                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Note:            See USBCheckBusStatus() for more information.                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USBModuleEnable(void)                                                       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d3c   6a6d     CLRF      0x6d,0x0           UCON = 0;                                                                    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d3e   6a69     CLRF      0x69,0x0           UIE = 0;                                // Mask all USB interrupts           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d40   866d     BSF       0x6d,0x3,0x0       UCONbits.USBEN = 1;                     // Enable module & attach to bus     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d42   0101     MOVLB     0x1                usb_device_state = ATTACHED_STATE;      // Defined in usbmmap.c & .h         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d44   0e01     MOVLW     0x1                                                                                             
000d46   6f72     MOVWF     0x72,0x1                                                                                        
000d48   0012     RETURN    0x0            }//end USBModuleEnable                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBModuleDisable(void)                                  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine disables the USB module.                        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  An end designer should never have to call this routine       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  manually. This routine should only be called from            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  USBCheckBusStatus().                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Note:            See USBCheckBusStatus() for more information.                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USBModuleDisable(void)                                                      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d4a   6a6d     CLRF      0x6d,0x0           UCON = 0;                               // Disable module & detach from bus  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d4c   6a69     CLRF      0x69,0x0           UIE = 0;                                // Mask all USB interrupts           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d4e   0101     MOVLB     0x1                usb_device_state = DETACHED_STATE;      // Defined in usbmmap.c & .h         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d50   6b72     CLRF      0x72,0x1                                                                                        
000d52   0012     RETURN    0x0            }//end USBModuleDisable                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBSoftDetach(void)                                     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    The device will have to be re-enumerated to function again.  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Overview:        USBSoftDetach electrically disconnects the device from       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  the bus. This is done by stop supplying Vusb voltage to      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  pull-up resistor. The pull-down resistors on the host        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  side will pull both differential signal lines low and        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  the host registers the event as a disconnect.                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  Since the USB cable is not physically disconnected, the      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  power supply through the cable can still be sensed by        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  the device. The next time USBCheckBusStatus() function       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  is called, it will reconnect the device back to the bus.     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USBSoftDetach(void)                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d54   efa5     GOTO      0xd4a              USBModuleDisable();                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d56   f006                                                                                                               
                                           }//end USBSoftDetach                                                             C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBDriverService(void)                                  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This routine is the heart of this firmware. It manages       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  all USB interrupts.                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Note:            Device state transitions through the following stages:       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  DETACHED -> ATTACHED -> POWERED -> DEFAULT ->                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  ADDRESS_PENDING -> ADDRESSED -> CONFIGURED -> READY          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USBDriverService(void)                                                      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if USB cable is not even attached.        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d58   0101     MOVLB     0x1                if(usb_device_state == DETACHED_STATE) return;                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d5a   5172     MOVF      0x72,0x0,0x1                                                                                    
000d5c   e101     BNZ       0xd60                                                                                           
000d5e   d03a     BRA       0xdd4                                                                                           
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * Task A: Service USB Activity Interrupt                                    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d60   5068     MOVF      0x68,0x0,0x0       if(UIRbits.ACTVIF && UIEbits.ACTVIE)    USBWakeFromSuspend();                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d62   0b04     ANDLW     0x4                                                                                             
000d64   e004     BZ        0xd6e                                                                                           
000d66   5069     MOVF      0x69,0x0,0x0                                                                                    
000d68   0b04     ANDLW     0x4                                                                                             
000d6a   e001     BZ        0xd6e                                                                                           
000d6c   d838     RCALL     0xdde                                                                                           
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if the device is in suspend mode.         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d6e   b26d     BTFSC     0x6d,0x1,0x0       if(UCONbits.SUSPND==1) return;                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d70   d031     BRA       0xdd4                                                                                           
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * Task B: Service USB Bus Reset Interrupt.                                  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * When bus reset is received during suspend, ACTVIF will be set first,      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * once the UCONbits.SUSPND is clear, then the URSTIF bit will be asserted.  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * This is why URSTIF is checked after ACTVIF.                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d72   5068     MOVF      0x68,0x0,0x0       if(UIRbits.URSTIF && UIEbits.URSTIE)    USBProtocolResetHandler();           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d74   0b01     ANDLW     0x1                                                                                             
000d76   e004     BZ        0xd80                                                                                           
000d78   5069     MOVF      0x69,0x0,0x0                                                                                    
000d7a   0b01     ANDLW     0x1                                                                                             
000d7c   e001     BZ        0xd80                                                                                           
000d7e   d850     RCALL     0xe20                                                                                           
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * Task C: Service other USB interrupts                                      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d80   5068     MOVF      0x68,0x0,0x0       if(UIRbits.IDLEIF && UIEbits.IDLEIE)    USBSuspend();                        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d82   0b10     ANDLW     0x10                                                                                            
000d84   e004     BZ        0xd8e                                                                                           
000d86   5069     MOVF      0x69,0x0,0x0                                                                                    
000d88   0b10     ANDLW     0x10                                                                                            
000d8a   e001     BZ        0xd8e                                                                                           
000d8c   d824     RCALL     0xdd6                                                                                           
000d8e   5068     MOVF      0x68,0x0,0x0       if(UIRbits.SOFIF && UIEbits.SOFIE)      USB_SOF_Handler();                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d90   0b40     ANDLW     0x40                                                                                            
000d92   e004     BZ        0xd9c                                                                                           
000d94   5069     MOVF      0x69,0x0,0x0                                                                                    
000d96   0b40     ANDLW     0x40                                                                                            
000d98   e001     BZ        0xd9c                                                                                           
000d9a   d837     RCALL     0xe0a                                                                                           
000d9c   5068     MOVF      0x68,0x0,0x0       if(UIRbits.STALLIF && UIEbits.STALLIE)  USBStallHandler();                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000d9e   0b20     ANDLW     0x20                                                                                            
000da0   e004     BZ        0xdaa                                                                                           
000da2   5069     MOVF      0x69,0x0,0x0                                                                                    
000da4   0b20     ANDLW     0x20                                                                                            
000da6   e001     BZ        0xdaa                                                                                           
000da8   d832     RCALL     0xe0e                                                                                           
000daa   5068     MOVF      0x68,0x0,0x0       if(UIRbits.UERRIF && UIEbits.UERRIE)    USBErrorHandler();                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000dac   0b02     ANDLW     0x2                                                                                             
000dae   e004     BZ        0xdb8                                                                                           
000db0   5069     MOVF      0x69,0x0,0x0                                                                                    
000db2   0b02     ANDLW     0x2                                                                                             
000db4   e001     BZ        0xdb8                                                                                           
000db6   d832     RCALL     0xe1c                                                                                           
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * Pointless to continue servicing if the host has not sent a bus reset.     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * Once bus reset is received, the device transitions into the DEFAULT       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * state and is ready for communication.                                     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000db8   0e03     MOVLW     0x3                if(usb_device_state < DEFAULT_STATE) return;                                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000dba   0101     MOVLB     0x1                                                                                             
000dbc   5d72     SUBWF     0x72,0x0,0x1                                                                                    
000dbe   e201     BC        0xdc2                                                                                           
000dc0   d009     BRA       0xdd4                                                                                           
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * Task D: Servicing USB Transaction Complete Interrupt                      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000dc2   5068     MOVF      0x68,0x0,0x0       if(UIRbits.TRNIF && UIEbits.TRNIE)                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000dc4   0b08     ANDLW     0x8                                                                                             
000dc6   e006     BZ        0xdd4                                                                                           
000dc8   5069     MOVF      0x69,0x0,0x0                                                                                    
000dca   0b08     ANDLW     0x8                                                                                             
000dcc   e003     BZ        0xdd4                                                                                           
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                   /*                                                                       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                    * USBCtrlEPService only services transactions over EP0.                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                    * It ignores all other EP transactions.                                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                    */                                                                      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000dce   eccb     CALL      0x1196,0x0             USBCtrlEPService();                                                      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000dd0   f008                                                                                                               
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                   /*                                                                       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                    * Other EP can be serviced later by responsible device class firmware.  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                    * Each device driver knows when an OUT or IN transaction is ready by    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                    * checking the buffer ownership bit.                                    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                    * An OUT EP should always be owned by SIE until the data is ready.      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                    * An IN EP should always be owned by CPU until the data is ready.       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                    *                                                                       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                    * Because of this logic, it is not necessary to save the USTAT value    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                    * of non-EP0 transactions.                                              C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                    */                                                                      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000dd2   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               }//end if(UIRbits.TRNIF && UIEbits.TRNIE)                                    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000dd4   0012     RETURN    0x0            }//end USBDriverService                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBSuspend(void)                                        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Overview:                                                                     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USBSuspend(void)                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * NOTE: Do not clear UIRbits.ACTVIF here!                                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * Reason:                                                                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * ACTVIF is only generated once an IDLEIF has been generated.               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * This is a 1:1 ratio interrupt generation.                                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * For every IDLEIF, there will be only one ACTVIF regardless of             C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * the number of subsequent bus transitions.                                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                *                                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * If the ACTIF is cleared here, a problem could occur when:                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * [       IDLE       ][bus activity ->                                      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * <--- 3 ms ----->     ^                                                    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                *                ^     ACTVIF=1                                             C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                *                IDLEIF=1                                                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                *  #           #           #           #   (#=Program polling flags)        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                *                          ^                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                *                          This polling loop will see both                  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                *                          IDLEIF=1 and ACTVIF=1.                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                *                          However, the program services IDLEIF first       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                *                          because ACTIVIE=0.                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                *                          If this routine clears the only ACTIVIF,         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                *                          then it can never get out of the suspend         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                *                          mode.                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000dd6   8469     BSF       0x69,0x2,0x0       UIEbits.ACTVIE = 1;                     // Enable bus activity interrupt     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000dd8   9868     BCF       0x68,0x4,0x0       UIRbits.IDLEIF = 0;                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000dda   826d     BSF       0x6d,0x1,0x0       UCONbits.SUSPND = 1;                    // Put USB module in power conserve  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                       // mode, SIE clock inactive          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * At this point the PIC can go into sleep,idle, or                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * switch to a slower clock, etc.                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               /* Modifiable Section */                                                     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               /* End Modifiable Section */                                                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000ddc   0012     RETURN    0x0            }//end USBSuspend                                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBWakeFromSuspend(void)                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Overview:                                                                     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USBWakeFromSuspend(void)                                                    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * If using clock switching, this is the place to restore the                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * original clock frequency.                                                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000dde   926d     BCF       0x6d,0x1,0x0       UCONbits.SUSPND = 0;                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000de0   9469     BCF       0x69,0x2,0x0       UIEbits.ACTVIE = 0;                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000de2   9468     BCF       0x68,0x2,0x0       UIRbits.ACTVIF = 0;                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000de4   0012     RETURN    0x0            }//end USBWakeFromSuspend                                                        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBRemoteWakeup(void)                                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Overview:        This function should be called by user when the device       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  is waken up by an external stimulus other than ACTIVIF.      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  Please read the note below to understand the limitations.    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Note:            The modifiable section in this routine should be changed     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  to meet the application needs. Current implementation        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  temporary blocks other functions from executing for a        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  period of 1-13 ms depending on the core frequency.           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  According to USB 2.0 specification section 7.1.7.7,          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  "The remote wakeup device must hold the resume signaling     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  for at lest 1 ms but for no more than 15 ms."                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  The idea here is to use a delay counter loop, using a        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  common value that would work over a wide range of core       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  frequencies.                                                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  That value selected is 1800. See table below:                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  Core Freq(MHz)      MIP         RESUME Signal Period (ms)    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                      48              12          1.05                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                       4              1           12.6                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  ==========================================================   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  * These timing could be incorrect when using code            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                    optimization or extended instruction mode,                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                    or when having other interrupts enabled.                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                    Make sure to verify using the MPLAB SIM's Stopwatch        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USBRemoteWakeup(void)                                                       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               static word delay_count;                                                     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000de6   0101     MOVLB     0x1                if(usb_stat.RemoteWakeup == 1)          // Check if RemoteWakeup function    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000de8   a173     BTFSS     0x73,0x0,0x1                                                                                    
000dea   d00e     BRA       0xe08                                                                                           
                                               {                                       // has been enabled by the host.     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000dec   dff8     RCALL     0xdde                  USBWakeFromSuspend();               // Unsuspend USB modue               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000dee   846d     BSF       0x6d,0x2,0x0           UCONbits.RESUME = 1;                // Start RESUME signaling            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                   /* Modifiable Section */                                                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000df0   0101     MOVLB     0x1                    delay_count = 1800U;                // Set RESUME line for 1-13 ms       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000df2   0e08     MOVLW     0x8                                                                                             
000df4   6f8a     MOVWF     0x8a,0x1                                                                                        
000df6   0e07     MOVLW     0x7                                                                                             
000df8   6f8b     MOVWF     0x8b,0x1                                                                                        
                                                   do                                                                       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                   {                                                                        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000dfa   078a     DECF      0x8a,0x1,0x1               delay_count--;                                                       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000dfc   0e00     MOVLW     0x0                                                                                             
000dfe   5b8b     SUBWFB    0x8b,0x1,0x1                                                                                    
000e00   518a     MOVF      0x8a,0x0,0x1           }while(delay_count);                                                     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e02   118b     IORWF     0x8b,0x0,0x1                                                                                    
000e04   e1fa     BNZ       0xdfa                                                                                           
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                   /* End Modifiable Section */                                             C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e06   946d     BCF       0x6d,0x2,0x0           UCONbits.RESUME = 0;                                                     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               }//endif                                                                     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e08   0012     RETURN    0x0            }//end USBRemoteWakeup                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USB_SOF_Handler(void)                                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The USB host sends out a SOF packet to full-speed devices    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  every 1 ms. This interrupt may be useful for isochronous     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  pipes. End designers should implement callback routine       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  as necessary.                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USB_SOF_Handler(void)                                                       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               /* Callback routine here */                                                  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e0a   9c68     BCF       0x68,0x6,0x0       UIRbits.SOFIF = 0;                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e0c   0012     RETURN    0x0            }//end USB_SOF_Handler                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBStallHandler(void)                                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    A STALL packet is sent to the host by the SIE.               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The STALLIF is set anytime the SIE sends out a STALL         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  packet regardless of which endpoint causes it.               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  A Setup transaction overrides the STALL function. A stalled  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  endpoint stops stalling once it receives a setup packet.     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  In this case, the SIE will accepts the Setup packet and      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  set the TRNIF flag to notify the firmware. STALL function    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  for that particular endpoint pipe will be automatically      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  disabled (direction specific).                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  There are a few reasons for an endpoint to be stalled.       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  1. When a non-supported USB request is received.             C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                     Example: GET_DESCRIPTOR(DEVICE_QUALIFIER)                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  2. When an endpoint is currently halted.                     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  3. When the device class specifies that an endpoint must     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                     stall in response to a specific event.                    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                     Example: Mass Storage Device Class                        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                              If the CBW is not valid, the device shall        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                              STALL the Bulk-In pipe.                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                              See USB Mass Storage Class Bulk-only Transport   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                              Specification for more details.                  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Note:            UEPn.EPSTALL can be scanned to see which endpoint causes     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  the stall event.                                             C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  If                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USBStallHandler(void)                                                       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               /*                                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * Does not really have to do anything here,                                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * even for the control endpoint.                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * All BDs of Endpoint 0 are owned by SIE right now,                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * but once a Setup Transaction is received, the ownership                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * for EP0_OUT will be returned to CPU.                                      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * When the Setup Transaction is serviced, the ownership                     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * for EP0_IN will then be forced back to CPU by firmware.                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                *                                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                * NOTE: Above description is not quite true at this point.                  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                *       It seems the SIE never returns the UOWN bit to CPU,                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                *       and a TRNIF is never generated upon successful                      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                *       reception of a SETUP transaction.                                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                *       Firmware work-around is implemented below.                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                */                                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e0e   a070     BTFSS     0x70,0x0,0x0       if(UEP0bits.EPSTALL == 1)                                                    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e10   d003     BRA       0xe18                                                                                           
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e12   ec0d     CALL      0x141a,0x0             USBPrepareForNextSetupTrf();        // Firmware Work-Around              C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e14   f00a                                                                                                               
000e16   9070     BCF       0x70,0x0,0x0           UEP0bits.EPSTALL = 0;                                                    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                               }                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e18   9a68     BCF       0x68,0x5,0x0       UIRbits.STALLIF = 0;                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e1a   0012     RETURN    0x0            }//end USBStallHandler                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBErrorHandler(void)                                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Overview:        The purpose of this interrupt is mainly for debugging        C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  during development. Check UEIR to see which error causes     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  the interrupt.                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USBErrorHandler(void)                                                       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e1c   9268     BCF       0x68,0x1,0x0       UIRbits.UERRIF = 0;                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e1e   0012     RETURN    0x0            }//end USBErrorHandler                                                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Function:        void USBProtocolResetHandler(void)                           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * PreCondition:    A USB bus reset is received from the host.                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Side Effects:    Currently, this routine flushes any pending USB              C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  transactions. It empties out the USTAT FIFO. This action     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  might not be desirable in some applications.                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Overview:        Once a USB bus reset is received from the host, this         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  routine should be called. It resets the device address to    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  zero, disables all non-EP0 endpoints, initializes EP0 to     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  be ready for default communication, clears all USB           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  interrupt flags, unmasks applicable USB interrupts, and      C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                  reinitializes internal state-machine variables.              C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           void USBProtocolResetHandler(void)                                               C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e20   6a6a     CLRF      0x6a,0x0           UEIR = 0;                       // Clear all USB error flags                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e22   6a68     CLRF      0x68,0x0           UIR = 0;                        // Clears all USB interrupts                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e24   0e9f     MOVLW     0x9f               UEIE = 0b10011111;              // Unmask all USB error interrupts           C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e26   6e6b     MOVWF     0x6b,0x0                                                                                        
000e28   0e7b     MOVLW     0x7b               UIE = 0b01111011;               // Enable all interrupts except ACTVIE       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e2a   6e69     MOVWF     0x69,0x0                                                                                        
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e2c   6a6e     CLRF      0x6e,0x0           UADDR = 0x00;                   // Reset to default address                  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e2e   0e0f     MOVLW     0xf                mDisableEP1to15();              // Reset all non-EP0 UEPn registers          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e30   6ee6     MOVWF     0xe6,0x0                                                                                        
000e32   0e71     MOVLW     0x71                                                                                            
000e34   6ee6     MOVWF     0xe6,0x0                                                                                        
000e36   0e0f     MOVLW     0xf                                                                                             
000e38   6ee6     MOVWF     0xe6,0x0                                                                                        
000e3a   d814     RCALL     0xe64                                                                                           
000e3c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000e3e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000e40   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000e42   0e16     MOVLW     0x16               UEP0 = EP_CTRL|HSHK_EN;         // Init EP0 as a Ctrl EP, see usbdrv.h       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e44   6e70     MOVWF     0x70,0x0                                                                                        
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e46   a668     BTFSS     0x68,0x3,0x0       while(UIRbits.TRNIF == 1)       // Flush any pending transactions            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e48   d002     BRA       0xe4e                                                                                           
000e4c   d7fc     BRA       0xe46                                                                                           
000e4a   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e4e   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;            // Make sure packet processing is enabled    C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e50   ec0d     CALL      0x141a,0x0         USBPrepareForNextSetupTrf();    // Declared in usbctrltrf.c                  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e52   f00a                                                                                                               
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e54   0101     MOVLB     0x1                usb_stat.RemoteWakeup = 0;      // Default status flag to disable            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e56   9173     BCF       0x73,0x0,0x1                                                                                    
000e58   0101     MOVLB     0x1                usb_active_cfg = 0;             // Clear active configuration                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e5a   6b74     CLRF      0x74,0x1                                                                                        
000e5c   0101     MOVLB     0x1                usb_device_state = DEFAULT_STATE;                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e5e   0e03     MOVLW     0x3                                                                                             
000e60   6f72     MOVWF     0x72,0x1                                                                                        
000e62   0012     RETURN    0x0            }//end USBProtocolResetHandler                                                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /* Auxiliary Function */                                                         C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e64   cfd9     MOVFF     0xfd9,0xfe6    void ClearArray(byte* startAdr,byte count)                                       C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e66   ffe6                                                                                                               
000e68   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000e6a   ffd9                                                                                                               
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e6c   0efd     MOVLW     0xfd               *startAdr;                                                                   C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e6e   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
000e70   ffe9                                                                                                               
000e72   0efe     MOVLW     0xfe                                                                                            
000e74   cfdb     MOVFF     0xfdb,0xfea                                                                                     
000e76   ffea                                                                                                               
000e78   0efc     MOVLW     0xfc               while(count)                                                                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e7a   50db     MOVF      0xdb,0x0,0x0                                                                                    
000e7c   e004     BZ        0xe86                                                                                           
000e84   d7f9     BRA       0xe78                                                                                           
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                   _asm                                                                     C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e7e   6aee     CLRF      0xee,0x0               clrf POSTINC0,0                                                          C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                                   _endasm                                                                  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e80   0efc     MOVLW     0xfc                   count--;                                                                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e82   06db     DECF      0xdb,0x1,0x0                                                                                    
                                               }//end while                                                                 C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e86   52e5     MOVF      0xe5,0x1,0x0   }//end ClearArray                                                                C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
000e88   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000e8a   ffd9                                                                                                               
000e8c   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /** EOF usbdrv.c *************************************************************/  C:\usb4all\fw\demo\system\usb\usbdrv\usbdrv.c
                                           /*********************************************************************           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *********************************************************************           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * FileName:        usb9.c                                                       C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Dependencies:    See INCLUDES section below                                   C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Processor:       PIC18                                                        C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Compiler:        C18 2.30.01+                                                 C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Company:         Microchip Technology, Inc.                                   C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Software License Agreement                                                    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * civil liability for the breach of the terms and conditions of this            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * license.                                                                      C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Author               Date        Comment                                      C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            ********************************************************************/           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           #include <p18cxxx.h>                                                             C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           #include "system\typedefs.h"                                                     C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           #include "system\usb\usb.h"                                                      C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           #include "io_cfg.h"                     // Required for self_power status        C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           void USBStdGetDscHandler(void);                                                  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           void USBStdSetCfgHandler(void);                                                  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           void USBStdGetStatusHandler(void);                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           void USBStdFeatureReqHandler(void);                                              C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           #pragma code sys                                                                 C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Function:        void USBCheckStdRequest(void)                                C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Overview:        This routine checks the setup data packet to see if it       C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                  knows how to handle it                                       C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           void USBCheckStdRequest(void)                                                    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000e8e   0104     MOVLB     0x4                if(SetupPkt.RequestType != STANDARD) return;                                 C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000e90   5120     MOVF      0x20,0x0,0x1                                                                                    
000e92   0b60     ANDLW     0x60                                                                                            
000e94   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000e96   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000e98   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000e9a   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000e9c   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
000e9e   0900     IORLW     0x0                                                                                             
000ea0   e001     BZ        0xea4                                                                                           
000ea2   d055     BRA       0xf4e                                                                                           
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000ea4   5121     MOVF      0x21,0x0,0x1       switch(SetupPkt.bRequest)                                                    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000ea6   0a07     XORLW     0x7                                                                                             
000ea8   e051     BZ        0xf4c                                                                                           
000eaa   0a0b     XORLW     0xb                                                                                             
000eac   e04f     BZ        0xf4c                                                                                           
000eae   0a07     XORLW     0x7                                                                                             
000eb0   e040     BZ        0xf32                                                                                           
000eb2   0a01     XORLW     0x1                                                                                             
000eb4   e02c     BZ        0xf0e                                                                                           
000eb6   0a0b     XORLW     0xb                                                                                             
000eb8   e028     BZ        0xf0a                                                                                           
000eba   0a02     XORLW     0x2                                                                                             
000ebc   e026     BZ        0xf0a                                                                                           
000ebe   0a03     XORLW     0x3                                                                                             
000ec0   e022     BZ        0xf06                                                                                           
000ec2   0a08     XORLW     0x8                                                                                             
000ec4   e012     BZ        0xeea                                                                                           
000ec6   0a01     XORLW     0x1                                                                                             
000ec8   e00e     BZ        0xee6                                                                                           
000eca   0a0f     XORLW     0xf                                                                                             
000ecc   e00a     BZ        0xee2                                                                                           
000ece   0a03     XORLW     0x3                                                                                             
000ed0   e001     BZ        0xed4                                                                                           
000ed2   d03c     BRA       0xf4c                                                                                           
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   case SET_ADR:                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000ed4   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000ed6   0e01     MOVLW     0x1                                                                                             
000ed8   6f52     MOVWF     0x52,0x1                                                                                        
000eda   0101     MOVLB     0x1                        usb_device_state = ADR_PENDING_STATE;       // Update state only     C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000edc   0e04     MOVLW     0x4                                                                                             
000ede   6f72     MOVWF     0x72,0x1                                                                                        
                                                       /* See USBCtrlTrfInHandler() in usbctrltrf.c for the next step */    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000ee0   d036     BRA       0xf4e                      break;                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   case GET_DSC:                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000ee2   d836     RCALL     0xf50                      USBStdGetDscHandler();                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000ee4   d034     BRA       0xf4e                      break;                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   case SET_CFG:                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000ee6   d890     RCALL     0x1008                     USBStdSetCfgHandler();                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000ee8   d032     BRA       0xf4e                      break;                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   case GET_CFG:                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000eea   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000eec   0e01     MOVLW     0x1                                                                                             
000eee   6f52     MOVWF     0x52,0x1                                                                                        
000ef0   0101     MOVLB     0x1                        pSrc.bRam = (byte*)&usb_active_cfg;         // Set Source            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000ef2   0e74     MOVLW     0x74                                                                                            
000ef4   6f53     MOVWF     0x53,0x1                                                                                        
000ef6   0e01     MOVLW     0x1                                                                                             
000ef8   6f54     MOVWF     0x54,0x1                                                                                        
000efa   0101     MOVLB     0x1                        usb_stat.ctrl_trf_mem = _RAM;               // Set memory type       C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000efc   9373     BCF       0x73,0x1,0x1                                                                                    
000efe   0101     MOVLB     0x1                        LSB(wCount) = 1;                            // Set data count        C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f00   0e01     MOVLW     0x1                                                                                             
000f02   6f57     MOVWF     0x57,0x1                                                                                        
000f04   d024     BRA       0xf4e                      break;                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   case GET_STATUS:                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f06   d8a8     RCALL     0x1058                     USBStdGetStatusHandler();                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f08   d022     BRA       0xf4e                      break;                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   case CLR_FEATURE:                                                        C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   case SET_FEATURE:                                                        C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f0a   d8f4     RCALL     0x10f4                     USBStdFeatureReqHandler();                                           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f0c   d020     BRA       0xf4e                      break;                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   case GET_INTF:                                                           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f0e   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f10   0e01     MOVLW     0x1                                                                                             
000f12   6f52     MOVWF     0x52,0x1                                                                                        
000f14   0104     MOVLB     0x4                        pSrc.bRam = (byte*)&usb_alt_intf+SetupPkt.bIntfID;  // Set source    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f16   5124     MOVF      0x24,0x0,0x1                                                                                    
000f18   0101     MOVLB     0x1                                                                                             
000f1a   6f53     MOVWF     0x53,0x1                                                                                        
000f1c   6b54     CLRF      0x54,0x1                                                                                        
000f1e   0e75     MOVLW     0x75                                                                                            
000f20   2753     ADDWF     0x53,0x1,0x1                                                                                    
000f22   0e01     MOVLW     0x1                                                                                             
000f24   2354     ADDWFC    0x54,0x1,0x1                                                                                    
000f26   0101     MOVLB     0x1                        usb_stat.ctrl_trf_mem = _RAM;               // Set memory type       C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f28   9373     BCF       0x73,0x1,0x1                                                                                    
000f2a   0101     MOVLB     0x1                        LSB(wCount) = 1;                            // Set data count        C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f2c   0e01     MOVLW     0x1                                                                                             
000f2e   6f57     MOVWF     0x57,0x1                                                                                        
000f30   d00e     BRA       0xf4e                      break;                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   case SET_INTF:                                                           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f32   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f34   0e01     MOVLW     0x1                                                                                             
000f36   6f52     MOVWF     0x52,0x1                                                                                        
000f38   0104     MOVLB     0x4                        usb_alt_intf[SetupPkt.bIntfID] = SetupPkt.bAltID;                    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f3a   5124     MOVF      0x24,0x0,0x1                                                                                    
000f3c   6aea     CLRF      0xea,0x0                                                                                        
000f3e   0f75     ADDLW     0x75                                                                                            
000f40   6ee9     MOVWF     0xe9,0x0                                                                                        
000f42   0e01     MOVLW     0x1                                                                                             
000f44   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000f46   c422     MOVFF     0x422,0xfef                                                                                     
000f48   ffef                                                                                                               
000f4a   d001     BRA       0xf4e                      break;                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   case SET_DSC:                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   case SYNCH_FRAME:                                                        C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   default:                                                                 C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f4c   d000     BRA       0xf4e                      break;                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                               }//end switch                                                                C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f4e   0012     RETURN    0x0            }//end USBCheckStdRequest                                                        C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Function:        void USBStdGetDscHandler(void)                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard GET_DESCRIPTOR request.    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                  It utilizes tables dynamically looks up descriptor size.     C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                  This routine should never have to be modified if the tables  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                  in usbdsc.c are declared correctly.                          C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           void USBStdGetDscHandler(void)                                                   C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f50   0e80     MOVLW     0x80               if(SetupPkt.bmRequestType == 0x80)                                           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f52   0104     MOVLB     0x4                                                                                             
000f54   5d20     SUBWF     0x20,0x0,0x1                                                                                    
000f56   e157     BNZ       0x1006                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f58   5123     MOVF      0x23,0x0,0x1           switch(SetupPkt.bDscType)                                                C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f5a   0a03     XORLW     0x3                                                                                             
000f5c   e034     BZ        0xfc6                                                                                           
000f5e   0a01     XORLW     0x1                                                                                             
000f60   e010     BZ        0xf82                                                                                           
000f62   0a03     XORLW     0x3                                                                                             
000f64   e001     BZ        0xf68                                                                                           
000f66   d04d     BRA       0x1002                                                                                          
                                                   {                                                                        C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                       case DSC_DEV:                                                        C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f68   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_USB9;                              C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f6a   0e01     MOVLW     0x1                                                                                             
000f6c   6f52     MOVWF     0x52,0x1                                                                                        
000f6e   0101     MOVLB     0x1                            pSrc.bRom = (rom byte*)&device_dsc;                              C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f70   0e40     MOVLW     0x40                                                                                            
000f72   6f53     MOVWF     0x53,0x1                                                                                        
000f74   0e0a     MOVLW     0xa                                                                                             
000f76   6f54     MOVWF     0x54,0x1                                                                                        
000f78   0e12     MOVLW     0x12                           wCount._word = sizeof(device_dsc);          // Set data count    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f7a   0101     MOVLB     0x1                                                                                             
000f7c   6f57     MOVWF     0x57,0x1                                                                                        
000f7e   6b58     CLRF      0x58,0x1                                                                                        
000f80   d040     BRA       0x1002                         break;                                                           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                       case DSC_CFG:                                                        C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f82   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_USB9;                              C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f84   0e01     MOVLW     0x1                                                                                             
000f86   6f52     MOVWF     0x52,0x1                                                                                        
000f88   0104     MOVLB     0x4                            pSrc.bRom = *(USB_CD_Ptr+SetupPkt.bDscIndex);                    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000f8a   5122     MOVF      0x22,0x0,0x1                                                                                    
000f8c   6ef6     MOVWF     0xf6,0x0                                                                                        
000f8e   6af7     CLRF      0xf7,0x0                                                                                        
000f90   90d8     BCF       0xd8,0x0,0x0                                                                                    
000f92   36f6     RLCF      0xf6,0x1,0x0                                                                                    
000f94   36f7     RLCF      0xf7,0x1,0x0                                                                                    
000f96   0e40     MOVLW     0x40                                                                                            
000f98   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
000f9a   0e0c     MOVLW     0xc                                                                                             
000f9c   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000f9e   0009     TBLRDPOSTINC                                                                                              
000fa0   cff5     MOVFF     0xff5,0x153                                                                                     
000fa2   f153                                                                                                               
000fa4   000a     TBLRDPOSTDEC                                                                                              
000fa6   cff5     MOVFF     0xff5,0x154                                                                                     
000fa8   f154                                                                                                               
000faa   0e02     MOVLW     0x2                            wCount._word = *(pSrc.wRom+1);              // Set data count    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000fac   0101     MOVLB     0x1                                                                                             
000fae   6af7     CLRF      0xf7,0x0                                                                                        
000fb0   2553     ADDWF     0x53,0x0,0x1                                                                                    
000fb2   6ef6     MOVWF     0xf6,0x0                                                                                        
000fb4   5154     MOVF      0x54,0x0,0x1                                                                                    
000fb6   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000fb8   0009     TBLRDPOSTINC                                                                                              
000fba   cff5     MOVFF     0xff5,0x157                                                                                     
000fbc   f157                                                                                                               
000fbe   000a     TBLRDPOSTDEC                                                                                              
000fc0   cff5     MOVFF     0xff5,0x158                                                                                     
000fc2   f158                                                                                                               
000fc4   d01e     BRA       0x1002                         break;                                                           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                       case DSC_STR:                                                        C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000fc6   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_USB9;                              C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000fc8   0e01     MOVLW     0x1                                                                                             
000fca   6f52     MOVWF     0x52,0x1                                                                                        
000fcc   0104     MOVLB     0x4                            pSrc.bRom = *(USB_SD_Ptr+SetupPkt.bDscIndex);                    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000fce   5122     MOVF      0x22,0x0,0x1                                                                                    
000fd0   6ef6     MOVWF     0xf6,0x0                                                                                        
000fd2   6af7     CLRF      0xf7,0x0                                                                                        
000fd4   90d8     BCF       0xd8,0x0,0x0                                                                                    
000fd6   36f6     RLCF      0xf6,0x1,0x0                                                                                    
000fd8   36f7     RLCF      0xf7,0x1,0x0                                                                                    
000fda   0e80     MOVLW     0x80                                                                                            
000fdc   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
000fde   0e0c     MOVLW     0xc                                                                                             
000fe0   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
000fe2   0009     TBLRDPOSTINC                                                                                              
000fe4   cff5     MOVFF     0xff5,0x153                                                                                     
000fe6   f153                                                                                                               
000fe8   000a     TBLRDPOSTDEC                                                                                              
000fea   cff5     MOVFF     0xff5,0x154                                                                                     
000fec   f154                                                                                                               
000fee   c153     MOVFF     0x153,0xff6                    wCount._word = *pSrc.bRom;                  // Set data count    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
000ff0   fff6                                                                                                               
000ff2   c154     MOVFF     0x154,0xff7                                                                                     
000ff4   fff7                                                                                                               
000ff6   0008     TBLRD                                                                                                     
000ff8   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000ffa   0101     MOVLB     0x1                                                                                             
000ffc   6f57     MOVWF     0x57,0x1                                                                                        
000ffe   6b58     CLRF      0x58,0x1                                                                                        
001000   d000     BRA       0x1002                         break;                                                           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   }//end switch                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001002   0101     MOVLB     0x1                    usb_stat.ctrl_trf_mem = _ROM;                       // Set memory type   C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001004   8373     BSF       0x73,0x1,0x1                                                                                    
                                               }//end if                                                                    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001006   0012     RETURN    0x0            }//end USBStdGetDscHandler                                                       C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Function:        void USBStdSetCfgHandler(void)                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Overview:        This routine first disables all endpoints by clearing        C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                  UEP registers. It then configures (initializes) endpoints    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                  specified in the modifiable section.                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           void USBStdSetCfgHandler(void)                                                   C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001008   0101     MOVLB     0x1                ctrl_trf_session_owner = MUID_USB9;                                          C:\usb4all\fw\demo\system\usb\usb9\usb9.c
00100a   0e01     MOVLW     0x1                                                                                             
00100c   6f52     MOVWF     0x52,0x1                                                                                        
00100e   0e0f     MOVLW     0xf                mDisableEP1to15();                          // See usbdrv.h                  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001010   6ee6     MOVWF     0xe6,0x0                                                                                        
001012   0e71     MOVLW     0x71                                                                                            
001014   6ee6     MOVWF     0xe6,0x0                                                                                        
001016   0e0f     MOVLW     0xf                                                                                             
001018   6ee6     MOVWF     0xe6,0x0                                                                                        
00101a   ec32     CALL      0xe64,0x0                                                                                       
00101c   f007                                                                                                               
00101e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001020   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001022   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001024   0e01     MOVLW     0x1                ClearArray((byte*)&usb_alt_intf,MAX_NUM_INT);                                C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001026   6ee6     MOVWF     0xe6,0x0                                                                                        
001028   0e75     MOVLW     0x75                                                                                            
00102a   6ee6     MOVWF     0xe6,0x0                                                                                        
00102c   0e01     MOVLW     0x1                                                                                             
00102e   6ee6     MOVWF     0xe6,0x0                                                                                        
001030   ec32     CALL      0xe64,0x0                                                                                       
001032   f007                                                                                                               
001034   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001036   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001038   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00103a   c422     MOVFF     0x422,0x174        usb_active_cfg = SetupPkt.bCfgValue;                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
00103c   f174                                                                                                               
00103e   0104     MOVLB     0x4                if(SetupPkt.bCfgValue == 0)                                                  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001040   5122     MOVF      0x22,0x0,0x1                                                                                    
001042   e104     BNZ       0x104c                                                                                          
001044   0101     MOVLB     0x1                    usb_device_state = ADDRESS_STATE;                                        C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001046   0e05     MOVLW     0x5                                                                                             
001048   6f72     MOVWF     0x72,0x1                                                                                        
00104a   d005     BRA       0x1056             else                                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
00104c   0101     MOVLB     0x1                    usb_device_state = CONFIGURED_STATE;                                     C:\usb4all\fw\demo\system\usb\usb9\usb9.c
00104e   0e06     MOVLW     0x6                                                                                             
001050   6f72     MOVWF     0x72,0x1                                                                                        
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   /* Modifiable Section */                                                 C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001052   ec21     CALL      0x842,0x0              USBInitEPs();                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001054   f004                                                                                                               
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   /* End modifiable section */                                             C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                               }//end if(SetupPkt.bcfgValue == 0)                                           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001056   0012     RETURN    0x0            }//end USBStdSetCfgHandler                                                       C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Function:        void USBStdGetStatusHandler(void)                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard GET_STATUS request         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           void USBStdGetStatusHandler(void)                                                C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001058   0104     MOVLB     0x4                CtrlTrfData._byte0 = 0;                         // Initialize content        C:\usb4all\fw\demo\system\usb\usb9\usb9.c
00105a   6b28     CLRF      0x28,0x1                                                                                        
00105c   6b29     CLRF      0x29,0x1           CtrlTrfData._byte1 = 0;                                                      C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
00105e   0104     MOVLB     0x4                switch(SetupPkt.Recipient)                                                   C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001060   5120     MOVF      0x20,0x0,0x1                                                                                    
001062   0b1f     ANDLW     0x1f                                                                                            
001064   0a02     XORLW     0x2                                                                                             
001066   e014     BZ        0x1090                                                                                          
001068   0a03     XORLW     0x3                                                                                             
00106a   e00e     BZ        0x1088                                                                                          
00106c   0a01     XORLW     0x1                                                                                             
00106e   e001     BZ        0x1072                                                                                          
001070   d033     BRA       0x10d8                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   case RCPT_DEV:                                                           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001072   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001074   0e01     MOVLW     0x1                                                                                             
001076   6f52     MOVWF     0x52,0x1                                                                                        
                                                       /*                                                                   C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                        * _byte0: bit0: Self-Powered Status [0] Bus-Powered [1] Self-Powered C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                        *         bit1: RemoteWakeup        [0] Disabled    [1] Enabled     C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                        */                                                                  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                       if(self_power == 1)                     // self_power defined in io_cfg.h C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001078   0104     MOVLB     0x4                            CtrlTrfData._byte0|=0b000000001;    // Set bit0                  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
00107a   8128     BSF       0x28,0x0,0x1                                                                                    
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
00107c   0101     MOVLB     0x1                        if(usb_stat.RemoteWakeup == 1)          // usb_stat defined in usbmmap.c C:\usb4all\fw\demo\system\usb\usb9\usb9.c
00107e   a173     BTFSS     0x73,0x0,0x1                                                                                    
001080   d002     BRA       0x1086                                                                                          
001082   0104     MOVLB     0x4                            CtrlTrfData._byte0|=0b00000010;     // Set bit1                  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001084   8328     BSF       0x28,0x1,0x1                                                                                    
001086   d028     BRA       0x10d8                     break;                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   case RCPT_INTF:                                                          C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001088   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;     // No data to update         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
00108a   0e01     MOVLW     0x1                                                                                             
00108c   6f52     MOVWF     0x52,0x1                                                                                        
00108e   d024     BRA       0x10d8                     break;                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   case RCPT_EP:                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001090   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001092   0e01     MOVLW     0x1                                                                                             
001094   6f52     MOVWF     0x52,0x1                                                                                        
                                                       /*                                                                   C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                        * _byte0: bit0: Halt Status [0] Not Halted [1] Halted               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                        */                                                                  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001096   0104     MOVLB     0x4                        pDst.bRam = (byte*)&ep0Bo+(SetupPkt.EPNum*8)+(SetupPkt.EPDir*4);     C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001098   5124     MOVF      0x24,0x0,0x1                                                                                    
00109a   0b0f     ANDLW     0xf                                                                                             
00109c   0d08     MULLW     0x8                                                                                             
00109e   50f3     MOVF      0xf3,0x0,0x0                                                                                    
0010a0   6a11     CLRF      0x11,0x0                                                                                        
0010a2   0f00     ADDLW     0x0                                                                                             
0010a4   6e10     MOVWF     0x10,0x0                                                                                        
0010a6   0e04     MOVLW     0x4                                                                                             
0010a8   2211     ADDWFC    0x11,0x1,0x0                                                                                    
0010aa   5124     MOVF      0x24,0x0,0x1                                                                                    
0010ac   0b80     ANDLW     0x80                                                                                            
0010ae   e001     BZ        0x10b2                                                                                          
0010b0   0e01     MOVLW     0x1                                                                                             
0010b2   0d04     MULLW     0x4                                                                                             
0010b4   50f3     MOVF      0xf3,0x0,0x0                                                                                    
0010b6   0101     MOVLB     0x1                                                                                             
0010b8   2410     ADDWF     0x10,0x0,0x0                                                                                    
0010ba   6f55     MOVWF     0x55,0x1                                                                                        
0010bc   0e00     MOVLW     0x0                                                                                             
0010be   2011     ADDWFC    0x11,0x0,0x0                                                                                    
0010c0   6f56     MOVWF     0x56,0x1                                                                                        
0010c2   c155     MOVFF     0x155,0xfe9                if(*pDst.bRam & _BSTALL)    // Use _BSTALL as a bit mask             C:\usb4all\fw\demo\system\usb\usb9\usb9.c
0010c4   ffe9                                                                                                               
0010c6   c156     MOVFF     0x156,0xfea                                                                                     
0010c8   ffea                                                                                                               
0010ca   50ef     MOVF      0xef,0x0,0x0                                                                                    
0010cc   0b04     ANDLW     0x4                                                                                             
0010ce   e003     BZ        0x10d6                                                                                          
0010d0   0104     MOVLB     0x4                            CtrlTrfData._byte0=0x01;// Set bit0                              C:\usb4all\fw\demo\system\usb\usb9\usb9.c
0010d2   0e01     MOVLW     0x1                                                                                             
0010d4   6f28     MOVWF     0x28,0x1                                                                                        
0010d6   d000     BRA       0x10d8                     break;                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                               }//end switch                                                                C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
0010d8   0101     MOVLB     0x1                if(ctrl_trf_session_owner == MUID_USB9)                                      C:\usb4all\fw\demo\system\usb\usb9\usb9.c
0010da   0552     DECF      0x52,0x0,0x1                                                                                    
0010dc   e10a     BNZ       0x10f2                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
0010de   0101     MOVLB     0x1                    pSrc.bRam = (byte*)&CtrlTrfData;            // Set Source                C:\usb4all\fw\demo\system\usb\usb9\usb9.c
0010e0   0e28     MOVLW     0x28                                                                                            
0010e2   6f53     MOVWF     0x53,0x1                                                                                        
0010e4   0e04     MOVLW     0x4                                                                                             
0010e6   6f54     MOVWF     0x54,0x1                                                                                        
0010e8   0101     MOVLB     0x1                    usb_stat.ctrl_trf_mem = _RAM;               // Set memory type           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
0010ea   9373     BCF       0x73,0x1,0x1                                                                                    
0010ec   0101     MOVLB     0x1                    LSB(wCount) = 2;                            // Set data count            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
0010ee   0e02     MOVLW     0x2                                                                                             
0010f0   6f57     MOVWF     0x57,0x1                                                                                        
                                               }//end if(...)                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
0010f2   0012     RETURN    0x0            }//end USBStdGetStatusHandler                                                    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Function:        void USBStdFeatureReqHandler(void)                           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Overview:        This routine handles the standard SET & CLEAR FEATURES       C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                  requests                                                     C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           void USBStdFeatureReqHandler(void)                                               C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usb9\usb9.c
0010f4   0104     MOVLB     0x4                if((SetupPkt.bFeature == DEVICE_REMOTE_WAKEUP)&&                             C:\usb4all\fw\demo\system\usb\usb9\usb9.c
0010f6   0522     DECF      0x22,0x0,0x1                                                                                    
0010f8   e110     BNZ       0x111a                (SetupPkt.Recipient == RCPT_DEV))                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
0010fa   5120     MOVF      0x20,0x0,0x1                                                                                    
0010fc   0b1f     ANDLW     0x1f                                                                                            
0010fe   0900     IORLW     0x0                                                                                             
001100   e10c     BNZ       0x111a                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001102   0101     MOVLB     0x1                    ctrl_trf_session_owner = MUID_USB9;                                      C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001104   0e01     MOVLW     0x1                                                                                             
001106   6f52     MOVWF     0x52,0x1                                                                                        
001108   0e03     MOVLW     0x3                    if(SetupPkt.bRequest == SET_FEATURE)                                     C:\usb4all\fw\demo\system\usb\usb9\usb9.c
00110a   0104     MOVLB     0x4                                                                                             
00110c   5d21     SUBWF     0x21,0x0,0x1                                                                                    
00110e   e103     BNZ       0x1116                                                                                          
001110   0101     MOVLB     0x1                        usb_stat.RemoteWakeup = 1;                                           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001112   8173     BSF       0x73,0x0,0x1                                                                                    
001114   d002     BRA       0x111a                 else                                                                     C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001116   0101     MOVLB     0x1                        usb_stat.RemoteWakeup = 0;                                           C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001118   9173     BCF       0x73,0x0,0x1                                                                                    
                                               }//end if                                                                    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
00111a   0104     MOVLB     0x4                if((SetupPkt.bFeature == ENDPOINT_HALT)&&                                    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
00111c   5122     MOVF      0x22,0x0,0x1                                                                                    
00111e   e13a     BNZ       0x1194                (SetupPkt.Recipient == RCPT_EP)&&                                         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001120   5120     MOVF      0x20,0x0,0x1                                                                                    
001122   0b1f     ANDLW     0x1f                                                                                            
001124   0802     SUBLW     0x2                                                                                             
001126   e136     BNZ       0x1194                                                                                          
001128   5124     MOVF      0x24,0x0,0x1          (SetupPkt.EPNum != 0))                                                    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
00112a   0b0f     ANDLW     0xf                                                                                             
00112c   0900     IORLW     0x0                                                                                             
00112e   e032     BZ        0x1194                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001130   0101     MOVLB     0x1                    ctrl_trf_session_owner = MUID_USB9;                                      C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001132   0e01     MOVLW     0x1                                                                                             
001134   6f52     MOVWF     0x52,0x1                                                                                        
                                                   /* Must do address calculation here */                                   C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001136   0104     MOVLB     0x4                    pDst.bRam = (byte*)&ep0Bo+(SetupPkt.EPNum*8)+(SetupPkt.EPDir*4);         C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001138   5124     MOVF      0x24,0x0,0x1                                                                                    
00113a   0b0f     ANDLW     0xf                                                                                             
00113c   0d08     MULLW     0x8                                                                                             
00113e   50f3     MOVF      0xf3,0x0,0x0                                                                                    
001140   6a11     CLRF      0x11,0x0                                                                                        
001142   0f00     ADDLW     0x0                                                                                             
001144   6e10     MOVWF     0x10,0x0                                                                                        
001146   0e04     MOVLW     0x4                                                                                             
001148   2211     ADDWFC    0x11,0x1,0x0                                                                                    
00114a   5124     MOVF      0x24,0x0,0x1                                                                                    
00114c   0b80     ANDLW     0x80                                                                                            
00114e   e001     BZ        0x1152                                                                                          
001150   0e01     MOVLW     0x1                                                                                             
001152   0d04     MULLW     0x4                                                                                             
001154   50f3     MOVF      0xf3,0x0,0x0                                                                                    
001156   0101     MOVLB     0x1                                                                                             
001158   2410     ADDWF     0x10,0x0,0x0                                                                                    
00115a   6f55     MOVWF     0x55,0x1                                                                                        
00115c   0e00     MOVLW     0x0                                                                                             
00115e   2011     ADDWFC    0x11,0x0,0x0                                                                                    
001160   6f56     MOVWF     0x56,0x1                                                                                        
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001162   0e03     MOVLW     0x3                    if(SetupPkt.bRequest == SET_FEATURE)                                     C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001164   0104     MOVLB     0x4                                                                                             
001166   5d21     SUBWF     0x21,0x0,0x1                                                                                    
001168   e107     BNZ       0x1178                                                                                          
00116a   0e84     MOVLW     0x84                       *pDst.bRam = _USIE|_BSTALL;                                          C:\usb4all\fw\demo\system\usb\usb9\usb9.c
00116c   c155     MOVFF     0x155,0xfe9                                                                                     
00116e   ffe9                                                                                                               
001170   c156     MOVFF     0x156,0xfea                                                                                     
001172   ffea                                                                                                               
001174   6eef     MOVWF     0xef,0x0                                                                                        
001176   d00e     BRA       0x1194                 else                                                                     C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                   {                                                                        C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001178   af24     BTFSS     0x24,0x7,0x1               if(SetupPkt.EPDir == 1) // IN                                        C:\usb4all\fw\demo\system\usb\usb9\usb9.c
00117a   d006     BRA       0x1188                                                                                          
00117c   c155     MOVFF     0x155,0xfe9                    *pDst.bRam = _UCPU;                                              C:\usb4all\fw\demo\system\usb\usb9\usb9.c
00117e   ffe9                                                                                                               
001180   c156     MOVFF     0x156,0xfea                                                                                     
001182   ffea                                                                                                               
001184   6aef     CLRF      0xef,0x0                                                                                        
001186   d006     BRA       0x1194                     else                                                                 C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001188   0e88     MOVLW     0x88                           *pDst.bRam = _USIE|_DAT0|_DTSEN;                                 C:\usb4all\fw\demo\system\usb\usb9\usb9.c
00118a   c155     MOVFF     0x155,0xfe9                                                                                     
00118c   ffe9                                                                                                               
00118e   c156     MOVFF     0x156,0xfea                                                                                     
001190   ffea                                                                                                               
001192   6eef     MOVWF     0xef,0x0                                                                                        
                                                   }//end if                                                                C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                               }//end if                                                                    C:\usb4all\fw\demo\system\usb\usb9\usb9.c
001194   0012     RETURN    0x0            }//end USBStdFeatureReqHandler                                                   C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           /** EOF usb9.c ***************************************************************/  C:\usb4all\fw\demo\system\usb\usb9\usb9.c
                                           /*********************************************************************           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *********************************************************************           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * FileName:        usbctrltrf.c                                                 C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Dependencies:    See INCLUDES section below                                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Processor:       PIC18                                                        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Compiler:        C18 2.30.01+                                                 C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Company:         Microchip Technology, Inc.                                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Software License Agreement                                                    C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * civil liability for the breach of the terms and conditions of this            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * license.                                                                      C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Author               Date        Comment                                      C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            ********************************************************************/           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           #include <p18cxxx.h>                                                             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           #include "system\typedefs.h"                                                     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           #include "system\usb\usb.h"                                                      C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           byte ctrl_trf_state;                // Control Transfer State                    C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           byte ctrl_trf_session_owner;        // Current transfer session owner            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           POINTER pSrc;                       // Data source pointer                       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           POINTER pDst;                       // Data destination pointer                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           WORD wCount;                        // Data counter                              C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfSetupHandler(void);                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfOutHandler(void);                                                 C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfInHandler(void);                                                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           #pragma code sys                                                                 C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlEPService(void)                                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    USTAT is loaded with a valid endpoint address.               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        USBCtrlEPService checks for three transaction types that     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  it knows how to service and services them:                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. EP0 SETUP                                                 C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. EP0 OUT                                                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. EP0 IN                                                    C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  It ignores all other types (i.e. EP1, EP2, etc.)             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlEPService(void)                                                      C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001196   506c     MOVF      0x6c,0x0,0x0       if(USTAT == EP00_OUT)                                                        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001198   e10b     BNZ       0x11b0                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00119a   0104     MOVLB     0x4                    if(ep0Bo.Stat.PID == SETUP_TOKEN)           // EP0 SETUP                 C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00119c   5100     MOVF      0x0,0x0,0x1                                                                                     
00119e   0b3c     ANDLW     0x3c                                                                                            
0011a0   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
0011a2   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
0011a4   080d     SUBLW     0xd                                                                                             
0011a6   e102     BNZ       0x11ac                                                                                          
0011a8   d808     RCALL     0x11ba                     USBCtrlTrfSetupHandler();                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011aa   d001     BRA       0x11ae                 else                                        // EP0 OUT                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011ac   d818     RCALL     0x11de                     USBCtrlTrfOutHandler();                                              C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011ae   d004     BRA       0x11b8             else if(USTAT == EP00_IN)                       // EP0 IN                    C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011b0   0e04     MOVLW     0x4                                                                                             
0011b2   5c6c     SUBWF     0x6c,0x0,0x0                                                                                    
0011b4   e101     BNZ       0x11b8                                                                                          
0011b6   d823     RCALL     0x11fe                 USBCtrlTrfInHandler();                                                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011b8   0012     RETURN    0x0            }//end USBCtrlEPService                                                          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfSetupHandler(void)                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    SetupPkt buffer is loaded with valid USB Setup Data          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine is a task dispatcher and has 3 stages.          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. It initializes the control transfer state machine.        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. It calls on each of the module that may know how to       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     service the Setup Request from the host.                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     Module Example: USB9, HID, CDC, MSD, ...                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     As new classes are added, ClassReqHandler table in        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     usbdsc.c should be updated to call all available          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     class handlers.                                           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. Once each of the modules has had a chance to check if     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     it is responsible for servicing the request, stage 3      C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     then checks direction of the transfer to determine how    C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     to prepare EP0 for the control transfer.                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     Refer to USBCtrlEPServiceComplete() for more details.     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            Microchip USB Firmware has three different states for        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  the control transfer state machine:                          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  1. WAIT_SETUP                                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  2. CTRL_TRF_TX                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  3. CTRL_TRF_RX                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Refer to firmware manual to find out how one state           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  is transitioned to another.                                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  A Control Transfer is composed of many USB transactions.     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  When transferring data over multiple transactions,           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  it is important to keep track of data source, data           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  destination, and data count. These three parameters are      C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  stored in pSrc,pDst, and wCount. A flag is used to           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  note if the data source is from ROM or RAM.                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011ba   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfSetupHandler(void)                                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011bc   ffe6                                                                                                               
0011be   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0011c0   ffd9                                                                                                               
0011c2   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               byte i;                                                                      C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 1 */                                                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011c4   0101     MOVLB     0x1                ctrl_trf_state = WAIT_SETUP;                                                 C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011c6   6b51     CLRF      0x51,0x1                                                                                        
0011c8   6b52     CLRF      0x52,0x1           ctrl_trf_session_owner = MUID_NULL;     // Set owner to NULL                 C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011ca   6b57     CLRF      0x57,0x1           wCount._word = 0;                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011cc   6b58     CLRF      0x58,0x1                                                                                        
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 2 */                                                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011ce   ec47     CALL      0xe8e,0x0          USBCheckStdRequest();                   // See system\usb9\usb9.c            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011d0   f007                                                                                                               
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Modifiable Section */                                                     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               // Insert other USB Device Class Request Handlers here                       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               /* End Modifiable Section */                                                 C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               /* Stage 3 */                                                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011d2   d8dd     RCALL     0x138e             USBCtrlEPServiceComplete();                                                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011d4   52e5     MOVF      0xe5,0x1,0x0   }//end USBCtrlTrfSetupHandler                                                    C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011d6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0011d8   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0011da   ffd9                                                                                                               
0011dc   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfOutHandler(void)                              C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine handles an OUT transaction according to         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  which control transfer state is currently active.            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            Note that if the the control transfer was from               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  host to device, the session owner should be notified         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  at the end of each OUT transaction to service the            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  received data.                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfOutHandler(void)                                                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011de   0e02     MOVLW     0x2                if(ctrl_trf_state == CTRL_TRF_RX)                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011e0   0101     MOVLB     0x1                                                                                             
0011e2   5d51     SUBWF     0x51,0x0,0x1                                                                                    
0011e4   e10a     BNZ       0x11fa                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011e6   d896     RCALL     0x1314                 USBCtrlTrfRxService();                                                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                   /*                                                                       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                    * Don't have to worry about overwriting _KEEP bit                       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                    * because if _KEEP was set, TRNIF would not have been                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                    * generated in the first place.                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                    */                                                                      C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011e8   0104     MOVLB     0x4                    if(ep0Bo.Stat.DTS == 0)                                                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011ea   bd00     BTFSC     0x0,0x6,0x1                                                                                     
0011ec   d003     BRA       0x11f4                                                                                          
0011ee   0ec8     MOVLW     0xc8                       ep0Bo.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011f0   6f00     MOVWF     0x0,0x1                                                                                         
0011f2   d002     BRA       0x11f8                 else                                                                     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011f4   0e88     MOVLW     0x88                       ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN;                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011f6   6f00     MOVWF     0x0,0x1                                                                                         
                                               }                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011f8   d001     BRA       0x11fc             else    // CTRL_TRF_TX                                                       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011fa   d90f     RCALL     0x141a                 USBPrepareForNextSetupTrf();                                             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011fc   0012     RETURN    0x0            }//end USBCtrlTrfOutHandler                                                      C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfInHandler(void)                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine handles an IN transaction according to          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  which control transfer state is currently active.            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            A Set Address Request must not change the acutal address     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  of the device until the completion of the control            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer. The end of the control transfer for Set Address    C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Request is an IN transaction. Therefore it is necessary      C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  to service this unique situation when the condition is       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  right. Macro mUSBCheckAdrPendingState is defined in          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  usb9.h and its function is to specifically service this      C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  event.                                                       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlTrfInHandler(void)                                                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0011fe   0e04     MOVLW     0x4                mUSBCheckAdrPendingState();         // Must check if in ADR_PENDING_STATE    C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001200   0101     MOVLB     0x1                                                                                             
001202   5d72     SUBWF     0x72,0x0,0x1                                                                                    
001204   e10a     BNZ       0x121a                                                                                          
001206   c422     MOVFF     0x422,0xf6e                                                                                     
001208   ff6e                                                                                                               
00120a   506e     MOVF      0x6e,0x0,0x0                                                                                    
00120c   0800     SUBLW     0x0                                                                                             
00120e   e203     BC        0x1216                                                                                          
001210   0e05     MOVLW     0x5                                                                                             
001212   6f72     MOVWF     0x72,0x1                                                                                        
001214   d002     BRA       0x121a                                                                                          
001216   0e03     MOVLW     0x3                                                                                             
001218   6f72     MOVWF     0x72,0x1                                                                                        
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00121a   0101     MOVLB     0x1                if(ctrl_trf_state == CTRL_TRF_TX)                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00121c   0551     DECF      0x51,0x0,0x1                                                                                    
00121e   e10a     BNZ       0x1234                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001220   d80b     RCALL     0x1238                 USBCtrlTrfTxService();                                                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001222   0104     MOVLB     0x4                    if(ep0Bi.Stat.DTS == 0)                                                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001224   bd04     BTFSC     0x4,0x6,0x1                                                                                     
001226   d003     BRA       0x122e                                                                                          
001228   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00122a   6f04     MOVWF     0x4,0x1                                                                                         
00122c   d002     BRA       0x1232                 else                                                                     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00122e   0e88     MOVLW     0x88                       ep0Bi.Stat._byte = _USIE|_DAT0|_DTSEN;                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001230   6f04     MOVWF     0x4,0x1                                                                                         
                                               }                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001232   d001     BRA       0x1236             else // CTRL_TRF_RX                                                          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001234   d8f2     RCALL     0x141a                 USBPrepareForNextSetupTrf();                                             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001236   0012     RETURN    0x0            }//end USBCtrlTrfInHandler                                                       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfTxService(void)                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    pSrc, wCount, and usb_stat.ctrl_trf_mem are setup properly.  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine should be called from only two places.          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  One from USBCtrlEPServiceComplete() and one from             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  USBCtrlTrfInHandler(). It takes care of managing a           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer over multiple USB transactions.                     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            This routine works with isochronous endpoint larger than     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  256 bytes and is shown here as an example of how to deal     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  with BC9 and BC8. In reality, a control endpoint can never   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  be larger than 64 bytes.                                     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001238   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfTxService(void)                                                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00123a   ffe6                                                                                                               
00123c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00123e   ffd9                                                                                                               
001240   0e02     MOVLW     0x2                                                                                             
001242   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               WORD byte_to_send;                                                           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                * First, have to figure out how many byte of data to send.                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001244   0101     MOVLB     0x1                if(wCount._word < EP0_BUFF_SIZE)                                             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001246   0e08     MOVLW     0x8                                                                                             
001248   5d57     SUBWF     0x57,0x0,0x1                                                                                    
00124a   0e00     MOVLW     0x0                                                                                             
00124c   5958     SUBWFB    0x58,0x0,0x1                                                                                    
00124e   e205     BC        0x125a                                                                                          
001250   c157     MOVFF     0x157,0xfde            byte_to_send._word = wCount._word;                                       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001252   ffde                                                                                                               
001254   c158     MOVFF     0x158,0xfdd                                                                                     
001256   ffdd                                                                                                               
001258   d003     BRA       0x1260             else                                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00125a   0e08     MOVLW     0x8                    byte_to_send._word = EP0_BUFF_SIZE;                                      C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00125c   6ede     MOVWF     0xde,0x0                                                                                        
00125e   6add     CLRF      0xdd,0x0                                                                                        
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                * Next, load the number of bytes to send to BC9..0 in buffer descriptor     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001260   0104     MOVLB     0x4                ep0Bi.Stat.BC9 = 0;                                                          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001262   9304     BCF       0x4,0x1,0x1                                                                                     
001264   9104     BCF       0x4,0x0,0x1        ep0Bi.Stat.BC8 = 0;                                                          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001266   0e01     MOVLW     0x1                ep0Bi.Stat._byte |= MSB(byte_to_send);                                       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001268   50db     MOVF      0xdb,0x0,0x0                                                                                    
00126a   1304     IORWF     0x4,0x1,0x1                                                                                     
00126c   cfdf     MOVFF     0xfdf,0x405        ep0Bi.Cnt = LSB(byte_to_send);                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00126e   f405                                                                                                               
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                * Subtract the number of bytes just about to be sent from the total.        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001270   0e00     MOVLW     0x0                wCount._word = wCount._word - byte_to_send._word;                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001272   50db     MOVF      0xdb,0x0,0x0                                                                                    
001274   0101     MOVLB     0x1                                                                                             
001276   5f57     SUBWF     0x57,0x1,0x1                                                                                    
001278   0e01     MOVLW     0x1                                                                                             
00127a   50db     MOVF      0xdb,0x0,0x0                                                                                    
00127c   5b58     SUBWFB    0x58,0x1,0x1                                                                                    
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00127e   0e28     MOVLW     0x28               pDst.bRam = (byte*)&CtrlTrfData;        // Set destination pointer           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001280   6f55     MOVWF     0x55,0x1                                                                                        
001282   0e04     MOVLW     0x4                                                                                             
001284   6f56     MOVWF     0x56,0x1                                                                                        
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001286   0101     MOVLB     0x1                if(usb_stat.ctrl_trf_mem == _ROM)       // Determine type of memory source   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001288   a373     BTFSS     0x73,0x1,0x1                                                                                    
00128a   d01e     BRA       0x12c8                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00128c   cfd9     MOVFF     0xfd9,0xfe9            while(byte_to_send._word)                                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00128e   ffe9                                                                                                               
001290   cfda     MOVFF     0xfda,0xfea                                                                                     
001292   ffea                                                                                                               
001294   50ee     MOVF      0xee,0x0,0x0                                                                                    
001296   10ed     IORWF     0xed,0x0,0x0                                                                                    
001298   e016     BZ        0x12c6                                                                                          
0012c4   d7e3     BRA       0x128c                                                                                          
                                                   {                                                                        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00129a   c153     MOVFF     0x153,0xff6                *pDst.bRam = *pSrc.bRom;                                             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00129c   fff6                                                                                                               
00129e   c154     MOVFF     0x154,0xff7                                                                                     
0012a0   fff7                                                                                                               
0012a2   0008     TBLRD                                                                                                     
0012a4   50f5     MOVF      0xf5,0x0,0x0                                                                                    
0012a6   c155     MOVFF     0x155,0xfe9                                                                                     
0012a8   ffe9                                                                                                               
0012aa   c156     MOVFF     0x156,0xfea                                                                                     
0012ac   ffea                                                                                                               
0012ae   6eef     MOVWF     0xef,0x0                                                                                        
0012b0   0101     MOVLB     0x1                        pDst.bRam++;                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0012b2   2b55     INCF      0x55,0x1,0x1                                                                                    
0012b4   0e00     MOVLW     0x0                                                                                             
0012b6   2356     ADDWFC    0x56,0x1,0x1                                                                                    
0012b8   2b53     INCF      0x53,0x1,0x1               pSrc.bRom++;                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0012ba   2354     ADDWFC    0x54,0x1,0x1                                                                                    
0012bc   06df     DECF      0xdf,0x1,0x0               byte_to_send._word--;                                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0012be   0e01     MOVLW     0x1                                                                                             
0012c0   e201     BC        0x12c4                                                                                          
0012c2   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                   }//end while(byte_to_send._word)                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               }                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0012c6   d01c     BRA       0x1300             else // RAM                                                                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0012c8   cfd9     MOVFF     0xfd9,0xfe9            while(byte_to_send._word)                                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0012ca   ffe9                                                                                                               
0012cc   cfda     MOVFF     0xfda,0xfea                                                                                     
0012ce   ffea                                                                                                               
0012d0   50ee     MOVF      0xee,0x0,0x0                                                                                    
0012d2   10ed     IORWF     0xed,0x0,0x0                                                                                    
0012d4   e015     BZ        0x1300                                                                                          
0012fe   d7e4     BRA       0x12c8                                                                                          
                                                   {                                                                        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0012d6   c153     MOVFF     0x153,0xfe9                *pDst.bRam = *pSrc.bRam;                                             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0012d8   ffe9                                                                                                               
0012da   c154     MOVFF     0x154,0xfea                                                                                     
0012dc   ffea                                                                                                               
0012de   50ef     MOVF      0xef,0x0,0x0                                                                                    
0012e0   c155     MOVFF     0x155,0xfe9                                                                                     
0012e2   ffe9                                                                                                               
0012e4   c156     MOVFF     0x156,0xfea                                                                                     
0012e6   ffea                                                                                                               
0012e8   6eef     MOVWF     0xef,0x0                                                                                        
0012ea   0101     MOVLB     0x1                        pDst.bRam++;                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0012ec   2b55     INCF      0x55,0x1,0x1                                                                                    
0012ee   0e00     MOVLW     0x0                                                                                             
0012f0   2356     ADDWFC    0x56,0x1,0x1                                                                                    
0012f2   2b53     INCF      0x53,0x1,0x1               pSrc.bRam++;                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0012f4   2354     ADDWFC    0x54,0x1,0x1                                                                                    
0012f6   06df     DECF      0xdf,0x1,0x0               byte_to_send._word--;                                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0012f8   0e01     MOVLW     0x1                                                                                             
0012fa   e201     BC        0x12fe                                                                                          
0012fc   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                   }//end while(byte_to_send._word)                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end if(usb_stat.ctrl_trf_mem == _ROM)                                     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001300   0e02     MOVLW     0x2            }//end USBCtrlTrfTxService                                                       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001302   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
001304   e202     BC        0x130a                                                                                          
001306   6ae1     CLRF      0xe1,0x0                                                                                        
001308   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00130a   6ee1     MOVWF     0xe1,0x0                                                                                        
00130c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00130e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001310   ffd9                                                                                                               
001312   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlTrfRxService(void)                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    pDst and wCount are setup properly.                          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  pSrc is always &CtrlTrfData                                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  usb_stat.ctrl_trf_mem is always _RAM.                        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  wCount should be set to 0 at the start of each control       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transfer.                                                    C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        *** This routine is only partially complete. Check for       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  new version of the firmware.                                 C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001314   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfRxService(void)                                                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001316   ffe6                                                                                                               
001318   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00131a   ffd9                                                                                                               
00131c   0e02     MOVLW     0x2                                                                                             
00131e   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               WORD byte_to_read;                                                           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001320   0e03     MOVLW     0x3                MSB(byte_to_read) = 0x03 & ep0Bo.Stat._byte;    // Filter out last 2 bits    C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001322   0104     MOVLB     0x4                                                                                             
001324   1500     ANDWF     0x0,0x0,0x1                                                                                     
001326   6ee7     MOVWF     0xe7,0x0                                                                                        
001328   0e01     MOVLW     0x1                                                                                             
00132a   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
00132c   ffdb                                                                                                               
00132e   c401     MOVFF     0x401,0xfdf        LSB(byte_to_read) = ep0Bo.Cnt;                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001330   ffdf                                                                                                               
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                * Accumulate total number of bytes read                                     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001332   50de     MOVF      0xde,0x0,0x0       wCount._word = wCount._word + byte_to_read._word;                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001334   0101     MOVLB     0x1                                                                                             
001336   2757     ADDWF     0x57,0x1,0x1                                                                                    
001338   50dd     MOVF      0xdd,0x0,0x0                                                                                    
00133a   2358     ADDWFC    0x58,0x1,0x1                                                                                    
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00133c   0e28     MOVLW     0x28               pSrc.bRam = (byte*)&CtrlTrfData;                                             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00133e   6f53     MOVWF     0x53,0x1                                                                                        
001340   0e04     MOVLW     0x4                                                                                             
001342   6f54     MOVWF     0x54,0x1                                                                                        
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001344   cfd9     MOVFF     0xfd9,0xfe9        while(byte_to_read._word)                                                    C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001346   ffe9                                                                                                               
001348   cfda     MOVFF     0xfda,0xfea                                                                                     
00134a   ffea                                                                                                               
00134c   50ee     MOVF      0xee,0x0,0x0                                                                                    
00134e   10ed     IORWF     0xed,0x0,0x0                                                                                    
001350   e014     BZ        0x137a                                                                                          
001378   d7e5     BRA       0x1344                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001352   c153     MOVFF     0x153,0xfe9            *pDst.bRam = *pSrc.bRam;                                                 C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001354   ffe9                                                                                                               
001356   c154     MOVFF     0x154,0xfea                                                                                     
001358   ffea                                                                                                               
00135a   50ef     MOVF      0xef,0x0,0x0                                                                                    
00135c   c155     MOVFF     0x155,0xfe9                                                                                     
00135e   ffe9                                                                                                               
001360   c156     MOVFF     0x156,0xfea                                                                                     
001362   ffea                                                                                                               
001364   6eef     MOVWF     0xef,0x0                                                                                        
001366   2b55     INCF      0x55,0x1,0x1           pDst.bRam++;                                                             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001368   0e00     MOVLW     0x0                                                                                             
00136a   2356     ADDWFC    0x56,0x1,0x1                                                                                    
00136c   2b53     INCF      0x53,0x1,0x1           pSrc.bRam++;                                                             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00136e   2354     ADDWFC    0x54,0x1,0x1                                                                                    
001370   06df     DECF      0xdf,0x1,0x0           byte_to_read._word--;                                                    C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001372   0e01     MOVLW     0x1                                                                                             
001374   e201     BC        0x1378                                                                                          
001376   06db     DECF      0xdb,0x1,0x0                                                                                    
                                               }//end while(byte_to_read._word)                                             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00137a   0e02     MOVLW     0x2            }//end USBCtrlTrfRxService                                                       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00137c   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
00137e   e202     BC        0x1384                                                                                          
001380   6ae1     CLRF      0xe1,0x0                                                                                        
001382   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001384   6ee1     MOVWF     0xe1,0x0                                                                                        
001386   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001388   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00138a   ffd9                                                                                                               
00138c   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBCtrlEPServiceComplete(void)                          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        This routine wrap up the ramaining tasks in servicing        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  a Setup Request. Its main task is to set the endpoint        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  controls appropriately for a given situation. See code       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  below.                                                       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  There are three main scenarios:                              C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  a) There was no handler for the Request, in this case        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     a STALL should be sent out.                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  b) The host has requested a read control transfer,           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     endpoints are required to be setup in a specific way.     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  c) The host has requested a write control transfer, or       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     a control data stage is not required, endpoints are       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                     required to be setup in a specific way.                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  Packet processing is resumed by clearing PKTDIS bit.         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBCtrlEPServiceComplete(void)                                              C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00138e   0101     MOVLB     0x1                if(ctrl_trf_session_owner == MUID_NULL)                                      C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001390   5152     MOVF      0x52,0x0,0x1                                                                                    
001392   e10c     BNZ       0x13ac                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                   /*                                                                       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                    * If no one knows how to service this request then stall.               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                    * Must also prepare EP0 to receive the next SETUP transaction.          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                    */                                                                      C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001394   0104     MOVLB     0x4                    ep0Bo.Cnt = EP0_BUFF_SIZE;                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001396   0e08     MOVLW     0x8                                                                                             
001398   6f01     MOVWF     0x1,0x1                                                                                         
00139a   0e20     MOVLW     0x20                   ep0Bo.ADR = (byte*)&SetupPkt;                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00139c   6f02     MOVWF     0x2,0x1                                                                                         
00139e   0e04     MOVLW     0x4                                                                                             
0013a0   6f03     MOVWF     0x3,0x1                                                                                         
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013a2   0e84     MOVLW     0x84                   ep0Bo.Stat._byte = _USIE|_BSTALL;                                        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013a4   6f00     MOVWF     0x0,0x1                                                                                         
0013a6   0104     MOVLB     0x4                    ep0Bi.Stat._byte = _USIE|_BSTALL;                                        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013a8   6f04     MOVWF     0x4,0x1                                                                                         
                                               }                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013aa   d035     BRA       0x1416             else    // A module has claimed ownership of the control transfer session.   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               {                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013ac   0104     MOVLB     0x4                    if(SetupPkt.DataDir == DEV_TO_HOST)                                      C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013ae   af20     BTFSS     0x20,0x7,0x1                                                                                    
0013b0   d022     BRA       0x13f6                                                                                          
                                                   {                                                                        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013b2   0101     MOVLB     0x1                        if(SetupPkt.wLength < wCount._word)                                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013b4   5157     MOVF      0x57,0x0,0x1                                                                                    
0013b6   0104     MOVLB     0x4                                                                                             
0013b8   5d26     SUBWF     0x26,0x0,0x1                                                                                    
0013ba   0101     MOVLB     0x1                                                                                             
0013bc   5158     MOVF      0x58,0x0,0x1                                                                                    
0013be   0104     MOVLB     0x4                                                                                             
0013c0   5927     SUBWFB    0x27,0x0,0x1                                                                                    
0013c2   e204     BC        0x13cc                                                                                          
0013c4   c426     MOVFF     0x426,0x157                    wCount._word = SetupPkt.wLength;                                 C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013c6   f157                                                                                                               
0013c8   c427     MOVFF     0x427,0x158                                                                                     
0013ca   f158                                                                                                               
0013cc   df35     RCALL     0x1238                     USBCtrlTrfTxService();                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013ce   0101     MOVLB     0x1                        ctrl_trf_state = CTRL_TRF_TX;                                        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013d0   0e01     MOVLW     0x1                                                                                             
0013d2   6f51     MOVWF     0x51,0x1                                                                                        
                                                       /*                                                                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Control Read:                                                     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * <SETUP[0]><IN[1]><IN[0]>...<OUT[1]> | <SETUP[0]>                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 1. Prepare OUT EP to respond to early termination                 C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * NOTE:                                                             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * If something went wrong during the control transfer,              C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the last status stage may not be sent by the host.                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * When this happens, two different things could happen              C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * depending on the host.                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * a) The host could send out a RESET.                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * b) The host could send out a new SETUP transaction                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    without sending a RESET first.                                 C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * To properly handle case (b), the OUT EP must be setup             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * to receive either a zero length OUT transaction, or a             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * new SETUP transaction.                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Since the SETUP transaction requires the DTS bit to be            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * DAT0 while the zero length OUT status requires the DTS            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * bit to be DAT1, the DTS bit check by the hardware should          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * be disabled. This way the SIE could accept either of              C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the two transactions.                                             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Furthermore, the Cnt byte should be set to prepare for            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * the SETUP data (8-byte or more), and the buffer address           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * should be pointed to SetupPkt.                                    C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013d4   0104     MOVLB     0x4                        ep0Bo.Cnt = EP0_BUFF_SIZE;                                           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013d6   0e08     MOVLW     0x8                                                                                             
0013d8   6f01     MOVWF     0x1,0x1                                                                                         
0013da   0e20     MOVLW     0x20                       ep0Bo.ADR = (byte*)&SetupPkt;                                        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013dc   6f02     MOVWF     0x2,0x1                                                                                         
0013de   0e04     MOVLW     0x4                                                                                             
0013e0   6f03     MOVWF     0x3,0x1                                                                                         
0013e2   0e80     MOVLW     0x80                       ep0Bo.Stat._byte = _USIE;           // Note: DTSEN is 0!             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013e4   6f00     MOVWF     0x0,0x1                                                                                         
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                       /*                                                                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 2. Prepare IN EP to transfer data, Cnt should have                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    been initialized by responsible request owner.                 C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013e6   0104     MOVLB     0x4                        ep0Bi.ADR = (byte*)&CtrlTrfData;                                     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013e8   0e28     MOVLW     0x28                                                                                            
0013ea   6f06     MOVWF     0x6,0x1                                                                                         
0013ec   0e04     MOVLW     0x4                                                                                             
0013ee   6f07     MOVWF     0x7,0x1                                                                                         
0013f0   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013f2   6f04     MOVWF     0x4,0x1                                                                                         
                                                   }                                                                        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013f4   d010     BRA       0x1416                 else    // (SetupPkt.DataDir == HOST_TO_DEV)                             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                   {                                                                        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013f6   0101     MOVLB     0x1                        ctrl_trf_state = CTRL_TRF_RX;                                        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013f8   0e02     MOVLW     0x2                                                                                             
0013fa   6f51     MOVWF     0x51,0x1                                                                                        
                                                       /*                                                                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * Control Write:                                                    C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * <SETUP[0]><OUT[1]><OUT[0]>...<IN[1]> | <SETUP[0]>                 C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 1. Prepare IN EP to respond to early termination                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        *                                                                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    This is the same as a Zero Length Packet Response              C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        *    for control transfer without a data stage                      C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013fc   0104     MOVLB     0x4                        ep0Bi.Cnt = 0;                                                       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
0013fe   6b05     CLRF      0x5,0x1                                                                                         
001400   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001402   6f04     MOVWF     0x4,0x1                                                                                         
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                       /*                                                                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        * 2. Prepare OUT EP to receive data.                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                        */                                                                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001404   0104     MOVLB     0x4                        ep0Bo.Cnt = EP0_BUFF_SIZE;                                           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001406   0e08     MOVLW     0x8                                                                                             
001408   6f01     MOVWF     0x1,0x1                                                                                         
00140a   0e28     MOVLW     0x28                       ep0Bo.ADR = (byte*)&CtrlTrfData;                                     C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00140c   6f02     MOVWF     0x2,0x1                                                                                         
00140e   0e04     MOVLW     0x4                                                                                             
001410   6f03     MOVWF     0x3,0x1                                                                                         
001412   0ec8     MOVLW     0xc8                       ep0Bo.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001414   6f00     MOVWF     0x0,0x1                                                                                         
                                                   }//end if(SetupPkt.DataDir == DEV_TO_HOST)                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               }//end if(ctrl_trf_session_owner == MUID_NULL)                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                               /*                                                                           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                * PKTDIS bit is set when a Setup Transaction is received.                   C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                * Clear to resume packet processing.                                        C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                */                                                                          C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001416   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001418   0012     RETURN    0x0            }//end USBCtrlEPServiceComplete                                                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           /******************************************************************************  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Function:        void USBPrepareForNextSetupTrf(void)                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Overview:        The routine forces EP0 OUT to be ready for a new Setup       C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                  transaction, and forces EP0 IN to be owned by CPU.           C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *                                                                               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           void USBPrepareForNextSetupTrf(void)                                             C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           {                                                                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00141a   0101     MOVLB     0x1                ctrl_trf_state = WAIT_SETUP;            // See usbctrltrf.h                  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00141c   6b51     CLRF      0x51,0x1                                                                                        
00141e   0104     MOVLB     0x4                ep0Bo.Cnt = EP0_BUFF_SIZE;              // Defined in usbcfg.h               C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001420   0e08     MOVLW     0x8                                                                                             
001422   6f01     MOVWF     0x1,0x1                                                                                         
001424   0e20     MOVLW     0x20               ep0Bo.ADR = (byte*)&SetupPkt;                                                C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001426   6f02     MOVWF     0x2,0x1                                                                                         
001428   0e04     MOVLW     0x4                                                                                             
00142a   6f03     MOVWF     0x3,0x1                                                                                         
00142c   0e88     MOVLW     0x88               ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN;  // EP0 buff dsc init, see usbmmap.h  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
00142e   6f00     MOVWF     0x0,0x1                                                                                         
001430   0104     MOVLB     0x4                ep0Bi.Stat._byte = _UCPU;               // EP0 IN buffer initialization      C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
001432   6b04     CLRF      0x4,0x1                                                                                         
001434   0012     RETURN    0x0            }//end USBPrepareForNextSetupTrf                                                 C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                                                                                                            C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           /** EOF usbctrltrf.c *********************************************************/  C:\usb4all\fw\demo\system\usb\usbctrltrf\usbctrltrf.c
                                           /*********************************************************************           C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            *                Thermo Sensor with SPI(TM) Interface                           C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            *********************************************************************           C:\usb4all\fw\demo\user\temperature.c
                                            * FileName:        temperature.c                                                C:\usb4all\fw\demo\user\temperature.c
                                            * Dependencies:    See INCLUDES section below                                   C:\usb4all\fw\demo\user\temperature.c
                                            * Processor:       PIC18                                                        C:\usb4all\fw\demo\user\temperature.c
                                            * Compiler:        C18 2.30.01+                                                 C:\usb4all\fw\demo\user\temperature.c
                                            * Company:         Microchip Technology, Inc.                                   C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * Software License Agreement                                                    C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\usb4all\fw\demo\user\temperature.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\usb4all\fw\demo\user\temperature.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\usb4all\fw\demo\user\temperature.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\usb4all\fw\demo\user\temperature.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\usb4all\fw\demo\user\temperature.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\usb4all\fw\demo\user\temperature.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\usb4all\fw\demo\user\temperature.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\usb4all\fw\demo\user\temperature.c
                                            * civil liability for the breach of the terms and conditions of this            C:\usb4all\fw\demo\user\temperature.c
                                            * license.                                                                      C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\usb4all\fw\demo\user\temperature.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\usb4all\fw\demo\user\temperature.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\usb4all\fw\demo\user\temperature.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\usb4all\fw\demo\user\temperature.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\usb4all\fw\demo\user\temperature.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * Author               Date        Comment                                      C:\usb4all\fw\demo\user\temperature.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\usb4all\fw\demo\user\temperature.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\usb4all\fw\demo\user\temperature.c
                                            ********************************************************************/           C:\usb4all\fw\demo\user\temperature.c
                                                                                                                            C:\usb4all\fw\demo\user\temperature.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\user\temperature.c
                                           #include <p18cxxx.h>                                                             C:\usb4all\fw\demo\user\temperature.c
                                           #include "system\typedefs.h"                                                     C:\usb4all\fw\demo\user\temperature.c
                                           #include <spi.h>                                                                 C:\usb4all\fw\demo\user\temperature.c
                                           #include "io_cfg.h"                                                              C:\usb4all\fw\demo\user\temperature.c
                                           #include "user\temperature.h"                                                    C:\usb4all\fw\demo\user\temperature.c
                                                                                                                            C:\usb4all\fw\demo\user\temperature.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\user\temperature.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\user\temperature.c
                                           WORD temperature;           // Raw data format                                   C:\usb4all\fw\demo\user\temperature.c
                                           char tempString[10];        // Buffer for storing data in ASCII format           C:\usb4all\fw\demo\user\temperature.c
                                                                                                                            C:\usb4all\fw\demo\user\temperature.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\user\temperature.c
                                                                                                                            C:\usb4all\fw\demo\user\temperature.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\user\temperature.c
                                           #pragma code module                                                              C:\usb4all\fw\demo\user\temperature.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\temperature.c
                                            * Function:        void InitTempSensor(void)                                    C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * Overview:        Initializes SPI interface & chip select line                 C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\temperature.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\temperature.c
                                           void InitTempSensor(void)                                                        C:\usb4all\fw\demo\user\temperature.c
                                           {                                                                                C:\usb4all\fw\demo\user\temperature.c
003182   848a     BSF       0x8a,0x2,0x0       cs_temp_sensor = 1;                                                          C:\usb4all\fw\demo\user\temperature.c
003184   9493     BCF       0x93,0x2,0x0       tris_cs_temp_sensor = OUTPUT_PIN;                                            C:\usb4all\fw\demo\user\temperature.c
003186   6ae6     CLRF      0xe6,0x0           OpenSPI(SPI_FOSC_64, MODE_11, SMPMID);                                       C:\usb4all\fw\demo\user\temperature.c
003188   0e03     MOVLW     0x3                                                                                             
00318a   6ee6     MOVWF     0xe6,0x0                                                                                        
00318c   0e02     MOVLW     0x2                                                                                             
00318e   6ee6     MOVWF     0xe6,0x0                                                                                        
003190   ec31     CALL      0x2e62,0x0                                                                                      
003192   f017                                                                                                               
003194   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003196   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003198   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                                                                                            C:\usb4all\fw\demo\user\temperature.c
                                               // Initialize readable values - default to room temperature                  C:\usb4all\fw\demo\user\temperature.c
00319a   0101     MOVLB     0x1                temperature._word = 0x0C87;       // 25 degree celsius                       C:\usb4all\fw\demo\user\temperature.c
00319c   0e87     MOVLW     0x87                                                                                            
00319e   6f1b     MOVWF     0x1b,0x1                                                                                        
0031a0   0e0c     MOVLW     0xc                                                                                             
0031a2   6f1c     MOVWF     0x1c,0x1                                                                                        
0031a4   efe5     GOTO      0x31ca             UpdateCelsiusASCII();                                                        C:\usb4all\fw\demo\user\temperature.c
0031a6   f018                                                                                                               
                                                                                                                            C:\usb4all\fw\demo\user\temperature.c
                                           }//end InitTempSensor                                                            C:\usb4all\fw\demo\user\temperature.c
                                                                                                                            C:\usb4all\fw\demo\user\temperature.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\temperature.c
                                            * Function:        void AcquireTemperature(void)                                C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * Overview:        None                                                         C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\temperature.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\temperature.c
                                           BOOL AcquireTemperature(void)                                                    C:\usb4all\fw\demo\user\temperature.c
                                           {                                                                                C:\usb4all\fw\demo\user\temperature.c
0031a8   948a     BCF       0x8a,0x2,0x0       cs_temp_sensor = 0;                                                          C:\usb4all\fw\demo\user\temperature.c
0031aa   ec63     CALL      0x2ec6,0x0         MSB(temperature) = ReadSPI();                                                C:\usb4all\fw\demo\user\temperature.c
0031ac   f017                                                                                                               
0031ae   0101     MOVLB     0x1                                                                                             
0031b0   6f1c     MOVWF     0x1c,0x1                                                                                        
0031b2   ec63     CALL      0x2ec6,0x0         LSB(temperature) = ReadSPI();                                                C:\usb4all\fw\demo\user\temperature.c
0031b4   f017                                                                                                               
0031b6   0101     MOVLB     0x1                                                                                             
0031b8   6f1b     MOVWF     0x1b,0x1                                                                                        
0031ba   848a     BSF       0x8a,0x2,0x0       cs_temp_sensor = 1;                                                          C:\usb4all\fw\demo\user\temperature.c
                                                                                                                            C:\usb4all\fw\demo\user\temperature.c
0031bc   b51b     BTFSC     0x1b,0x2,0x1       if(temperature.LowB.b2 == 0)                                                 C:\usb4all\fw\demo\user\temperature.c
0031be   d002     BRA       0x31c4                                                                                          
0031c0   0e00     MOVLW     0x0                    return FAIL;                                                             C:\usb4all\fw\demo\user\temperature.c
0031c2   d002     BRA       0x31c8                                                                                          
                                                                                                                            C:\usb4all\fw\demo\user\temperature.c
0031c4   0e01     MOVLW     0x1                return OK;                                                                   C:\usb4all\fw\demo\user\temperature.c
0031c6   d000     BRA       0x31c8                                                                                          
0031c8   0012     RETURN    0x0            }//end AcquireTemperature                                                        C:\usb4all\fw\demo\user\temperature.c
                                                                                                                            C:\usb4all\fw\demo\user\temperature.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\temperature.c
                                            * Function:        void UpdateCelsiusASCII(void)                                C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * Overview:        This routine converts data output to ASCII string            C:\usb4all\fw\demo\user\temperature.c
                                            *                                                                               C:\usb4all\fw\demo\user\temperature.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\temperature.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\temperature.c
0031ca   cfd9     MOVFF     0xfd9,0xfe6    void UpdateCelsiusASCII(void)                                                    C:\usb4all\fw\demo\user\temperature.c
0031cc   ffe6                                                                                                               
0031ce   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0031d0   ffd9                                                                                                               
0031d2   0e03     MOVLW     0x3                                                                                             
0031d4   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\usb4all\fw\demo\user\temperature.c
                                               WORD temp;                                                                   C:\usb4all\fw\demo\user\temperature.c
                                               byte i;                                                                      C:\usb4all\fw\demo\user\temperature.c
                                                                                                                            C:\usb4all\fw\demo\user\temperature.c
0031d6   c11b     MOVFF     0x11b,0x10         temp._word = temperature._word >> 3;                                         C:\usb4all\fw\demo\user\temperature.c
0031d8   f010                                                                                                               
0031da   c11c     MOVFF     0x11c,0x11                                                                                      
0031dc   f011                                                                                                               
0031de   90d8     BCF       0xd8,0x0,0x0                                                                                    
0031e0   3211     RRCF      0x11,0x1,0x0                                                                                    
0031e2   3210     RRCF      0x10,0x1,0x0                                                                                    
0031e4   04e8     DECF      0xe8,0x0,0x0                                                                                    
0031e6   e1fb     BNZ       0x31de                                                                                          
0031e8   c010     MOVFF     0x10,0xfde                                                                                      
0031ea   ffde                                                                                                               
0031ec   c011     MOVFF     0x11,0xfdd                                                                                      
0031ee   ffdd                                                                                                               
                                                                                                                            C:\usb4all\fw\demo\user\temperature.c
0031f0   50d9     MOVF      0xd9,0x0,0x0       if(temp.HighB.b4 == 0)                                                       C:\usb4all\fw\demo\user\temperature.c
0031f2   0f01     ADDLW     0x1                                                                                             
0031f4   6ee9     MOVWF     0xe9,0x0                                                                                        
0031f6   cfda     MOVFF     0xfda,0xfea                                                                                     
0031f8   ffea                                                                                                               
0031fa   50ef     MOVF      0xef,0x0,0x0                                                                                    
0031fc   0b10     ANDLW     0x10                                                                                            
0031fe   e108     BNZ       0x3210                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\user\temperature.c
003200   0e01     MOVLW     0x1                    temp.HighB._byte &= 0b00011111;                                          C:\usb4all\fw\demo\user\temperature.c
003202   9adb     BCF       0xdb,0x5,0x0                                                                                    
003204   9cdb     BCF       0xdb,0x6,0x0                                                                                    
003206   9edb     BCF       0xdb,0x7,0x0                                                                                    
003208   0101     MOVLB     0x1                    tempString[0] = '+';                                                     C:\usb4all\fw\demo\user\temperature.c
00320a   0e2b     MOVLW     0x2b                                                                                            
00320c   6f1d     MOVWF     0x1d,0x1                                                                                        
                                               }                                                                            C:\usb4all\fw\demo\user\temperature.c
00320e   d016     BRA       0x323c             else                                                                         C:\usb4all\fw\demo\user\temperature.c
                                               {                                                                            C:\usb4all\fw\demo\user\temperature.c
003210   0e01     MOVLW     0x1                    temp.HighB._byte |= 0b11100000;                                          C:\usb4all\fw\demo\user\temperature.c
003212   8adb     BSF       0xdb,0x5,0x0                                                                                    
003214   8cdb     BSF       0xdb,0x6,0x0                                                                                    
003216   8edb     BSF       0xdb,0x7,0x0                                                                                    
003218   0101     MOVLB     0x1                    tempString[0] = '-';                                                     C:\usb4all\fw\demo\user\temperature.c
00321a   0e2d     MOVLW     0x2d                                                                                            
00321c   6f1d     MOVWF     0x1d,0x1                                                                                        
00321e   cfde     MOVFF     0xfde,0x10             temp._word = temp._word ^ 0xFFFF;   // Negate                            C:\usb4all\fw\demo\user\temperature.c
003220   f010                                                                                                               
003222   cfdd     MOVFF     0xfdd,0x11                                                                                      
003224   f011                                                                                                               
003226   0eff     MOVLW     0xff                                                                                            
003228   1a10     XORWF     0x10,0x1,0x0                                                                                    
00322a   1a11     XORWF     0x11,0x1,0x0                                                                                    
00322c   c010     MOVFF     0x10,0xfde                                                                                      
00322e   ffde                                                                                                               
003230   c011     MOVFF     0x11,0xfdd                                                                                      
003232   ffdd                                                                                                               
003234   2adf     INCF      0xdf,0x1,0x0           temp._word++;                                                            C:\usb4all\fw\demo\user\temperature.c
003236   0e01     MOVLW     0x1                                                                                             
003238   e301     BNC       0x323c                                                                                          
00323a   2adb     INCF      0xdb,0x1,0x0                                                                                    
                                               }//end if                                                                    C:\usb4all\fw\demo\user\temperature.c
                                                                                                                            C:\usb4all\fw\demo\user\temperature.c
00323c   cfde     MOVFF     0xfde,0x10         temp._word = (temp._word*10U) >> 4;     // Turn into celsius xx.x            C:\usb4all\fw\demo\user\temperature.c
00323e   f010                                                                                                               
003240   cfdd     MOVFF     0xfdd,0x11                                                                                      
003242   f011                                                                                                               
003244   0e0a     MOVLW     0xa                                                                                             
003246   0211     MULWF     0x11,0x0                                                                                        
003248   cff3     MOVFF     0xff3,0x11                                                                                      
00324a   f011                                                                                                               
00324c   0210     MULWF     0x10,0x0                                                                                        
00324e   cff3     MOVFF     0xff3,0x10                                                                                      
003250   f010                                                                                                               
003252   50f4     MOVF      0xf4,0x0,0x0                                                                                    
003254   2611     ADDWF     0x11,0x1,0x0                                                                                    
003256   0e04     MOVLW     0x4                                                                                             
003258   90d8     BCF       0xd8,0x0,0x0                                                                                    
00325a   3211     RRCF      0x11,0x1,0x0                                                                                    
00325c   3210     RRCF      0x10,0x1,0x0                                                                                    
00325e   04e8     DECF      0xe8,0x0,0x0                                                                                    
003260   e1fb     BNZ       0x3258                                                                                          
003262   c010     MOVFF     0x10,0xfde                                                                                      
003264   ffde                                                                                                               
003266   c011     MOVFF     0x11,0xfdd                                                                                      
003268   ffdd                                                                                                               
                                                                                                                            C:\usb4all\fw\demo\user\temperature.c
                                               /* Populate string */                                                        C:\usb4all\fw\demo\user\temperature.c
00326a   0e04     MOVLW     0x4                for(i=4;i>0;i--)                                                             C:\usb4all\fw\demo\user\temperature.c
00326c   6ef3     MOVWF     0xf3,0x0                                                                                        
00326e   0e02     MOVLW     0x2                                                                                             
003270   cff3     MOVFF     0xff3,0xfdb                                                                                     
003272   ffdb                                                                                                               
003274   50db     MOVF      0xdb,0x0,0x0                                                                                    
003276   0800     SUBLW     0x0                                                                                             
003278   e233     BC        0x32e0                                                                                          
0032da   0e02     MOVLW     0x2                                                                                             
0032dc   06db     DECF      0xdb,0x1,0x0                                                                                    
0032de   d7ca     BRA       0x3274                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\user\temperature.c
00327a   cfde     MOVFF     0xfde,0x10             tempString[i] = (((char)(temp._word % 10)) & 0x0F) | 0x30;               C:\usb4all\fw\demo\user\temperature.c
00327c   f010                                                                                                               
00327e   cfdd     MOVFF     0xfdd,0x11                                                                                      
003280   f011                                                                                                               
003282   0e0a     MOVLW     0xa                                                                                             
003284   6e0b     MOVWF     0xb,0x0                                                                                         
003286   6a0c     CLRF      0xc,0x0                                                                                         
003288   c010     MOVFF     0x10,0x6                                                                                        
00328a   f006                                                                                                               
00328c   c011     MOVFF     0x11,0x7                                                                                        
00328e   f007                                                                                                               
003290   ec7a     CALL      0x2ef4,0x0                                                                                      
003292   f017                                                                                                               
003294   c002     MOVFF     0x2,0x10                                                                                        
003296   f010                                                                                                               
003298   c003     MOVFF     0x3,0x11                                                                                        
00329a   f011                                                                                                               
00329c   0e0f     MOVLW     0xf                                                                                             
00329e   1410     ANDWF     0x10,0x0,0x0                                                                                    
0032a0   0930     IORLW     0x30                                                                                            
0032a2   6ee6     MOVWF     0xe6,0x0                                                                                        
0032a4   0e02     MOVLW     0x2                                                                                             
0032a6   50db     MOVF      0xdb,0x0,0x0                                                                                    
0032a8   6aea     CLRF      0xea,0x0                                                                                        
0032aa   0f1d     ADDLW     0x1d                                                                                            
0032ac   6ee9     MOVWF     0xe9,0x0                                                                                        
0032ae   0e01     MOVLW     0x1                                                                                             
0032b0   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0032b2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0032b4   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0032b6   6eef     MOVWF     0xef,0x0                                                                                        
0032b8   cfd9     MOVFF     0xfd9,0xfe9            temp._word /= 10;                                                        C:\usb4all\fw\demo\user\temperature.c
0032ba   ffe9                                                                                                               
0032bc   cfda     MOVFF     0xfda,0xfea                                                                                     
0032be   ffea                                                                                                               
0032c0   0e0a     MOVLW     0xa                                                                                             
0032c2   6e0b     MOVWF     0xb,0x0                                                                                         
0032c4   6a0c     CLRF      0xc,0x0                                                                                         
0032c6   cfee     MOVFF     0xfee,0x6                                                                                       
0032c8   f006                                                                                                               
0032ca   cfed     MOVFF     0xfed,0x7                                                                                       
0032cc   f007                                                                                                               
0032ce   ec7a     CALL      0x2ef4,0x0                                                                                      
0032d0   f017                                                                                                               
0032d2   c006     MOVFF     0x6,0xfee                                                                                       
0032d4   ffee                                                                                                               
0032d6   c007     MOVFF     0x7,0xfed                                                                                       
0032d8   ffed                                                                                                               
                                               }//end for                                                                   C:\usb4all\fw\demo\user\temperature.c
                                                                                                                            C:\usb4all\fw\demo\user\temperature.c
                                               /* Turn leading zeros into spaces */                                         C:\usb4all\fw\demo\user\temperature.c
0032e0   0e30     MOVLW     0x30               if(tempString[1] == '0')                                                     C:\usb4all\fw\demo\user\temperature.c
0032e2   0101     MOVLB     0x1                                                                                             
0032e4   5d1e     SUBWF     0x1e,0x0,0x1                                                                                    
0032e6   e107     BNZ       0x32f6                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\user\temperature.c
0032e8   0e20     MOVLW     0x20                   tempString[1] = ' ';                                                     C:\usb4all\fw\demo\user\temperature.c
0032ea   6f1e     MOVWF     0x1e,0x1                                                                                        
0032ec   0e30     MOVLW     0x30                   if(tempString[2] == '0')                                                 C:\usb4all\fw\demo\user\temperature.c
0032ee   5d1f     SUBWF     0x1f,0x0,0x1                                                                                    
0032f0   e102     BNZ       0x32f6                                                                                          
0032f2   0e20     MOVLW     0x20                       tempString[2] = ' ';                                                 C:\usb4all\fw\demo\user\temperature.c
0032f4   6f1f     MOVWF     0x1f,0x1                                                                                        
                                               }//end if                                                                    C:\usb4all\fw\demo\user\temperature.c
                                                                                                                            C:\usb4all\fw\demo\user\temperature.c
                                               /* Adjust decimal digit */                                                   C:\usb4all\fw\demo\user\temperature.c
0032f6   c121     MOVFF     0x121,0x122        tempString[5] = tempString[4];                                               C:\usb4all\fw\demo\user\temperature.c
0032f8   f122                                                                                                               
0032fa   0e2e     MOVLW     0x2e               tempString[4]='.';                                                           C:\usb4all\fw\demo\user\temperature.c
0032fc   6f21     MOVWF     0x21,0x1                                                                                        
0032fe   0ef8     MOVLW     0xf8               tempString[6]=0xF8;     // Degree symbol                                     C:\usb4all\fw\demo\user\temperature.c
003300   6f23     MOVWF     0x23,0x1                                                                                        
003302   0e43     MOVLW     0x43               tempString[7]='C';                                                           C:\usb4all\fw\demo\user\temperature.c
003304   6f24     MOVWF     0x24,0x1                                                                                        
003306   0e0d     MOVLW     0xd                tempString[8]='\r';                                                          C:\usb4all\fw\demo\user\temperature.c
003308   6f25     MOVWF     0x25,0x1                                                                                        
00330a   6b26     CLRF      0x26,0x1           tempString[9]=0x00;     // Null-Terminated                                   C:\usb4all\fw\demo\user\temperature.c
                                                                                                                            C:\usb4all\fw\demo\user\temperature.c
00330c   0e03     MOVLW     0x3            }//end UpdateCelsiusASCII                                                        C:\usb4all\fw\demo\user\temperature.c
00330e   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
003310   e202     BC        0x3316                                                                                          
003312   6ae1     CLRF      0xe1,0x0                                                                                        
003314   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003316   6ee1     MOVWF     0xe1,0x0                                                                                        
003318   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00331a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00331c   ffd9                                                                                                               
00331e   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\temperature.c
                                           /** EOF temperature.c ********************************************************/  C:\usb4all\fw\demo\user\temperature.c
                                           /* Author               Date        Comment                                      C:\usb4all\fw\demo\user\handlerManager.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\usb4all\fw\demo\user\handlerManager.c
                                            * Rafael Fernandez    10/03/07     Original.                                    C:\usb4all\fw\demo\user\handlerManager.c
                                            * Andres Aguirre	   27/03/07 	                                                  C:\usb4all\fw\demo\user\handlerManager.c
                                            ********************************************************************/           C:\usb4all\fw\demo\user\handlerManager.c
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\user\handlerManager.c
                                           #include <p18cxxx.h>                                                             C:\usb4all\fw\demo\user\handlerManager.c
                                           #include <usart.h>                                                               C:\usb4all\fw\demo\user\handlerManager.c
                                           #include "system\typedefs.h"                                                     C:\usb4all\fw\demo\user\handlerManager.c
                                           #include "system\usb\usb.h"                                                      C:\usb4all\fw\demo\user\handlerManager.c
                                           #include "user\defines.h"                                                        C:\usb4all\fw\demo\user\handlerManager.c
                                           #include "user\loaderModule.h"                                                   C:\usb4all\fw\demo\user\handlerManager.c
                                           #include "io_cfg.h"             // I/O pin mapping                               C:\usb4all\fw\demo\user\handlerManager.c
                                           #include "user\adminModule.h"                                                    C:\usb4all\fw\demo\user\handlerManager.c
                                           #include "user\handlerManager.h"                                                 C:\usb4all\fw\demo\user\handlerManager.c
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\user\handlerManager.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\user\handlerManager.c
                                           unsigned char ram_max_ep_number;                                                 C:\usb4all\fw\demo\user\handlerManager.c
                                           epHandlerMapItem epHandlerMap[MAX_HANDLERS];                                     C:\usb4all\fw\demo\user\handlerManager.c
                                           HM_DATA_PACKET_HEADER hmDataPacketHeader;                                        C:\usb4all\fw\demo\user\handlerManager.c
                                           byte* HandlerReceiveBuffer[MAX_HANDLERS];                                        C:\usb4all\fw\demo\user\handlerManager.c
                                           void (*handlerReceivedFuncion[MAX_HANDLERS]) (byte*,byte) ;//arreglo de punteros a las funcioens received de los modulos C:\usb4all\fw\demo\user\handlerManager.c
                                           					 //TODO hacer un struct junto con los buffers;                              C:\usb4all\fw\demo\user\handlerManager.c
                                           HANDLER_OPTYPE hn_opType;                                                        C:\usb4all\fw\demo\user\handlerManager.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\user\handlerManager.c
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\user\handlerManager.c
                                           #pragma code                                                                     C:\usb4all\fw\demo\user\handlerManager.c
                                           /*                                                                               C:\usb4all\fw\demo\user\handlerManager.c
                                           void initHandlerBuffers(void){                                                   C:\usb4all\fw\demo\user\handlerManager.c
                                           	//TODO sacar hardcodeo e inicializar en forma adecuada                          C:\usb4all\fw\demo\user\handlerManager.c
                                           	HandlerReceiveBuffer[0]=userGetReadBuffer();                                    C:\usb4all\fw\demo\user\handlerManager.c
                                           }                                                                                C:\usb4all\fw\demo\user\handlerManager.c
                                           */                                                                               C:\usb4all\fw\demo\user\handlerManager.c
002328   cfd9     MOVFF     0xfd9,0xfe6    void setHandlerReceiveBuffer(byte handler, byte *rb){                            C:\usb4all\fw\demo\user\handlerManager.c
00232a   ffe6                                                                                                               
00232c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00232e   ffd9                                                                                                               
002330   0efe     MOVLW     0xfe           	HandlerReceiveBuffer[handler] = rb;                                             C:\usb4all\fw\demo\user\handlerManager.c
002332   6aea     CLRF      0xea,0x0                                                                                        
002334   34db     RLCF      0xdb,0x0,0x0                                                                                    
002336   0bfe     ANDLW     0xfe                                                                                            
002338   36ea     RLCF      0xea,0x1,0x0                                                                                    
00233a   6ee9     MOVWF     0xe9,0x0                                                                                        
00233c   0ea4     MOVLW     0xa4                                                                                            
00233e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002340   0e00     MOVLW     0x0                                                                                             
002342   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002344   0efc     MOVLW     0xfc                                                                                            
002346   cfdb     MOVFF     0xfdb,0xfee                                                                                     
002348   ffee                                                                                                               
00234a   0efd     MOVLW     0xfd                                                                                            
00234c   cfdb     MOVFF     0xfdb,0xfed                                                                                     
00234e   ffed                                                                                                               
002350   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\handlerManager.c
002352   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002354   ffd9                                                                                                               
002356   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
002358   cfd9     MOVFF     0xfd9,0xfe6    void unsetHandlerReceiveBuffer(byte handler){                                    C:\usb4all\fw\demo\user\handlerManager.c
00235a   ffe6                                                                                                               
00235c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00235e   ffd9                                                                                                               
002360   0efe     MOVLW     0xfe           	HandlerReceiveBuffer[handler] = 0; //TODO poner NULL                            C:\usb4all\fw\demo\user\handlerManager.c
002362   6aea     CLRF      0xea,0x0                                                                                        
002364   34db     RLCF      0xdb,0x0,0x0                                                                                    
002366   0bfe     ANDLW     0xfe                                                                                            
002368   36ea     RLCF      0xea,0x1,0x0                                                                                    
00236a   6ee9     MOVWF     0xe9,0x0                                                                                        
00236c   0ea4     MOVLW     0xa4                                                                                            
00236e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002370   0e00     MOVLW     0x0                                                                                             
002372   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002374   6aee     CLRF      0xee,0x0                                                                                        
002376   6aed     CLRF      0xed,0x0                                                                                        
002378   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\handlerManager.c
00237a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00237c   ffd9                                                                                                               
00237e   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
002380   cfd9     MOVFF     0xfd9,0xfe6    void setHandlerReceiveFunction(byte handler,void (*pf) (byte*,byte)){            C:\usb4all\fw\demo\user\handlerManager.c
002382   ffe6                                                                                                               
002384   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002386   ffd9                                                                                                               
002388   0efe     MOVLW     0xfe           	handlerReceivedFuncion[handler] = pf;                                           C:\usb4all\fw\demo\user\handlerManager.c
00238a   6aea     CLRF      0xea,0x0                                                                                        
00238c   34db     RLCF      0xdb,0x0,0x0                                                                                    
00238e   0bfe     ANDLW     0xfe                                                                                            
002390   36ea     RLCF      0xea,0x1,0x0                                                                                    
002392   6ee9     MOVWF     0xe9,0x0                                                                                        
002394   0ec4     MOVLW     0xc4                                                                                            
002396   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002398   0e00     MOVLW     0x0                                                                                             
00239a   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00239c   0efc     MOVLW     0xfc                                                                                            
00239e   cfdb     MOVFF     0xfdb,0xfee                                                                                     
0023a0   ffee                                                                                                               
0023a2   0efd     MOVLW     0xfd                                                                                            
0023a4   cfdb     MOVFF     0xfdb,0xfed                                                                                     
0023a6   ffed                                                                                                               
0023a8   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\handlerManager.c
0023aa   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0023ac   ffd9                                                                                                               
0023ae   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
0023b0   cfd9     MOVFF     0xfd9,0xfe6    void unsetHandlerReceiveFunction(byte handler){                                  C:\usb4all\fw\demo\user\handlerManager.c
0023b2   ffe6                                                                                                               
0023b4   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0023b6   ffd9                                                                                                               
0023b8   0efe     MOVLW     0xfe           	handlerReceivedFuncion[handler] = 0; //TODO poner NULL                          C:\usb4all\fw\demo\user\handlerManager.c
0023ba   6aea     CLRF      0xea,0x0                                                                                        
0023bc   34db     RLCF      0xdb,0x0,0x0                                                                                    
0023be   0bfe     ANDLW     0xfe                                                                                            
0023c0   36ea     RLCF      0xea,0x1,0x0                                                                                    
0023c2   6ee9     MOVWF     0xe9,0x0                                                                                        
0023c4   0ec4     MOVLW     0xc4                                                                                            
0023c6   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0023c8   0e00     MOVLW     0x0                                                                                             
0023ca   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0023cc   6aee     CLRF      0xee,0x0                                                                                        
0023ce   6aed     CLRF      0xed,0x0                                                                                        
0023d0   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\handlerManager.c
0023d2   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0023d4   ffd9                                                                                                               
0023d6   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
0023d8   cfd9     MOVFF     0xfd9,0xfe6    void checkHandlerManagerIO(void){                                                C:\usb4all\fw\demo\user\handlerManager.c
0023da   ffe6                                                                                                               
0023dc   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0023de   ffd9                                                                                                               
0023e0   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                               byte dataSize;                                                               C:\usb4all\fw\demo\user\handlerManager.c
                                               //por ahora hago polling del endpoint, despues el modulo proxy usb           C:\usb4all\fw\demo\user\handlerManager.c
                                           	//me va a llamar con los parametros adecuados luego de mirar el header          C:\usb4all\fw\demo\user\handlerManager.c
                                           	/*                                                                              C:\usb4all\fw\demo\user\handlerManager.c
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
                                               if(USBGenRead((byte*)&hmDataPacket,sizeof(hmDataPacket))){                   C:\usb4all\fw\demo\user\handlerManager.c
                                           		//chequeo el header para ver a quien debo enviar la peticion                   C:\usb4all\fw\demo\user\handlerManager.c
                                           		//por ahora simplemente llamo a la funcion del user.c                          C:\usb4all\fw\demo\user\handlerManager.c
                                           		//despues hay que inicializar arreglo de punteros a funciones.                 C:\usb4all\fw\demo\user\handlerManager.c
                                           		dataSize = hmDataPacket.header.pLength;                                        C:\usb4all\fw\demo\user\handlerManager.c
                                           		//userReceive(hmDataPacket.data,dataSize);                                     C:\usb4all\fw\demo\user\handlerManager.c
                                           	}                                                                               C:\usb4all\fw\demo\user\handlerManager.c
                                           	*/                                                                              C:\usb4all\fw\demo\user\handlerManager.c
                                           	                                                                                C:\usb4all\fw\demo\user\handlerManager.c
0023e2   52e5     MOVF      0xe5,0x1,0x0   }//end ServiceRequests                                                           C:\usb4all\fw\demo\user\handlerManager.c
0023e4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0023e6   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0023e8   ffd9                                                                                                               
0023ea   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
0023ec   cfd9     MOVFF     0xfd9,0xfe6    void USBGenRead2(void)                                                           C:\usb4all\fw\demo\user\handlerManager.c
0023ee   ffe6                                                                                                               
0023f0   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0023f2   ffd9                                                                                                               
0023f4   0e09     MOVLW     0x9                                                                                             
0023f6   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\usb4all\fw\demo\user\handlerManager.c
0023f8   6adf     CLRF      0xdf,0x0           byte usbgen_rx_len = 0;                                                      C:\usb4all\fw\demo\user\handlerManager.c
                                           	byte len;                                                                       C:\usb4all\fw\demo\user\handlerManager.c
                                           	epHandlerMapItem hmi;                                                           C:\usb4all\fw\demo\user\handlerManager.c
                                           	byte ep;                                                                        C:\usb4all\fw\demo\user\handlerManager.c
                                           	//byte* buffer;                                                                 C:\usb4all\fw\demo\user\handlerManager.c
                                           	HM_DATA_PACKET_HEADER* dph;                                                     C:\usb4all\fw\demo\user\handlerManager.c
0023fa   0e06     MOVLW     0x6            	if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;         C:\usb4all\fw\demo\user\handlerManager.c
0023fc   0101     MOVLB     0x1                                                                                             
0023fe   5d72     SUBWF     0x72,0x0,0x1                                                                                    
002400   e303     BNC       0x2408                                                                                          
002402   506d     MOVF      0x6d,0x0,0x0                                                                                    
002404   0b02     ANDLW     0x2                                                                                             
002406   e001     BZ        0x240a                                                                                          
002408   d127     BRA       0x2658                                                                                          
                                           	//TODO: len deberia ser el max mtu del endpoint a leer                          C:\usb4all\fw\demo\user\handlerManager.c
00240a   0e01     MOVLW     0x1            	len = PACKET_MTU-1;                                                             C:\usb4all\fw\demo\user\handlerManager.c
00240c   68db     SETF      0xdb,0x0                                                                                        
                                           	                                                                                C:\usb4all\fw\demo\user\handlerManager.c
00240e   6ef3     MOVWF     0xf3,0x0       	for(ep=1;ep<=ram_max_ep_number;ep++){                                           C:\usb4all\fw\demo\user\handlerManager.c
002410   0e06     MOVLW     0x6                                                                                             
002412   cff3     MOVFF     0xff3,0xfdb                                                                                     
002414   ffdb                                                                                                               
002416   cfdb     MOVFF     0xfdb,0x10                                                                                      
002418   f010                                                                                                               
00241a   0100     MOVLB     0x0                                                                                             
00241c   5160     MOVF      0x60,0x0,0x1                                                                                    
00241e   80d8     BSF       0xd8,0x0,0x0                                                                                    
002420   5410     SUBFWB    0x10,0x0,0x0                                                                                    
002422   e201     BC        0x2426                                                                                          
002424   d119     BRA       0x2658                                                                                          
002652   0e06     MOVLW     0x6                                                                                             
002654   2adb     INCF      0xdb,0x1,0x0                                                                                    
002656   d6df     BRA       0x2416                                                                                          
002426   0e06     MOVLW     0x6            		if(!EPOUT_IS_BUSY(ep))                                                         C:\usb4all\fw\demo\user\handlerManager.c
002428   50db     MOVF      0xdb,0x0,0x0                                                                                    
00242a   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
00242c   0d04     MULLW     0x4                                                                                             
00242e   cff3     MOVFF     0xff3,0xfe9                                                                                     
002430   ffe9                                                                                                               
002432   cff4     MOVFF     0xff4,0xfea                                                                                     
002434   ffea                                                                                                               
002436   0e00     MOVLW     0x0                                                                                             
002438   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00243a   0e04     MOVLW     0x4                                                                                             
00243c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00243e   50ef     MOVF      0xef,0x0,0x0                                                                                    
002440   0b80     ANDLW     0x80                                                                                            
002442   e001     BZ        0x2446                                                                                          
002444   d106     BRA       0x2652                                                                                          
                                           	    {                                                                           C:\usb4all\fw\demo\user\handlerManager.c
                                           	        /*                                                                      C:\usb4all\fw\demo\user\handlerManager.c
                                           	         * Adjust the expected number of bytes to equal                         C:\usb4all\fw\demo\user\handlerManager.c
                                           	         * the actual number of bytes received.                                 C:\usb4all\fw\demo\user\handlerManager.c
                                           	         */                                                                     C:\usb4all\fw\demo\user\handlerManager.c
002446   0e01     MOVLW     0x1            	        if(len > EPOUT_SIZE(ep))                                                C:\usb4all\fw\demo\user\handlerManager.c
002448   cfdb     MOVFF     0xfdb,0x10                                                                                      
00244a   f010                                                                                                               
00244c   0e06     MOVLW     0x6                                                                                             
00244e   50db     MOVF      0xdb,0x0,0x0                                                                                    
002450   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
002452   0d04     MULLW     0x4                                                                                             
002454   cff3     MOVFF     0xff3,0xfe9                                                                                     
002456   ffe9                                                                                                               
002458   cff4     MOVFF     0xff4,0xfea                                                                                     
00245a   ffea                                                                                                               
00245c   0e00     MOVLW     0x0                                                                                             
00245e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002460   0e04     MOVLW     0x4                                                                                             
002462   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002464   52ee     MOVF      0xee,0x1,0x0                                                                                    
002466   50ef     MOVF      0xef,0x0,0x0                                                                                    
002468   80d8     BSF       0xd8,0x0,0x0                                                                                    
00246a   5410     SUBFWB    0x10,0x0,0x0                                                                                    
00246c   e210     BC        0x248e                                                                                          
00246e   0e06     MOVLW     0x6            	            len = EPOUT_SIZE(ep);                                               C:\usb4all\fw\demo\user\handlerManager.c
002470   50db     MOVF      0xdb,0x0,0x0                                                                                    
002472   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
002474   0d04     MULLW     0x4                                                                                             
002476   cff3     MOVFF     0xff3,0xfe9                                                                                     
002478   ffe9                                                                                                               
00247a   cff4     MOVFF     0xff4,0xfea                                                                                     
00247c   ffea                                                                                                               
00247e   0e00     MOVLW     0x0                                                                                             
002480   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002482   0e04     MOVLW     0x4                                                                                             
002484   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002486   52ee     MOVF      0xee,0x1,0x0                                                                                    
002488   0e01     MOVLW     0x1                                                                                             
00248a   cfef     MOVFF     0xfef,0xfdb                                                                                     
00248c   ffdb                                                                                                               
                                           	                                                                                C:\usb4all\fw\demo\user\handlerManager.c
                                           			//antes de copiar el dato en el buffer tengo que mirar de que                 C:\usb4all\fw\demo\user\handlerManager.c
                                           			//handler es y pedir el buffer de receive del modulo de usuario               C:\usb4all\fw\demo\user\handlerManager.c
00248e   0e06     MOVLW     0x6            	        dph = (HM_DATA_PACKET_HEADER*)EPBUFFEROUT(ep);                          C:\usb4all\fw\demo\user\handlerManager.c
002490   50db     MOVF      0xdb,0x0,0x0                                                                                    
002492   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
002494   0d04     MULLW     0x4                                                                                             
002496   cff3     MOVFF     0xff3,0xfe9                                                                                     
002498   ffe9                                                                                                               
00249a   cff4     MOVFF     0xff4,0xfea                                                                                     
00249c   ffea                                                                                                               
00249e   0e00     MOVLW     0x0                                                                                             
0024a0   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0024a2   0e04     MOVLW     0x4                                                                                             
0024a4   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0024a6   0e02     MOVLW     0x2                                                                                             
0024a8   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0024aa   0e00     MOVLW     0x0                                                                                             
0024ac   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0024ae   0e07     MOVLW     0x7                                                                                             
0024b0   cfee     MOVFF     0xfee,0xfdb                                                                                     
0024b2   ffdb                                                                                                               
0024b4   0e08     MOVLW     0x8                                                                                             
0024b6   cfed     MOVFF     0xfed,0xfdb                                                                                     
0024b8   ffdb                                                                                                               
                                           			//TODO chequear que el handler number sea valido, sino hacer algo tipo error  C:\usb4all\fw\demo\user\handlerManager.c
                                           			//buffer=HandlerReceiveBuffer[dph->handlerNumber];                            C:\usb4all\fw\demo\user\handlerManager.c
                                           	        //aviso al modulo de usuario respectivo que tengo datos                 C:\usb4all\fw\demo\user\handlerManager.c
                                           			//hmi = epHandlerMap[dph->handlerNumber];                                     C:\usb4all\fw\demo\user\handlerManager.c
                                           			//ep = hmi.ep.EPNum;                                                          C:\usb4all\fw\demo\user\handlerManager.c
0024ba   0e07     MOVLW     0x7            	  		handlerReceivedFuncion[dph->handlerNumber](EPBUFFEROUT(ep)+SIZE__HM_DATA_PACKET_HEADER,len-SIZE__HM_DATA_PACKET_HEADER); C:\usb4all\fw\demo\user\handlerManager.c
0024bc   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0024be   ffe9                                                                                                               
0024c0   0e08     MOVLW     0x8                                                                                             
0024c2   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0024c4   ffea                                                                                                               
0024c6   50ef     MOVF      0xef,0x0,0x0                                                                                    
0024c8   0bf8     ANDLW     0xf8                                                                                            
0024ca   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
0024cc   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
0024ce   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
0024d0   6ee9     MOVWF     0xe9,0x0                                                                                        
0024d2   6aea     CLRF      0xea,0x0                                                                                        
0024d4   90d8     BCF       0xd8,0x0,0x0                                                                                    
0024d6   36e9     RLCF      0xe9,0x1,0x0                                                                                    
0024d8   36ea     RLCF      0xea,0x1,0x0                                                                                    
0024da   0ec4     MOVLW     0xc4                                                                                            
0024dc   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0024de   0e00     MOVLW     0x0                                                                                             
0024e0   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0024e2   cfee     MOVFF     0xfee,0x10                                                                                      
0024e4   f010                                                                                                               
0024e6   cfef     MOVFF     0xfef,0x11                                                                                      
0024e8   f011                                                                                                               
0024ea   0e01     MOVLW     0x1                                                                                             
0024ec   50db     MOVF      0xdb,0x0,0x0                                                                                    
0024ee   0ffd     ADDLW     0xfd                                                                                            
0024f0   6ee6     MOVWF     0xe6,0x0                                                                                        
0024f2   0e06     MOVLW     0x6                                                                                             
0024f4   50db     MOVF      0xdb,0x0,0x0                                                                                    
0024f6   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
0024f8   0d04     MULLW     0x4                                                                                             
0024fa   cff3     MOVFF     0xff3,0xfe9                                                                                     
0024fc   ffe9                                                                                                               
0024fe   cff4     MOVFF     0xff4,0xfea                                                                                     
002500   ffea                                                                                                               
002502   0e00     MOVLW     0x0                                                                                             
002504   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002506   0e04     MOVLW     0x4                                                                                             
002508   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00250a   0e02     MOVLW     0x2                                                                                             
00250c   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00250e   0e00     MOVLW     0x0                                                                                             
002510   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002512   cfee     MOVFF     0xfee,0x12                                                                                      
002514   f012                                                                                                               
002516   cfef     MOVFF     0xfef,0x13                                                                                      
002518   f013                                                                                                               
00251a   0e03     MOVLW     0x3                                                                                             
00251c   2612     ADDWF     0x12,0x1,0x0                                                                                    
00251e   0e00     MOVLW     0x0                                                                                             
002520   2213     ADDWFC    0x13,0x1,0x0                                                                                    
002522   c012     MOVFF     0x12,0xfe6                                                                                      
002524   ffe6                                                                                                               
002526   c013     MOVFF     0x13,0xfe6                                                                                      
002528   ffe6                                                                                                               
00252a   d004     BRA       0x2534                                                                                          
00252c   c011     MOVFF     0x11,0xffa                                                                                      
00252e   fffa                                                                                                               
002530   5010     MOVF      0x10,0x0,0x0                                                                                    
002532   6ef9     MOVWF     0xf9,0x0                                                                                        
002534   dffb     RCALL     0x252c                                                                                          
002536   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002538   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00253a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           			/*                                                                            C:\usb4all\fw\demo\user\handlerManager.c
                                           	         * Prepare dual-ram buffer for next OUT transaction                     C:\usb4all\fw\demo\user\handlerManager.c
                                           	         */                                                                     C:\usb4all\fw\demo\user\handlerManager.c
                                           	        //EPOUT_SIZE(ep) = sizeof(usbgen_out);                                  C:\usb4all\fw\demo\user\handlerManager.c
00253c   0e06     MOVLW     0x6            			EPOUT_SIZE(ep) = getEPSizeOUT( ep);                                           C:\usb4all\fw\demo\user\handlerManager.c
00253e   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
002540   ffe6                                                                                                               
002542   ecce     CALL      0x2d9c,0x0                                                                                      
002544   f016                                                                                                               
002546   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002548   6ee6     MOVWF     0xe6,0x0                                                                                        
00254a   0e06     MOVLW     0x6                                                                                             
00254c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00254e   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
002550   0d04     MULLW     0x4                                                                                             
002552   cff3     MOVFF     0xff3,0xfe9                                                                                     
002554   ffe9                                                                                                               
002556   cff4     MOVFF     0xff4,0xfea                                                                                     
002558   ffea                                                                                                               
00255a   0e00     MOVLW     0x0                                                                                             
00255c   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00255e   0e04     MOVLW     0x4                                                                                             
002560   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002562   52ee     MOVF      0xee,0x1,0x0                                                                                    
002564   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002566   50e7     MOVF      0xe7,0x0,0x0                                                                                    
002568   6eef     MOVWF     0xef,0x0                                                                                        
                                           	        //mUSBBufferReady(USBGEN_BD_OUT);                                       C:\usb4all\fw\demo\user\handlerManager.c
00256a   0e03     MOVLW     0x3            			if (ep<3){                                                                    C:\usb4all\fw\demo\user\handlerManager.c
00256c   6ef3     MOVWF     0xf3,0x0                                                                                        
00256e   0e06     MOVLW     0x6                                                                                             
002570   cfdb     MOVFF     0xfdb,0xff4                                                                                     
002572   fff4                                                                                                               
002574   50f3     MOVF      0xf3,0x0,0x0                                                                                    
002576   5cf4     SUBWF     0xf4,0x0,0x0                                                                                    
002578   e24c     BC        0x2612                                                                                          
00257a   0e40     MOVLW     0x40           				mUSBBufferReady2(EPOUT_BDT(ep));                                             C:\usb4all\fw\demo\user\handlerManager.c
00257c   6e10     MOVWF     0x10,0x0                                                                                        
00257e   0e06     MOVLW     0x6                                                                                             
002580   50db     MOVF      0xdb,0x0,0x0                                                                                    
002582   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
002584   0d04     MULLW     0x4                                                                                             
002586   cff3     MOVFF     0xff3,0xfe9                                                                                     
002588   ffe9                                                                                                               
00258a   cff4     MOVFF     0xff4,0xfea                                                                                     
00258c   ffea                                                                                                               
00258e   0e00     MOVLW     0x0                                                                                             
002590   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002592   0e04     MOVLW     0x4                                                                                             
002594   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002596   5010     MOVF      0x10,0x0,0x0                                                                                    
002598   16ef     ANDWF     0xef,0x1,0x0                                                                                    
00259a   0e06     MOVLW     0x6                                                                                             
00259c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00259e   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
0025a0   0d04     MULLW     0x4                                                                                             
0025a2   cff3     MOVFF     0xff3,0xfe9                                                                                     
0025a4   ffe9                                                                                                               
0025a6   cff4     MOVFF     0xff4,0xfea                                                                                     
0025a8   ffea                                                                                                               
0025aa   0e00     MOVLW     0x0                                                                                             
0025ac   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0025ae   0e04     MOVLW     0x4                                                                                             
0025b0   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0025b2   50ef     MOVF      0xef,0x0,0x0                                                                                    
0025b4   0b40     ANDLW     0x40                                                                                            
0025b6   0a40     XORLW     0x40                                                                                            
0025b8   e001     BZ        0x25bc                                                                                          
0025ba   0e01     MOVLW     0x1                                                                                             
0025bc   6e10     MOVWF     0x10,0x0                                                                                        
0025be   0e06     MOVLW     0x6                                                                                             
0025c0   50db     MOVF      0xdb,0x0,0x0                                                                                    
0025c2   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
0025c4   0d04     MULLW     0x4                                                                                             
0025c6   cff3     MOVFF     0xff3,0xfe9                                                                                     
0025c8   ffe9                                                                                                               
0025ca   cff4     MOVFF     0xff4,0xfea                                                                                     
0025cc   ffea                                                                                                               
0025ce   0e00     MOVLW     0x0                                                                                             
0025d0   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0025d2   0e04     MOVLW     0x4                                                                                             
0025d4   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0025d6   5010     MOVF      0x10,0x0,0x0                                                                                    
0025d8   0b01     ANDLW     0x1                                                                                             
0025da   6ef3     MOVWF     0xf3,0x0                                                                                        
0025dc   46f3     RLNCF     0xf3,0x1,0x0                                                                                    
0025de   46f3     RLNCF     0xf3,0x1,0x0                                                                                    
0025e0   46f3     RLNCF     0xf3,0x1,0x0                                                                                    
0025e2   46f3     RLNCF     0xf3,0x1,0x0                                                                                    
0025e4   46f3     RLNCF     0xf3,0x1,0x0                                                                                    
0025e6   46f3     RLNCF     0xf3,0x1,0x0                                                                                    
0025e8   0ebf     MOVLW     0xbf                                                                                            
0025ea   14ef     ANDWF     0xef,0x0,0x0                                                                                    
0025ec   10f3     IORWF     0xf3,0x0,0x0                                                                                    
0025ee   6eef     MOVWF     0xef,0x0                                                                                        
0025f0   0e88     MOVLW     0x88                                                                                            
0025f2   6e10     MOVWF     0x10,0x0                                                                                        
0025f4   0e06     MOVLW     0x6                                                                                             
0025f6   50db     MOVF      0xdb,0x0,0x0                                                                                    
0025f8   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
0025fa   0d04     MULLW     0x4                                                                                             
0025fc   cff3     MOVFF     0xff3,0xfe9                                                                                     
0025fe   ffe9                                                                                                               
002600   cff4     MOVFF     0xff4,0xfea                                                                                     
002602   ffea                                                                                                               
002604   0e00     MOVLW     0x0                                                                                             
002606   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002608   0e04     MOVLW     0x4                                                                                             
00260a   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00260c   5010     MOVF      0x10,0x0,0x0                                                                                    
00260e   12ef     IORWF     0xef,0x1,0x0                                                                                    
002610   d020     BRA       0x2652         			}else{                                                                        C:\usb4all\fw\demo\user\handlerManager.c
002612   0e40     MOVLW     0x40           				mUSBBufferReady3(EPOUT_BDT(ep));                                             C:\usb4all\fw\demo\user\handlerManager.c
002614   6e10     MOVWF     0x10,0x0                                                                                        
002616   0e06     MOVLW     0x6                                                                                             
002618   50db     MOVF      0xdb,0x0,0x0                                                                                    
00261a   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
00261c   0d04     MULLW     0x4                                                                                             
00261e   cff3     MOVFF     0xff3,0xfe9                                                                                     
002620   ffe9                                                                                                               
002622   cff4     MOVFF     0xff4,0xfea                                                                                     
002624   ffea                                                                                                               
002626   0e00     MOVLW     0x0                                                                                             
002628   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00262a   0e04     MOVLW     0x4                                                                                             
00262c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00262e   5010     MOVF      0x10,0x0,0x0                                                                                    
002630   16ef     ANDWF     0xef,0x1,0x0                                                                                    
002632   0e88     MOVLW     0x88                                                                                            
002634   6e10     MOVWF     0x10,0x0                                                                                        
002636   0e06     MOVLW     0x6                                                                                             
002638   50db     MOVF      0xdb,0x0,0x0                                                                                    
00263a   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
00263c   0d04     MULLW     0x4                                                                                             
00263e   cff3     MOVFF     0xff3,0xfe9                                                                                     
002640   ffe9                                                                                                               
002642   cff4     MOVFF     0xff4,0xfea                                                                                     
002644   ffea                                                                                                               
002646   0e00     MOVLW     0x0                                                                                             
002648   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00264a   0e04     MOVLW     0x4                                                                                             
00264c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00264e   5010     MOVF      0x10,0x0,0x0                                                                                    
002650   12ef     IORWF     0xef,0x1,0x0                                                                                    
                                           			}                                                                             C:\usb4all\fw\demo\user\handlerManager.c
                                           			                                                                              C:\usb4all\fw\demo\user\handlerManager.c
                                           	    }//end if                                                                   C:\usb4all\fw\demo\user\handlerManager.c
                                           	}                                                                               C:\usb4all\fw\demo\user\handlerManager.c
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
002658   0e09     MOVLW     0x9            }//end USBGenRead                                                                C:\usb4all\fw\demo\user\handlerManager.c
00265a   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
00265c   e202     BC        0x2662                                                                                          
00265e   6ae1     CLRF      0xe1,0x0                                                                                        
002660   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002662   6ee1     MOVWF     0xe1,0x0                                                                                        
002664   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002666   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002668   ffd9                                                                                                               
00266a   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
00266c   cfd9     MOVFF     0xfd9,0xfe6    void USBGenWrite2(byte handler, byte len) {                                      C:\usb4all\fw\demo\user\handlerManager.c
00266e   ffe6                                                                                                               
002670   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002672   ffd9                                                                                                               
002674   0e06     MOVLW     0x6                                                                                             
002676   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	byte i;                                                                         C:\usb4all\fw\demo\user\handlerManager.c
                                           	epHandlerMapItem hmi;                                                           C:\usb4all\fw\demo\user\handlerManager.c
                                           	byte ep;                                                                        C:\usb4all\fw\demo\user\handlerManager.c
002678   0efe     MOVLW     0xfe           	hmi = epHandlerMap[handler];                                                    C:\usb4all\fw\demo\user\handlerManager.c
00267a   50db     MOVF      0xdb,0x0,0x0                                                                                    
00267c   0d04     MULLW     0x4                                                                                             
00267e   cff3     MOVFF     0xff3,0xfe9                                                                                     
002680   ffe9                                                                                                               
002682   cff4     MOVFF     0xff4,0xfea                                                                                     
002684   ffea                                                                                                               
002686   0e61     MOVLW     0x61                                                                                            
002688   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00268a   0e00     MOVLW     0x0                                                                                             
00268c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00268e   0e01     MOVLW     0x1                                                                                             
002690   cfee     MOVFF     0xfee,0xfdb                                                                                     
002692   ffdb                                                                                                               
002694   0e02     MOVLW     0x2                                                                                             
002696   cfee     MOVFF     0xfee,0xfdb                                                                                     
002698   ffdb                                                                                                               
00269a   0e03     MOVLW     0x3                                                                                             
00269c   cfee     MOVFF     0xfee,0xfdb                                                                                     
00269e   ffdb                                                                                                               
0026a0   0e04     MOVLW     0x4                                                                                             
0026a2   cfee     MOVFF     0xfee,0xfdb                                                                                     
0026a4   ffdb                                                                                                               
0026a6   50d9     MOVF      0xd9,0x0,0x0   	ep = hmi.ep.EPNum;                                                              C:\usb4all\fw\demo\user\handlerManager.c
0026a8   0f01     ADDLW     0x1                                                                                             
0026aa   6ee9     MOVWF     0xe9,0x0                                                                                        
0026ac   cfda     MOVFF     0xfda,0xfea                                                                                     
0026ae   ffea                                                                                                               
0026b0   50ef     MOVF      0xef,0x0,0x0                                                                                    
0026b2   0b0f     ANDLW     0xf                                                                                             
0026b4   6ee7     MOVWF     0xe7,0x0                                                                                        
0026b6   0e05     MOVLW     0x5                                                                                             
0026b8   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
0026ba   ffdb                                                                                                               
                                               /*                                                                           C:\usb4all\fw\demo\user\handlerManager.c
                                                * Value of len should be equal to or smaller than USBGEN_EP_SIZE.           C:\usb4all\fw\demo\user\handlerManager.c
                                                * This check forces the value of len to meet the precondition.              C:\usb4all\fw\demo\user\handlerManager.c
                                                */                                                                          C:\usb4all\fw\demo\user\handlerManager.c
0026bc   0efd     MOVLW     0xfd           	if(len > getEPSizeIN(ep)-SIZE__HM_DATA_PACKET_HEADER)                           C:\usb4all\fw\demo\user\handlerManager.c
0026be   cfdb     MOVFF     0xfdb,0x10                                                                                      
0026c0   f010                                                                                                               
0026c2   c010     MOVFF     0x10,0xfe6                                                                                      
0026c4   ffe6                                                                                                               
0026c6   0e05     MOVLW     0x5                                                                                             
0026c8   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0026ca   ffe6                                                                                                               
0026cc   db71     RCALL     0x2db0                                                                                          
0026ce   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0026d0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0026d2   cfe7     MOVFF     0xfe7,0x10                                                                                      
0026d4   f010                                                                                                               
0026d6   0ffd     ADDLW     0xfd                                                                                            
0026d8   80d8     BSF       0xd8,0x0,0x0                                                                                    
0026da   5410     SUBFWB    0x10,0x0,0x0                                                                                    
0026dc   e20a     BC        0x26f2                                                                                          
0026de   0e05     MOVLW     0x5            	    len = getEPSizeIN(ep)-SIZE__HM_DATA_PACKET_HEADER;                          C:\usb4all\fw\demo\user\handlerManager.c
0026e0   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0026e2   ffe6                                                                                                               
0026e4   db65     RCALL     0x2db0                                                                                          
0026e6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0026e8   0ffd     ADDLW     0xfd                                                                                            
0026ea   6ee7     MOVWF     0xe7,0x0                                                                                        
0026ec   0efd     MOVLW     0xfd                                                                                            
0026ee   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
0026f0   ffdb                                                                                                               
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
                                               //seteo los datos del header                                                 C:\usb4all\fw\demo\user\handlerManager.c
0026f2   0efe     MOVLW     0xfe           	hn_opType.handlerNumber=handler;                                                C:\usb4all\fw\demo\user\handlerManager.c
0026f4   50db     MOVF      0xdb,0x0,0x0                                                                                    
0026f6   0100     MOVLB     0x0                                                                                             
0026f8   0b1f     ANDLW     0x1f                                                                                            
0026fa   6ef3     MOVWF     0xf3,0x0                                                                                        
0026fc   46f3     RLNCF     0xf3,0x1,0x0                                                                                    
0026fe   46f3     RLNCF     0xf3,0x1,0x0                                                                                    
002700   46f3     RLNCF     0xf3,0x1,0x0                                                                                    
002702   0e07     MOVLW     0x7                                                                                             
002704   15e4     ANDWF     0xe4,0x0,0x1                                                                                    
002706   10f3     IORWF     0xf3,0x0,0x0                                                                                    
002708   6fe4     MOVWF     0xe4,0x1                                                                                        
00270a   91e4     BCF       0xe4,0x0,0x1   	hn_opType.operationType=SEND;                                                   C:\usb4all\fw\demo\user\handlerManager.c
00270c   93e4     BCF       0xe4,0x1,0x1                                                                                    
00270e   95e4     BCF       0xe4,0x2,0x1                                                                                    
                                           	//copio el header en la dual-ram buffer                                         C:\usb4all\fw\demo\user\handlerManager.c
002710   0e05     MOVLW     0x5            	EPBUFFERIN(ep)[0] = hn_opType.hn_op;                                            C:\usb4all\fw\demo\user\handlerManager.c
002712   50db     MOVF      0xdb,0x0,0x0                                                                                    
002714   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
002716   0f01     ADDLW     0x1                                                                                             
002718   0d04     MULLW     0x4                                                                                             
00271a   cff3     MOVFF     0xff3,0xfe9                                                                                     
00271c   ffe9                                                                                                               
00271e   cff4     MOVFF     0xff4,0xfea                                                                                     
002720   ffea                                                                                                               
002722   0e00     MOVLW     0x0                                                                                             
002724   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002726   0e04     MOVLW     0x4                                                                                             
002728   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00272a   0e02     MOVLW     0x2                                                                                             
00272c   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00272e   0e00     MOVLW     0x0                                                                                             
002730   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002732   50ee     MOVF      0xee,0x0,0x0                                                                                    
002734   cfef     MOVFF     0xfef,0xfea                                                                                     
002736   ffea                                                                                                               
002738   6ee9     MOVWF     0xe9,0x0                                                                                        
00273a   c0e4     MOVFF     0xe4,0xfef                                                                                      
00273c   ffef                                                                                                               
00273e   0efd     MOVLW     0xfd           	EPBUFFERIN(ep)[1] = len+SIZE__HM_DATA_PACKET_HEADER;                            C:\usb4all\fw\demo\user\handlerManager.c
002740   50db     MOVF      0xdb,0x0,0x0                                                                                    
002742   0f03     ADDLW     0x3                                                                                             
002744   6ee6     MOVWF     0xe6,0x0                                                                                        
002746   0e05     MOVLW     0x5                                                                                             
002748   50db     MOVF      0xdb,0x0,0x0                                                                                    
00274a   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
00274c   0f01     ADDLW     0x1                                                                                             
00274e   0d04     MULLW     0x4                                                                                             
002750   cff3     MOVFF     0xff3,0xfe9                                                                                     
002752   ffe9                                                                                                               
002754   cff4     MOVFF     0xff4,0xfea                                                                                     
002756   ffea                                                                                                               
002758   0e00     MOVLW     0x0                                                                                             
00275a   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00275c   0e04     MOVLW     0x4                                                                                             
00275e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002760   0e02     MOVLW     0x2                                                                                             
002762   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002764   0e00     MOVLW     0x0                                                                                             
002766   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002768   50ee     MOVF      0xee,0x0,0x0                                                                                    
00276a   cfef     MOVFF     0xfef,0xfea                                                                                     
00276c   ffea                                                                                                               
00276e   6ee9     MOVWF     0xe9,0x0                                                                                        
002770   0e01     MOVLW     0x1                                                                                             
002772   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002774   0e00     MOVLW     0x0                                                                                             
002776   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002778   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00277a   50e7     MOVF      0xe7,0x0,0x0                                                                                    
00277c   6eef     MOVWF     0xef,0x0                                                                                        
00277e   0e05     MOVLW     0x5            	EPBUFFERIN(ep)[2] = 0;                                                          C:\usb4all\fw\demo\user\handlerManager.c
002780   50db     MOVF      0xdb,0x0,0x0                                                                                    
002782   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
002784   0f01     ADDLW     0x1                                                                                             
002786   0d04     MULLW     0x4                                                                                             
002788   cff3     MOVFF     0xff3,0xfe9                                                                                     
00278a   ffe9                                                                                                               
00278c   cff4     MOVFF     0xff4,0xfea                                                                                     
00278e   ffea                                                                                                               
002790   0e00     MOVLW     0x0                                                                                             
002792   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002794   0e04     MOVLW     0x4                                                                                             
002796   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002798   0e02     MOVLW     0x2                                                                                             
00279a   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00279c   0e00     MOVLW     0x0                                                                                             
00279e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0027a0   50ee     MOVF      0xee,0x0,0x0                                                                                    
0027a2   cfef     MOVFF     0xfef,0xfea                                                                                     
0027a4   ffea                                                                                                               
0027a6   6ee9     MOVWF     0xe9,0x0                                                                                        
0027a8   0e02     MOVLW     0x2                                                                                             
0027aa   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0027ac   0e00     MOVLW     0x0                                                                                             
0027ae   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0027b0   6aef     CLRF      0xef,0x0                                                                                        
                                           	//usbgen_in[0]=hn_opType.hn_op;                                                 C:\usb4all\fw\demo\user\handlerManager.c
                                           	//usbgen_in[1]=len+SIZE__HM_DATA_PACKET_HEADER;                                 C:\usb4all\fw\demo\user\handlerManager.c
                                           	//usbgen_in[2]=0;                                                               C:\usb4all\fw\demo\user\handlerManager.c
                                           	/*                                                                              C:\usb4all\fw\demo\user\handlerManager.c
                                               * Copy data from user's buffer to dual-ram buffer                            C:\usb4all\fw\demo\user\handlerManager.c
                                               */                                                                           C:\usb4all\fw\demo\user\handlerManager.c
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
                                           	//TODO esto se pela :D                                                          C:\usb4all\fw\demo\user\handlerManager.c
                                               /*for (i = 0; i < len; i++)                                                  C:\usb4all\fw\demo\user\handlerManager.c
                                               	usbgen_in[i+SIZE__HM_DATA_PACKET_HEADER] = buffer[i];                       C:\usb4all\fw\demo\user\handlerManager.c
                                           */                                                                               C:\usb4all\fw\demo\user\handlerManager.c
0027b2   0efd     MOVLW     0xfd               EPIN_SIZE(ep) = len+SIZE__HM_DATA_PACKET_HEADER;                             C:\usb4all\fw\demo\user\handlerManager.c
0027b4   50db     MOVF      0xdb,0x0,0x0                                                                                    
0027b6   0f03     ADDLW     0x3                                                                                             
0027b8   6ee6     MOVWF     0xe6,0x0                                                                                        
0027ba   0e05     MOVLW     0x5                                                                                             
0027bc   50db     MOVF      0xdb,0x0,0x0                                                                                    
0027be   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
0027c0   0f01     ADDLW     0x1                                                                                             
0027c2   0d04     MULLW     0x4                                                                                             
0027c4   cff3     MOVFF     0xff3,0xfe9                                                                                     
0027c6   ffe9                                                                                                               
0027c8   cff4     MOVFF     0xff4,0xfea                                                                                     
0027ca   ffea                                                                                                               
0027cc   0e00     MOVLW     0x0                                                                                             
0027ce   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0027d0   0e04     MOVLW     0x4                                                                                             
0027d2   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0027d4   52ee     MOVF      0xee,0x1,0x0                                                                                    
0027d6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0027d8   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0027da   6eef     MOVWF     0xef,0x0                                                                                        
                                               //TODO if (!EPIN_IS_BUSY(ep)) { //testear deberia sustituir el if(!mUSBGenTxIsBusy()) en los modulos de user C:\usb4all\fw\demo\user\handlerManager.c
0027dc   0e03     MOVLW     0x3            	if(ep < 3){                                                                     C:\usb4all\fw\demo\user\handlerManager.c
0027de   6ef3     MOVWF     0xf3,0x0                                                                                        
0027e0   0e05     MOVLW     0x5                                                                                             
0027e2   cfdb     MOVFF     0xfdb,0xff4                                                                                     
0027e4   fff4                                                                                                               
0027e6   50f3     MOVF      0xf3,0x0,0x0                                                                                    
0027e8   5cf4     SUBWF     0xf4,0x0,0x0                                                                                    
0027ea   e250     BC        0x288c                                                                                          
0027ec   0e40     MOVLW     0x40           		mUSBBufferReady2(EPIN_BDT(ep));                                                C:\usb4all\fw\demo\user\handlerManager.c
0027ee   6e10     MOVWF     0x10,0x0                                                                                        
0027f0   0e05     MOVLW     0x5                                                                                             
0027f2   50db     MOVF      0xdb,0x0,0x0                                                                                    
0027f4   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
0027f6   0f01     ADDLW     0x1                                                                                             
0027f8   0d04     MULLW     0x4                                                                                             
0027fa   cff3     MOVFF     0xff3,0xfe9                                                                                     
0027fc   ffe9                                                                                                               
0027fe   cff4     MOVFF     0xff4,0xfea                                                                                     
002800   ffea                                                                                                               
002802   0e00     MOVLW     0x0                                                                                             
002804   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002806   0e04     MOVLW     0x4                                                                                             
002808   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00280a   5010     MOVF      0x10,0x0,0x0                                                                                    
00280c   16ef     ANDWF     0xef,0x1,0x0                                                                                    
00280e   0e05     MOVLW     0x5                                                                                             
002810   50db     MOVF      0xdb,0x0,0x0                                                                                    
002812   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
002814   0f01     ADDLW     0x1                                                                                             
002816   0d04     MULLW     0x4                                                                                             
002818   cff3     MOVFF     0xff3,0xfe9                                                                                     
00281a   ffe9                                                                                                               
00281c   cff4     MOVFF     0xff4,0xfea                                                                                     
00281e   ffea                                                                                                               
002820   0e00     MOVLW     0x0                                                                                             
002822   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002824   0e04     MOVLW     0x4                                                                                             
002826   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002828   50ef     MOVF      0xef,0x0,0x0                                                                                    
00282a   0b40     ANDLW     0x40                                                                                            
00282c   0a40     XORLW     0x40                                                                                            
00282e   e001     BZ        0x2832                                                                                          
002830   0e01     MOVLW     0x1                                                                                             
002832   6e10     MOVWF     0x10,0x0                                                                                        
002834   0e05     MOVLW     0x5                                                                                             
002836   50db     MOVF      0xdb,0x0,0x0                                                                                    
002838   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
00283a   0f01     ADDLW     0x1                                                                                             
00283c   0d04     MULLW     0x4                                                                                             
00283e   cff3     MOVFF     0xff3,0xfe9                                                                                     
002840   ffe9                                                                                                               
002842   cff4     MOVFF     0xff4,0xfea                                                                                     
002844   ffea                                                                                                               
002846   0e00     MOVLW     0x0                                                                                             
002848   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00284a   0e04     MOVLW     0x4                                                                                             
00284c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00284e   5010     MOVF      0x10,0x0,0x0                                                                                    
002850   0b01     ANDLW     0x1                                                                                             
002852   6ef3     MOVWF     0xf3,0x0                                                                                        
002854   46f3     RLNCF     0xf3,0x1,0x0                                                                                    
002856   46f3     RLNCF     0xf3,0x1,0x0                                                                                    
002858   46f3     RLNCF     0xf3,0x1,0x0                                                                                    
00285a   46f3     RLNCF     0xf3,0x1,0x0                                                                                    
00285c   46f3     RLNCF     0xf3,0x1,0x0                                                                                    
00285e   46f3     RLNCF     0xf3,0x1,0x0                                                                                    
002860   0ebf     MOVLW     0xbf                                                                                            
002862   14ef     ANDWF     0xef,0x0,0x0                                                                                    
002864   10f3     IORWF     0xf3,0x0,0x0                                                                                    
002866   6eef     MOVWF     0xef,0x0                                                                                        
002868   0e88     MOVLW     0x88                                                                                            
00286a   6e10     MOVWF     0x10,0x0                                                                                        
00286c   0e05     MOVLW     0x5                                                                                             
00286e   50db     MOVF      0xdb,0x0,0x0                                                                                    
002870   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
002872   0f01     ADDLW     0x1                                                                                             
002874   0d04     MULLW     0x4                                                                                             
002876   cff3     MOVFF     0xff3,0xfe9                                                                                     
002878   ffe9                                                                                                               
00287a   cff4     MOVFF     0xff4,0xfea                                                                                     
00287c   ffea                                                                                                               
00287e   0e00     MOVLW     0x0                                                                                             
002880   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002882   0e04     MOVLW     0x4                                                                                             
002884   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002886   5010     MOVF      0x10,0x0,0x0                                                                                    
002888   12ef     IORWF     0xef,0x1,0x0                                                                                    
                                           	}                                                                               C:\usb4all\fw\demo\user\handlerManager.c
00288a   d022     BRA       0x28d0         	else{                                                                           C:\usb4all\fw\demo\user\handlerManager.c
00288c   0e40     MOVLW     0x40           		mUSBBufferReady3(EPIN_BDT(ep));                                                C:\usb4all\fw\demo\user\handlerManager.c
00288e   6e10     MOVWF     0x10,0x0                                                                                        
002890   0e05     MOVLW     0x5                                                                                             
002892   50db     MOVF      0xdb,0x0,0x0                                                                                    
002894   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
002896   0f01     ADDLW     0x1                                                                                             
002898   0d04     MULLW     0x4                                                                                             
00289a   cff3     MOVFF     0xff3,0xfe9                                                                                     
00289c   ffe9                                                                                                               
00289e   cff4     MOVFF     0xff4,0xfea                                                                                     
0028a0   ffea                                                                                                               
0028a2   0e00     MOVLW     0x0                                                                                             
0028a4   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0028a6   0e04     MOVLW     0x4                                                                                             
0028a8   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0028aa   5010     MOVF      0x10,0x0,0x0                                                                                    
0028ac   16ef     ANDWF     0xef,0x1,0x0                                                                                    
0028ae   0e88     MOVLW     0x88                                                                                            
0028b0   6e10     MOVWF     0x10,0x0                                                                                        
0028b2   0e05     MOVLW     0x5                                                                                             
0028b4   50db     MOVF      0xdb,0x0,0x0                                                                                    
0028b6   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
0028b8   0f01     ADDLW     0x1                                                                                             
0028ba   0d04     MULLW     0x4                                                                                             
0028bc   cff3     MOVFF     0xff3,0xfe9                                                                                     
0028be   ffe9                                                                                                               
0028c0   cff4     MOVFF     0xff4,0xfea                                                                                     
0028c2   ffea                                                                                                               
0028c4   0e00     MOVLW     0x0                                                                                             
0028c6   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0028c8   0e04     MOVLW     0x4                                                                                             
0028ca   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0028cc   5010     MOVF      0x10,0x0,0x0                                                                                    
0028ce   12ef     IORWF     0xef,0x1,0x0                                                                                    
                                           	}		                                                                             C:\usb4all\fw\demo\user\handlerManager.c
                                           	//}						//testear                                                              C:\usb4all\fw\demo\user\handlerManager.c
0028d0   0e06     MOVLW     0x6            }//end USBGenWrite                                                               C:\usb4all\fw\demo\user\handlerManager.c
0028d2   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0028d4   e202     BC        0x28da                                                                                          
0028d6   6ae1     CLRF      0xe1,0x0                                                                                        
0028d8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0028da   6ee1     MOVWF     0xe1,0x0                                                                                        
0028dc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0028de   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0028e0   ffd9                                                                                                               
0028e2   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
0028e4   cfd9     MOVFF     0xfd9,0xfe6    byte newHandlerTableEntry(byte endPIn, rom near char* uTableDirection){          C:\usb4all\fw\demo\user\handlerManager.c
0028e6   ffe6                                                                                                               
0028e8   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0028ea   ffd9                                                                                                               
0028ec   52e6     MOVF      0xe6,0x1,0x0                                                                                    
0028ee   6adf     CLRF      0xdf,0x0       	byte i=0;                                                                       C:\usb4all\fw\demo\user\handlerManager.c
0028f0   0e10     MOVLW     0x10           	while (i<MAX_HANDLERS){                                                         C:\usb4all\fw\demo\user\handlerManager.c
0028f2   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
0028f4   e23d     BC        0x2970                                                                                          
00296e   d7c0     BRA       0x28f0                                                                                          
0028f6   50df     MOVF      0xdf,0x0,0x0   		if (epHandlerMap[i].ep.empty == 1) {                                           C:\usb4all\fw\demo\user\handlerManager.c
0028f8   0d04     MULLW     0x4                                                                                             
0028fa   cff3     MOVFF     0xff3,0xfe9                                                                                     
0028fc   ffe9                                                                                                               
0028fe   cff4     MOVFF     0xff4,0xfea                                                                                     
002900   ffea                                                                                                               
002902   0e61     MOVLW     0x61                                                                                            
002904   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002906   0e00     MOVLW     0x0                                                                                             
002908   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00290a   50ef     MOVF      0xef,0x0,0x0                                                                                    
00290c   0b20     ANDLW     0x20                                                                                            
00290e   e02e     BZ        0x296c                                                                                          
002910   50df     MOVF      0xdf,0x0,0x0   			epHandlerMap[i].ep.endPoint = endPIn;                                         C:\usb4all\fw\demo\user\handlerManager.c
002912   0d04     MULLW     0x4                                                                                             
002914   cff3     MOVFF     0xff3,0xfe9                                                                                     
002916   ffe9                                                                                                               
002918   cff4     MOVFF     0xff4,0xfea                                                                                     
00291a   ffea                                                                                                               
00291c   0e61     MOVLW     0x61                                                                                            
00291e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002920   0e00     MOVLW     0x0                                                                                             
002922   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002924   0efe     MOVLW     0xfe                                                                                            
002926   cfdb     MOVFF     0xfdb,0xfef                                                                                     
002928   ffef                                                                                                               
00292a   50df     MOVF      0xdf,0x0,0x0   			epHandlerMap[i].ep.empty = 0;                                                 C:\usb4all\fw\demo\user\handlerManager.c
00292c   0d04     MULLW     0x4                                                                                             
00292e   cff3     MOVFF     0xff3,0xfe9                                                                                     
002930   ffe9                                                                                                               
002932   cff4     MOVFF     0xff4,0xfea                                                                                     
002934   ffea                                                                                                               
002936   0e61     MOVLW     0x61                                                                                            
002938   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00293a   0e00     MOVLW     0x0                                                                                             
00293c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00293e   9aef     BCF       0xef,0x5,0x0                                                                                    
002940   50df     MOVF      0xdf,0x0,0x0   			epHandlerMap[i].uTableDirection = uTableDirection;                            C:\usb4all\fw\demo\user\handlerManager.c
002942   0d04     MULLW     0x4                                                                                             
002944   cff3     MOVFF     0xff3,0xfe9                                                                                     
002946   ffe9                                                                                                               
002948   cff4     MOVFF     0xff4,0xfea                                                                                     
00294a   ffea                                                                                                               
00294c   0e61     MOVLW     0x61                                                                                            
00294e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002950   0e00     MOVLW     0x0                                                                                             
002952   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002954   0e02     MOVLW     0x2                                                                                             
002956   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002958   0e00     MOVLW     0x0                                                                                             
00295a   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00295c   0efc     MOVLW     0xfc                                                                                            
00295e   cfdb     MOVFF     0xfdb,0xfee                                                                                     
002960   ffee                                                                                                               
002962   0efd     MOVLW     0xfd                                                                                            
002964   cfdb     MOVFF     0xfdb,0xfed                                                                                     
002966   ffed                                                                                                               
002968   50df     MOVF      0xdf,0x0,0x0   			return i;			                                                                  C:\usb4all\fw\demo\user\handlerManager.c
00296a   d004     BRA       0x2974                                                                                          
                                           		}                                                                              C:\usb4all\fw\demo\user\handlerManager.c
00296c   2adf     INCF      0xdf,0x1,0x0   		i++;                                                                           C:\usb4all\fw\demo\user\handlerManager.c
                                           	}                                                                               C:\usb4all\fw\demo\user\handlerManager.c
002970   0eff     MOVLW     0xff           	return ERROR;                                                                   C:\usb4all\fw\demo\user\handlerManager.c
002972   d000     BRA       0x2974                                                                                          
002974   52e5     MOVF      0xe5,0x1,0x0   } 			                                                                            C:\usb4all\fw\demo\user\handlerManager.c
002976   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002978   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00297a   ffd9                                                                                                               
00297c   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
00297e   cfd9     MOVFF     0xfd9,0xfe6    BOOL existsTableEntry(rom near char* uTableDirection){                           C:\usb4all\fw\demo\user\handlerManager.c
002980   ffe6                                                                                                               
002982   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002984   ffd9                                                                                                               
002986   52e6     MOVF      0xe6,0x1,0x0                                                                                    
002988   6adf     CLRF      0xdf,0x0       	byte i=0;                                                                       C:\usb4all\fw\demo\user\handlerManager.c
00298a   0e10     MOVLW     0x10           	while (i<MAX_HANDLERS){                                                         C:\usb4all\fw\demo\user\handlerManager.c
00298c   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
00298e   e21e     BC        0x29cc                                                                                          
0029ca   d7df     BRA       0x298a                                                                                          
002990   50df     MOVF      0xdf,0x0,0x0   		if (epHandlerMap[i].uTableDirection == uTableDirection) {                      C:\usb4all\fw\demo\user\handlerManager.c
002992   0d04     MULLW     0x4                                                                                             
002994   cff3     MOVFF     0xff3,0xfe9                                                                                     
002996   ffe9                                                                                                               
002998   cff4     MOVFF     0xff4,0xfea                                                                                     
00299a   ffea                                                                                                               
00299c   0e61     MOVLW     0x61                                                                                            
00299e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0029a0   0e00     MOVLW     0x0                                                                                             
0029a2   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0029a4   0e02     MOVLW     0x2                                                                                             
0029a6   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0029a8   0e00     MOVLW     0x0                                                                                             
0029aa   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0029ac   cfee     MOVFF     0xfee,0x10                                                                                      
0029ae   f010                                                                                                               
0029b0   cfef     MOVFF     0xfef,0x11                                                                                      
0029b2   f011                                                                                                               
0029b4   0efd     MOVLW     0xfd                                                                                            
0029b6   50db     MOVF      0xdb,0x0,0x0                                                                                    
0029b8   1810     XORWF     0x10,0x0,0x0                                                                                    
0029ba   e103     BNZ       0x29c2                                                                                          
0029bc   0efe     MOVLW     0xfe                                                                                            
0029be   50db     MOVF      0xdb,0x0,0x0                                                                                    
0029c0   1811     XORWF     0x11,0x0,0x0                                                                                    
0029c2   e102     BNZ       0x29c8                                                                                          
0029c4   0e01     MOVLW     0x1            			return TRUE;			                                                               C:\usb4all\fw\demo\user\handlerManager.c
0029c6   d004     BRA       0x29d0                                                                                          
                                           		}                                                                              C:\usb4all\fw\demo\user\handlerManager.c
0029c8   2adf     INCF      0xdf,0x1,0x0   		i++;                                                                           C:\usb4all\fw\demo\user\handlerManager.c
                                           	}                                                                               C:\usb4all\fw\demo\user\handlerManager.c
0029cc   0e00     MOVLW     0x0            	return FALSE;                                                                   C:\usb4all\fw\demo\user\handlerManager.c
0029ce   d000     BRA       0x29d0                                                                                          
0029d0   52e5     MOVF      0xe5,0x1,0x0   } 	                                                                              C:\usb4all\fw\demo\user\handlerManager.c
0029d2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0029d4   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0029d6   ffd9                                                                                                               
0029d8   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
0029da   cfd9     MOVFF     0xfd9,0xfe6    void initHandlerTable(){                                                         C:\usb4all\fw\demo\user\handlerManager.c
0029dc   ffe6                                                                                                               
0029de   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0029e0   ffd9                                                                                                               
0029e2   0e03     MOVLW     0x3                                                                                             
0029e4   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	byte i;                                                                         C:\usb4all\fw\demo\user\handlerManager.c
                                           	endpoint adminEndpoint;                                                         C:\usb4all\fw\demo\user\handlerManager.c
0029e6   ec34     CALL      0x1a68,0x0     	adminEndpoint = getAdminEndpoint();                                             C:\usb4all\fw\demo\user\handlerManager.c
0029e8   f00d                                                                                                               
0029ea   52de     MOVF      0xde,0x1,0x0                                                                                    
0029ec   cff3     MOVFF     0xff3,0xfde                                                                                     
0029ee   ffde                                                                                                               
0029f0   cff4     MOVFF     0xff4,0xfdd                                                                                     
0029f2   ffdd                                                                                                               
0029f4   52dd     MOVF      0xdd,0x1,0x0                                                                                    
0029f6   6adf     CLRF      0xdf,0x0       	for(i=0;i<MAX_HANDLERS;i++){                                                    C:\usb4all\fw\demo\user\handlerManager.c
0029f8   0e10     MOVLW     0x10                                                                                            
0029fa   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
0029fc   e21d     BC        0x2a38                                                                                          
002a34   2adf     INCF      0xdf,0x1,0x0                                                                                    
002a36   d7e0     BRA       0x29f8                                                                                          
0029fe   50df     MOVF      0xdf,0x0,0x0   		epHandlerMap[i].ep.empty = 1;                                                  C:\usb4all\fw\demo\user\handlerManager.c
002a00   0d04     MULLW     0x4                                                                                             
002a02   cff3     MOVFF     0xff3,0xfe9                                                                                     
002a04   ffe9                                                                                                               
002a06   cff4     MOVFF     0xff4,0xfea                                                                                     
002a08   ffea                                                                                                               
002a0a   0e61     MOVLW     0x61                                                                                            
002a0c   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002a0e   0e00     MOVLW     0x0                                                                                             
002a10   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002a12   8aef     BSF       0xef,0x5,0x0                                                                                    
002a14   50df     MOVF      0xdf,0x0,0x0   		epHandlerMap[i].uTableDirection = 0; // Asumo 0 como NULL TODO revisar         C:\usb4all\fw\demo\user\handlerManager.c
002a16   0d04     MULLW     0x4                                                                                             
002a18   cff3     MOVFF     0xff3,0xfe9                                                                                     
002a1a   ffe9                                                                                                               
002a1c   cff4     MOVFF     0xff4,0xfea                                                                                     
002a1e   ffea                                                                                                               
002a20   0e61     MOVLW     0x61                                                                                            
002a22   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002a24   0e00     MOVLW     0x0                                                                                             
002a26   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002a28   0e02     MOVLW     0x2                                                                                             
002a2a   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002a2c   0e00     MOVLW     0x0                                                                                             
002a2e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002a30   6aee     CLRF      0xee,0x0                                                                                        
002a32   6aed     CLRF      0xed,0x0                                                                                        
                                           	}                                                                               C:\usb4all\fw\demo\user\handlerManager.c
002a38   0e01     MOVLW     0x1            	epHandlerMap[0].ep = adminEndpoint;                                             C:\usb4all\fw\demo\user\handlerManager.c
002a3a   cfdb     MOVFF     0xfdb,0x61                                                                                      
002a3c   f061                                                                                                               
002a3e   0e02     MOVLW     0x2                                                                                             
002a40   cfdb     MOVFF     0xfdb,0x62                                                                                      
002a42   f062                                                                                                               
                                           	//cargo el ROM_MAX_EP_NUMBER en ram                                             C:\usb4all\fw\demo\user\handlerManager.c
002a44   0e40     MOVLW     0x40           	ram_max_ep_number = ROM_MAX_EP_NUMBER;                                          C:\usb4all\fw\demo\user\handlerManager.c
002a46   6ef6     MOVWF     0xf6,0x0                                                                                        
002a48   0e08     MOVLW     0x8                                                                                             
002a4a   6ef7     MOVWF     0xf7,0x0                                                                                        
002a4c   0008     TBLRD                                                                                                     
002a4e   cff5     MOVFF     0xff5,0x60                                                                                      
002a50   f060                                                                                                               
002a52   0e03     MOVLW     0x3            }                                                                                C:\usb4all\fw\demo\user\handlerManager.c
002a54   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
002a56   e202     BC        0x2a5c                                                                                          
002a58   6ae1     CLRF      0xe1,0x0                                                                                        
002a5a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002a5c   6ee1     MOVWF     0xe1,0x0                                                                                        
002a5e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002a60   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002a62   ffd9                                                                                                               
002a64   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
                                           void initHandlerManager(void){                                                   C:\usb4all\fw\demo\user\handlerManager.c
                                           	//initHandlerBuffers();                                                         C:\usb4all\fw\demo\user\handlerManager.c
002a66   dfb9     RCALL     0x29da         	initHandlerTable();				//Inicializo tabla de mapeo de handler a endpoint en HandlerManager C:\usb4all\fw\demo\user\handlerManager.c
002a68   ef0d     GOTO      0x161a         	adminModuleInit();				//Inicializo el Admin Module                              C:\usb4all\fw\demo\user\handlerManager.c
002a6a   f00b                                                                                                               
                                           }                                                                                C:\usb4all\fw\demo\user\handlerManager.c
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
002a6c   cfd9     MOVFF     0xfd9,0xfe6    respType removeHandlerTableEntry(byte handler){                                  C:\usb4all\fw\demo\user\handlerManager.c
002a6e   ffe6                                                                                                               
002a70   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002a72   ffd9                                                                                                               
002a74   0e02     MOVLW     0x2                                                                                             
002a76   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	pUserFunc releaseFunction;                                                      C:\usb4all\fw\demo\user\handlerManager.c
002a78   0e10     MOVLW     0x10           	if (handler < MAX_HANDLERS && epHandlerMap[handler].ep.empty == 0){             C:\usb4all\fw\demo\user\handlerManager.c
002a7a   6ef3     MOVWF     0xf3,0x0                                                                                        
002a7c   0efe     MOVLW     0xfe                                                                                            
002a7e   cfdb     MOVFF     0xfdb,0xff4                                                                                     
002a80   fff4                                                                                                               
002a82   50f3     MOVF      0xf3,0x0,0x0                                                                                    
002a84   5cf4     SUBWF     0xf4,0x0,0x0                                                                                    
002a86   e257     BC        0x2b36                                                                                          
002a88   0efe     MOVLW     0xfe                                                                                            
002a8a   50db     MOVF      0xdb,0x0,0x0                                                                                    
002a8c   0d04     MULLW     0x4                                                                                             
002a8e   cff3     MOVFF     0xff3,0xfe9                                                                                     
002a90   ffe9                                                                                                               
002a92   cff4     MOVFF     0xff4,0xfea                                                                                     
002a94   ffea                                                                                                               
002a96   0e61     MOVLW     0x61                                                                                            
002a98   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002a9a   0e00     MOVLW     0x0                                                                                             
002a9c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002a9e   50ef     MOVF      0xef,0x0,0x0                                                                                    
002aa0   0b20     ANDLW     0x20                                                                                            
002aa2   e149     BNZ       0x2b36                                                                                          
002aa4   0efe     MOVLW     0xfe           		epHandlerMap[handler].ep.empty = 1;                                            C:\usb4all\fw\demo\user\handlerManager.c
002aa6   50db     MOVF      0xdb,0x0,0x0                                                                                    
002aa8   0d04     MULLW     0x4                                                                                             
002aaa   cff3     MOVFF     0xff3,0xfe9                                                                                     
002aac   ffe9                                                                                                               
002aae   cff4     MOVFF     0xff4,0xfea                                                                                     
002ab0   ffea                                                                                                               
002ab2   0e61     MOVLW     0x61                                                                                            
002ab4   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002ab6   0e00     MOVLW     0x0                                                                                             
002ab8   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002aba   8aef     BSF       0xef,0x5,0x0                                                                                    
002abc   0efe     MOVLW     0xfe           	    releaseFunction = getModuleReleaseDirection(epHandlerMap[handler].uTableDirection); C:\usb4all\fw\demo\user\handlerManager.c
002abe   50db     MOVF      0xdb,0x0,0x0                                                                                    
002ac0   0d04     MULLW     0x4                                                                                             
002ac2   cff3     MOVFF     0xff3,0xfe9                                                                                     
002ac4   ffe9                                                                                                               
002ac6   cff4     MOVFF     0xff4,0xfea                                                                                     
002ac8   ffea                                                                                                               
002aca   0e61     MOVLW     0x61                                                                                            
002acc   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002ace   0e00     MOVLW     0x0                                                                                             
002ad0   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002ad2   0e02     MOVLW     0x2                                                                                             
002ad4   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002ad6   0e00     MOVLW     0x0                                                                                             
002ad8   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002ada   cfee     MOVFF     0xfee,0xfe6                                                                                     
002adc   ffe6                                                                                                               
002ade   cfef     MOVFF     0xfef,0xfe6                                                                                     
002ae0   ffe6                                                                                                               
002ae2   ec0f     CALL      0x1e1e,0x0                                                                                      
002ae4   f00f                                                                                                               
002ae6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002ae8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002aea   cff3     MOVFF     0xff3,0xfde                                                                                     
002aec   ffde                                                                                                               
002aee   cff4     MOVFF     0xff4,0xfdd                                                                                     
002af0   ffdd                                                                                                               
002af2   cfde     MOVFF     0xfde,0x10     		releaseFunction(handler);                                                      C:\usb4all\fw\demo\user\handlerManager.c
002af4   f010                                                                                                               
002af6   cfdd     MOVFF     0xfdd,0x11                                                                                      
002af8   f011                                                                                                               
002afa   0efe     MOVLW     0xfe                                                                                            
002afc   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
002afe   ffe6                                                                                                               
002b00   d004     BRA       0x2b0a                                                                                          
002b02   c011     MOVFF     0x11,0xffa                                                                                      
002b04   fffa                                                                                                               
002b06   5010     MOVF      0x10,0x0,0x0                                                                                    
002b08   6ef9     MOVWF     0xf9,0x0                                                                                        
002b0a   dffb     RCALL     0x2b02                                                                                          
002b0c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002b0e   0efe     MOVLW     0xfe           		epHandlerMap[handler].uTableDirection = 0;                                     C:\usb4all\fw\demo\user\handlerManager.c
002b10   50db     MOVF      0xdb,0x0,0x0                                                                                    
002b12   0d04     MULLW     0x4                                                                                             
002b14   cff3     MOVFF     0xff3,0xfe9                                                                                     
002b16   ffe9                                                                                                               
002b18   cff4     MOVFF     0xff4,0xfea                                                                                     
002b1a   ffea                                                                                                               
002b1c   0e61     MOVLW     0x61                                                                                            
002b1e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002b20   0e00     MOVLW     0x0                                                                                             
002b22   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002b24   0e02     MOVLW     0x2                                                                                             
002b26   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002b28   0e00     MOVLW     0x0                                                                                             
002b2a   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002b2c   6aee     CLRF      0xee,0x0                                                                                        
002b2e   6aed     CLRF      0xed,0x0                                                                                        
002b30   0e01     MOVLW     0x1            		return ACK;                                                                    C:\usb4all\fw\demo\user\handlerManager.c
002b32   d003     BRA       0x2b3a                                                                                          
                                           	}                                                                               C:\usb4all\fw\demo\user\handlerManager.c
002b34   d002     BRA       0x2b3a         	else{                                                                           C:\usb4all\fw\demo\user\handlerManager.c
002b36   0e00     MOVLW     0x0            		return NACK;                                                                   C:\usb4all\fw\demo\user\handlerManager.c
002b38   d000     BRA       0x2b3a                                                                                          
                                           	}                                                                               C:\usb4all\fw\demo\user\handlerManager.c
002b3a   6e10     MOVWF     0x10,0x0       }                                                                                C:\usb4all\fw\demo\user\handlerManager.c
002b3c   0e02     MOVLW     0x2                                                                                             
002b3e   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
002b40   e202     BC        0x2b46                                                                                          
002b42   6ae1     CLRF      0xe1,0x0                                                                                        
002b44   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002b46   6ee1     MOVWF     0xe1,0x0                                                                                        
002b48   5010     MOVF      0x10,0x0,0x0                                                                                    
002b4a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002b4c   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002b4e   ffd9                                                                                                               
002b50   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
002b52   cfd9     MOVFF     0xfd9,0xfe6    respType configureHandlerTableEntry(byte handler){                               C:\usb4all\fw\demo\user\handlerManager.c
002b54   ffe6                                                                                                               
002b56   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002b58   ffd9                                                                                                               
002b5a   0e02     MOVLW     0x2                                                                                             
002b5c   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	pUserFunc configureFunction;                                                    C:\usb4all\fw\demo\user\handlerManager.c
002b5e   0e10     MOVLW     0x10           	if (handler < MAX_HANDLERS && epHandlerMap[handler].ep.empty == 0){             C:\usb4all\fw\demo\user\handlerManager.c
002b60   6ef3     MOVWF     0xf3,0x0                                                                                        
002b62   0efe     MOVLW     0xfe                                                                                            
002b64   cfdb     MOVFF     0xfdb,0xff4                                                                                     
002b66   fff4                                                                                                               
002b68   50f3     MOVF      0xf3,0x0,0x0                                                                                    
002b6a   5cf4     SUBWF     0xf4,0x0,0x0                                                                                    
002b6c   e23a     BC        0x2be2                                                                                          
002b6e   0efe     MOVLW     0xfe                                                                                            
002b70   50db     MOVF      0xdb,0x0,0x0                                                                                    
002b72   0d04     MULLW     0x4                                                                                             
002b74   cff3     MOVFF     0xff3,0xfe9                                                                                     
002b76   ffe9                                                                                                               
002b78   cff4     MOVFF     0xff4,0xfea                                                                                     
002b7a   ffea                                                                                                               
002b7c   0e61     MOVLW     0x61                                                                                            
002b7e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002b80   0e00     MOVLW     0x0                                                                                             
002b82   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002b84   50ef     MOVF      0xef,0x0,0x0                                                                                    
002b86   0b20     ANDLW     0x20                                                                                            
002b88   e12c     BNZ       0x2be2                                                                                          
002b8a   0efe     MOVLW     0xfe           	    configureFunction = getModuleConfigureDirection(epHandlerMap[handler].uTableDirection); C:\usb4all\fw\demo\user\handlerManager.c
002b8c   50db     MOVF      0xdb,0x0,0x0                                                                                    
002b8e   0d04     MULLW     0x4                                                                                             
002b90   cff3     MOVFF     0xff3,0xfe9                                                                                     
002b92   ffe9                                                                                                               
002b94   cff4     MOVFF     0xff4,0xfea                                                                                     
002b96   ffea                                                                                                               
002b98   0e61     MOVLW     0x61                                                                                            
002b9a   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002b9c   0e00     MOVLW     0x0                                                                                             
002b9e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002ba0   0e02     MOVLW     0x2                                                                                             
002ba2   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002ba4   0e00     MOVLW     0x0                                                                                             
002ba6   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002ba8   cfee     MOVFF     0xfee,0xfe6                                                                                     
002baa   ffe6                                                                                                               
002bac   cfef     MOVFF     0xfef,0xfe6                                                                                     
002bae   ffe6                                                                                                               
002bb0   ec37     CALL      0x1e6e,0x0                                                                                      
002bb2   f00f                                                                                                               
002bb4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002bb6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002bb8   cff3     MOVFF     0xff3,0xfde                                                                                     
002bba   ffde                                                                                                               
002bbc   cff4     MOVFF     0xff4,0xfdd                                                                                     
002bbe   ffdd                                                                                                               
002bc0   cfde     MOVFF     0xfde,0x10     		configureFunction(handler);                                                    C:\usb4all\fw\demo\user\handlerManager.c
002bc2   f010                                                                                                               
002bc4   cfdd     MOVFF     0xfdd,0x11                                                                                      
002bc6   f011                                                                                                               
002bc8   0efe     MOVLW     0xfe                                                                                            
002bca   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
002bcc   ffe6                                                                                                               
002bce   d004     BRA       0x2bd8                                                                                          
002bd0   c011     MOVFF     0x11,0xffa                                                                                      
002bd2   fffa                                                                                                               
002bd4   5010     MOVF      0x10,0x0,0x0                                                                                    
002bd6   6ef9     MOVWF     0xf9,0x0                                                                                        
002bd8   dffb     RCALL     0x2bd0                                                                                          
002bda   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002bdc   0e01     MOVLW     0x1            		return ACK;                                                                    C:\usb4all\fw\demo\user\handlerManager.c
002bde   d003     BRA       0x2be6                                                                                          
                                           	}                                                                               C:\usb4all\fw\demo\user\handlerManager.c
002be0   d002     BRA       0x2be6         	else{                                                                           C:\usb4all\fw\demo\user\handlerManager.c
002be2   0e00     MOVLW     0x0            		return NACK;                                                                   C:\usb4all\fw\demo\user\handlerManager.c
002be4   d000     BRA       0x2be6                                                                                          
                                           	}                                                                               C:\usb4all\fw\demo\user\handlerManager.c
002be6   6e10     MOVWF     0x10,0x0       }                                                                                C:\usb4all\fw\demo\user\handlerManager.c
002be8   0e02     MOVLW     0x2                                                                                             
002bea   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
002bec   e202     BC        0x2bf2                                                                                          
002bee   6ae1     CLRF      0xe1,0x0                                                                                        
002bf0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002bf2   6ee1     MOVWF     0xe1,0x0                                                                                        
002bf4   5010     MOVF      0x10,0x0,0x0                                                                                    
002bf6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002bf8   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002bfa   ffd9                                                                                                               
002bfc   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
002bfe   cfd9     MOVFF     0xfd9,0xfe6    void removeAllOpenModules(void){                                                 C:\usb4all\fw\demo\user\handlerManager.c
002c00   ffe6                                                                                                               
002c02   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002c04   ffd9                                                                                                               
002c06   0e03     MOVLW     0x3                                                                                             
002c08   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	pUserFunc releaseFunction;                                                      C:\usb4all\fw\demo\user\handlerManager.c
002c0a   0e01     MOVLW     0x1            	byte handler = 1;                                                               C:\usb4all\fw\demo\user\handlerManager.c
002c0c   6ef3     MOVWF     0xf3,0x0                                                                                        
002c0e   0e02     MOVLW     0x2                                                                                             
002c10   cff3     MOVFF     0xff3,0xfdb                                                                                     
002c12   ffdb                                                                                                               
002c14   0e10     MOVLW     0x10           	while(handler < MAX_HANDLERS){                                                  C:\usb4all\fw\demo\user\handlerManager.c
002c16   6ef3     MOVWF     0xf3,0x0                                                                                        
002c18   0e02     MOVLW     0x2                                                                                             
002c1a   cfdb     MOVFF     0xfdb,0xff4                                                                                     
002c1c   fff4                                                                                                               
002c1e   50f3     MOVF      0xf3,0x0,0x0                                                                                    
002c20   5cf4     SUBWF     0xf4,0x0,0x0                                                                                    
002c22   e257     BC        0x2cd2                                                                                          
002cd0   d7a1     BRA       0x2c14                                                                                          
002c24   0e02     MOVLW     0x2            		if (epHandlerMap[handler].ep.empty == 0){                                      C:\usb4all\fw\demo\user\handlerManager.c
002c26   50db     MOVF      0xdb,0x0,0x0                                                                                    
002c28   0d04     MULLW     0x4                                                                                             
002c2a   cff3     MOVFF     0xff3,0xfe9                                                                                     
002c2c   ffe9                                                                                                               
002c2e   cff4     MOVFF     0xff4,0xfea                                                                                     
002c30   ffea                                                                                                               
002c32   0e61     MOVLW     0x61                                                                                            
002c34   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002c36   0e00     MOVLW     0x0                                                                                             
002c38   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002c3a   50ef     MOVF      0xef,0x0,0x0                                                                                    
002c3c   0b20     ANDLW     0x20                                                                                            
002c3e   e146     BNZ       0x2ccc                                                                                          
002c40   0e02     MOVLW     0x2            			epHandlerMap[handler].ep.empty = 1;                                           C:\usb4all\fw\demo\user\handlerManager.c
002c42   50db     MOVF      0xdb,0x0,0x0                                                                                    
002c44   0d04     MULLW     0x4                                                                                             
002c46   cff3     MOVFF     0xff3,0xfe9                                                                                     
002c48   ffe9                                                                                                               
002c4a   cff4     MOVFF     0xff4,0xfea                                                                                     
002c4c   ffea                                                                                                               
002c4e   0e61     MOVLW     0x61                                                                                            
002c50   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002c52   0e00     MOVLW     0x0                                                                                             
002c54   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002c56   8aef     BSF       0xef,0x5,0x0                                                                                    
002c58   0e02     MOVLW     0x2            		    releaseFunction = getModuleReleaseDirection(epHandlerMap[handler].uTableDirection); C:\usb4all\fw\demo\user\handlerManager.c
002c5a   50db     MOVF      0xdb,0x0,0x0                                                                                    
002c5c   0d04     MULLW     0x4                                                                                             
002c5e   cff3     MOVFF     0xff3,0xfe9                                                                                     
002c60   ffe9                                                                                                               
002c62   cff4     MOVFF     0xff4,0xfea                                                                                     
002c64   ffea                                                                                                               
002c66   0e61     MOVLW     0x61                                                                                            
002c68   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002c6a   0e00     MOVLW     0x0                                                                                             
002c6c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002c6e   0e02     MOVLW     0x2                                                                                             
002c70   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002c72   0e00     MOVLW     0x0                                                                                             
002c74   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002c76   cfee     MOVFF     0xfee,0xfe6                                                                                     
002c78   ffe6                                                                                                               
002c7a   cfef     MOVFF     0xfef,0xfe6                                                                                     
002c7c   ffe6                                                                                                               
002c7e   ec0f     CALL      0x1e1e,0x0                                                                                      
002c80   f00f                                                                                                               
002c82   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002c84   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002c86   cff3     MOVFF     0xff3,0xfde                                                                                     
002c88   ffde                                                                                                               
002c8a   cff4     MOVFF     0xff4,0xfdd                                                                                     
002c8c   ffdd                                                                                                               
002c8e   cfde     MOVFF     0xfde,0x10     			releaseFunction(handler);                                                     C:\usb4all\fw\demo\user\handlerManager.c
002c90   f010                                                                                                               
002c92   cfdd     MOVFF     0xfdd,0x11                                                                                      
002c94   f011                                                                                                               
002c96   0e02     MOVLW     0x2                                                                                             
002c98   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
002c9a   ffe6                                                                                                               
002c9c   d004     BRA       0x2ca6                                                                                          
002c9e   c011     MOVFF     0x11,0xffa                                                                                      
002ca0   fffa                                                                                                               
002ca2   5010     MOVF      0x10,0x0,0x0                                                                                    
002ca4   6ef9     MOVWF     0xf9,0x0                                                                                        
002ca6   dffb     RCALL     0x2c9e                                                                                          
002ca8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002caa   0e02     MOVLW     0x2            			epHandlerMap[handler].uTableDirection = 0;                                    C:\usb4all\fw\demo\user\handlerManager.c
002cac   50db     MOVF      0xdb,0x0,0x0                                                                                    
002cae   0d04     MULLW     0x4                                                                                             
002cb0   cff3     MOVFF     0xff3,0xfe9                                                                                     
002cb2   ffe9                                                                                                               
002cb4   cff4     MOVFF     0xff4,0xfea                                                                                     
002cb6   ffea                                                                                                               
002cb8   0e61     MOVLW     0x61                                                                                            
002cba   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002cbc   0e00     MOVLW     0x0                                                                                             
002cbe   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002cc0   0e02     MOVLW     0x2                                                                                             
002cc2   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002cc4   0e00     MOVLW     0x0                                                                                             
002cc6   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002cc8   6aee     CLRF      0xee,0x0                                                                                        
002cca   6aed     CLRF      0xed,0x0                                                                                        
                                           			//return ACK; mal !!!! gracias jorge por darte cuenta                         C:\usb4all\fw\demo\user\handlerManager.c
                                           		}                                                                              C:\usb4all\fw\demo\user\handlerManager.c
002ccc   0e02     MOVLW     0x2            		handler++;                                                                     C:\usb4all\fw\demo\user\handlerManager.c
002cce   2adb     INCF      0xdb,0x1,0x0                                                                                    
                                           	}                                                                               C:\usb4all\fw\demo\user\handlerManager.c
002cd2   0e03     MOVLW     0x3            }                                                                                C:\usb4all\fw\demo\user\handlerManager.c
002cd4   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
002cd6   e202     BC        0x2cdc                                                                                          
002cd8   6ae1     CLRF      0xe1,0x0                                                                                        
002cda   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002cdc   6ee1     MOVWF     0xe1,0x0                                                                                        
002cde   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002ce0   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002ce2   ffd9                                                                                                               
002ce4   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
002ce6   cfd9     MOVFF     0xfd9,0xfe6    byte* getSharedBuffer(byte handler){                                             C:\usb4all\fw\demo\user\handlerManager.c
002ce8   ffe6                                                                                                               
002cea   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002cec   ffd9                                                                                                               
002cee   0e05     MOVLW     0x5                                                                                             
002cf0   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	// esta hecho para modo 0 ping pong                                             C:\usb4all\fw\demo\user\handlerManager.c
                                           	epHandlerMapItem hmi;                                                           C:\usb4all\fw\demo\user\handlerManager.c
                                           	byte ep;                                                                        C:\usb4all\fw\demo\user\handlerManager.c
002cf2   0efe     MOVLW     0xfe           	hmi = epHandlerMap[handler];                                                    C:\usb4all\fw\demo\user\handlerManager.c
002cf4   50db     MOVF      0xdb,0x0,0x0                                                                                    
002cf6   0d04     MULLW     0x4                                                                                             
002cf8   cff3     MOVFF     0xff3,0xfe9                                                                                     
002cfa   ffe9                                                                                                               
002cfc   cff4     MOVFF     0xff4,0xfea                                                                                     
002cfe   ffea                                                                                                               
002d00   0e61     MOVLW     0x61                                                                                            
002d02   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002d04   0e00     MOVLW     0x0                                                                                             
002d06   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002d08   cfee     MOVFF     0xfee,0xfdf                                                                                     
002d0a   ffdf                                                                                                               
002d0c   0e01     MOVLW     0x1                                                                                             
002d0e   cfee     MOVFF     0xfee,0xfdb                                                                                     
002d10   ffdb                                                                                                               
002d12   0e02     MOVLW     0x2                                                                                             
002d14   cfee     MOVFF     0xfee,0xfdb                                                                                     
002d16   ffdb                                                                                                               
002d18   0e03     MOVLW     0x3                                                                                             
002d1a   cfee     MOVFF     0xfee,0xfdb                                                                                     
002d1c   ffdb                                                                                                               
002d1e   cfd9     MOVFF     0xfd9,0xfe9    	ep = hmi.ep.EPNum;                                                              C:\usb4all\fw\demo\user\handlerManager.c
002d20   ffe9                                                                                                               
002d22   cfda     MOVFF     0xfda,0xfea                                                                                     
002d24   ffea                                                                                                               
002d26   50ef     MOVF      0xef,0x0,0x0                                                                                    
002d28   0b0f     ANDLW     0xf                                                                                             
002d2a   6ee7     MOVWF     0xe7,0x0                                                                                        
002d2c   0e04     MOVLW     0x4                                                                                             
002d2e   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
002d30   ffdb                                                                                                               
002d32   0efe     MOVLW     0xfe           	if (handler==0)                                                                 C:\usb4all\fw\demo\user\handlerManager.c
002d34   50db     MOVF      0xdb,0x0,0x0                                                                                    
002d36   e10a     BNZ       0x2d4c                                                                                          
                                           		//Se que el admin atiende el endpoint 1 y esta es la forma que tengo de que se pueda inicializar antes C:\usb4all\fw\demo\user\handlerManager.c
                                           		//el admin que la tabla de BDTs                                                C:\usb4all\fw\demo\user\handlerManager.c
002d38   0e73     MOVLW     0x73           		return &ep1_in_buffer[SIZE__HM_DATA_PACKET_HEADER];                            C:\usb4all\fw\demo\user\handlerManager.c
002d3a   6e10     MOVWF     0x10,0x0                                                                                        
002d3c   0e04     MOVLW     0x4                                                                                             
002d3e   6e11     MOVWF     0x11,0x0                                                                                        
002d40   c010     MOVFF     0x10,0xff3                                                                                      
002d42   fff3                                                                                                               
002d44   c011     MOVFF     0x11,0xff4                                                                                      
002d46   fff4                                                                                                               
002d48   d01f     BRA       0x2d88                                                                                          
002d4a   d01e     BRA       0x2d88         	else                                                                            C:\usb4all\fw\demo\user\handlerManager.c
002d4c   0e04     MOVLW     0x4            		return EPBUFFERIN(ep) + SIZE__HM_DATA_PACKET_HEADER;                           C:\usb4all\fw\demo\user\handlerManager.c
002d4e   50db     MOVF      0xdb,0x0,0x0                                                                                    
002d50   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
002d52   0f01     ADDLW     0x1                                                                                             
002d54   0d04     MULLW     0x4                                                                                             
002d56   cff3     MOVFF     0xff3,0xfe9                                                                                     
002d58   ffe9                                                                                                               
002d5a   cff4     MOVFF     0xff4,0xfea                                                                                     
002d5c   ffea                                                                                                               
002d5e   0e00     MOVLW     0x0                                                                                             
002d60   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002d62   0e04     MOVLW     0x4                                                                                             
002d64   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002d66   0e02     MOVLW     0x2                                                                                             
002d68   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002d6a   0e00     MOVLW     0x0                                                                                             
002d6c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002d6e   cfee     MOVFF     0xfee,0x10                                                                                      
002d70   f010                                                                                                               
002d72   cfef     MOVFF     0xfef,0x11                                                                                      
002d74   f011                                                                                                               
002d76   0e03     MOVLW     0x3                                                                                             
002d78   2610     ADDWF     0x10,0x1,0x0                                                                                    
002d7a   0e00     MOVLW     0x0                                                                                             
002d7c   2211     ADDWFC    0x11,0x1,0x0                                                                                    
002d7e   c010     MOVFF     0x10,0xff3                                                                                      
002d80   fff3                                                                                                               
002d82   c011     MOVFF     0x11,0xff4                                                                                      
002d84   fff4                                                                                                               
002d86   d000     BRA       0x2d88                                                                                          
                                           		//return (((BDT*)0x400)[2*ep+1].ADR)+ SIZE__HM_DATA_PACKET_HEADER;             C:\usb4all\fw\demo\user\handlerManager.c
002d88   0e05     MOVLW     0x5            }                                                                                C:\usb4all\fw\demo\user\handlerManager.c
002d8a   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
002d8c   e202     BC        0x2d92                                                                                          
002d8e   6ae1     CLRF      0xe1,0x0                                                                                        
002d90   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002d92   6ee1     MOVWF     0xe1,0x0                                                                                        
002d94   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002d96   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002d98   ffd9                                                                                                               
002d9a   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
002d9c   cfd9     MOVFF     0xfd9,0xfe6    byte getEPSizeOUT(byte ep){                                                      C:\usb4all\fw\demo\user\handlerManager.c
002d9e   ffe6                                                                                                               
002da0   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002da2   ffd9                                                                                                               
                                           	// TODO deshardcodear el 64 !!                                                  C:\usb4all\fw\demo\user\handlerManager.c
002da4   0e40     MOVLW     0x40           	return 64;                                                                      C:\usb4all\fw\demo\user\handlerManager.c
002da6   d000     BRA       0x2da8                                                                                          
002da8   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\handlerManager.c
002daa   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002dac   ffd9                                                                                                               
002dae   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
002db0   cfd9     MOVFF     0xfd9,0xfe6    byte getEPSizeIN(byte ep){                                                       C:\usb4all\fw\demo\user\handlerManager.c
002db2   ffe6                                                                                                               
002db4   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002db6   ffd9                                                                                                               
                                           	// TODO deshardcodear el 64 !!                                                  C:\usb4all\fw\demo\user\handlerManager.c
002db8   0e40     MOVLW     0x40           	return 64;                                                                      C:\usb4all\fw\demo\user\handlerManager.c
002dba   d000     BRA       0x2dbc                                                                                          
002dbc   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\handlerManager.c
002dbe   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002dc0   ffd9                                                                                                               
002dc2   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
                                           /** EOF handlerManager.c ***************************************************************/ C:\usb4all\fw\demo\user\handlerManager.c
                                                                                                                            C:\usb4all\fw\demo\user\handlerManager.c
                                           /*********************************************************************           C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            *********************************************************************           C:\usb4all\fw\demo\main.c
                                            * FileName:        main.c                                                       C:\usb4all\fw\demo\main.c
                                            * Dependencies:    See INCLUDES section below                                   C:\usb4all\fw\demo\main.c
                                            * Processor:       PIC18                                                        C:\usb4all\fw\demo\main.c
                                            * Compiler:        C18 2.30.01+                                                 C:\usb4all\fw\demo\main.c
                                            * Company:         Microchip Technology, Inc.                                   C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * Software License Agreement                                                    C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\usb4all\fw\demo\main.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\usb4all\fw\demo\main.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\usb4all\fw\demo\main.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\usb4all\fw\demo\main.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\usb4all\fw\demo\main.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\usb4all\fw\demo\main.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\usb4all\fw\demo\main.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\usb4all\fw\demo\main.c
                                            * civil liability for the breach of the terms and conditions of this            C:\usb4all\fw\demo\main.c
                                            * license.                                                                      C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\usb4all\fw\demo\main.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\usb4all\fw\demo\main.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\usb4all\fw\demo\main.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\usb4all\fw\demo\main.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\usb4all\fw\demo\main.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * Author               Date        Comment                                      C:\usb4all\fw\demo\main.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\usb4all\fw\demo\main.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\usb4all\fw\demo\main.c
                                            * Rafael Fernandez     10/03/07                                                 C:\usb4all\fw\demo\main.c
                                            * Andres Aguirre	    27/03/07 	                                                 C:\usb4all\fw\demo\main.c
                                            ********************************************************************/           C:\usb4all\fw\demo\main.c
                                                                                                                            C:\usb4all\fw\demo\main.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\main.c
                                           #include <p18cxxx.h>			                                                          C:\usb4all\fw\demo\main.c
                                           #include "system\typedefs.h"                        // Required                  C:\usb4all\fw\demo\main.c
                                           #include "system\usb\usb.h"                         // Required                  C:\usb4all\fw\demo\main.c
                                           #include "io_cfg.h"                                 // Required                  C:\usb4all\fw\demo\main.c
                                                                                                                            C:\usb4all\fw\demo\main.c
                                                                                                                            C:\usb4all\fw\demo\main.c
                                           #include "system\usb\usb_compile_time_validation.h" // Optional                  C:\usb4all\fw\demo\main.c
                                           #include "user\dynamicPolling.h"                              // Modifiable      C:\usb4all\fw\demo\main.c
                                           #include "usb4all\dynamicISR\dynamicISR.h"                              // Modifiable C:\usb4all\fw\demo\main.c
                                                                                                                            C:\usb4all\fw\demo\main.c
                                           //#include "user\user.h"                                                         C:\usb4all\fw\demo\main.c
                                           //#include "usb4all\boot\boot.h"                                                 C:\usb4all\fw\demo\main.c
                                           #include "user\handlerManager.h"                              // Modifiable      C:\usb4all\fw\demo\main.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\main.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\main.c
                                                                                                                            C:\usb4all\fw\demo\main.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\main.c
                                           static void InitializeSystem(void);                                              C:\usb4all\fw\demo\main.c
                                           void USBTasks(void);                                                             C:\usb4all\fw\demo\main.c
                                                                                                                            C:\usb4all\fw\demo\main.c
                                           /** V E C T O R  R E M A P P I N G *******************************************/  C:\usb4all\fw\demo\main.c
                                                                                                                            C:\usb4all\fw\demo\main.c
                                           extern void _startup (void);        // See c018i.c in your C18 compiler dir      C:\usb4all\fw\demo\main.c
                                           #pragma code _RESET_INTERRUPT_VECTOR = 0x000800                                  C:\usb4all\fw\demo\main.c
                                           void _reset (void)                                                               C:\usb4all\fw\demo\main.c
                                           {                                                                                C:\usb4all\fw\demo\main.c
000800   ef90     GOTO      0x2f20             _asm goto _startup _endasm                                                   C:\usb4all\fw\demo\main.c
000802   f017                                                                                                               
000804   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\main.c
                                           #pragma code sys                                                                 C:\usb4all\fw\demo\main.c
                                                                                                                            C:\usb4all\fw\demo\main.c
                                           //#pragma interrupt interruption save=section(".tmpdata")                        C:\usb4all\fw\demo\main.c
                                           #pragma code _HIGH_INTERRUPT_VECTOR = 0x000808                                   C:\usb4all\fw\demo\main.c
                                           void _high_ISR (void)                                                            C:\usb4all\fw\demo\main.c
                                           {                                                                                C:\usb4all\fw\demo\main.c
000808   ef0f     GOTO      0x201e             _asm GOTO interruption _endasm //llamo a interruption() de dynamicISR        C:\usb4all\fw\demo\main.c
00080a   f010                                                                                                               
00080c   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\main.c
                                                                                                                            C:\usb4all\fw\demo\main.c
                                           #pragma code _LOW_INTERRUPT_VECTOR = 0x000818                                    C:\usb4all\fw\demo\main.c
                                           void _low_ISR (void)                                                             C:\usb4all\fw\demo\main.c
                                           {                                                                                C:\usb4all\fw\demo\main.c
                                               //mLED_2_On();                                                               C:\usb4all\fw\demo\main.c
                                           	//interruption();                                                               C:\usb4all\fw\demo\main.c
000818   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\main.c
                                           //#pragma code                                                                   C:\usb4all\fw\demo\main.c
                                                                                                                            C:\usb4all\fw\demo\main.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\main.c
                                           #pragma code sys                                                                 C:\usb4all\fw\demo\main.c
                                                                                                                            C:\usb4all\fw\demo\main.c
                                           /******************************************************************************  C:\usb4all\fw\demo\main.c
                                            * Function:        void main(void)                                              C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * Overview:        Main program entry point.                                    C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\main.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\main.c
                                           void main(void)                                                                  C:\usb4all\fw\demo\main.c
                                           {                                                                                C:\usb4all\fw\demo\main.c
001436   d807     RCALL     0x1446             InitializeSystem();                                                          C:\usb4all\fw\demo\main.c
001442   d7fa     BRA       0x1438             while(1)                                                                     C:\usb4all\fw\demo\main.c
                                               {                                                                            C:\usb4all\fw\demo\main.c
001438   d816     RCALL     0x1466                 USBTasks();         // USB Tasks                                         C:\usb4all\fw\demo\main.c
                                                   //ProcessIO();        // See user\user.c & .h                            C:\usb4all\fw\demo\main.c
00143a   ecde     CALL      0x15bc,0x0     		polling();                                                                     C:\usb4all\fw\demo\main.c
00143c   f00a                                                                                                               
00143e   ecf6     CALL      0x23ec,0x0     		USBGenRead2();                                                                 C:\usb4all\fw\demo\main.c
001440   f011                                                                                                               
                                           		//USBGenRead3();                                                               C:\usb4all\fw\demo\main.c
                                           		//checkHandlerManagerIO();                                                     C:\usb4all\fw\demo\main.c
                                               }//end while                                                                 C:\usb4all\fw\demo\main.c
001444   0012     RETURN    0x0            }//end main                                                                      C:\usb4all\fw\demo\main.c
                                                                                                                            C:\usb4all\fw\demo\main.c
                                                                                                                            C:\usb4all\fw\demo\main.c
                                           /******************************************************************************  C:\usb4all\fw\demo\main.c
                                            * Function:        static void InitializeSystem(void)                           C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * Overview:        InitializeSystem is a centralize initialization routine.     C:\usb4all\fw\demo\main.c
                                            *                  All required USB initialization routines are called from     C:\usb4all\fw\demo\main.c
                                            *                  here.                                                        C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            *                  User application initialization routine should also be       C:\usb4all\fw\demo\main.c
                                            *                  called from here.                                            C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\main.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\main.c
                                           static void InitializeSystem(void)                                               C:\usb4all\fw\demo\main.c
                                           {                                                                                C:\usb4all\fw\demo\main.c
001446   0e0f     MOVLW     0xf                ADCON1 |= 0x0F;                 // Default all pins to digital               C:\usb4all\fw\demo\main.c
001448   12c1     IORWF     0xc1,0x1,0x0                                                                                    
                                                                                                                            C:\usb4all\fw\demo\main.c
                                               #if defined(USE_USB_BUS_SENSE_IO)                                            C:\usb4all\fw\demo\main.c
                                               tris_usb_bus_sense = INPUT_PIN; // See io_cfg.h                              C:\usb4all\fw\demo\main.c
                                               #endif                                                                       C:\usb4all\fw\demo\main.c
                                                                                                                            C:\usb4all\fw\demo\main.c
                                               #if defined(USE_SELF_POWER_SENSE_IO)                                         C:\usb4all\fw\demo\main.c
                                               tris_self_power = INPUT_PIN;                                                 C:\usb4all\fw\demo\main.c
                                               #endif                                                                       C:\usb4all\fw\demo\main.c
                                                                                                                            C:\usb4all\fw\demo\main.c
00144a   0e14     MOVLW     0x14               mInitializeUSBDriver();         // See usbdrv.h                              C:\usb4all\fw\demo\main.c
00144c   6e6f     MOVWF     0x6f,0x0                                                                                        
00144e   0101     MOVLB     0x1                                                                                             
001450   6b72     CLRF      0x72,0x1                                                                                        
001452   0101     MOVLB     0x1                                                                                             
001454   6b73     CLRF      0x73,0x1                                                                                        
001456   0101     MOVLB     0x1                                                                                             
001458   6b74     CLRF      0x74,0x1                                                                                        
                                                                                                                            C:\usb4all\fw\demo\main.c
                                               //UserInit();   // See user.c & .h es llamada desde userInit(0) ahora        C:\usb4all\fw\demo\main.c
                                           	                                                                                C:\usb4all\fw\demo\main.c
00145a   ec5f     CALL      0x1ebe,0x0     	initISRFunctions();                                                             C:\usb4all\fw\demo\main.c
00145c   f00f                                                                                                               
00145e   ec3a     CALL      0x1474,0x0     	initPollingFunctions();                                                         C:\usb4all\fw\demo\main.c
001460   f00a                                                                                                               
                                           		                                                                               C:\usb4all\fw\demo\main.c
001462   ef33     GOTO      0x2a66         	initHandlerManager();                                                           C:\usb4all\fw\demo\main.c
001464   f015                                                                                                               
                                           	//userInit(0);					//esto lo deberia hacer el admin module!!                    C:\usb4all\fw\demo\main.c
                                           	                                                                                C:\usb4all\fw\demo\main.c
                                           	//userBootInit(1);                                                              C:\usb4all\fw\demo\main.c
                                           	                                                                                C:\usb4all\fw\demo\main.c
                                           	                                                                                C:\usb4all\fw\demo\main.c
                                           	//initHandlerBuffers();			//inicializo los buffers                              C:\usb4all\fw\demo\main.c
                                           	                                                                                C:\usb4all\fw\demo\main.c
                                           }//end InitializeSystem                                                          C:\usb4all\fw\demo\main.c
                                                                                                                            C:\usb4all\fw\demo\main.c
                                           /******************************************************************************  C:\usb4all\fw\demo\main.c
                                            * Function:        void USBTasks(void)                                          C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * PreCondition:    InitializeSystem has been called.                            C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * Overview:        Service loop for USB tasks.                                  C:\usb4all\fw\demo\main.c
                                            *                                                                               C:\usb4all\fw\demo\main.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\main.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\main.c
                                           void USBTasks(void)                                                              C:\usb4all\fw\demo\main.c
                                           {                                                                                C:\usb4all\fw\demo\main.c
                                               /*                                                                           C:\usb4all\fw\demo\main.c
                                                * Servicing Hardware                                                        C:\usb4all\fw\demo\main.c
                                                */                                                                          C:\usb4all\fw\demo\main.c
001466   ec8d     CALL      0xd1a,0x0          USBCheckBusStatus();                    // Must use polling method           C:\usb4all\fw\demo\main.c
001468   f006                                                                                                               
00146a   be6f     BTFSC     0x6f,0x7,0x0       if(UCFGbits.UTEYE!=1)                                                        C:\usb4all\fw\demo\main.c
00146c   d002     BRA       0x1472                                                                                          
00146e   ecac     CALL      0xd58,0x0              USBDriverService();                 // Interrupt or polling method       C:\usb4all\fw\demo\main.c
001470   f006                                                                                                               
                                                                                                                            C:\usb4all\fw\demo\main.c
001472   0012     RETURN    0x0            }// end USBTasks                                                                 C:\usb4all\fw\demo\main.c
                                                                                                                            C:\usb4all\fw\demo\main.c
                                           #pragma code sys                                                                 C:\usb4all\fw\demo\main.c
                                           /** EOF main.c ***************************************************************/  C:\usb4all\fw\demo\main.c
                                           /* Author               Date        Comment                                      C:\usb4all\fw\demo\user\dynamicPolling.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\usb4all\fw\demo\user\dynamicPolling.c
                                            * Rafael Fernandez    27/03/07 	Original                                        C:\usb4all\fw\demo\user\dynamicPolling.c
                                            * Andres Aguirre      03/04/07                                                  C:\usb4all\fw\demo\user\dynamicPolling.c
                                            ********************************************************************/           C:\usb4all\fw\demo\user\dynamicPolling.c
                                                                                                                            C:\usb4all\fw\demo\user\dynamicPolling.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\user\dynamicPolling.c
                                           #include <p18cxxx.h>                                                             C:\usb4all\fw\demo\user\dynamicPolling.c
                                           #include "system\typedefs.h"                        // Required                  C:\usb4all\fw\demo\user\dynamicPolling.c
                                           #include "system\usb\usb.h"                         // Required                  C:\usb4all\fw\demo\user\dynamicPolling.c
                                           #include "io_cfg.h"                                 // Required                  C:\usb4all\fw\demo\user\dynamicPolling.c
                                                                                                                            C:\usb4all\fw\demo\user\dynamicPolling.c
                                           #include "dynamicPolling.h"                              // Modifiable           C:\usb4all\fw\demo\user\dynamicPolling.c
                                                                                                                            C:\usb4all\fw\demo\user\dynamicPolling.c
                                           #include "system\usb\usb_compile_time_validation.h" // Optional                  C:\usb4all\fw\demo\user\dynamicPolling.c
                                           //#include "user\user.h"                                                         C:\usb4all\fw\demo\user\dynamicPolling.c
                                           #include "user\handlerManager.h"                              // Modifiable      C:\usb4all\fw\demo\user\dynamicPolling.c
                                                                                                                            C:\usb4all\fw\demo\user\dynamicPolling.c
                                                                                                                            C:\usb4all\fw\demo\user\dynamicPolling.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\user\dynamicPolling.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\user\dynamicPolling.c
                                           void (*pollingFunction[MAX_POLLING_FUNCTIONS]) (void) ;//arreglo de punteros a las funcioens received de los modulos C:\usb4all\fw\demo\user\dynamicPolling.c
                                                                                                                            C:\usb4all\fw\demo\user\dynamicPolling.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\user\dynamicPolling.c
                                                                                                                            C:\usb4all\fw\demo\user\dynamicPolling.c
                                           #pragma code sys                                                                 C:\usb4all\fw\demo\user\dynamicPolling.c
                                                                                                                            C:\usb4all\fw\demo\user\dynamicPolling.c
                                                                                                                            C:\usb4all\fw\demo\user\dynamicPolling.c
001474   cfd9     MOVFF     0xfd9,0xfe6    void initPollingFunctions(void){                                                 C:\usb4all\fw\demo\user\dynamicPolling.c
001476   ffe6                                                                                                               
001478   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00147a   ffd9                                                                                                               
00147c   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	byte i;                                                                         C:\usb4all\fw\demo\user\dynamicPolling.c
00147e   6adf     CLRF      0xdf,0x0       	for (i=0; i<MAX_POLLING_FUNCTIONS;i++){                                         C:\usb4all\fw\demo\user\dynamicPolling.c
001480   0e05     MOVLW     0x5                                                                                             
001482   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
001484   e20d     BC        0x14a0                                                                                          
00149c   2adf     INCF      0xdf,0x1,0x0                                                                                    
00149e   d7f0     BRA       0x1480                                                                                          
001486   6aea     CLRF      0xea,0x0       		pollingFunction[i] = 0; //supongo 0 = null                                     C:\usb4all\fw\demo\user\dynamicPolling.c
001488   34df     RLCF      0xdf,0x0,0x0                                                                                    
00148a   0bfe     ANDLW     0xfe                                                                                            
00148c   36ea     RLCF      0xea,0x1,0x0                                                                                    
00148e   6ee9     MOVWF     0xe9,0x0                                                                                        
001490   0e3d     MOVLW     0x3d                                                                                            
001492   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
001494   0e01     MOVLW     0x1                                                                                             
001496   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001498   6aee     CLRF      0xee,0x0                                                                                        
00149a   6aed     CLRF      0xed,0x0                                                                                        
                                           	}							                                                                        C:\usb4all\fw\demo\user\dynamicPolling.c
0014a0   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\dynamicPolling.c
0014a2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014a4   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0014a6   ffd9                                                                                                               
0014a8   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\dynamicPolling.c
0014aa   cfd9     MOVFF     0xfd9,0xfe6    BOOL addPollingFunction(void (*pollingFun) (void)){                              C:\usb4all\fw\demo\user\dynamicPolling.c
0014ac   ffe6                                                                                                               
0014ae   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0014b0   ffd9                                                                                                               
0014b2   0e02     MOVLW     0x2                                                                                             
0014b4   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
0014b6   6adf     CLRF      0xdf,0x0       	byte i = 0;                                                                     C:\usb4all\fw\demo\user\dynamicPolling.c
0014b8   0e01     MOVLW     0x1            	BOOL termine = FALSE;                                                           C:\usb4all\fw\demo\user\dynamicPolling.c
0014ba   6adb     CLRF      0xdb,0x0                                                                                        
0014bc   0e05     MOVLW     0x5            	while (i<MAX_POLLING_FUNCTIONS && !termine){                                    C:\usb4all\fw\demo\user\dynamicPolling.c
0014be   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
0014c0   e223     BC        0x1508                                                                                          
0014c2   0e01     MOVLW     0x1                                                                                             
0014c4   50db     MOVF      0xdb,0x0,0x0                                                                                    
0014c6   e120     BNZ       0x1508                                                                                          
001506   d7da     BRA       0x14bc                                                                                          
0014c8   6aea     CLRF      0xea,0x0       		if ( pollingFunction[i] == 0) { //TODO ojo que cambie != por ==                C:\usb4all\fw\demo\user\dynamicPolling.c
0014ca   34df     RLCF      0xdf,0x0,0x0                                                                                    
0014cc   0bfe     ANDLW     0xfe                                                                                            
0014ce   36ea     RLCF      0xea,0x1,0x0                                                                                    
0014d0   6ee9     MOVWF     0xe9,0x0                                                                                        
0014d2   0e3d     MOVLW     0x3d                                                                                            
0014d4   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0014d6   0e01     MOVLW     0x1                                                                                             
0014d8   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0014da   50ee     MOVF      0xee,0x0,0x0                                                                                    
0014dc   10ed     IORWF     0xed,0x0,0x0                                                                                    
0014de   e112     BNZ       0x1504                                                                                          
0014e0   52de     MOVF      0xde,0x1,0x0   			termine = TRUE;                                                               C:\usb4all\fw\demo\user\dynamicPolling.c
0014e2   0e01     MOVLW     0x1                                                                                             
0014e4   6edd     MOVWF     0xdd,0x0                                                                                        
0014e6   6aea     CLRF      0xea,0x0       			pollingFunction[i] = pollingFun;                                              C:\usb4all\fw\demo\user\dynamicPolling.c
0014e8   34df     RLCF      0xdf,0x0,0x0                                                                                    
0014ea   0bfe     ANDLW     0xfe                                                                                            
0014ec   36ea     RLCF      0xea,0x1,0x0                                                                                    
0014ee   6ee9     MOVWF     0xe9,0x0                                                                                        
0014f0   0e3d     MOVLW     0x3d                                                                                            
0014f2   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0014f4   0e01     MOVLW     0x1                                                                                             
0014f6   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0014f8   0efd     MOVLW     0xfd                                                                                            
0014fa   cfdb     MOVFF     0xfdb,0xfee                                                                                     
0014fc   ffee                                                                                                               
0014fe   0efe     MOVLW     0xfe                                                                                            
001500   cfdb     MOVFF     0xfdb,0xfed                                                                                     
001502   ffed                                                                                                               
                                           		}                                                                              C:\usb4all\fw\demo\user\dynamicPolling.c
001504   2adf     INCF      0xdf,0x1,0x0   		i++;                                                                           C:\usb4all\fw\demo\user\dynamicPolling.c
                                           	}                                                                               C:\usb4all\fw\demo\user\dynamicPolling.c
001508   0e01     MOVLW     0x1            	if (!termine) return FALSE;                                                     C:\usb4all\fw\demo\user\dynamicPolling.c
00150a   50db     MOVF      0xdb,0x0,0x0                                                                                    
00150c   e102     BNZ       0x1512                                                                                          
00150e   0e00     MOVLW     0x0                                                                                             
001510   d002     BRA       0x1516                                                                                          
001512   0e01     MOVLW     0x1            	return TRUE;                                                                    C:\usb4all\fw\demo\user\dynamicPolling.c
001514   d000     BRA       0x1516                                                                                          
001516   6e10     MOVWF     0x10,0x0       } 		                                                                             C:\usb4all\fw\demo\user\dynamicPolling.c
001518   0e02     MOVLW     0x2                                                                                             
00151a   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
00151c   e202     BC        0x1522                                                                                          
00151e   6ae1     CLRF      0xe1,0x0                                                                                        
001520   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001522   6ee1     MOVWF     0xe1,0x0                                                                                        
001524   5010     MOVF      0x10,0x0,0x0                                                                                    
001526   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001528   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00152a   ffd9                                                                                                               
00152c   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\dynamicPolling.c
00152e   cfd9     MOVFF     0xfd9,0xfe6    BOOL removePoolingFunction(void (*pollingFun) (void)){                           C:\usb4all\fw\demo\user\dynamicPolling.c
001530   ffe6                                                                                                               
001532   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001534   ffd9                                                                                                               
001536   0e02     MOVLW     0x2                                                                                             
001538   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
00153a   6adf     CLRF      0xdf,0x0       	byte i=0;                                                                       C:\usb4all\fw\demo\user\dynamicPolling.c
00153c   0e01     MOVLW     0x1            	BOOL termine=FALSE;                                                             C:\usb4all\fw\demo\user\dynamicPolling.c
00153e   6adb     CLRF      0xdb,0x0                                                                                        
001540   0e05     MOVLW     0x5            	while (i<MAX_POLLING_FUNCTIONS && !termine){                                    C:\usb4all\fw\demo\user\dynamicPolling.c
001542   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
001544   e228     BC        0x1596                                                                                          
001546   0e01     MOVLW     0x1                                                                                             
001548   50db     MOVF      0xdb,0x0,0x0                                                                                    
00154a   e125     BNZ       0x1596                                                                                          
001594   d7d5     BRA       0x1540                                                                                          
00154c   6aea     CLRF      0xea,0x0       		if ( pollingFunction[i] == pollingFun) {                                       C:\usb4all\fw\demo\user\dynamicPolling.c
00154e   34df     RLCF      0xdf,0x0,0x0                                                                                    
001550   0bfe     ANDLW     0xfe                                                                                            
001552   36ea     RLCF      0xea,0x1,0x0                                                                                    
001554   6ee9     MOVWF     0xe9,0x0                                                                                        
001556   0e3d     MOVLW     0x3d                                                                                            
001558   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00155a   0e01     MOVLW     0x1                                                                                             
00155c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00155e   cfee     MOVFF     0xfee,0x10                                                                                      
001560   f010                                                                                                               
001562   cfef     MOVFF     0xfef,0x11                                                                                      
001564   f011                                                                                                               
001566   0efd     MOVLW     0xfd                                                                                            
001568   50db     MOVF      0xdb,0x0,0x0                                                                                    
00156a   1810     XORWF     0x10,0x0,0x0                                                                                    
00156c   e103     BNZ       0x1574                                                                                          
00156e   0efe     MOVLW     0xfe                                                                                            
001570   50db     MOVF      0xdb,0x0,0x0                                                                                    
001572   1811     XORWF     0x11,0x0,0x0                                                                                    
001574   e10e     BNZ       0x1592                                                                                          
001576   52de     MOVF      0xde,0x1,0x0   			termine = TRUE;                                                               C:\usb4all\fw\demo\user\dynamicPolling.c
001578   0e01     MOVLW     0x1                                                                                             
00157a   6edd     MOVWF     0xdd,0x0                                                                                        
00157c   6aea     CLRF      0xea,0x0       			pollingFunction [i] = 0;                                                      C:\usb4all\fw\demo\user\dynamicPolling.c
00157e   34df     RLCF      0xdf,0x0,0x0                                                                                    
001580   0bfe     ANDLW     0xfe                                                                                            
001582   36ea     RLCF      0xea,0x1,0x0                                                                                    
001584   6ee9     MOVWF     0xe9,0x0                                                                                        
001586   0e3d     MOVLW     0x3d                                                                                            
001588   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00158a   0e01     MOVLW     0x1                                                                                             
00158c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00158e   6aee     CLRF      0xee,0x0                                                                                        
001590   6aed     CLRF      0xed,0x0                                                                                        
                                           		}                                                                              C:\usb4all\fw\demo\user\dynamicPolling.c
001592   2adf     INCF      0xdf,0x1,0x0   		i++;                                                                           C:\usb4all\fw\demo\user\dynamicPolling.c
                                           	}                                                                               C:\usb4all\fw\demo\user\dynamicPolling.c
001596   0e01     MOVLW     0x1            	if (!termine) return FALSE;                                                     C:\usb4all\fw\demo\user\dynamicPolling.c
001598   50db     MOVF      0xdb,0x0,0x0                                                                                    
00159a   e102     BNZ       0x15a0                                                                                          
00159c   0e00     MOVLW     0x0                                                                                             
00159e   d002     BRA       0x15a4                                                                                          
0015a0   0e01     MOVLW     0x1            	return TRUE;                                                                    C:\usb4all\fw\demo\user\dynamicPolling.c
0015a2   d000     BRA       0x15a4                                                                                          
0015a4   6e10     MOVWF     0x10,0x0       }                                                                                C:\usb4all\fw\demo\user\dynamicPolling.c
0015a6   0e02     MOVLW     0x2                                                                                             
0015a8   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0015aa   e202     BC        0x15b0                                                                                          
0015ac   6ae1     CLRF      0xe1,0x0                                                                                        
0015ae   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0015b0   6ee1     MOVWF     0xe1,0x0                                                                                        
0015b2   5010     MOVF      0x10,0x0,0x0                                                                                    
0015b4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0015b6   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0015b8   ffd9                                                                                                               
0015ba   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\dynamicPolling.c
0015bc   cfd9     MOVFF     0xfd9,0xfe6    void polling(void){                                                              C:\usb4all\fw\demo\user\dynamicPolling.c
0015be   ffe6                                                                                                               
0015c0   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0015c2   ffd9                                                                                                               
0015c4   52e6     MOVF      0xe6,0x1,0x0                                                                                    
0015c6   6adf     CLRF      0xdf,0x0       	byte i=0;                                                                       C:\usb4all\fw\demo\user\dynamicPolling.c
0015c8   0e05     MOVLW     0x5            	while (i<MAX_POLLING_FUNCTIONS){                                                C:\usb4all\fw\demo\user\dynamicPolling.c
0015ca   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
0015cc   e221     BC        0x1610                                                                                          
00160e   d7dc     BRA       0x15c8                                                                                          
                                           		//mLED_4_On();                                                                 C:\usb4all\fw\demo\user\dynamicPolling.c
0015ce   6aea     CLRF      0xea,0x0       		if(pollingFunction[i] != 0){ //tube que bajar esta condicion del while al if, porque cuando me remueven pueden quedar "huecos" C:\usb4all\fw\demo\user\dynamicPolling.c
0015d0   34df     RLCF      0xdf,0x0,0x0                                                                                    
0015d2   0bfe     ANDLW     0xfe                                                                                            
0015d4   36ea     RLCF      0xea,0x1,0x0                                                                                    
0015d6   6ee9     MOVWF     0xe9,0x0                                                                                        
0015d8   0e3d     MOVLW     0x3d                                                                                            
0015da   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0015dc   0e01     MOVLW     0x1                                                                                             
0015de   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0015e0   50ee     MOVF      0xee,0x0,0x0                                                                                    
0015e2   10ed     IORWF     0xed,0x0,0x0                                                                                    
0015e4   e013     BZ        0x160c                                                                                          
0015e6   6aea     CLRF      0xea,0x0       			pollingFunction[i]();                                                         C:\usb4all\fw\demo\user\dynamicPolling.c
0015e8   34df     RLCF      0xdf,0x0,0x0                                                                                    
0015ea   0bfe     ANDLW     0xfe                                                                                            
0015ec   36ea     RLCF      0xea,0x1,0x0                                                                                    
0015ee   6ee9     MOVWF     0xe9,0x0                                                                                        
0015f0   0e3d     MOVLW     0x3d                                                                                            
0015f2   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0015f4   0e01     MOVLW     0x1                                                                                             
0015f6   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0015f8   cfee     MOVFF     0xfee,0x10                                                                                      
0015fa   f010                                                                                                               
0015fc   cfef     MOVFF     0xfef,0x11                                                                                      
0015fe   f011                                                                                                               
001600   d004     BRA       0x160a                                                                                          
001602   c011     MOVFF     0x11,0xffa                                                                                      
001604   fffa                                                                                                               
001606   5010     MOVF      0x10,0x0,0x0                                                                                    
001608   6ef9     MOVWF     0xf9,0x0                                                                                        
00160a   dffb     RCALL     0x1602                                                                                          
                                           		}                                                                              C:\usb4all\fw\demo\user\dynamicPolling.c
00160c   2adf     INCF      0xdf,0x1,0x0   		i++;                                                                           C:\usb4all\fw\demo\user\dynamicPolling.c
                                           	}                                                                               C:\usb4all\fw\demo\user\dynamicPolling.c
001610   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\dynamicPolling.c
001612   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001614   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001616   ffd9                                                                                                               
001618   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\dynamicPolling.c
                                           //Autogenerated file using USB4ALL Descriptor generator V1.0  Author: Rafael Fernandez C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           /** I N C L U D E S *************************************************/           C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           #include "system\typedefs.h"                                                     C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           #include "system\usb\usb.h"                                                      C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           /** C O N S T A N T S ************************************************/          C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           #pragma romdata _device_dsc                                                      C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           //	 Device Descriptor                                                            C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           rom USB_DEV_DSC device_dsc=                                                      C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           {                                                                                C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                               sizeof(USB_DEV_DSC),    // Size of this descriptor in bytes                  C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                               DSC_DEV,                // DEVICE descriptor type                            C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                               0x0200,				// USB Spec Release Number in BCD format                          C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                               0x0,				// Class Code                                                        C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                               0x0,				// Subclass code                                                     C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                               0x0,				// Protocol code                                                     C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                               EP0_BUFF_SIZE,				// Max packet size for EP0, see usbcfg.h                   C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                               0x4d8,				// Vendor ID                                                       C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                               0xc,				// Product ID: PICDEM FS USB (DEMO Mode)                             C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                               0x0,				// Device release number in BCD format                               C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                               0x1,				// Manufacturer string index                                         C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                               0x2,				// Product string index                                              C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                               0x3,				// Device serial number string index                                 C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                               0x1,				// Number of possible configurations                                 C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           };                                                                               C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           //		 Configuration 1 Descriptor                                                  C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           CFG01=                                                                           C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           {                                                                                C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                               // Configuration Descriptor                                                  C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                               sizeof(USB_CFG_DSC),    // Size of this descriptor in bytes                  C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                               DSC_CFG,                // CONFIGURATION descriptor type                     C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                               sizeof(cfg01),          // Total length of data for this cfg                 C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           1,                      // Number of interfaces in this cfg                      C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           1,                      // Index value of this configuration                     C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           0,                      // Configuration string index                            C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           _DEFAULT,               // Attributes, see usbdefs_std_dsc.h                     C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           50,                     // Max power consumption (2X mA)                         C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           // Interface Descriptor                                                          C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           sizeof(USB_INTF_DSC),   // Size of this descriptor in bytes                      C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           DSC_INTF,               // INTERFACE descriptor type                             C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           0,                      // Interface Number                                      C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           0,                      // Alternate Setting Number                              C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           6,                      // Number of endpoints in this intf                      C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           0x0,                   // Class code                                             C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           0x0,                   // Subclass code                                          C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           0x0,                   // Protocol code                                          C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           0,                      // Interface string index                                C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           //				 Endpoint Descriptors                                                      C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           sizeof(USB_EP_DSC),DSC_EP,_EP01_OUT,_BULK,64,32,                                 C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           sizeof(USB_EP_DSC),DSC_EP,_EP01_IN,_BULK,64,32,                                  C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           sizeof(USB_EP_DSC),DSC_EP,_EP02_OUT,_BULK,64,32,                                 C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           sizeof(USB_EP_DSC),DSC_EP,_EP02_IN,_BULK,64,32,                                  C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           sizeof(USB_EP_DSC),DSC_EP,_EP03_OUT,_ISO,64,250,                                 C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           sizeof(USB_EP_DSC),DSC_EP,_EP03_IN,_ISO,64,250};                                 C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[1];}sd000={                    C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           sizeof(sd000),DSC_STR,0x409};                                                    C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[24];}sd001={                   C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           sizeof(sd001),DSC_STR,'A','g','u','i','r','r','e',' ','F','e','r','n','a','n','d','e','z',' ','G','r','o','s','s','y'}; C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[15];}sd002={                   C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           sizeof(sd002),DSC_STR,'U','S','B','4','a','l','l',' ','(','C',')','2','0','0','7'}; C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           rom struct{byte bLength;byte bDscType;word string[8];}sd003={                    C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           sizeof(sd003),DSC_STR,'0','0','0','0','0','0','0','2'};                          C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           //dejo estos punteros en una posicion fija de memoria                            C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           #pragma romdata _usb_cd_ptr                                                      C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           rom const unsigned char *rom USB_CD_Ptr[]={(rom char*)&cfg01,(rom char*)&cfg01}; C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           #pragma romdata _usb_sd_ptr                                                      C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           rom const unsigned char *rom USB_SD_Ptr[]={(rom char*)&sd000,(rom char*)&sd001,(rom char*)&sd002,(rom char*)&sd003}; C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           #pragma code sys                                                                 C:\usb4all\fw\demo\usb4all\usbconf\desc\usbdsc.c
                                           //Autogenerated file using USB4ALL Descriptor generator V1.0  Author: Rafael Fernandez C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           // I N C L U D E S *********************************************************     C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #include "system\typedefs.h"                                                     C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #include "system\usb\usb.h"                                                      C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #include "usb4all\boot\boot.h" //mia                                             C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           // U S B  G L O B A L  V A R I A B L E S ***********************************     C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           byte usb_device_state;          // Device States: DETACHED, ATTACHED, ...        C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           USB_DEVICE_STATUS usb_stat;     // Global USB flags                              C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           byte usb_active_cfg;            // Value of current configuration                C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           byte usb_alt_intf[MAX_NUM_INT]; // Array to keep track of the current alternate  C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                           // setting for each interface ID                 C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           byte epOutSize[MAX_EP_NUMBER] = {64,64,64};                                      C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           byte epInSize[MAX_EP_NUMBER] = {64,64,64};                                       C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           // U S B  F I X E D  L O C A T I O N  V A R I A B L E S ********************     C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #pragma udata usbram4=0x400     //See Linker Script,usb4:0x400-0x4FF(256-byte)   C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           // Section A: Buffer Descriptor Table                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #if(0 <= MAX_EP_NUMBER)                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep0Bo;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep0Bi;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #endif                                                                           C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #if(1 <= MAX_EP_NUMBER)                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep1Bo;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep1Bi;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #endif                                                                           C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #if(2 <= MAX_EP_NUMBER)                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep2Bo;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep2Bi;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #endif                                                                           C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #if(3 <= MAX_EP_NUMBER)                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep3Bo;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep3Bi;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #endif                                                                           C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #if(4 <= MAX_EP_NUMBER)                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep4Bo;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep4Bi;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #endif                                                                           C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #if(5 <= MAX_EP_NUMBER)                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep5Bo;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep5Bi;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #endif                                                                           C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #if(6 <= MAX_EP_NUMBER)                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep6Bo;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep6Bi;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #endif                                                                           C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #if(7 <= MAX_EP_NUMBER)                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep7Bo;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep7Bi;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #endif                                                                           C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #if(8 <= MAX_EP_NUMBER)                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep8Bo;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep8Bi;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #endif                                                                           C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #if(9 <= MAX_EP_NUMBER)                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep9Bo;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep9Bi;                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #endif                                                                           C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #if(10 <= MAX_EP_NUMBER)                                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep10Bo;                                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep10Bi;                                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #endif                                                                           C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #if(11 <= MAX_EP_NUMBER)                                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep11Bo;                                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep11Bi;                                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #endif                                                                           C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #if(12 <= MAX_EP_NUMBER)                                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep12Bo;                                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep12Bi;                                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #endif                                                                           C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #if(13 <= MAX_EP_NUMBER)                                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep13Bo;                                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep13Bi;                                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #endif                                                                           C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #if(14 <= MAX_EP_NUMBER)                                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep14Bo;                                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far BDT ep14Bi;                                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #endif                                                                           C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           // Section B: EP0 Buffer Space                                                   C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far CTRL_TRF_SETUP SetupPkt;                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far CTRL_TRF_DATA CtrlTrfData;                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           // Section C: Endpoints Buffers                                                  C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far byte ep1_out_buffer[64];                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far byte ep1_in_buffer[64];                                             C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far byte ep2_out_buffer[64];                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far byte ep2_in_buffer[64];                                             C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far byte ep3_out_buffer[64];                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           volatile far byte ep3_in_buffer[64];                                             C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #pragma romdata _rom_usb_endpoints_init                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           //defino el ROM_MAX_EP_NUMBER igual al define MAX_EP_NUMBER                      C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           rom unsigned char ROM_MAX_EP_NUMBER=MAX_EP_NUMBER;                               C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           	#pragma code _usb_endpoints_init                                                C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #define USBGEN_UEP              UEP1                                             C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           #define BOOT_UEP                UEP1 //uso endpoint 2 para bootloader            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           //		defino endpoints usados por el modulo                                        C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           //		la idea es que los endpoints se inicialicen sin depender del modulo que los use C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           //		Por ahora dejo los IFNDEF para no cambiar el codigo de initEps               C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           		#ifndef USBGEN_BD_OUT                                                          C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           			#define USBGEN_BD_OUT           ep1Bo                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           		#endif                                                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           		#ifndef USBGEN_BD_IN                                                           C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           			#define USBGEN_BD_IN            ep1Bi                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           		#endif                                                                         C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           void USBInitEPs(void){                                                           C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
000842   0e1e     MOVLW     0x1e           UEP1 = EP_OUT_IN|HSHK_EN;             // Enable 2 data pipes                     C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
000844   6e71     MOVWF     0x71,0x0                                                                                        
000846   0104     MOVLB     0x4            ep1Bo.Cnt = sizeof(ep1_out_buffer);     // Set buffer size                       C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
000848   0e40     MOVLW     0x40                                                                                            
00084a   6f09     MOVWF     0x9,0x1                                                                                         
00084c   0e30     MOVLW     0x30           ep1Bo.ADR = (byte*)&ep1_out_buffer;     // Set buffer address                    C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
00084e   6f0a     MOVWF     0xa,0x1                                                                                         
000850   0e04     MOVLW     0x4                                                                                             
000852   6f0b     MOVWF     0xb,0x1                                                                                         
000854   0e88     MOVLW     0x88           ep1Bo.Stat._byte = _USIE|_DAT0|_DTSEN;// Set status                              C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
000856   6f08     MOVWF     0x8,0x1                                                                                         
000858   0e70     MOVLW     0x70           ep1Bi.ADR = (byte*)&ep1_in_buffer;      // Set buffer address                    C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
00085a   6f0e     MOVWF     0xe,0x1                                                                                         
00085c   0e04     MOVLW     0x4                                                                                             
00085e   6f0f     MOVWF     0xf,0x1                                                                                         
000860   0e40     MOVLW     0x40           ep1Bi.Stat._byte = _UCPU|_DAT1;      // Set buffer status                        C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
000862   6f0c     MOVWF     0xc,0x1                                                                                         
000864   0e1e     MOVLW     0x1e           UEP2 = EP_OUT_IN|HSHK_EN;             // Enable 2 data pipes                     C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
000866   6e72     MOVWF     0x72,0x0                                                                                        
000868   0e40     MOVLW     0x40           ep2Bo.Cnt = sizeof(ep2_out_buffer);     // Set buffer size                       C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
00086a   6f11     MOVWF     0x11,0x1                                                                                        
00086c   0eb0     MOVLW     0xb0           ep2Bo.ADR = (byte*)&ep2_out_buffer;     // Set buffer address                    C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
00086e   6f12     MOVWF     0x12,0x1                                                                                        
000870   0e04     MOVLW     0x4                                                                                             
000872   6f13     MOVWF     0x13,0x1                                                                                        
000874   0e88     MOVLW     0x88           ep2Bo.Stat._byte = _USIE|_DAT0|_DTSEN;// Set status                              C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
000876   6f10     MOVWF     0x10,0x1                                                                                        
000878   0ef0     MOVLW     0xf0           ep2Bi.ADR = (byte*)&ep2_in_buffer;      // Set buffer address                    C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
00087a   6f16     MOVWF     0x16,0x1                                                                                        
00087c   0e04     MOVLW     0x4                                                                                             
00087e   6f17     MOVWF     0x17,0x1                                                                                        
000880   0e40     MOVLW     0x40           ep2Bi.Stat._byte = _UCPU|_DAT1;      // Set buffer status                        C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
000882   6f14     MOVWF     0x14,0x1                                                                                        
000884   0e1e     MOVLW     0x1e           UEP3 = EP_OUT_IN|HSHK_EN;             // Enable 2 data pipes                     C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
000886   6e73     MOVWF     0x73,0x0                                                                                        
000888   0e40     MOVLW     0x40           ep3Bo.Cnt = sizeof(ep3_out_buffer);     // Set buffer size                       C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
00088a   6f19     MOVWF     0x19,0x1                                                                                        
00088c   0e30     MOVLW     0x30           ep3Bo.ADR = (byte*)&ep3_out_buffer;     // Set buffer address                    C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
00088e   6f1a     MOVWF     0x1a,0x1                                                                                        
000890   0e05     MOVLW     0x5                                                                                             
000892   6f1b     MOVWF     0x1b,0x1                                                                                        
                                           //ep3Bo.Stat._byte = _USIE|_DAT0|_DTSEN;// Set status                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
000894   0e80     MOVLW     0x80           ep3Bo.Stat._byte = _USIE|_DAT0;// Set status                                     C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
000896   6f18     MOVWF     0x18,0x1                                                                                        
000898   0e70     MOVLW     0x70           ep3Bi.ADR = (byte*)&ep3_in_buffer;      // Set buffer address                    C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
00089a   6f1e     MOVWF     0x1e,0x1                                                                                        
00089c   0e05     MOVLW     0x5                                                                                             
00089e   6f1f     MOVWF     0x1f,0x1                                                                                        
0008a0   0e40     MOVLW     0x40           ep3Bi.Stat._byte = _UCPU|_DAT1;      // Set buffer status                        C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
0008a2   6f1c     MOVWF     0x1c,0x1                                                                                        
                                                                                                                            C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
0008a4   0101     MOVLB     0x1            boot_trf_state = WAIT_FOR_CMD;                                                   C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
0008a6   6b5b     CLRF      0x5b,0x1                                                                                        
0008a8   0012     RETURN    0x0            }//end USBGenInitEP                                                              C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           	#pragma code sys                                                                C:\usb4all\fw\demo\usb4all\usbconf\usballoc\usbmmap.c
                                           /*********************************************************************           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *      Microchip USB C18 Firmware -  USB Bootloader Version 1.00                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *********************************************************************           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * FileName:        boot.c                                                       C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * Dependencies:    See INCLUDES section below                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * Processor:       PIC18                                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * Compiler:        C18 2.30.01+                                                 C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * Company:         Microchip Technology, Inc.                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * Software License Agreement                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * civil liability for the breach of the terms and conditions of this            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * license.                                                                      C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * Author               Date        Comment                                      C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * Rawin Rojvanit       11/19/04    Original. USB Bootloader                     C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            ********************************************************************/           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           /******************************************************************************  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * -boot.c-                                                                      C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * This file contains functions necessary to carry out bootloading tasks.        C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * The only 2 USB specific functions are BootInitEP() and BootService().         C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * All other functions can be reused with other communication methods.           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           #include <p18cxxx.h>                                                             C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           #include "system\typedefs.h"                                                     C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           #include "system\usb\usb.h"                                                      C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           #include "usb4all\boot\boot.h" //mio                                             C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           #include "user\handlerManager.h"                                                 C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           #include "io_cfg.h"                                                              C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           byte boot_counter;                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           byte byteTemp;                                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           byte boot_trf_state;                                                             C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           //BOOT_DATA_PACKET dataBootPacket;                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           word big_counter;                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           byte myBootHandler;                                                              C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           byte* sendBufferBoot;                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           void userBootConfigure(void);                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           void userBootRelease(byte i);                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           void userBootInit(byte i);                                                       C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           void bootReceived(byte* recBuffPtr,byte len);                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           /** USER MODULE REFERENCE*****************************************************/  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           #pragma romdata user                                                             C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           uTab user2 = {&userBootInit,&userBootRelease,&userBootConfigure,"boot"};         C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           #pragma code                                                                     C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           #pragma code module                                                              C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           /** C L A S S  S P E C I F I C  R E Q ****************************************/  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           /** U S E R  A P I ***********************************************************/  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           /******************************************************************************  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * Function:        void BootInitEP(void)                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * Overview:        BootInitEP initializes bootloader endpoints, buffer          C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *                  descriptors, internal state-machine, and variables.          C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *                  It should be called after the USB host has sent out a        C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *                  SET_CONFIGURATION request.                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *                  See USBStdSetCfgHandler() in usb9.c for examples.            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\usb4all\boot\boot.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\usb4all\boot\boot.c
003320   cfd9     MOVFF     0xfd9,0xfe6    void userBootInit(byte i){                                                       C:\usb4all\fw\demo\usb4all\boot\boot.c
003322   ffe6                                                                                                               
003324   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003326   ffd9                                                                                                               
003328   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	BOOL res;                                                                       C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           	//inicializacion del sistema                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
00332a   0efe     MOVLW     0xfe           	myBootHandler=i;                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
00332c   cfdb     MOVFF     0xfdb,0x15e                                                                                     
00332e   f15e                                                                                                               
                                           	//agrego mi buffer en el handler module	                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           //	setHandlerReceiveBuffer(myBootHandler, (byte*)&dataBootPacket);               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           	//agrego mi funcion de Receive en el handler module                             C:\usb4all\fw\demo\usb4all\boot\boot.c
003330   0e5c     MOVLW     0x5c           	setHandlerReceiveFunction(myBootHandler,&bootReceived);                         C:\usb4all\fw\demo\usb4all\boot\boot.c
003332   6ee6     MOVWF     0xe6,0x0                                                                                        
003334   0e38     MOVLW     0x38                                                                                            
003336   6ee6     MOVWF     0xe6,0x0                                                                                        
003338   c15e     MOVFF     0x15e,0xfe6                                                                                     
00333a   ffe6                                                                                                               
00333c   ecc0     CALL      0x2380,0x0                                                                                      
00333e   f011                                                                                                               
003340   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003342   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003344   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003346   c15e     MOVFF     0x15e,0xfe6    	sendBufferBoot = getSharedBuffer(myBootHandler);                                C:\usb4all\fw\demo\usb4all\boot\boot.c
003348   ffe6                                                                                                               
00334a   ec73     CALL      0x2ce6,0x0                                                                                      
00334c   f016                                                                                                               
00334e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003350   cff3     MOVFF     0xff3,0x15f                                                                                     
003352   f15f                                                                                                               
003354   cff4     MOVFF     0xff4,0x160                                                                                     
003356   f160                                                                                                               
                                           	//inicializacion de modulo                                                      C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           	//UserInit();                                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           	//agrego la funcion de polling                                                  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           	//res = addPollingFunction(&ProcessIO);                                         C:\usb4all\fw\demo\usb4all\boot\boot.c
003358   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
00335a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00335c   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00335e   ffd9                                                                                                               
003360   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           void userBootConfigure(void){                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           // Do the configuration                                                          C:\usb4all\fw\demo\usb4all\boot\boot.c
003362   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
003364   cfd9     MOVFF     0xfd9,0xfe6    void userBootRelease(byte i){                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
003366   ffe6                                                                                                               
003368   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00336a   ffd9                                                                                                               
00336c   0efe     MOVLW     0xfe           	myBootHandler = i;                                                              C:\usb4all\fw\demo\usb4all\boot\boot.c
00336e   cfdb     MOVFF     0xfdb,0x15e                                                                                     
003370   f15e                                                                                                               
003372   c15e     MOVFF     0x15e,0xfe6    	unsetHandlerReceiveBuffer(myBootHandler);                                       C:\usb4all\fw\demo\usb4all\boot\boot.c
003374   ffe6                                                                                                               
003376   ecac     CALL      0x2358,0x0                                                                                      
003378   f011                                                                                                               
00337a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00337c   c15e     MOVFF     0x15e,0xfe6    	unsetHandlerReceiveFunction(myBootHandler);                                     C:\usb4all\fw\demo\usb4all\boot\boot.c
00337e   ffe6                                                                                                               
003380   ecd8     CALL      0x23b0,0x0                                                                                      
003382   f011                                                                                                               
003384   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003386   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
003388   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00338a   ffd9                                                                                                               
00338c   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           void StartWrite(void)                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           {                                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               /*                                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                * A write command can be prematurely terminated by MCLR or WDT reset        C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                */                                                                          C:\usb4all\fw\demo\usb4all\boot\boot.c
00338e   0e55     MOVLW     0x55               EECON2 = 0x55;                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
003390   6ea7     MOVWF     0xa7,0x0                                                                                        
003392   0eaa     MOVLW     0xaa               EECON2 = 0xAA;                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
003394   6ea7     MOVWF     0xa7,0x0                                                                                        
003396   82a6     BSF       0xa6,0x1,0x0       EECON1_WR = 1;                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
003398   0012     RETURN    0x0            }//end StartWrite                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
00339a   cfd9     MOVFF     0xfd9,0xfe6    void ReadVersion(byte* recBuffPtr) //TESTED: Passed                              C:\usb4all\fw\demo\usb4all\boot\boot.c
00339c   ffe6                                                                                                               
00339e   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0033a0   ffd9                                                                                                               
                                           {                                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
0033a2   0efd     MOVLW     0xfd               ((BOOT_DATA_PACKET*)sendBufferBoot)->_byte[0] = ((BOOT_DATA_PACKET*)recBuffPtr)->_byte[0]; C:\usb4all\fw\demo\usb4all\boot\boot.c
0033a4   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0033a6   ffe9                                                                                                               
0033a8   0efe     MOVLW     0xfe                                                                                            
0033aa   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0033ac   ffea                                                                                                               
0033ae   50ef     MOVF      0xef,0x0,0x0                                                                                    
0033b0   6ee6     MOVWF     0xe6,0x0                                                                                        
0033b2   c15f     MOVFF     0x15f,0xfe9                                                                                     
0033b4   ffe9                                                                                                               
0033b6   c160     MOVFF     0x160,0xfea                                                                                     
0033b8   ffea                                                                                                               
0033ba   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0033bc   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0033be   6eef     MOVWF     0xef,0x0                                                                                        
0033c0   0efd     MOVLW     0xfd               ((BOOT_DATA_PACKET*)sendBufferBoot)->_byte[1] = ((BOOT_DATA_PACKET*)recBuffPtr)->_byte[1];; C:\usb4all\fw\demo\usb4all\boot\boot.c
0033c2   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0033c4   ffe9                                                                                                               
0033c6   0efe     MOVLW     0xfe                                                                                            
0033c8   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0033ca   ffea                                                                                                               
0033cc   0e01     MOVLW     0x1                                                                                             
0033ce   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0033d0   0e00     MOVLW     0x0                                                                                             
0033d2   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0033d4   50ef     MOVF      0xef,0x0,0x0                                                                                    
0033d6   6ee6     MOVWF     0xe6,0x0                                                                                        
0033d8   c15f     MOVFF     0x15f,0xfe9                                                                                     
0033da   ffe9                                                                                                               
0033dc   c160     MOVFF     0x160,0xfea                                                                                     
0033de   ffea                                                                                                               
0033e0   0e01     MOVLW     0x1                                                                                             
0033e2   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0033e4   0e00     MOVLW     0x0                                                                                             
0033e6   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0033e8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0033ea   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0033ec   6eef     MOVWF     0xef,0x0                                                                                        
0033ee   c15f     MOVFF     0x15f,0xfe9        ((BOOT_DATA_PACKET*)sendBufferBoot)->_byte[2] = BOOT_MINOR_VERSION;          C:\usb4all\fw\demo\usb4all\boot\boot.c
0033f0   ffe9                                                                                                               
0033f2   c160     MOVFF     0x160,0xfea                                                                                     
0033f4   ffea                                                                                                               
0033f6   0e02     MOVLW     0x2                                                                                             
0033f8   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0033fa   0e00     MOVLW     0x0                                                                                             
0033fc   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0033fe   0e02     MOVLW     0x2                                                                                             
003400   6eef     MOVWF     0xef,0x0                                                                                        
003402   c15f     MOVFF     0x15f,0xfe9        ((BOOT_DATA_PACKET*)sendBufferBoot)->_byte[3] = BOOT_MAJOR_VERSION;          C:\usb4all\fw\demo\usb4all\boot\boot.c
003404   ffe9                                                                                                               
003406   c160     MOVFF     0x160,0xfea                                                                                     
003408   ffea                                                                                                               
00340a   0e03     MOVLW     0x3                                                                                             
00340c   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00340e   0e00     MOVLW     0x0                                                                                             
003410   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003412   0e03     MOVLW     0x3                                                                                             
003414   6eef     MOVWF     0xef,0x0                                                                                        
003416   52e5     MOVF      0xe5,0x1,0x0   }//end ReadVersion                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
003418   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00341a   ffd9                                                                                                               
00341c   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
00341e   cfd9     MOVFF     0xfd9,0xfe6    void ReadProgMem(byte* recBuffPtr) //TESTED: Passed                              C:\usb4all\fw\demo\usb4all\boot\boot.c
003420   ffe6                                                                                                               
003422   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003424   ffd9                                                                                                               
                                           {                                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               //copio el header del comando que llego en el sendBufferBoot                 C:\usb4all\fw\demo\usb4all\boot\boot.c
003426   0efd     MOVLW     0xfd           	((BOOT_DATA_PACKET*)sendBufferBoot)->_byte[0] = ((BOOT_DATA_PACKET*)recBuffPtr)->_byte[0]; C:\usb4all\fw\demo\usb4all\boot\boot.c
003428   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00342a   ffe9                                                                                                               
00342c   0efe     MOVLW     0xfe                                                                                            
00342e   cfdb     MOVFF     0xfdb,0xfea                                                                                     
003430   ffea                                                                                                               
003432   50ef     MOVF      0xef,0x0,0x0                                                                                    
003434   6ee6     MOVWF     0xe6,0x0                                                                                        
003436   c15f     MOVFF     0x15f,0xfe9                                                                                     
003438   ffe9                                                                                                               
00343a   c160     MOVFF     0x160,0xfea                                                                                     
00343c   ffea                                                                                                               
00343e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003440   50e7     MOVF      0xe7,0x0,0x0                                                                                    
003442   6eef     MOVWF     0xef,0x0                                                                                        
003444   0efd     MOVLW     0xfd               ((BOOT_DATA_PACKET*)sendBufferBoot)->_byte[1] = ((BOOT_DATA_PACKET*)recBuffPtr)->_byte[1]; C:\usb4all\fw\demo\usb4all\boot\boot.c
003446   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
003448   ffe9                                                                                                               
00344a   0efe     MOVLW     0xfe                                                                                            
00344c   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00344e   ffea                                                                                                               
003450   0e01     MOVLW     0x1                                                                                             
003452   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
003454   0e00     MOVLW     0x0                                                                                             
003456   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003458   50ef     MOVF      0xef,0x0,0x0                                                                                    
00345a   6ee6     MOVWF     0xe6,0x0                                                                                        
00345c   c15f     MOVFF     0x15f,0xfe9                                                                                     
00345e   ffe9                                                                                                               
003460   c160     MOVFF     0x160,0xfea                                                                                     
003462   ffea                                                                                                               
003464   0e01     MOVLW     0x1                                                                                             
003466   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
003468   0e00     MOVLW     0x0                                                                                             
00346a   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00346c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00346e   50e7     MOVF      0xe7,0x0,0x0                                                                                    
003470   6eef     MOVWF     0xef,0x0                                                                                        
003472   0efd     MOVLW     0xfd               ((BOOT_DATA_PACKET*)sendBufferBoot)->_byte[2] = ((BOOT_DATA_PACKET*)recBuffPtr)->_byte[2]; C:\usb4all\fw\demo\usb4all\boot\boot.c
003474   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
003476   ffe9                                                                                                               
003478   0efe     MOVLW     0xfe                                                                                            
00347a   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00347c   ffea                                                                                                               
00347e   0e02     MOVLW     0x2                                                                                             
003480   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
003482   0e00     MOVLW     0x0                                                                                             
003484   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003486   50ef     MOVF      0xef,0x0,0x0                                                                                    
003488   6ee6     MOVWF     0xe6,0x0                                                                                        
00348a   c15f     MOVFF     0x15f,0xfe9                                                                                     
00348c   ffe9                                                                                                               
00348e   c160     MOVFF     0x160,0xfea                                                                                     
003490   ffea                                                                                                               
003492   0e02     MOVLW     0x2                                                                                             
003494   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
003496   0e00     MOVLW     0x0                                                                                             
003498   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00349a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00349c   50e7     MOVF      0xe7,0x0,0x0                                                                                    
00349e   6eef     MOVWF     0xef,0x0                                                                                        
0034a0   0efd     MOVLW     0xfd               ((BOOT_DATA_PACKET*)sendBufferBoot)->_byte[3] = ((BOOT_DATA_PACKET*)recBuffPtr)->_byte[3]; C:\usb4all\fw\demo\usb4all\boot\boot.c
0034a2   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0034a4   ffe9                                                                                                               
0034a6   0efe     MOVLW     0xfe                                                                                            
0034a8   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0034aa   ffea                                                                                                               
0034ac   0e03     MOVLW     0x3                                                                                             
0034ae   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0034b0   0e00     MOVLW     0x0                                                                                             
0034b2   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0034b4   50ef     MOVF      0xef,0x0,0x0                                                                                    
0034b6   6ee6     MOVWF     0xe6,0x0                                                                                        
0034b8   c15f     MOVFF     0x15f,0xfe9                                                                                     
0034ba   ffe9                                                                                                               
0034bc   c160     MOVFF     0x160,0xfea                                                                                     
0034be   ffea                                                                                                               
0034c0   0e03     MOVLW     0x3                                                                                             
0034c2   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0034c4   0e00     MOVLW     0x0                                                                                             
0034c6   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0034c8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0034ca   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0034cc   6eef     MOVWF     0xef,0x0                                                                                        
0034ce   0efd     MOVLW     0xfd               ((BOOT_DATA_PACKET*)sendBufferBoot)->_byte[4] = ((BOOT_DATA_PACKET*)recBuffPtr)->_byte[4]; C:\usb4all\fw\demo\usb4all\boot\boot.c
0034d0   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0034d2   ffe9                                                                                                               
0034d4   0efe     MOVLW     0xfe                                                                                            
0034d6   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0034d8   ffea                                                                                                               
0034da   0e04     MOVLW     0x4                                                                                             
0034dc   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0034de   0e00     MOVLW     0x0                                                                                             
0034e0   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0034e2   50ef     MOVF      0xef,0x0,0x0                                                                                    
0034e4   6ee6     MOVWF     0xe6,0x0                                                                                        
0034e6   c15f     MOVFF     0x15f,0xfe9                                                                                     
0034e8   ffe9                                                                                                               
0034ea   c160     MOVFF     0x160,0xfea                                                                                     
0034ec   ffea                                                                                                               
0034ee   0e04     MOVLW     0x4                                                                                             
0034f0   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0034f2   0e00     MOVLW     0x0                                                                                             
0034f4   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0034f6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0034f8   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0034fa   6eef     MOVWF     0xef,0x0                                                                                        
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
0034fc   0101     MOVLB     0x1            	for (boot_counter = 0; boot_counter < ((BOOT_DATA_PACKET*)recBuffPtr)->len; boot_counter++) C:\usb4all\fw\demo\usb4all\boot\boot.c
0034fe   6b59     CLRF      0x59,0x1                                                                                        
003500   0efd     MOVLW     0xfd                                                                                            
003502   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
003504   ffe9                                                                                                               
003506   0efe     MOVLW     0xfe                                                                                            
003508   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00350a   ffea                                                                                                               
00350c   52ee     MOVF      0xee,0x1,0x0                                                                                    
00350e   50ef     MOVF      0xef,0x0,0x0                                                                                    
003510   5d59     SUBWF     0x59,0x0,0x1                                                                                    
003512   e236     BC        0x3580                                                                                          
00357a   0101     MOVLB     0x1                                                                                             
00357c   2b59     INCF      0x59,0x1,0x1                                                                                    
00357e   d7c0     BRA       0x3500                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                   //2 separate inst prevents compiler from using RAM stack                 C:\usb4all\fw\demo\usb4all\boot\boot.c
003514   c159     MOVFF     0x159,0x10             byteTemp = *((((BOOT_DATA_PACKET*)recBuffPtr)->ADR.pAdr)+boot_counter);  C:\usb4all\fw\demo\usb4all\boot\boot.c
003516   f010                                                                                                               
003518   6a11     CLRF      0x11,0x0                                                                                        
00351a   6a12     CLRF      0x12,0x0                                                                                        
00351c   0efd     MOVLW     0xfd                                                                                            
00351e   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
003520   ffe9                                                                                                               
003522   0efe     MOVLW     0xfe                                                                                            
003524   cfdb     MOVFF     0xfdb,0xfea                                                                                     
003526   ffea                                                                                                               
003528   0e02     MOVLW     0x2                                                                                             
00352a   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00352c   0e00     MOVLW     0x0                                                                                             
00352e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003530   50ee     MOVF      0xee,0x0,0x0                                                                                    
003532   2410     ADDWF     0x10,0x0,0x0                                                                                    
003534   6ef3     MOVWF     0xf3,0x0                                                                                        
003536   50ee     MOVF      0xee,0x0,0x0                                                                                    
003538   2011     ADDWFC    0x11,0x0,0x0                                                                                    
00353a   6ef4     MOVWF     0xf4,0x0                                                                                        
00353c   50ee     MOVF      0xee,0x0,0x0                                                                                    
00353e   2012     ADDWFC    0x12,0x0,0x0                                                                                    
003540   6ef8     MOVWF     0xf8,0x0                                                                                        
003542   cff4     MOVFF     0xff4,0xff7                                                                                     
003544   fff7                                                                                                               
003546   cff3     MOVFF     0xff3,0xff6                                                                                     
003548   fff6                                                                                                               
00354a   0008     TBLRD                                                                                                     
00354c   cff5     MOVFF     0xff5,0x15a                                                                                     
00354e   f15a                                                                                                               
003550   c15f     MOVFF     0x15f,0xfe9            ((BOOT_DATA_PACKET*)sendBufferBoot)->data[boot_counter] = byteTemp;      C:\usb4all\fw\demo\usb4all\boot\boot.c
003552   ffe9                                                                                                               
003554   c160     MOVFF     0x160,0xfea                                                                                     
003556   ffea                                                                                                               
003558   0e05     MOVLW     0x5                                                                                             
00355a   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00355c   0e00     MOVLW     0x0                                                                                             
00355e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003560   cfe9     MOVFF     0xfe9,0x10                                                                                      
003562   f010                                                                                                               
003564   cfea     MOVFF     0xfea,0x11                                                                                      
003566   f011                                                                                                               
003568   5159     MOVF      0x59,0x0,0x1                                                                                    
00356a   010f     MOVLB     0xf                                                                                             
00356c   2410     ADDWF     0x10,0x0,0x0                                                                                    
00356e   6ee9     MOVWF     0xe9,0x0                                                                                        
003570   0e00     MOVLW     0x0                                                                                             
003572   2011     ADDWFC    0x11,0x0,0x0                                                                                    
003574   6eea     MOVWF     0xea,0x0                                                                                        
003576   c15a     MOVFF     0x15a,0xfef                                                                                     
003578   ffef                                                                                                               
                                               }//end for                                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
003580   6af8     CLRF      0xf8,0x0           TBLPTRU = 0x00;         // forces upper byte back to 0x00                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                       // optional fix is to set large code model           C:\usb4all\fw\demo\usb4all\boot\boot.c
003582   52e5     MOVF      0xe5,0x1,0x0   }//end ReadProgMem                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
003584   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
003586   ffd9                                                                                                               
003588   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
00358a   cfd9     MOVFF     0xfd9,0xfe6    void WriteProgMem(byte* recBuffPtr) //TESTED: Passed                             C:\usb4all\fw\demo\usb4all\boot\boot.c
00358c   ffe6                                                                                                               
00358e   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003590   ffd9                                                                                                               
                                           {                                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               /*                                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                * The write holding register for the 18F4550 family is                      C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                * actually 32-byte. The code below only tries to write                      C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                * 16-byte because the GUI program only sends out 16-byte                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                * at a time.                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                * This limitation will be fixed in the future version.                      C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                */                                                                          C:\usb4all\fw\demo\usb4all\boot\boot.c
003592   0ef0     MOVLW     0xf0               ((BOOT_DATA_PACKET*)recBuffPtr)->ADR.low &= 0b11110000;  //Force 16-byte boundary C:\usb4all\fw\demo\usb4all\boot\boot.c
003594   6e10     MOVWF     0x10,0x0                                                                                        
003596   0efd     MOVLW     0xfd                                                                                            
003598   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00359a   ffe9                                                                                                               
00359c   0efe     MOVLW     0xfe                                                                                            
00359e   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0035a0   ffea                                                                                                               
0035a2   0e02     MOVLW     0x2                                                                                             
0035a4   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0035a6   0e00     MOVLW     0x0                                                                                             
0035a8   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0035aa   5010     MOVF      0x10,0x0,0x0                                                                                    
0035ac   16ef     ANDWF     0xef,0x1,0x0                                                                                    
0035ae   0e84     MOVLW     0x84               EECON1 = 0b10000100;        //Setup writes: EEPGD=1,WREN=1                   C:\usb4all\fw\demo\usb4all\boot\boot.c
0035b0   6ea6     MOVWF     0xa6,0x0                                                                                        
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               //LEN = # of byte to write                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
0035b2   0101     MOVLB     0x1                for (boot_counter = 0; boot_counter < (((BOOT_DATA_PACKET*)recBuffPtr)->len); boot_counter++) C:\usb4all\fw\demo\usb4all\boot\boot.c
0035b4   6b59     CLRF      0x59,0x1                                                                                        
0035b6   0efd     MOVLW     0xfd                                                                                            
0035b8   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0035ba   ffe9                                                                                                               
0035bc   0efe     MOVLW     0xfe                                                                                            
0035be   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0035c0   ffea                                                                                                               
0035c2   52ee     MOVF      0xee,0x1,0x0                                                                                    
0035c4   50ef     MOVF      0xef,0x0,0x0                                                                                    
0035c6   5d59     SUBWF     0x59,0x0,0x1                                                                                    
0035c8   e23e     BC        0x3646                                                                                          
003640   0101     MOVLB     0x1                                                                                             
003642   2b59     INCF      0x59,0x1,0x1                                                                                    
003644   d7b8     BRA       0x35b6                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
0035ca   0efd     MOVLW     0xfd                   *((((BOOT_DATA_PACKET*)recBuffPtr)->ADR.pAdr)+boot_counter) = \          C:\usb4all\fw\demo\usb4all\boot\boot.c
0035cc   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0035ce   ffe9                                                                                                               
0035d0   0efe     MOVLW     0xfe                                                                                            
0035d2   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0035d4   ffea                                                                                                               
0035d6   0e05     MOVLW     0x5                                                                                             
0035d8   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0035da   0e00     MOVLW     0x0                                                                                             
0035dc   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0035de   cfe9     MOVFF     0xfe9,0x14                                                                                      
0035e0   f014                                                                                                               
0035e2   cfea     MOVFF     0xfea,0x15                                                                                      
0035e4   f015                                                                                                               
0035e6   5159     MOVF      0x59,0x0,0x1                                                                                    
0035e8   010f     MOVLB     0xf                                                                                             
0035ea   2414     ADDWF     0x14,0x0,0x0                                                                                    
0035ec   6ee9     MOVWF     0xe9,0x0                                                                                        
0035ee   0e00     MOVLW     0x0                                                                                             
0035f0   2015     ADDWFC    0x15,0x0,0x0                                                                                    
0035f2   6eea     MOVWF     0xea,0x0                                                                                        
0035f4   cfef     MOVFF     0xfef,0x13                                                                                      
0035f6   f013                                                                                                               
0035f8   c159     MOVFF     0x159,0x10                                                                                      
0035fa   f010                                                                                                               
0035fc   6a11     CLRF      0x11,0x0                                                                                        
0035fe   6a12     CLRF      0x12,0x0                                                                                        
003600   0efd     MOVLW     0xfd                                                                                            
003602   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
003604   ffe9                                                                                                               
003606   0efe     MOVLW     0xfe                                                                                            
003608   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00360a   ffea                                                                                                               
00360c   0e02     MOVLW     0x2                                                                                             
00360e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
003610   0e00     MOVLW     0x0                                                                                             
003612   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003614   50ee     MOVF      0xee,0x0,0x0                                                                                    
003616   2410     ADDWF     0x10,0x0,0x0                                                                                    
003618   6ef3     MOVWF     0xf3,0x0                                                                                        
00361a   50ee     MOVF      0xee,0x0,0x0                                                                                    
00361c   2011     ADDWFC    0x11,0x0,0x0                                                                                    
00361e   6ef4     MOVWF     0xf4,0x0                                                                                        
003620   50ee     MOVF      0xee,0x0,0x0                                                                                    
003622   2012     ADDWFC    0x12,0x0,0x0                                                                                    
003624   6ef8     MOVWF     0xf8,0x0                                                                                        
003626   cff4     MOVFF     0xff4,0xff7                                                                                     
003628   fff7                                                                                                               
00362a   cff3     MOVFF     0xff3,0xff6                                                                                     
00362c   fff6                                                                                                               
00362e   c013     MOVFF     0x13,0xff5                                                                                      
003630   fff5                                                                                                               
003632   000c     TBLWT                                                                                                     
                                                   ((BOOT_DATA_PACKET*)recBuffPtr)->data[boot_counter];                     C:\usb4all\fw\demo\usb4all\boot\boot.c
003634   0e0f     MOVLW     0xf                    if ((boot_counter & 0b00001111) == 0b00001111)                           C:\usb4all\fw\demo\usb4all\boot\boot.c
003636   0101     MOVLB     0x1                                                                                             
003638   1559     ANDWF     0x59,0x0,0x1                                                                                    
00363a   080f     SUBLW     0xf                                                                                             
00363c   e101     BNZ       0x3640                                                                                          
                                                   {                                                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
00363e   dea7     RCALL     0x338e                     StartWrite();                                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                   }//end if                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               }//end for                                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
003646   52e5     MOVF      0xe5,0x1,0x0   }//end WriteProgMem                                                              C:\usb4all\fw\demo\usb4all\boot\boot.c
003648   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00364a   ffd9                                                                                                               
00364c   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
00364e   cfd9     MOVFF     0xfd9,0xfe6    void EraseProgMem(byte* recBuffPtr) //TESTED: Passed                             C:\usb4all\fw\demo\usb4all\boot\boot.c
003650   ffe6                                                                                                               
003652   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003654   ffd9                                                                                                               
                                           {                                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               //The most significant 16 bits of the address pointer points to the block    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               //being erased. Bits5:0 are ignored. (In hardware).                          C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               //LEN = # of 64-byte block to erase                                          C:\usb4all\fw\demo\usb4all\boot\boot.c
003656   0e94     MOVLW     0x94               EECON1 = 0b10010100;     //Setup writes: EEPGD=1,FREE=1,WREN=1               C:\usb4all\fw\demo\usb4all\boot\boot.c
003658   6ea6     MOVWF     0xa6,0x0                                                                                        
00365a   0101     MOVLB     0x1                for(boot_counter=0; boot_counter < ((BOOT_DATA_PACKET*)recBuffPtr)->len; boot_counter++) C:\usb4all\fw\demo\usb4all\boot\boot.c
00365c   6b59     CLRF      0x59,0x1                                                                                        
00365e   0efd     MOVLW     0xfd                                                                                            
003660   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
003662   ffe9                                                                                                               
003664   0efe     MOVLW     0xfe                                                                                            
003666   cfdb     MOVFF     0xfdb,0xfea                                                                                     
003668   ffea                                                                                                               
00366a   52ee     MOVF      0xee,0x1,0x0                                                                                    
00366c   50ef     MOVF      0xef,0x0,0x0                                                                                    
00366e   5d59     SUBWF     0x59,0x0,0x1                                                                                    
003670   e227     BC        0x36c0                                                                                          
0036ba   0101     MOVLB     0x1                                                                                             
0036bc   2b59     INCF      0x59,0x1,0x1                                                                                    
0036be   d7cf     BRA       0x365e                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
003672   5159     MOVF      0x59,0x0,0x1           *(((BOOT_DATA_PACKET*)recBuffPtr)->ADR.pAdr+(((int)boot_counter) << 6));  //Load TBLPTR C:\usb4all\fw\demo\usb4all\boot\boot.c
003674   6e10     MOVWF     0x10,0x0                                                                                        
003676   6a11     CLRF      0x11,0x0                                                                                        
003678   0e06     MOVLW     0x6                                                                                             
00367a   90d8     BCF       0xd8,0x0,0x0                                                                                    
00367c   3610     RLCF      0x10,0x1,0x0                                                                                    
00367e   3611     RLCF      0x11,0x1,0x0                                                                                    
003680   04e8     DECF      0xe8,0x0,0x0                                                                                    
003682   e1fb     BNZ       0x367a                                                                                          
003684   6a12     CLRF      0x12,0x0                                                                                        
003686   be11     BTFSC     0x11,0x7,0x0                                                                                    
003688   6812     SETF      0x12,0x0                                                                                        
00368a   0efd     MOVLW     0xfd                                                                                            
00368c   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00368e   ffe9                                                                                                               
003690   0efe     MOVLW     0xfe                                                                                            
003692   cfdb     MOVFF     0xfdb,0xfea                                                                                     
003694   ffea                                                                                                               
003696   0e02     MOVLW     0x2                                                                                             
003698   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00369a   0e00     MOVLW     0x0                                                                                             
00369c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00369e   50ee     MOVF      0xee,0x0,0x0                                                                                    
0036a0   2410     ADDWF     0x10,0x0,0x0                                                                                    
0036a2   6ef3     MOVWF     0xf3,0x0                                                                                        
0036a4   50ee     MOVF      0xee,0x0,0x0                                                                                    
0036a6   2011     ADDWFC    0x11,0x0,0x0                                                                                    
0036a8   6ef4     MOVWF     0xf4,0x0                                                                                        
0036aa   50ee     MOVF      0xee,0x0,0x0                                                                                    
0036ac   2012     ADDWFC    0x12,0x0,0x0                                                                                    
0036ae   6ef8     MOVWF     0xf8,0x0                                                                                        
0036b0   cff4     MOVFF     0xff4,0xff7                                                                                     
0036b2   fff7                                                                                                               
0036b4   cff3     MOVFF     0xff3,0xff6                                                                                     
0036b6   fff6                                                                                                               
0036b8   de6a     RCALL     0x338e                 StartWrite();                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               }//end for                                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
0036c0   6af8     CLRF      0xf8,0x0           TBLPTRU = 0;            // forces upper byte back to 0x00                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                       // optional fix is to set large code model           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                       // (for USER ID 0x20 0x00 0x00)                      C:\usb4all\fw\demo\usb4all\boot\boot.c
0036c2   52e5     MOVF      0xe5,0x1,0x0   }//end EraseProgMem                                                              C:\usb4all\fw\demo\usb4all\boot\boot.c
0036c4   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0036c6   ffd9                                                                                                               
0036c8   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
0036ca   cfd9     MOVFF     0xfd9,0xfe6    void ReadEE(byte* recBuffPtr) //TESTED: Passed                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
0036cc   ffe6                                                                                                               
0036ce   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0036d0   ffd9                                                                                                               
                                           {                                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
0036d2   6aa6     CLRF      0xa6,0x0           EECON1 = 0x00;                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
0036d4   0101     MOVLB     0x1                for(boot_counter=0; boot_counter < ((BOOT_DATA_PACKET*)recBuffPtr)->len; boot_counter++) C:\usb4all\fw\demo\usb4all\boot\boot.c
0036d6   6b59     CLRF      0x59,0x1                                                                                        
0036d8   0efd     MOVLW     0xfd                                                                                            
0036da   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0036dc   ffe9                                                                                                               
0036de   0efe     MOVLW     0xfe                                                                                            
0036e0   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0036e2   ffea                                                                                                               
0036e4   52ee     MOVF      0xee,0x1,0x0                                                                                    
0036e6   50ef     MOVF      0xef,0x0,0x0                                                                                    
0036e8   5d59     SUBWF     0x59,0x0,0x1                                                                                    
0036ea   e226     BC        0x3738                                                                                          
003732   0101     MOVLB     0x1                                                                                             
003734   2b59     INCF      0x59,0x1,0x1                                                                                    
003736   d7d0     BRA       0x36d8                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
0036ec   0efd     MOVLW     0xfd                   EEADR = (byte)((BOOT_DATA_PACKET*)recBuffPtr)->ADR.pAdr + boot_counter;  C:\usb4all\fw\demo\usb4all\boot\boot.c
0036ee   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0036f0   ffe9                                                                                                               
0036f2   0efe     MOVLW     0xfe                                                                                            
0036f4   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0036f6   ffea                                                                                                               
0036f8   0e02     MOVLW     0x2                                                                                             
0036fa   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0036fc   0e00     MOVLW     0x0                                                                                             
0036fe   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003700   50ef     MOVF      0xef,0x0,0x0                                                                                    
003702   2559     ADDWF     0x59,0x0,0x1                                                                                    
003704   6ea9     MOVWF     0xa9,0x0                                                                                        
                                                   //EEADRH = (BYTE)(((int)dataBootPacket.FIELD.ADDR.POINTER + boot_counter) >> 8); C:\usb4all\fw\demo\usb4all\boot\boot.c
003706   80a6     BSF       0xa6,0x0,0x0           EECON1_RD = 1;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
003708   c15f     MOVFF     0x15f,0xfe9            ((BOOT_DATA_PACKET*)sendBufferBoot)->data[boot_counter] = EEDATA;        C:\usb4all\fw\demo\usb4all\boot\boot.c
00370a   ffe9                                                                                                               
00370c   c160     MOVFF     0x160,0xfea                                                                                     
00370e   ffea                                                                                                               
003710   0e05     MOVLW     0x5                                                                                             
003712   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
003714   0e00     MOVLW     0x0                                                                                             
003716   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003718   cfe9     MOVFF     0xfe9,0x10                                                                                      
00371a   f010                                                                                                               
00371c   cfea     MOVFF     0xfea,0x11                                                                                      
00371e   f011                                                                                                               
003720   5159     MOVF      0x59,0x0,0x1                                                                                    
003722   010f     MOVLB     0xf                                                                                             
003724   2410     ADDWF     0x10,0x0,0x0                                                                                    
003726   6ee9     MOVWF     0xe9,0x0                                                                                        
003728   0e00     MOVLW     0x0                                                                                             
00372a   2011     ADDWFC    0x11,0x0,0x0                                                                                    
00372c   6eea     MOVWF     0xea,0x0                                                                                        
00372e   cfa8     MOVFF     0xfa8,0xfef                                                                                     
003730   ffef                                                                                                               
                                               }//end for                                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
003738   52e5     MOVF      0xe5,0x1,0x0   }//end ReadEE                                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
00373a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00373c   ffd9                                                                                                               
00373e   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
003740   cfd9     MOVFF     0xfd9,0xfe6    void WriteEE(byte* recBuffPtr) //TESTED: Passed                                  C:\usb4all\fw\demo\usb4all\boot\boot.c
003742   ffe6                                                                                                               
003744   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003746   ffd9                                                                                                               
                                           {                                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
003748   0101     MOVLB     0x1                for(boot_counter=0; boot_counter < ((BOOT_DATA_PACKET*)recBuffPtr)->len; boot_counter++) C:\usb4all\fw\demo\usb4all\boot\boot.c
00374a   6b59     CLRF      0x59,0x1                                                                                        
00374c   0efd     MOVLW     0xfd                                                                                            
00374e   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
003750   ffe9                                                                                                               
003752   0efe     MOVLW     0xfe                                                                                            
003754   cfdb     MOVFF     0xfdb,0xfea                                                                                     
003756   ffea                                                                                                               
003758   52ee     MOVF      0xee,0x1,0x0                                                                                    
00375a   50ef     MOVF      0xef,0x0,0x0                                                                                    
00375c   5d59     SUBWF     0x59,0x0,0x1                                                                                    
00375e   e22c     BC        0x37b8                                                                                          
0037b2   0101     MOVLB     0x1                                                                                             
0037b4   2b59     INCF      0x59,0x1,0x1                                                                                    
0037b6   d7ca     BRA       0x374c                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
003760   0efd     MOVLW     0xfd                   EEADR = (byte)((BOOT_DATA_PACKET*)recBuffPtr)->ADR.pAdr + boot_counter;  C:\usb4all\fw\demo\usb4all\boot\boot.c
003762   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
003764   ffe9                                                                                                               
003766   0efe     MOVLW     0xfe                                                                                            
003768   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00376a   ffea                                                                                                               
00376c   0e02     MOVLW     0x2                                                                                             
00376e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
003770   0e00     MOVLW     0x0                                                                                             
003772   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003774   50ef     MOVF      0xef,0x0,0x0                                                                                    
003776   2559     ADDWF     0x59,0x0,0x1                                                                                    
003778   6ea9     MOVWF     0xa9,0x0                                                                                        
                                                   //EEADRH = (BYTE)(((int)dataBootPacket.FIELD.ADDR.POINTER + boot_counter) >> 8); C:\usb4all\fw\demo\usb4all\boot\boot.c
00377a   0efd     MOVLW     0xfd                   EEDATA = ((BOOT_DATA_PACKET*)recBuffPtr)->data[boot_counter];            C:\usb4all\fw\demo\usb4all\boot\boot.c
00377c   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00377e   ffe9                                                                                                               
003780   0efe     MOVLW     0xfe                                                                                            
003782   cfdb     MOVFF     0xfdb,0xfea                                                                                     
003784   ffea                                                                                                               
003786   0e05     MOVLW     0x5                                                                                             
003788   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00378a   0e00     MOVLW     0x0                                                                                             
00378c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00378e   cfe9     MOVFF     0xfe9,0x10                                                                                      
003790   f010                                                                                                               
003792   cfea     MOVFF     0xfea,0x11                                                                                      
003794   f011                                                                                                               
003796   5159     MOVF      0x59,0x0,0x1                                                                                    
003798   010f     MOVLB     0xf                                                                                             
00379a   2410     ADDWF     0x10,0x0,0x0                                                                                    
00379c   6ee9     MOVWF     0xe9,0x0                                                                                        
00379e   0e00     MOVLW     0x0                                                                                             
0037a0   2011     ADDWFC    0x11,0x0,0x0                                                                                    
0037a2   6eea     MOVWF     0xea,0x0                                                                                        
0037a4   50ef     MOVF      0xef,0x0,0x0                                                                                    
0037a6   6ea8     MOVWF     0xa8,0x0                                                                                        
0037a8   0e04     MOVLW     0x4                    EECON1 = 0b00000100;    //Setup writes: EEPGD=0,WREN=1                   C:\usb4all\fw\demo\usb4all\boot\boot.c
0037aa   6ea6     MOVWF     0xa6,0x0                                                                                        
0037ac   ddf0     RCALL     0x338e                 StartWrite();                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
0037ae   b2a6     BTFSC     0xa6,0x1,0x0           while(EECON1_WR);       //Wait till WR bit is clear                      C:\usb4all\fw\demo\usb4all\boot\boot.c
0037b0   d7fe     BRA       0x37ae                                                                                          
                                               }//end for                                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
0037b8   52e5     MOVF      0xe5,0x1,0x0   }//end WriteEE                                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
0037ba   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0037bc   ffd9                                                                                                               
0037be   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           //WriteConfig is different from WriteProgMem b/c it can write a byte             C:\usb4all\fw\demo\usb4all\boot\boot.c
0037c0   cfd9     MOVFF     0xfd9,0xfe6    void WriteConfig(byte* recBuffPtr) //TESTED: Passed                              C:\usb4all\fw\demo\usb4all\boot\boot.c
0037c2   ffe6                                                                                                               
0037c4   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0037c6   ffd9                                                                                                               
                                           {                                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
0037c8   0ec4     MOVLW     0xc4               EECON1 = 0b11000100;        //Setup writes: EEPGD=1,CFGS=1,WREN=1            C:\usb4all\fw\demo\usb4all\boot\boot.c
0037ca   6ea6     MOVWF     0xa6,0x0                                                                                        
0037cc   0101     MOVLB     0x1                for (boot_counter = 0; boot_counter < ((BOOT_DATA_PACKET*)recBuffPtr)->len; boot_counter++) C:\usb4all\fw\demo\usb4all\boot\boot.c
0037ce   6b59     CLRF      0x59,0x1                                                                                        
0037d0   0efd     MOVLW     0xfd                                                                                            
0037d2   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0037d4   ffe9                                                                                                               
0037d6   0efe     MOVLW     0xfe                                                                                            
0037d8   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0037da   ffea                                                                                                               
0037dc   52ee     MOVF      0xee,0x1,0x0                                                                                    
0037de   50ef     MOVF      0xef,0x0,0x0                                                                                    
0037e0   5d59     SUBWF     0x59,0x0,0x1                                                                                    
0037e2   e237     BC        0x3852                                                                                          
00384c   0101     MOVLB     0x1                                                                                             
00384e   2b59     INCF      0x59,0x1,0x1                                                                                    
003850   d7bf     BRA       0x37d0                                                                                          
                                               {                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
0037e4   0efd     MOVLW     0xfd                   *((((BOOT_DATA_PACKET*)sendBufferBoot)->ADR.pAdr)+boot_counter) = \      C:\usb4all\fw\demo\usb4all\boot\boot.c
0037e6   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0037e8   ffe9                                                                                                               
0037ea   0efe     MOVLW     0xfe                                                                                            
0037ec   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0037ee   ffea                                                                                                               
0037f0   0e05     MOVLW     0x5                                                                                             
0037f2   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0037f4   0e00     MOVLW     0x0                                                                                             
0037f6   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0037f8   cfe9     MOVFF     0xfe9,0x14                                                                                      
0037fa   f014                                                                                                               
0037fc   cfea     MOVFF     0xfea,0x15                                                                                      
0037fe   f015                                                                                                               
003800   5159     MOVF      0x59,0x0,0x1                                                                                    
003802   010f     MOVLB     0xf                                                                                             
003804   2414     ADDWF     0x14,0x0,0x0                                                                                    
003806   6ee9     MOVWF     0xe9,0x0                                                                                        
003808   0e00     MOVLW     0x0                                                                                             
00380a   2015     ADDWFC    0x15,0x0,0x0                                                                                    
00380c   6eea     MOVWF     0xea,0x0                                                                                        
00380e   cfef     MOVFF     0xfef,0x13                                                                                      
003810   f013                                                                                                               
003812   c159     MOVFF     0x159,0x10                                                                                      
003814   f010                                                                                                               
003816   6a11     CLRF      0x11,0x0                                                                                        
003818   6a12     CLRF      0x12,0x0                                                                                        
00381a   c15f     MOVFF     0x15f,0xfe9                                                                                     
00381c   ffe9                                                                                                               
00381e   c160     MOVFF     0x160,0xfea                                                                                     
003820   ffea                                                                                                               
003822   0e02     MOVLW     0x2                                                                                             
003824   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
003826   0e00     MOVLW     0x0                                                                                             
003828   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00382a   50ee     MOVF      0xee,0x0,0x0                                                                                    
00382c   2410     ADDWF     0x10,0x0,0x0                                                                                    
00382e   6ef3     MOVWF     0xf3,0x0                                                                                        
003830   50ee     MOVF      0xee,0x0,0x0                                                                                    
003832   2011     ADDWFC    0x11,0x0,0x0                                                                                    
003834   6ef4     MOVWF     0xf4,0x0                                                                                        
003836   50ee     MOVF      0xee,0x0,0x0                                                                                    
003838   2012     ADDWFC    0x12,0x0,0x0                                                                                    
00383a   6ef8     MOVWF     0xf8,0x0                                                                                        
00383c   cff4     MOVFF     0xff4,0xff7                                                                                     
00383e   fff7                                                                                                               
003840   cff3     MOVFF     0xff3,0xff6                                                                                     
003842   fff6                                                                                                               
003844   c013     MOVFF     0x13,0xff5                                                                                      
003846   fff5                                                                                                               
003848   000c     TBLWT                                                                                                     
                                                   ((BOOT_DATA_PACKET*)recBuffPtr)->data[boot_counter];                     C:\usb4all\fw\demo\usb4all\boot\boot.c
00384a   dda1     RCALL     0x338e                 StartWrite();                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               }//end for                                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
003852   6af8     CLRF      0xf8,0x0           TBLPTRU = 0x00;         // forces upper byte back to 0x00                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                       // optional fix is to set large code model           C:\usb4all\fw\demo\usb4all\boot\boot.c
003854   52e5     MOVF      0xe5,0x1,0x0   }//end WriteConfig                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
003856   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
003858   ffd9                                                                                                               
00385a   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           /*                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           void BootService(void)                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           {                                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               //BlinkUSBStatus();                                                          C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;      C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               if(boot_trf_state == SENDING_RESP)                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               {                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                   if(!mBootTxIsBusy())                                                     C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                   {                                                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       BOOT_BD_OUT.Cnt = sizeof(dataBootPacket);                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       mUSBBufferReady(BOOT_BD_OUT);                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       boot_trf_state = WAIT_FOR_CMD;                                       C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                   }//end if                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                   return;                                                                  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               }//end if                                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               if(!mBootRxIsBusy())                                                         C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               {                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                   boot_counter = 0;                                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                   switch(dataBootPacket.CMD)                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                   {                                                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case READ_VERSION:                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           ReadVersion();                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           boot_counter=0x04;                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case READ_FLASH:                                                     C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case READ_CONFIG:                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           ReadProgMem();                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           boot_counter+=0x05;                                              C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case WRITE_FLASH:                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           WriteProgMem();                                                  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           boot_counter=0x01;                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case ERASE_FLASH:                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           EraseProgMem();                                                  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           boot_counter=0x01;                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case READ_EEDATA:                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           ReadEE();                                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           boot_counter+=0x05;                                              C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case WRITE_EEDATA:                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           WriteEE();                                                       C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           boot_counter=0x01;                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case WRITE_CONFIG:                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           WriteConfig();                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           boot_counter=0x01;                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case RESET:                                                          C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           //When resetting, make sure to drop the device off the bus       C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           //for a period of time. Helps when the device is suspended.      C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           UCONbits.USBEN = 0;                                              C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           big_counter = 0;                                                 C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           while(--big_counter);                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           Reset();                                                         C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case UPDATE_LED:                                                     C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           if(dataBootPacket.led_num == 3)                                  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           {                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                               mLED_3 = dataBootPacket.led_status;                          C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                               boot_counter = 0x01;                                         C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           }//end if                                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           if(dataBootPacket.led_num == 4)                                  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           {                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                               mLED_4 = dataBootPacket.led_status;                          C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                               boot_counter = 0x01;                                         C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           }//end if                                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       default:                                                             C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                   }//end switch()                                                          C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                   boot_trf_state = SENDING_RESP;                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                   if(boot_counter != 0)                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                   {                                                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       BOOT_BD_IN.Cnt = boot_counter;                                       C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       mUSBBufferReady(BOOT_BD_IN);                                         C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                   }//end if                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               }//end if                                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           }//end BootService                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           */                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
00385c   cfd9     MOVFF     0xfd9,0xfe6    void bootReceived(byte* recBuffPtr,byte len)                                     C:\usb4all\fw\demo\usb4all\boot\boot.c
00385e   ffe6                                                                                                               
003860   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003862   ffd9                                                                                                               
                                           {                                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               //BlinkUSBStatus();                                                          C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           	//TODO pasarla a la arquitectura                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               //if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               /*                                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               if(boot_trf_state == SENDING_RESP)                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               {                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                   if(!mBootTxIsBusy())                                                     C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                  // if(!mUSBGenTxIsBusy())                                                 C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           		                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           		{                                                                              C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       USBGenWrite2(myBootHandler,boot_counter);                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           			boot_trf_state = WAIT_FOR_CMD;                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                   }//end if                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                   return;                                                                  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               }//end if                                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               */                                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               //if(!mBootRxIsBusy())                                                       C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               //if(!mUSBGenRxIsBusy())                                                     C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           	                                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           	{                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
003864   0101     MOVLB     0x1                    boot_counter = 0;                                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
003866   6b59     CLRF      0x59,0x1                                                                                        
003868   0efd     MOVLW     0xfd                   switch(((BOOT_DATA_PACKET*)recBuffPtr)->CMD)                             C:\usb4all\fw\demo\usb4all\boot\boot.c
00386a   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00386c   ffe9                                                                                                               
00386e   0efe     MOVLW     0xfe                                                                                            
003870   cfdb     MOVFF     0xfdb,0xfea                                                                                     
003872   ffea                                                                                                               
003874   50ef     MOVF      0xef,0x0,0x0                                                                                    
003876   0a32     XORLW     0x32                                                                                            
003878   e101     BNZ       0x387c                                                                                          
00387a   d07d     BRA       0x3976                                                                                          
00387c   0acd     XORLW     0xcd                                                                                            
00387e   e06c     BZ        0x3958                                                                                          
003880   0af8     XORLW     0xf8                                                                                            
003882   e05d     BZ        0x393e                                                                                          
003884   0a02     XORLW     0x2                                                                                             
003886   e04e     BZ        0x3924                                                                                          
003888   0a01     XORLW     0x1                                                                                             
00388a   e03f     BZ        0x390a                                                                                          
00388c   0a07     XORLW     0x7                                                                                             
00388e   e030     BZ        0x38f0                                                                                          
003890   0a01     XORLW     0x1                                                                                             
003892   e021     BZ        0x38d6                                                                                          
003894   0a03     XORLW     0x3                                                                                             
003896   e012     BZ        0x38bc                                                                                          
003898   0a07     XORLW     0x7                                                                                             
00389a   e010     BZ        0x38bc                                                                                          
00389c   0a06     XORLW     0x6                                                                                             
00389e   e001     BZ        0x38a2                                                                                          
0038a0   d0a3     BRA       0x39e8                                                                                          
                                                   {                                                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case READ_VERSION:                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
0038a2   0efd     MOVLW     0xfd                           ReadVersion(recBuffPtr);                                         C:\usb4all\fw\demo\usb4all\boot\boot.c
0038a4   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0038a6   ffe6                                                                                                               
0038a8   0efe     MOVLW     0xfe                                                                                            
0038aa   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0038ac   ffe6                                                                                                               
0038ae   dd75     RCALL     0x339a                                                                                          
0038b0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0038b2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0038b4   0101     MOVLB     0x1                            boot_counter=0x04;                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
0038b6   0e04     MOVLW     0x4                                                                                             
0038b8   6f59     MOVWF     0x59,0x1                                                                                        
0038ba   d097     BRA       0x39ea                         break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case READ_FLASH:                                                     C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case READ_CONFIG:                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
0038bc   0efd     MOVLW     0xfd                           ReadProgMem(recBuffPtr);                                         C:\usb4all\fw\demo\usb4all\boot\boot.c
0038be   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0038c0   ffe6                                                                                                               
0038c2   0efe     MOVLW     0xfe                                                                                            
0038c4   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0038c6   ffe6                                                                                                               
0038c8   ddaa     RCALL     0x341e                                                                                          
0038ca   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0038cc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0038ce   0e05     MOVLW     0x5                            boot_counter+=0x05;                                              C:\usb4all\fw\demo\usb4all\boot\boot.c
0038d0   0101     MOVLB     0x1                                                                                             
0038d2   2759     ADDWF     0x59,0x1,0x1                                                                                    
0038d4   d08a     BRA       0x39ea                         break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case WRITE_FLASH:                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
0038d6   0efd     MOVLW     0xfd                           WriteProgMem(recBuffPtr);                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
0038d8   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0038da   ffe6                                                                                                               
0038dc   0efe     MOVLW     0xfe                                                                                            
0038de   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0038e0   ffe6                                                                                                               
0038e2   de53     RCALL     0x358a                                                                                          
0038e4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0038e6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0038e8   0101     MOVLB     0x1                            boot_counter=0x01;                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
0038ea   0e01     MOVLW     0x1                                                                                             
0038ec   6f59     MOVWF     0x59,0x1                                                                                        
0038ee   d07d     BRA       0x39ea                         break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case ERASE_FLASH:                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
0038f0   0efd     MOVLW     0xfd                           EraseProgMem(recBuffPtr);                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
0038f2   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0038f4   ffe6                                                                                                               
0038f6   0efe     MOVLW     0xfe                                                                                            
0038f8   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0038fa   ffe6                                                                                                               
0038fc   dea8     RCALL     0x364e                                                                                          
0038fe   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003900   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003902   0101     MOVLB     0x1                            boot_counter=0x01;                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
003904   0e01     MOVLW     0x1                                                                                             
003906   6f59     MOVWF     0x59,0x1                                                                                        
003908   d070     BRA       0x39ea                         break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case READ_EEDATA:                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
00390a   0efd     MOVLW     0xfd                           ReadEE(recBuffPtr);                                              C:\usb4all\fw\demo\usb4all\boot\boot.c
00390c   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
00390e   ffe6                                                                                                               
003910   0efe     MOVLW     0xfe                                                                                            
003912   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
003914   ffe6                                                                                                               
003916   ded9     RCALL     0x36ca                                                                                          
003918   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00391a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00391c   0e05     MOVLW     0x5                            boot_counter+=0x05;                                              C:\usb4all\fw\demo\usb4all\boot\boot.c
00391e   0101     MOVLB     0x1                                                                                             
003920   2759     ADDWF     0x59,0x1,0x1                                                                                    
003922   d063     BRA       0x39ea                         break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case WRITE_EEDATA:                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
003924   0efd     MOVLW     0xfd                           WriteEE(recBuffPtr);                                             C:\usb4all\fw\demo\usb4all\boot\boot.c
003926   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
003928   ffe6                                                                                                               
00392a   0efe     MOVLW     0xfe                                                                                            
00392c   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
00392e   ffe6                                                                                                               
003930   df07     RCALL     0x3740                                                                                          
003932   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003934   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003936   0101     MOVLB     0x1                            boot_counter=0x01;                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
003938   0e01     MOVLW     0x1                                                                                             
00393a   6f59     MOVWF     0x59,0x1                                                                                        
00393c   d056     BRA       0x39ea                         break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case WRITE_CONFIG:                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
00393e   0efd     MOVLW     0xfd                           WriteConfig(recBuffPtr);                                         C:\usb4all\fw\demo\usb4all\boot\boot.c
003940   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
003942   ffe6                                                                                                               
003944   0efe     MOVLW     0xfe                                                                                            
003946   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
003948   ffe6                                                                                                               
00394a   df3a     RCALL     0x37c0                                                                                          
00394c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00394e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003950   0101     MOVLB     0x1                            boot_counter=0x01;                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
003952   0e01     MOVLW     0x1                                                                                             
003954   6f59     MOVWF     0x59,0x1                                                                                        
003956   d049     BRA       0x39ea                         break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case RESET:                                                          C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           //When resetting, make sure to drop the device off the bus       C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                           //for a period of time. Helps when the device is suspended.      C:\usb4all\fw\demo\usb4all\boot\boot.c
003958   966d     BCF       0x6d,0x3,0x0                   UCONbits.USBEN = 0;                                              C:\usb4all\fw\demo\usb4all\boot\boot.c
00395a   0101     MOVLB     0x1                            big_counter = 0;                                                 C:\usb4all\fw\demo\usb4all\boot\boot.c
00395c   6b5c     CLRF      0x5c,0x1                                                                                        
00395e   6b5d     CLRF      0x5d,0x1                                                                                        
003960   0101     MOVLB     0x1                            while(--big_counter);                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
003962   075c     DECF      0x5c,0x1,0x1                                                                                    
003964   0e00     MOVLW     0x0                                                                                             
003966   5b5d     SUBWFB    0x5d,0x1,0x1                                                                                    
003968   0101     MOVLB     0x1                                                                                             
00396a   515c     MOVF      0x5c,0x0,0x1                                                                                    
00396c   115d     IORWF     0x5d,0x0,0x1                                                                                    
00396e   e001     BZ        0x3972                                                                                          
003970   d7f7     BRA       0x3960                                                                                          
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
003972   00ff     RESET                                    Reset();                                                         C:\usb4all\fw\demo\usb4all\boot\boot.c
003974   d03a     BRA       0x39ea                         break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       case UPDATE_LED:                                                     C:\usb4all\fw\demo\usb4all\boot\boot.c
003976   0efd     MOVLW     0xfd                           if(((BOOT_DATA_PACKET*)recBuffPtr)->led_num == 3)                C:\usb4all\fw\demo\usb4all\boot\boot.c
003978   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00397a   ffe9                                                                                                               
00397c   0efe     MOVLW     0xfe                                                                                            
00397e   cfdb     MOVFF     0xfdb,0xfea                                                                                     
003980   ffea                                                                                                               
003982   52ee     MOVF      0xee,0x1,0x0                                                                                    
003984   50ef     MOVF      0xef,0x0,0x0                                                                                    
003986   0803     SUBLW     0x3                                                                                             
003988   e112     BNZ       0x39ae                                                                                          
                                                           {                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
00398a   0efd     MOVLW     0xfd                               mLED_3 = ((BOOT_DATA_PACKET*)recBuffPtr)->led_status;        C:\usb4all\fw\demo\usb4all\boot\boot.c
00398c   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00398e   ffe9                                                                                                               
003990   0efe     MOVLW     0xfe                                                                                            
003992   cfdb     MOVFF     0xfdb,0xfea                                                                                     
003994   ffea                                                                                                               
003996   0e02     MOVLW     0x2                                                                                             
003998   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00399a   0e00     MOVLW     0x0                                                                                             
00399c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00399e   50ef     MOVF      0xef,0x0,0x0                                                                                    
0039a0   b0e8     BTFSC     0xe8,0x0,0x0                                                                                    
0039a2   848c     BSF       0x8c,0x2,0x0                                                                                    
0039a4   a0e8     BTFSS     0xe8,0x0,0x0                                                                                    
0039a6   948c     BCF       0x8c,0x2,0x0                                                                                    
0039a8   0101     MOVLB     0x1                                boot_counter = 0x01;                                         C:\usb4all\fw\demo\usb4all\boot\boot.c
0039aa   0e01     MOVLW     0x1                                                                                             
0039ac   6f59     MOVWF     0x59,0x1                                                                                        
                                                           }//end if                                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
0039ae   0efd     MOVLW     0xfd                           if(((BOOT_DATA_PACKET*)recBuffPtr)->led_num == 4)                C:\usb4all\fw\demo\usb4all\boot\boot.c
0039b0   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0039b2   ffe9                                                                                                               
0039b4   0efe     MOVLW     0xfe                                                                                            
0039b6   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0039b8   ffea                                                                                                               
0039ba   52ee     MOVF      0xee,0x1,0x0                                                                                    
0039bc   50ef     MOVF      0xef,0x0,0x0                                                                                    
0039be   0804     SUBLW     0x4                                                                                             
0039c0   e112     BNZ       0x39e6                                                                                          
                                                           {                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
0039c2   0efd     MOVLW     0xfd                               mLED_4 = ((BOOT_DATA_PACKET*)recBuffPtr)->led_status;        C:\usb4all\fw\demo\usb4all\boot\boot.c
0039c4   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0039c6   ffe9                                                                                                               
0039c8   0efe     MOVLW     0xfe                                                                                            
0039ca   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0039cc   ffea                                                                                                               
0039ce   0e02     MOVLW     0x2                                                                                             
0039d0   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0039d2   0e00     MOVLW     0x0                                                                                             
0039d4   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0039d6   50ef     MOVF      0xef,0x0,0x0                                                                                    
0039d8   b0e8     BTFSC     0xe8,0x0,0x0                                                                                    
0039da   868c     BSF       0x8c,0x3,0x0                                                                                    
0039dc   a0e8     BTFSS     0xe8,0x0,0x0                                                                                    
0039de   968c     BCF       0x8c,0x3,0x0                                                                                    
0039e0   0101     MOVLB     0x1                                boot_counter = 0x01;                                         C:\usb4all\fw\demo\usb4all\boot\boot.c
0039e2   0e01     MOVLW     0x1                                                                                             
0039e4   6f59     MOVWF     0x59,0x1                                                                                        
                                                           }//end if                                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
0039e6   d001     BRA       0x39ea                         break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                       default:                                                             C:\usb4all\fw\demo\usb4all\boot\boot.c
0039e8   d000     BRA       0x39ea                         break;                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                   }//end switch()                                                          C:\usb4all\fw\demo\usb4all\boot\boot.c
0039ea   0101     MOVLB     0x1                    boot_trf_state = SENDING_RESP;                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
0039ec   0e01     MOVLW     0x1                                                                                             
0039ee   6f5b     MOVWF     0x5b,0x1                                                                                        
0039f0   0101     MOVLB     0x1                    if(boot_counter != 0)                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
0039f2   5159     MOVF      0x59,0x0,0x1                                                                                    
0039f4   e00a     BZ        0x3a0a                                                                                          
                                                   {                                                                        C:\usb4all\fw\demo\usb4all\boot\boot.c
0039f6   c159     MOVFF     0x159,0xfe6                USBGenWrite2(myBootHandler/*,sendBufferBoot*/,boot_counter);         C:\usb4all\fw\demo\usb4all\boot\boot.c
0039f8   ffe6                                                                                                               
0039fa   c15e     MOVFF     0x15e,0xfe6                                                                                     
0039fc   ffe6                                                                                                               
0039fe   ec36     CALL      0x266c,0x0                                                                                      
003a00   f013                                                                                                               
003a02   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003a04   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003a06   0101     MOVLB     0x1            			boot_trf_state = WAIT_FOR_CMD; //se lo agregue para testear pq le saque el if del principio que hacia write tb C:\usb4all\fw\demo\usb4all\boot\boot.c
003a08   6b5b     CLRF      0x5b,0x1                                                                                        
                                                   }//end if                                                                C:\usb4all\fw\demo\usb4all\boot\boot.c
                                               }//end if                                                                    C:\usb4all\fw\demo\usb4all\boot\boot.c
003a0a   52e5     MOVF      0xe5,0x1,0x0   }//end BootService                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
003a0c   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
003a0e   ffd9                                                                                                               
003a10   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           /*                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           void bootReceived(int len){                                                      C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           	byte index;                                                                     C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                 boot_counter = 0;                                                          C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                 switch(dataBootPacket.CMD)                                                 C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                 {                                                                          C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                     case READ_VERSION:                                                     C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                         //dataPacket._byte[1] is len                                       C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                         dataBootPacket._byte[2] = BOOT_MINOR_VERSION;                      C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                         dataBootPacket._byte[3] = BOOT_MAJOR_VERSION;                      C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                         boot_counter=0x04;                                                 C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                         break;                                                             C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           		                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                     default:                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                         break;                                                             C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                 }//end switch()                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                 if(boot_counter != 0)                                                      C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                 {                                                                          C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                     if(!mBootTxIsBusy())                                                   C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                         USBGenWrite3(myBootHandler,(byte*)&dataBootPacket,boot_counter);   C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                 }//end if                                                                  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           }//end ServiceRequests                                                           C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           */                                                                               C:\usb4all\fw\demo\usb4all\boot\boot.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           /** EOF boot.c ***************************************************************/  C:\usb4all\fw\demo\usb4all\boot\boot.c
                                           /* Author               Date        Comment                                      C:\usb4all\fw\demo\user\adminModule.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\usb4all\fw\demo\user\adminModule.c
                                            * Andres Aguirre	   27/03/07 	Original                                          C:\usb4all\fw\demo\user\adminModule.c
                                            * Andrés Aguirre 	   18/04/09     Se agrega el RESET                            C:\usb4all\fw\demo\user\adminModule.c
                                            ********************************************************************/           C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                           #include "user\adminModule.h"                                                    C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\user\adminModule.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\user\adminModule.c
                                           //AM_PACKET adminDataPacket;                                                     C:\usb4all\fw\demo\user\adminModule.c
                                           byte* sendBufferAdmin;                                                           C:\usb4all\fw\demo\user\adminModule.c
                                           byte adminHandler;                                                               C:\usb4all\fw\demo\user\adminModule.c
                                           word counter_big;                                                                C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\user\adminModule.c
                                           #pragma code sys                                                                 C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                           void adminModuleInit(void){                                                      C:\usb4all\fw\demo\user\adminModule.c
                                           	//inicializacion del sistema                                                    C:\usb4all\fw\demo\user\adminModule.c
00161a   0101     MOVLB     0x1            	adminHandler=0; //hardcore, el admin siempre atiende el handler 0               C:\usb4all\fw\demo\user\adminModule.c
00161c   6b6f     CLRF      0x6f,0x1                                                                                        
                                           	//agrego mi buffer en el handler module	                                        C:\usb4all\fw\demo\user\adminModule.c
                                           //	setHandlerReceiveBuffer(adminHandler, (byte*)&adminDataPacket);               C:\usb4all\fw\demo\user\adminModule.c
                                           	//agrego mi funcion de Receive en el handler module                             C:\usb4all\fw\demo\user\adminModule.c
00161e   0e48     MOVLW     0x48           	setHandlerReceiveFunction(adminHandler,&adminReceived);                         C:\usb4all\fw\demo\user\adminModule.c
001620   6ee6     MOVWF     0xe6,0x0                                                                                        
001622   0e16     MOVLW     0x16                                                                                            
001624   6ee6     MOVWF     0xe6,0x0                                                                                        
001626   c16f     MOVFF     0x16f,0xfe6                                                                                     
001628   ffe6                                                                                                               
00162a   ecc0     CALL      0x2380,0x0                                                                                      
00162c   f011                                                                                                               
00162e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001630   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001632   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	//No hay funcion de pooling para modulo admin                                   C:\usb4all\fw\demo\user\adminModule.c
                                           	//res = addPollingFunction(&ProcessIO);                                         C:\usb4all\fw\demo\user\adminModule.c
001634   c16f     MOVFF     0x16f,0xfe6    	sendBufferAdmin = getSharedBuffer(adminHandler);                                C:\usb4all\fw\demo\user\adminModule.c
001636   ffe6                                                                                                               
001638   ec73     CALL      0x2ce6,0x0                                                                                      
00163a   f016                                                                                                               
00163c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00163e   cff3     MOVFF     0xff3,0x16d                                                                                     
001640   f16d                                                                                                               
001642   cff4     MOVFF     0xff4,0x16e                                                                                     
001644   f16e                                                                                                               
001646   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
001648   cfd9     MOVFF     0xfd9,0xfe6    void adminReceived(byte* recBuffPtr,byte len){                                   C:\usb4all\fw\demo\user\adminModule.c
00164a   ffe6                                                                                                               
00164c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00164e   ffd9                                                                                                               
001650   0e16     MOVLW     0x16                                                                                            
001652   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	byte adminCounter;                                                              C:\usb4all\fw\demo\user\adminModule.c
001654   52de     MOVF      0xde,0x1,0x0   	byte endIn = nullEP, endOut = nullEP;                                           C:\usb4all\fw\demo\user\adminModule.c
001656   0e11     MOVLW     0x11                                                                                            
001658   6edd     MOVWF     0xdd,0x0                                                                                        
00165a   0e11     MOVLW     0x11                                                                                            
00165c   6ef3     MOVWF     0xf3,0x0                                                                                        
00165e   0e02     MOVLW     0x2                                                                                             
001660   cff3     MOVFF     0xff3,0xfdb                                                                                     
001662   ffdb                                                                                                               
001664   0e03     MOVLW     0x3            	byte userTableSize = 0;                                                         C:\usb4all\fw\demo\user\adminModule.c
001666   6adb     CLRF      0xdb,0x0                                                                                        
001668   0e04     MOVLW     0x4                byte lineNumber = 0;                                                         C:\usb4all\fw\demo\user\adminModule.c
00166a   6adb     CLRF      0xdb,0x0                                                                                        
                                           	char lineName[8];                                                               C:\usb4all\fw\demo\user\adminModule.c
                                           	rom near char* tableDirec;                                                      C:\usb4all\fw\demo\user\adminModule.c
                                           	pUserFunc dir;	                                                                 C:\usb4all\fw\demo\user\adminModule.c
                                           	void (*pUser)(byte);                                                            C:\usb4all\fw\demo\user\adminModule.c
                                           	byte handler, response;                                                         C:\usb4all\fw\demo\user\adminModule.c
                                           	byte j;                                                                         C:\usb4all\fw\demo\user\adminModule.c
00166c   6adf     CLRF      0xdf,0x0           adminCounter = 0;                                                            C:\usb4all\fw\demo\user\adminModule.c
00166e   6a8c     CLRF      0x8c,0x0       mInitAllLEDs();                                                                  C:\usb4all\fw\demo\user\adminModule.c
001670   0ef0     MOVLW     0xf0                                                                                            
001672   1695     ANDWF     0x95,0x1,0x0                                                                                    
001674   0efd     MOVLW     0xfd               switch(((AM_PACKET*)recBuffPtr)->CMD){                                       C:\usb4all\fw\demo\user\adminModule.c
001676   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
001678   ffe9                                                                                                               
00167a   0efe     MOVLW     0xfe                                                                                            
00167c   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00167e   ffea                                                                                                               
001680   50ef     MOVF      0xef,0x0,0x0                                                                                    
001682   0aff     XORLW     0xff                                                                                            
001684   e101     BNZ       0x1688                                                                                          
001686   d173     BRA       0x196e                                                                                          
001688   0af7     XORLW     0xf7                                                                                            
00168a   e101     BNZ       0x168e                                                                                          
00168c   d14b     BRA       0x1924                                                                                          
00168e   0a0e     XORLW     0xe                                                                                             
001690   e101     BNZ       0x1694                                                                                          
001692   d0f7     BRA       0x1882                                                                                          
001694   0a03     XORLW     0x3                                                                                             
001696   e101     BNZ       0x169a                                                                                          
001698   d0dd     BRA       0x1854                                                                                          
00169a   0a01     XORLW     0x1                                                                                             
00169c   e101     BNZ       0x16a0                                                                                          
00169e   d0d7     BRA       0x184e                                                                                          
0016a0   0a07     XORLW     0x7                                                                                             
0016a2   e101     BNZ       0x16a6                                                                                          
0016a4   d0d1     BRA       0x1848                                                                                          
0016a6   0a01     XORLW     0x1                                                                                             
0016a8   e101     BNZ       0x16ac                                                                                          
0016aa   d0cb     BRA       0x1842                                                                                          
0016ac   0a05     XORLW     0x5                                                                                             
0016ae   e101     BNZ       0x16b2                                                                                          
0016b0   d0bd     BRA       0x182c                                                                                          
0016b2   0a06     XORLW     0x6                                                                                             
0016b4   e101     BNZ       0x16b8                                                                                          
0016b6   d095     BRA       0x17e2                                                                                          
0016b8   0a01     XORLW     0x1                                                                                             
0016ba   e001     BZ        0x16be                                                                                          
0016bc   d169     BRA       0x1990                                                                                          
                                                     case OPEN:                                                             C:\usb4all\fw\demo\user\adminModule.c
0016be   0efd     MOVLW     0xfd           			  tableDirec = getUserTableDirection(((AM_PACKET*)recBuffPtr)->moduleId);     C:\usb4all\fw\demo\user\adminModule.c
0016c0   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0016c2   ffe9                                                                                                               
0016c4   0efe     MOVLW     0xfe                                                                                            
0016c6   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0016c8   ffea                                                                                                               
0016ca   0e03     MOVLW     0x3                                                                                             
0016cc   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0016ce   0e00     MOVLW     0x0                                                                                             
0016d0   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0016d2   cfe9     MOVFF     0xfe9,0x10                                                                                      
0016d4   f010                                                                                                               
0016d6   cfea     MOVFF     0xfea,0x11                                                                                      
0016d8   f011                                                                                                               
0016da   c010     MOVFF     0x10,0xfe6                                                                                      
0016dc   ffe6                                                                                                               
0016de   c011     MOVFF     0x11,0xfe6                                                                                      
0016e0   ffe6                                                                                                               
0016e2   ecbe     CALL      0x1b7c,0x0                                                                                      
0016e4   f00d                                                                                                               
0016e6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0016e8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0016ea   0e0d     MOVLW     0xd                                                                                             
0016ec   cff3     MOVFF     0xff3,0xfdb                                                                                     
0016ee   ffdb                                                                                                               
0016f0   0e0e     MOVLW     0xe                                                                                             
0016f2   cff4     MOVFF     0xff4,0xfdb                                                                                     
0016f4   ffdb                                                                                                               
0016f6   0e0d     MOVLW     0xd            			  if(!existsTableEntry(tableDirec)){                                          C:\usb4all\fw\demo\user\adminModule.c
0016f8   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0016fa   ffe6                                                                                                               
0016fc   0e0e     MOVLW     0xe                                                                                             
0016fe   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
001700   ffe6                                                                                                               
001702   ecbf     CALL      0x297e,0x0                                                                                      
001704   f014                                                                                                               
001706   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001708   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00170a   0900     IORLW     0x0                                                                                             
00170c   e15c     BNZ       0x17c6                                                                                          
00170e   0e0d     MOVLW     0xd            			      dir = getModuleInitDirection(tableDirec);                               C:\usb4all\fw\demo\user\adminModule.c
001710   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
001712   ffe6                                                                                                               
001714   0e0e     MOVLW     0xe                                                                                             
001716   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
001718   ffe6                                                                                                               
00171a   eceb     CALL      0x1dd6,0x0                                                                                      
00171c   f00e                                                                                                               
00171e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001720   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001722   0e0f     MOVLW     0xf                                                                                             
001724   cff3     MOVFF     0xff3,0xfdb                                                                                     
001726   ffdb                                                                                                               
001728   0e10     MOVLW     0x10                                                                                            
00172a   cff4     MOVFF     0xff4,0xfdb                                                                                     
00172c   ffdb                                                                                                               
                                           				  //Si dir vale error es que no se encontro un modulo con nombre moduleId    C:\usb4all\fw\demo\user\adminModule.c
00172e   0e0f     MOVLW     0xf            				  if((byte)dir != ERROR){                                                    C:\usb4all\fw\demo\user\adminModule.c
001730   50db     MOVF      0xdb,0x0,0x0                                                                                    
001732   08ff     SUBLW     0xff                                                                                            
001734   e041     BZ        0x17b8                                                                                          
001736   0efd     MOVLW     0xfd           					endIn = ((AM_PACKET*)recBuffPtr)->inEp;                                     C:\usb4all\fw\demo\user\adminModule.c
001738   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00173a   ffe9                                                                                                               
00173c   0efe     MOVLW     0xfe                                                                                            
00173e   cfdb     MOVFF     0xfdb,0xfea                                                                                     
001740   ffea                                                                                                               
001742   52ee     MOVF      0xee,0x1,0x0                                                                                    
001744   0e01     MOVLW     0x1                                                                                             
001746   cfef     MOVFF     0xfef,0xfdb                                                                                     
001748   ffdb                                                                                                               
00174a   0e0d     MOVLW     0xd            					handler = newHandlerTableEntry(endIn,tableDirec);                           C:\usb4all\fw\demo\user\adminModule.c
00174c   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
00174e   ffe6                                                                                                               
001750   0e0e     MOVLW     0xe                                                                                             
001752   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
001754   ffe6                                                                                                               
001756   0e01     MOVLW     0x1                                                                                             
001758   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
00175a   ffe6                                                                                                               
00175c   ec72     CALL      0x28e4,0x0                                                                                      
00175e   f014                                                                                                               
001760   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001762   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001764   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001766   6ee7     MOVWF     0xe7,0x0                                                                                        
001768   0e13     MOVLW     0x13                                                                                            
00176a   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
00176c   ffdb                                                                                                               
                                           				  	//TODO Carlos tenes que chequear que handler no valga ERROR (ver defines.h) C:\usb4all\fw\demo\user\adminModule.c
00176e   0e0f     MOVLW     0xf            				  	pUser = dir;                                                              C:\usb4all\fw\demo\user\adminModule.c
001770   cfdb     MOVFF     0xfdb,0x6                                                                                       
001772   f006                                                                                                               
001774   0e10     MOVLW     0x10                                                                                            
001776   cfdb     MOVFF     0xfdb,0x7                                                                                       
001778   f007                                                                                                               
00177a   0e11     MOVLW     0x11                                                                                            
00177c   c006     MOVFF     0x6,0xfdb                                                                                       
00177e   ffdb                                                                                                               
001780   0e12     MOVLW     0x12                                                                                            
001782   c007     MOVFF     0x7,0xfdb                                                                                       
001784   ffdb                                                                                                               
001786   0e11     MOVLW     0x11           				  	pUser(handler); //hago el init ;)                                         C:\usb4all\fw\demo\user\adminModule.c
001788   cfdb     MOVFF     0xfdb,0x10                                                                                      
00178a   f010                                                                                                               
00178c   0e12     MOVLW     0x12                                                                                            
00178e   cfdb     MOVFF     0xfdb,0x11                                                                                      
001790   f011                                                                                                               
001792   0e13     MOVLW     0x13                                                                                            
001794   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
001796   ffe6                                                                                                               
001798   d004     BRA       0x17a2                                                                                          
00179a   c011     MOVFF     0x11,0xffa                                                                                      
00179c   fffa                                                                                                               
00179e   5010     MOVF      0x10,0x0,0x0                                                                                    
0017a0   6ef9     MOVWF     0xf9,0x0                                                                                        
0017a2   dffb     RCALL     0x179a                                                                                          
0017a4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0017a6   c16d     MOVFF     0x16d,0xfe9    				  	((AM_PACKET*)sendBufferAdmin)->handlerNumber = handler;                   C:\usb4all\fw\demo\user\adminModule.c
0017a8   ffe9                                                                                                               
0017aa   c16e     MOVFF     0x16e,0xfea                                                                                     
0017ac   ffea                                                                                                               
0017ae   52ee     MOVF      0xee,0x1,0x0                                                                                    
0017b0   0e13     MOVLW     0x13                                                                                            
0017b2   cfdb     MOVFF     0xfdb,0xfef                                                                                     
0017b4   ffef                                                                                                               
0017b6   d006     BRA       0x17c4         				  }else{                                                                     C:\usb4all\fw\demo\user\adminModule.c
0017b8   c16d     MOVFF     0x16d,0xfe9    				   	 ((AM_PACKET*)sendBufferAdmin)->handlerNumber = ERROR;                   C:\usb4all\fw\demo\user\adminModule.c
0017ba   ffe9                                                                                                               
0017bc   c16e     MOVFF     0x16e,0xfea                                                                                     
0017be   ffea                                                                                                               
0017c0   52ee     MOVF      0xee,0x1,0x0                                                                                    
0017c2   68ef     SETF      0xef,0x0                                                                                        
                                           				  }                                                                          C:\usb4all\fw\demo\user\adminModule.c
0017c4   d006     BRA       0x17d2         			  }else{                                                                      C:\usb4all\fw\demo\user\adminModule.c
0017c6   c16d     MOVFF     0x16d,0xfe9    			   	   ((AM_PACKET*)sendBufferAdmin)->handlerNumber = ERROR;                  C:\usb4all\fw\demo\user\adminModule.c
0017c8   ffe9                                                                                                               
0017ca   c16e     MOVFF     0x16e,0xfea                                                                                     
0017cc   ffea                                                                                                               
0017ce   52ee     MOVF      0xee,0x1,0x0                                                                                    
0017d0   68ef     SETF      0xef,0x0                                                                                        
                                           			  }		                                                                         C:\usb4all\fw\demo\user\adminModule.c
0017d2   c16d     MOVFF     0x16d,0xfe9                  ((AM_PACKET*)sendBufferAdmin)->CMD = OPEN;                         C:\usb4all\fw\demo\user\adminModule.c
0017d4   ffe9                                                                                                               
0017d6   c16e     MOVFF     0x16e,0xfea                                                                                     
0017d8   ffea                                                                                                               
0017da   6aef     CLRF      0xef,0x0                                                                                        
0017dc   0e02     MOVLW     0x2            			  adminCounter=0x02; //1 byte para el campo CMD, otro para el handler 	      	 C:\usb4all\fw\demo\user\adminModule.c
0017de   6edf     MOVWF     0xdf,0x0                                                                                        
0017e0   d0d8     BRA       0x1992         		      break;                                                                   C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                                     case CLOSE:                                                            C:\usb4all\fw\demo\user\adminModule.c
0017e2   0efd     MOVLW     0xfd                         handler  = ((AM_PACKET*)recBuffPtr)->handlerNumber;                C:\usb4all\fw\demo\user\adminModule.c
0017e4   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0017e6   ffe9                                                                                                               
0017e8   0efe     MOVLW     0xfe                                                                                            
0017ea   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0017ec   ffea                                                                                                               
0017ee   52ee     MOVF      0xee,0x1,0x0                                                                                    
0017f0   0e13     MOVLW     0x13                                                                                            
0017f2   cfef     MOVFF     0xfef,0xfdb                                                                                     
0017f4   ffdb                                                                                                               
0017f6   0e13     MOVLW     0x13           			  response = removeHandlerTableEntry(handler);	                               C:\usb4all\fw\demo\user\adminModule.c
0017f8   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0017fa   ffe6                                                                                                               
0017fc   ec36     CALL      0x2a6c,0x0                                                                                      
0017fe   f015                                                                                                               
001800   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001802   6ee7     MOVWF     0xe7,0x0                                                                                        
001804   0e14     MOVLW     0x14                                                                                            
001806   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
001808   ffdb                                                                                                               
00180a   c16d     MOVFF     0x16d,0xfe9    			  ((AM_PACKET*)sendBufferAdmin)->response = response;                         C:\usb4all\fw\demo\user\adminModule.c
00180c   ffe9                                                                                                               
00180e   c16e     MOVFF     0x16e,0xfea                                                                                     
001810   ffea                                                                                                               
001812   52ee     MOVF      0xee,0x1,0x0                                                                                    
001814   0e14     MOVLW     0x14                                                                                            
001816   cfdb     MOVFF     0xfdb,0xfef                                                                                     
001818   ffef                                                                                                               
00181a   c16d     MOVFF     0x16d,0xfe9    			  ((AM_PACKET*)sendBufferAdmin)->CMD = CLOSE;                                 C:\usb4all\fw\demo\user\adminModule.c
00181c   ffe9                                                                                                               
00181e   c16e     MOVFF     0x16e,0xfea                                                                                     
001820   ffea                                                                                                               
001822   0e01     MOVLW     0x1                                                                                             
001824   6eef     MOVWF     0xef,0x0                                                                                        
001826   0e02     MOVLW     0x2            			  adminCounter = 0x02; //1 byte para el campo CMD, otro para la respuesta     C:\usb4all\fw\demo\user\adminModule.c
001828   6edf     MOVWF     0xdf,0x0                                                                                        
00182a   d0b3     BRA       0x1992                       break;                                                             C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                                     case INIT:                                                             C:\usb4all\fw\demo\user\adminModule.c
00182c   ecff     CALL      0x2bfe,0x0                   removeAllOpenModules();                                            C:\usb4all\fw\demo\user\adminModule.c
00182e   f015                                                                                                               
001830   c16d     MOVFF     0x16d,0xfe9    			  ((AM_PACKET*)sendBufferAdmin)->CMD = INIT;                                  C:\usb4all\fw\demo\user\adminModule.c
001832   ffe9                                                                                                               
001834   c16e     MOVFF     0x16e,0xfea                                                                                     
001836   ffea                                                                                                               
001838   0e07     MOVLW     0x7                                                                                             
00183a   6eef     MOVWF     0xef,0x0                                                                                        
00183c   0e01     MOVLW     0x1            			  adminCounter = 0x01; //1 byte para el campo CMD                             C:\usb4all\fw\demo\user\adminModule.c
00183e   6edf     MOVWF     0xdf,0x0                                                                                        
001840   d0a8     BRA       0x1992                       break;                                                             C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                                     case MESSAGE:                                                          C:\usb4all\fw\demo\user\adminModule.c
                                                         // me limito a solamente mandar el paquete que me genera el usuario mediante sendMes (ping) C:\usb4all\fw\demo\user\adminModule.c
001842   0e02     MOVLW     0x2                          adminCounter = sizeof(((AM_PACKET*)recBuffPtr));                   C:\usb4all\fw\demo\user\adminModule.c
001844   6edf     MOVWF     0xdf,0x0                                                                                        
001846   d0a5     BRA       0x1992         			  break;                                                                      C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                                     case LOAD:                                                             C:\usb4all\fw\demo\user\adminModule.c
                                                         //Ver loaderModule.h                                               C:\usb4all\fw\demo\user\adminModule.c
                                           			  //loadModule(byte idModule, byte* binaryStream);                            C:\usb4all\fw\demo\user\adminModule.c
001848   0e01     MOVLW     0x1            			  adminCounter = 0x01;                                                        C:\usb4all\fw\demo\user\adminModule.c
00184a   6edf     MOVWF     0xdf,0x0                                                                                        
00184c   d0a2     BRA       0x1992                       break;                                                             C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                                     case UNLOAD:                                                           C:\usb4all\fw\demo\user\adminModule.c
00184e   0e03     MOVLW     0x3                          adminCounter=0x03;                                                 C:\usb4all\fw\demo\user\adminModule.c
001850   6edf     MOVWF     0xdf,0x0                                                                                        
001852   d09f     BRA       0x1992                       break;                                                             C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                                     case GET_USER_MODULES_SIZE:                                            C:\usb4all\fw\demo\user\adminModule.c
001854   ec4e     CALL      0x1c9c,0x0                   userTableSize = getUserTableSize();                                C:\usb4all\fw\demo\user\adminModule.c
001856   f00e                                                                                                               
001858   6ee7     MOVWF     0xe7,0x0                                                                                        
00185a   0e03     MOVLW     0x3                                                                                             
00185c   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
00185e   ffdb                                                                                                               
001860   c16d     MOVFF     0x16d,0xfe9    			  ((AM_PACKET*)sendBufferAdmin)->CMD  = GET_USER_MODULES_SIZE;                C:\usb4all\fw\demo\user\adminModule.c
001862   ffe9                                                                                                               
001864   c16e     MOVFF     0x16e,0xfea                                                                                     
001866   ffea                                                                                                               
001868   0e05     MOVLW     0x5                                                                                             
00186a   6eef     MOVWF     0xef,0x0                                                                                        
00186c   c16d     MOVFF     0x16d,0xfe9    			  ((AM_PACKET*)sendBufferAdmin)->size = userTableSize;                        C:\usb4all\fw\demo\user\adminModule.c
00186e   ffe9                                                                                                               
001870   c16e     MOVFF     0x16e,0xfea                                                                                     
001872   ffea                                                                                                               
001874   52ee     MOVF      0xee,0x1,0x0                                                                                    
001876   0e03     MOVLW     0x3                                                                                             
001878   cfdb     MOVFF     0xfdb,0xfef                                                                                     
00187a   ffef                                                                                                               
00187c   0e02     MOVLW     0x2            			  adminCounter=0x02;                                                          C:\usb4all\fw\demo\user\adminModule.c
00187e   6edf     MOVWF     0xdf,0x0                                                                                        
001880   d088     BRA       0x1992                       break;                                                             C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                           		  case GET_USER_MODULES_LINE:                                                  C:\usb4all\fw\demo\user\adminModule.c
001882   c16d     MOVFF     0x16d,0xfe9    			  ((AM_PACKET*)sendBufferAdmin)->CMD  = GET_USER_MODULES_LINE;                C:\usb4all\fw\demo\user\adminModule.c
001884   ffe9                                                                                                               
001886   c16e     MOVFF     0x16e,0xfea                                                                                     
001888   ffea                                                                                                               
00188a   0e06     MOVLW     0x6                                                                                             
00188c   6eef     MOVWF     0xef,0x0                                                                                        
00188e   0efd     MOVLW     0xfd           			  lineNumber = ((AM_PACKET*)recBuffPtr)->line;                                C:\usb4all\fw\demo\user\adminModule.c
001890   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
001892   ffe9                                                                                                               
001894   0efe     MOVLW     0xfe                                                                                            
001896   cfdb     MOVFF     0xfdb,0xfea                                                                                     
001898   ffea                                                                                                               
00189a   52ee     MOVF      0xee,0x1,0x0                                                                                    
00189c   0e04     MOVLW     0x4                                                                                             
00189e   cfef     MOVFF     0xfef,0xfdb                                                                                     
0018a0   ffdb                                                                                                               
0018a2   50d9     MOVF      0xd9,0x0,0x0   			  getModuleName(lineNumber, (char*)lineName);	                                C:\usb4all\fw\demo\user\adminModule.c
0018a4   0f05     ADDLW     0x5                                                                                             
0018a6   6ee6     MOVWF     0xe6,0x0                                                                                        
0018a8   0e00     MOVLW     0x0                                                                                             
0018aa   20da     ADDWFC    0xda,0x0,0x0                                                                                    
0018ac   6ee6     MOVWF     0xe6,0x0                                                                                        
0018ae   0e04     MOVLW     0x4                                                                                             
0018b0   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0018b2   ffe6                                                                                                               
0018b4   ec86     CALL      0x1d0c,0x0                                                                                      
0018b6   f00e                                                                                                               
0018b8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0018ba   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0018bc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           			  //memcpy(((AM_PACKET*)sendBufferAdmin)->lineName, lineName, 8); no anda, sera porque estan en espacios de memoria separados (RAM/ROM)?			 C:\usb4all\fw\demo\user\adminModule.c
0018be   0e15     MOVLW     0x15           			  for (j = 0; j < 8; j++){                                                    C:\usb4all\fw\demo\user\adminModule.c
0018c0   6adb     CLRF      0xdb,0x0                                                                                        
0018c2   0e08     MOVLW     0x8                                                                                             
0018c4   6ef3     MOVWF     0xf3,0x0                                                                                        
0018c6   0e15     MOVLW     0x15                                                                                            
0018c8   cfdb     MOVFF     0xfdb,0xff4                                                                                     
0018ca   fff4                                                                                                               
0018cc   50f3     MOVF      0xf3,0x0,0x0                                                                                    
0018ce   5cf4     SUBWF     0xf4,0x0,0x0                                                                                    
0018d0   e226     BC        0x191e                                                                                          
001918   0e15     MOVLW     0x15                                                                                            
00191a   2adb     INCF      0xdb,0x1,0x0                                                                                    
00191c   d7d2     BRA       0x18c2                                                                                          
0018d2   50d9     MOVF      0xd9,0x0,0x0   			  	((AM_PACKET*)sendBufferAdmin)->lineName[j] = lineName[j];                  C:\usb4all\fw\demo\user\adminModule.c
0018d4   0f05     ADDLW     0x5                                                                                             
0018d6   6e12     MOVWF     0x12,0x0                                                                                        
0018d8   cfda     MOVFF     0xfda,0x13                                                                                      
0018da   f013                                                                                                               
0018dc   0e15     MOVLW     0x15                                                                                            
0018de   50db     MOVF      0xdb,0x0,0x0                                                                                    
0018e0   010f     MOVLB     0xf                                                                                             
0018e2   2412     ADDWF     0x12,0x0,0x0                                                                                    
0018e4   6ee9     MOVWF     0xe9,0x0                                                                                        
0018e6   0e00     MOVLW     0x0                                                                                             
0018e8   2013     ADDWFC    0x13,0x0,0x0                                                                                    
0018ea   6eea     MOVWF     0xea,0x0                                                                                        
0018ec   50ef     MOVF      0xef,0x0,0x0                                                                                    
0018ee   6ee6     MOVWF     0xe6,0x0                                                                                        
0018f0   c16d     MOVFF     0x16d,0xfe9                                                                                     
0018f2   ffe9                                                                                                               
0018f4   c16e     MOVFF     0x16e,0xfea                                                                                     
0018f6   ffea                                                                                                               
0018f8   52ee     MOVF      0xee,0x1,0x0                                                                                    
0018fa   cfe9     MOVFF     0xfe9,0x10                                                                                      
0018fc   f010                                                                                                               
0018fe   cfea     MOVFF     0xfea,0x11                                                                                      
001900   f011                                                                                                               
001902   0e15     MOVLW     0x15                                                                                            
001904   50db     MOVF      0xdb,0x0,0x0                                                                                    
001906   010f     MOVLB     0xf                                                                                             
001908   2410     ADDWF     0x10,0x0,0x0                                                                                    
00190a   6ee9     MOVWF     0xe9,0x0                                                                                        
00190c   0e00     MOVLW     0x0                                                                                             
00190e   2011     ADDWFC    0x11,0x0,0x0                                                                                    
001910   6eea     MOVWF     0xea,0x0                                                                                        
001912   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001914   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001916   6eef     MOVWF     0xef,0x0                                                                                        
                                           			  }                                                                           C:\usb4all\fw\demo\user\adminModule.c
00191e   0e09     MOVLW     0x9            				adminCounter=0x09;                                                           C:\usb4all\fw\demo\user\adminModule.c
001920   6edf     MOVWF     0xdf,0x0                                                                                        
001922   d037     BRA       0x1992                       break;                                                             C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                           		   case CONFIGURE:                                                             C:\usb4all\fw\demo\user\adminModule.c
001924   0efd     MOVLW     0xfd                         handler  = ((AM_PACKET*)recBuffPtr)->handlerNumber;                C:\usb4all\fw\demo\user\adminModule.c
001926   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
001928   ffe9                                                                                                               
00192a   0efe     MOVLW     0xfe                                                                                            
00192c   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00192e   ffea                                                                                                               
001930   52ee     MOVF      0xee,0x1,0x0                                                                                    
001932   0e13     MOVLW     0x13                                                                                            
001934   cfef     MOVFF     0xfef,0xfdb                                                                                     
001936   ffdb                                                                                                               
001938   0e13     MOVLW     0x13           			  response = configureHandlerTableEntry(handler);	                            C:\usb4all\fw\demo\user\adminModule.c
00193a   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
00193c   ffe6                                                                                                               
00193e   eca9     CALL      0x2b52,0x0                                                                                      
001940   f015                                                                                                               
001942   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001944   6ee7     MOVWF     0xe7,0x0                                                                                        
001946   0e14     MOVLW     0x14                                                                                            
001948   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
00194a   ffdb                                                                                                               
00194c   c16d     MOVFF     0x16d,0xfe9    			  ((AM_PACKET*)sendBufferAdmin)->response = response;                         C:\usb4all\fw\demo\user\adminModule.c
00194e   ffe9                                                                                                               
001950   c16e     MOVFF     0x16e,0xfea                                                                                     
001952   ffea                                                                                                               
001954   52ee     MOVF      0xee,0x1,0x0                                                                                    
001956   0e14     MOVLW     0x14                                                                                            
001958   cfdb     MOVFF     0xfdb,0xfef                                                                                     
00195a   ffef                                                                                                               
00195c   c16d     MOVFF     0x16d,0xfe9    			  ((AM_PACKET*)sendBufferAdmin)->CMD = CONFIGURE;                             C:\usb4all\fw\demo\user\adminModule.c
00195e   ffe9                                                                                                               
001960   c16e     MOVFF     0x16e,0xfea                                                                                     
001962   ffea                                                                                                               
001964   0e08     MOVLW     0x8                                                                                             
001966   6eef     MOVWF     0xef,0x0                                                                                        
001968   0e02     MOVLW     0x2            			  adminCounter = 0x02; //1 byte para el campo CMD, otro para la respuesta     C:\usb4all\fw\demo\user\adminModule.c
00196a   6edf     MOVWF     0xdf,0x0                                                                                        
00196c   d012     BRA       0x1992         			  break;                                                                      C:\usb4all\fw\demo\user\adminModule.c
                                           		  case RESET:                                                                  C:\usb4all\fw\demo\user\adminModule.c
                                                           //When resetting, make sure to drop the device off the bus       C:\usb4all\fw\demo\user\adminModule.c
                                                           //for a period of time. Helps when the device is suspended.      C:\usb4all\fw\demo\user\adminModule.c
00196e   966d     BCF       0x6d,0x3,0x0                   UCONbits.USBEN = 0;                                              C:\usb4all\fw\demo\user\adminModule.c
001970   0101     MOVLB     0x1                            counter_big = 0;                                                 C:\usb4all\fw\demo\user\adminModule.c
001972   6b70     CLRF      0x70,0x1                                                                                        
001974   6b71     CLRF      0x71,0x1                                                                                        
001976   0101     MOVLB     0x1                            while(--counter_big);                                            C:\usb4all\fw\demo\user\adminModule.c
001978   0770     DECF      0x70,0x1,0x1                                                                                    
00197a   0e00     MOVLW     0x0                                                                                             
00197c   5b71     SUBWFB    0x71,0x1,0x1                                                                                    
00197e   0101     MOVLB     0x1                                                                                             
001980   5170     MOVF      0x70,0x0,0x1                                                                                    
001982   1171     IORWF     0x71,0x0,0x1                                                                                    
001984   e001     BZ        0x1988                                                                                          
001986   d7f7     BRA       0x1976                                                                                          
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
001988   00ff     RESET                                    Reset();                                                         C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
00198a   0e01     MOVLW     0x1            			  adminCounter = 0x01; //1 byte para el campo CMD                             C:\usb4all\fw\demo\user\adminModule.c
00198c   6edf     MOVWF     0xdf,0x0                                                                                        
00198e   d001     BRA       0x1992         			  break;                                                                      C:\usb4all\fw\demo\user\adminModule.c
                                                     default:                                                               C:\usb4all\fw\demo\user\adminModule.c
001990   d000     BRA       0x1992                       break;                                                             C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                                 }//end switch()                                                            C:\usb4all\fw\demo\user\adminModule.c
001992   50df     MOVF      0xdf,0x0,0x0         if(adminCounter != 0){                                                     C:\usb4all\fw\demo\user\adminModule.c
001994   e00b     BZ        0x19ac                                                                                          
001996   0104     MOVLB     0x4                      if(!mUSBGenTxIsBusy())                                                 C:\usb4all\fw\demo\user\adminModule.c
001998   bf0c     BTFSC     0xc,0x7,0x1                                                                                     
00199a   d008     BRA       0x19ac                                                                                          
00199c   cfdf     MOVFF     0xfdf,0xfe6              	USBGenWrite2(adminHandler, adminCounter);                             C:\usb4all\fw\demo\user\adminModule.c
00199e   ffe6                                                                                                               
0019a0   c16f     MOVFF     0x16f,0xfe6                                                                                     
0019a2   ffe6                                                                                                               
0019a4   ec36     CALL      0x266c,0x0                                                                                      
0019a6   f013                                                                                                               
0019a8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0019aa   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                 }//end if                                                                  C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
0019ac   0e16     MOVLW     0x16           }//end adminReceived                                                             C:\usb4all\fw\demo\user\adminModule.c
0019ae   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0019b0   e202     BC        0x19b6                                                                                          
0019b2   6ae1     CLRF      0xe1,0x0                                                                                        
0019b4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0019b6   6ee1     MOVWF     0xe1,0x0                                                                                        
0019b8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0019ba   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0019bc   ffd9                                                                                                               
0019be   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
0019c0   cfd9     MOVFF     0xfd9,0xfe6    void sendMes(char* mensaje, byte len){                                           C:\usb4all\fw\demo\user\adminModule.c
0019c2   ffe6                                                                                                               
0019c4   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0019c6   ffd9                                                                                                               
0019c8   0e02     MOVLW     0x2                                                                                             
0019ca   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	byte adminCounter, j;                                                           C:\usb4all\fw\demo\user\adminModule.c
0019cc   c16d     MOVFF     0x16d,0xfe9    	((AM_PACKET*)sendBufferAdmin)->CMD = MESSAGE;                                   C:\usb4all\fw\demo\user\adminModule.c
0019ce   ffe9                                                                                                               
0019d0   c16e     MOVFF     0x16e,0xfea                                                                                     
0019d2   ffea                                                                                                               
0019d4   6eef     MOVWF     0xef,0x0                                                                                        
0019d6   0e01     MOVLW     0x1            	for (j = 0; j < len; j++){                                                      C:\usb4all\fw\demo\user\adminModule.c
0019d8   6adb     CLRF      0xdb,0x0                                                                                        
0019da   0efc     MOVLW     0xfc                                                                                            
0019dc   50db     MOVF      0xdb,0x0,0x0                                                                                    
0019de   6ef3     MOVWF     0xf3,0x0                                                                                        
0019e0   0e01     MOVLW     0x1                                                                                             
0019e2   cfdb     MOVFF     0xfdb,0xff4                                                                                     
0019e4   fff4                                                                                                               
0019e6   50f3     MOVF      0xf3,0x0,0x0                                                                                    
0019e8   5cf4     SUBWF     0xf4,0x0,0x0                                                                                    
0019ea   e226     BC        0x1a38                                                                                          
001a32   0e01     MOVLW     0x1                                                                                             
001a34   2adb     INCF      0xdb,0x1,0x0                                                                                    
001a36   d7d1     BRA       0x19da                                                                                          
0019ec   0e01     MOVLW     0x1            		((AM_PACKET*)sendBufferAdmin)->texto[j] = mensaje[j];                          C:\usb4all\fw\demo\user\adminModule.c
0019ee   50db     MOVF      0xdb,0x0,0x0                                                                                    
0019f0   6ee7     MOVWF     0xe7,0x0                                                                                        
0019f2   0efd     MOVLW     0xfd                                                                                            
0019f4   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0019f6   ffe9                                                                                                               
0019f8   0efe     MOVLW     0xfe                                                                                            
0019fa   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0019fc   ffea                                                                                                               
0019fe   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001a00   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
001a02   0e00     MOVLW     0x0                                                                                             
001a04   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001a06   50ef     MOVF      0xef,0x0,0x0                                                                                    
001a08   6ee6     MOVWF     0xe6,0x0                                                                                        
001a0a   c16d     MOVFF     0x16d,0xfe9                                                                                     
001a0c   ffe9                                                                                                               
001a0e   c16e     MOVFF     0x16e,0xfea                                                                                     
001a10   ffea                                                                                                               
001a12   52ee     MOVF      0xee,0x1,0x0                                                                                    
001a14   cfe9     MOVFF     0xfe9,0x10                                                                                      
001a16   f010                                                                                                               
001a18   cfea     MOVFF     0xfea,0x11                                                                                      
001a1a   f011                                                                                                               
001a1c   0e01     MOVLW     0x1                                                                                             
001a1e   50db     MOVF      0xdb,0x0,0x0                                                                                    
001a20   010f     MOVLB     0xf                                                                                             
001a22   2410     ADDWF     0x10,0x0,0x0                                                                                    
001a24   6ee9     MOVWF     0xe9,0x0                                                                                        
001a26   0e00     MOVLW     0x0                                                                                             
001a28   2011     ADDWFC    0x11,0x0,0x0                                                                                    
001a2a   6eea     MOVWF     0xea,0x0                                                                                        
001a2c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001a2e   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001a30   6eef     MOVWF     0xef,0x0                                                                                        
                                           	}                                                                               C:\usb4all\fw\demo\user\adminModule.c
001a38   0efc     MOVLW     0xfc           	adminCounter = len + 1; //sizeof(adminDataPacket);                              C:\usb4all\fw\demo\user\adminModule.c
001a3a   28db     INCF      0xdb,0x0,0x0                                                                                    
001a3c   6edf     MOVWF     0xdf,0x0                                                                                        
001a3e   0104     MOVLB     0x4                if(!mUSBGenTxIsBusy())                                                       C:\usb4all\fw\demo\user\adminModule.c
001a40   bf0c     BTFSC     0xc,0x7,0x1                                                                                     
001a42   d008     BRA       0x1a54                                                                                          
001a44   cfdf     MOVFF     0xfdf,0xfe6           	USBGenWrite2(adminHandler, adminCounter);                                C:\usb4all\fw\demo\user\adminModule.c
001a46   ffe6                                                                                                               
001a48   c16f     MOVFF     0x16f,0xfe6                                                                                     
001a4a   ffe6                                                                                                               
001a4c   ec36     CALL      0x266c,0x0                                                                                      
001a4e   f013                                                                                                               
001a50   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001a52   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001a54   0e02     MOVLW     0x2            }                                                                                C:\usb4all\fw\demo\user\adminModule.c
001a56   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
001a58   e202     BC        0x1a5e                                                                                          
001a5a   6ae1     CLRF      0xe1,0x0                                                                                        
001a5c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001a5e   6ee1     MOVWF     0xe1,0x0                                                                                        
001a60   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001a62   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001a64   ffd9                                                                                                               
001a66   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                           /*                                                                               C:\usb4all\fw\demo\user\adminModule.c
                                           void sendMes(char mensaje[8]){                                                   C:\usb4all\fw\demo\user\adminModule.c
                                           	byte adminCounter, j;                                                           C:\usb4all\fw\demo\user\adminModule.c
                                           	((AM_PACKET*)sendBufferAdmin)->CMD = MESSAGE;                                   C:\usb4all\fw\demo\user\adminModule.c
                                           	for (j = 0; j < 8; j++){                                                        C:\usb4all\fw\demo\user\adminModule.c
                                           		((AM_PACKET*)sendBufferAdmin)->texto[j] = mensaje[j];                          C:\usb4all\fw\demo\user\adminModule.c
                                           	}                                                                               C:\usb4all\fw\demo\user\adminModule.c
                                           	adminCounter = 9; //sizeof(adminDataPacket);                                    C:\usb4all\fw\demo\user\adminModule.c
                                               if(!mUSBGenTxIsBusy())                                                       C:\usb4all\fw\demo\user\adminModule.c
                                                  	USBGenWrite2(adminHandler,sendBufferAdmin,adminCounter);                 C:\usb4all\fw\demo\user\adminModule.c
                                           }*/                                                                              C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                           /** EOF adminModule.c ***************************************************************/ C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                                                                                                            C:\usb4all\fw\demo\user\adminModule.c
                                           /* Author               Date        Comment                                      C:\usb4all\fw\demo\user\userTemp.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~   C:\usb4all\fw\demo\user\userTemp.c
                                            * Andrés Aguirre       01/04/07    Original.                                    C:\usb4all\fw\demo\user\userTemp.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\user\userTemp.c
                                           #include <p18cxxx.h>                                                             C:\usb4all\fw\demo\user\userTemp.c
                                           #include <usart.h>                                                               C:\usb4all\fw\demo\user\userTemp.c
                                           #include "system\typedefs.h"                                                     C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           #include "system\usb\usb.h"                                                      C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           #include "io_cfg.h"              // I/O pin mapping                              C:\usb4all\fw\demo\user\userTemp.c
                                           #include "user\userTemp.h"                                                       C:\usb4all\fw\demo\user\userTemp.c
                                           #include "user\temperature.h"                                                    C:\usb4all\fw\demo\user\userTemp.c
                                           #include "user\handlerManager.h"                                                 C:\usb4all\fw\demo\user\userTemp.c
                                           #include "dynamicPolling.h"                                                      C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\user\userTemp.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\user\userTemp.c
                                           byte tempCounter;                                                                C:\usb4all\fw\demo\user\userTemp.c
                                           byte _trf_state;                                                                 C:\usb4all\fw\demo\user\userTemp.c
                                           byte _temp_mode;                                                                 C:\usb4all\fw\demo\user\userTemp.c
                                           byte tempHandler;                                                                C:\usb4all\fw\demo\user\userTemp.c
                                           byte old_sw3;                                                                    C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           byte* sendBufferTemp;                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           //DATA_PACKET tempDataPacket;                                                    C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           byte _pTemp;                     // Pointer to current logging position, will    C:\usb4all\fw\demo\user\userTemp.c
                                                                            // loop to zero once the max index is reached   C:\usb4all\fw\demo\user\userTemp.c
                                           byte _valid_temp;                // Keeps count of the valid data points         C:\usb4all\fw\demo\user\userTemp.c
                                           word _temp_data[1];              // 30 points of data                            C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           // Timer0 - 1 second interval setup.                                             C:\usb4all\fw\demo\user\userTemp.c
                                           // Fosc/4 = 12MHz                                                                C:\usb4all\fw\demo\user\userTemp.c
                                           // Use /256 prescalar, this brings counter freq down to 46,875 Hz                C:\usb4all\fw\demo\user\userTemp.c
                                           // Timer0 should = 65536 - 46875 = 18661 or 0x48E5                               C:\usb4all\fw\demo\user\userTemp.c
                                           #define TIMER0L_VAL         0xE5                                                 C:\usb4all\fw\demo\user\userTemp.c
                                           #define TIMER0H_VAL         0x48                                                 C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           void TempProcessIO(void);                                                        C:\usb4all\fw\demo\user\userTemp.c
                                           void TempUserInit(void);                                                         C:\usb4all\fw\demo\user\userTemp.c
                                           void TempResetTempLog(void);                                                     C:\usb4all\fw\demo\user\userTemp.c
                                           void ServiceRequests(void);                                                      C:\usb4all\fw\demo\user\userTemp.c
                                           void userTempConfigure(void);                                                    C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           // Tabla para mantener en un lugar fijo una referencia a los modulos que el usuario introduce en USB4all C:\usb4all\fw\demo\user\userTemp.c
                                           /** USER MODULE REFERENCE*****************************************************/  C:\usb4all\fw\demo\user\userTemp.c
                                           #pragma romdata user                                                             C:\usb4all\fw\demo\user\userTemp.c
                                           uTab user1 = {&userTempInit,&userTempRelease,&userTempConfigure,"temp"};         C:\usb4all\fw\demo\user\userTemp.c
                                           #pragma code                                                                     C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           // For board testing purpose only                                                C:\usb4all\fw\demo\user\userTemp.c
                                           void PICDEMFSUSBDemoBoardTest(void);                                             C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\user\userTemp.c
                                           #pragma code module                                                              C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           void TempUserInit(void)                                                          C:\usb4all\fw\demo\user\userTemp.c
                                           {                                                                                C:\usb4all\fw\demo\user\userTemp.c
003a12   ecc1     CALL      0x3182,0x0         InitTempSensor();                                                            C:\usb4all\fw\demo\user\userTemp.c
003a14   f018                                                                                                               
003a16   d83d     RCALL     0x3a92             TempResetTempLog();                                                          C:\usb4all\fw\demo\user\userTemp.c
003a18   0101     MOVLB     0x1                _temp_mode = TEMP_REAL_TIME;                                                 C:\usb4all\fw\demo\user\userTemp.c
003a1a   6b29     CLRF      0x29,0x1                                                                                        
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                               /* Init Timer0 for data logging interval (every 1 second) */                 C:\usb4all\fw\demo\user\userTemp.c
003a1c   0e97     MOVLW     0x97               T0CON = 0b10010111;                                                          C:\usb4all\fw\demo\user\userTemp.c
003a1e   6ed5     MOVWF     0xd5,0x0                                                                                        
                                               //T0CONbits.T08BIT = 0;       // 16-bit mode                                 C:\usb4all\fw\demo\user\userTemp.c
                                               //T0CONbits.T0CS = 0;         // Select Fosc/4                               C:\usb4all\fw\demo\user\userTemp.c
                                               //T0CONbits.PSA = 0;          // Assign prescalar (default is /256)          C:\usb4all\fw\demo\user\userTemp.c
                                               /* Timer0 is already enabled by default */                                   C:\usb4all\fw\demo\user\userTemp.c
                                           	//mLED_3_On();                                                                  C:\usb4all\fw\demo\user\userTemp.c
003a20   0012     RETURN    0x0            }//end UserInit                                                                  C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           BOOL Switch3IsPressed(void)                                                      C:\usb4all\fw\demo\user\userTemp.c
                                           {                                                                                C:\usb4all\fw\demo\user\userTemp.c
003a22   ba81     BTFSC     0x81,0x5,0x0       if(sw3 == 0)                                                                 C:\usb4all\fw\demo\user\userTemp.c
003a24   d002     BRA       0x3a2a                                                                                          
003a26   0e01     MOVLW     0x1                	return TRUE;                                                                C:\usb4all\fw\demo\user\userTemp.c
003a28   d002     BRA       0x3a2e                                                                                          
003a2a   0e00     MOVLW     0x0                return FALSE;                                                                C:\usb4all\fw\demo\user\userTemp.c
003a2c   d000     BRA       0x3a2e                                                                                          
003a2e   0012     RETURN    0x0            }//end Switch3IsPressed                                                          C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           BOOL Switch2IsPressed(void)                                                      C:\usb4all\fw\demo\user\userTemp.c
                                           {                                                                                C:\usb4all\fw\demo\user\userTemp.c
003a30   b881     BTFSC     0x81,0x4,0x0       if(sw2 == 0)                                                                 C:\usb4all\fw\demo\user\userTemp.c
003a32   d002     BRA       0x3a38                                                                                          
003a34   0e01     MOVLW     0x1                	return TRUE;                                                                C:\usb4all\fw\demo\user\userTemp.c
003a36   d002     BRA       0x3a3c                                                                                          
003a38   0e00     MOVLW     0x0                return FALSE;                                                                C:\usb4all\fw\demo\user\userTemp.c
003a3a   d000     BRA       0x3a3c                                                                                          
003a3c   0012     RETURN    0x0            }//end Switch2IsPressed                                                          C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\userTemp.c
                                            * Function:        void ProcessIO(void)                                         C:\usb4all\fw\demo\user\userTemp.c
                                            *                                                                               C:\usb4all\fw\demo\user\userTemp.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\userTemp.c
                                            *                                                                               C:\usb4all\fw\demo\user\userTemp.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\userTemp.c
                                            *                                                                               C:\usb4all\fw\demo\user\userTemp.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\userTemp.c
                                            *                                                                               C:\usb4all\fw\demo\user\userTemp.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\userTemp.c
                                            *                                                                               C:\usb4all\fw\demo\user\userTemp.c
                                            * Overview:        Esta funcion es la que se registra en el pooling, sirve para procesar cosas en el PIC. C:\usb4all\fw\demo\user\userTemp.c
                                            *				    Tambien se puede comunicar cosas mediante USB					                     C:\usb4all\fw\demo\user\userTemp.c
                                            *                                                                               C:\usb4all\fw\demo\user\userTemp.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\userTemp.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
003a3e   cfd9     MOVFF     0xfd9,0xfe6    void TempProcessIO(void){                                                        C:\usb4all\fw\demo\user\userTemp.c
003a40   ffe6                                                                                                               
003a42   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003a44   ffd9                                                                                                               
003a46   0e08     MOVLW     0x8                                                                                             
003a48   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
003a4a   cfd9     MOVFF     0xfd9,0xfe9    	char mensaje[8] = "Hola!!!";                                                    C:\usb4all\fw\demo\user\userTemp.c
003a4c   ffe9                                                                                                               
003a4e   cfda     MOVFF     0xfda,0xfea                                                                                     
003a50   ffea                                                                                                               
003a52   0e48     MOVLW     0x48                                                                                            
003a54   6eee     MOVWF     0xee,0x0                                                                                        
003a56   0e6f     MOVLW     0x6f                                                                                            
003a58   6eee     MOVWF     0xee,0x0                                                                                        
003a5a   0e6c     MOVLW     0x6c                                                                                            
003a5c   6eee     MOVWF     0xee,0x0                                                                                        
003a5e   0e61     MOVLW     0x61                                                                                            
003a60   6eee     MOVWF     0xee,0x0                                                                                        
003a62   0e21     MOVLW     0x21                                                                                            
003a64   6eee     MOVWF     0xee,0x0                                                                                        
003a66   6eee     MOVWF     0xee,0x0                                                                                        
003a68   6eee     MOVWF     0xee,0x0                                                                                        
003a6a   6aee     CLRF      0xee,0x0                                                                                        
                                           	//TODO ver porque esto tengo que comentarlo para que ande, antes no era asi     C:\usb4all\fw\demo\user\userTemp.c
                                               //if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;    C:\usb4all\fw\demo\user\userTemp.c
                                           	//pase el if para el handler module (lo deje aca por las dudas                  C:\usb4all\fw\demo\user\userTemp.c
                                               //ServiceRequests();                                                         C:\usb4all\fw\demo\user\userTemp.c
                                           	//hago como que el sistema invocara el handlerManager                           C:\usb4all\fw\demo\user\userTemp.c
003a6c   dfe1     RCALL     0x3a30         	if (Switch2IsPressed()){                                                        C:\usb4all\fw\demo\user\userTemp.c
003a6e   0900     IORLW     0x0                                                                                             
003a70   e003     BZ        0x3a78                                                                                          
003a72   868c     BSF       0x8c,0x3,0x0   		mLED_4_On();                                                                   C:\usb4all\fw\demo\user\userTemp.c
003a74   948c     BCF       0x8c,0x2,0x0   		mLED_3_Off();                                                                  C:\usb4all\fw\demo\user\userTemp.c
                                           		//sendMes(mensaje, sizeof(mensaje));                                           C:\usb4all\fw\demo\user\userTemp.c
003a76   d002     BRA       0x3a7c         	}else{                                                                          C:\usb4all\fw\demo\user\userTemp.c
003a78   968c     BCF       0x8c,0x3,0x0   		mLED_4_Off();                                                                  C:\usb4all\fw\demo\user\userTemp.c
003a7a   848c     BSF       0x8c,0x2,0x0   		mLED_3_On();                                                                   C:\usb4all\fw\demo\user\userTemp.c
                                           	}                                                                               C:\usb4all\fw\demo\user\userTemp.c
003a7c   0e08     MOVLW     0x8            }//end ProcessIO                                                                 C:\usb4all\fw\demo\user\userTemp.c
003a7e   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
003a80   e202     BC        0x3a86                                                                                          
003a82   6ae1     CLRF      0xe1,0x0                                                                                        
003a84   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003a86   6ee1     MOVWF     0xe1,0x0                                                                                        
003a88   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003a8a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
003a8c   ffd9                                                                                                               
003a8e   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\userTemp.c
                                            * Function:        UserTempConfigure(void)                                      C:\usb4all\fw\demo\user\userTemp.c
                                            *                                                                               C:\usb4all\fw\demo\user\userTemp.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\userTemp.c
                                            *                                                                               C:\usb4all\fw\demo\user\userTemp.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\userTemp.c
                                            *                                                                               C:\usb4all\fw\demo\user\userTemp.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\userTemp.c
                                            *                                                                               C:\usb4all\fw\demo\user\userTemp.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\userTemp.c
                                            *                                                                               C:\usb4all\fw\demo\user\userTemp.c
                                            * Overview:        This function sets the specific configuration for the user module, it is called by the framework  C:\usb4all\fw\demo\user\userTemp.c
                                            *						                                                                         C:\usb4all\fw\demo\user\userTemp.c
                                            *                                                                               C:\usb4all\fw\demo\user\userTemp.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\userTemp.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\userTemp.c
                                           void userTempConfigure(void){                                                    C:\usb4all\fw\demo\user\userTemp.c
                                           // Do the configuration                                                          C:\usb4all\fw\demo\user\userTemp.c
003a90   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           void TempResetTempLog(void)                                                      C:\usb4all\fw\demo\user\userTemp.c
                                           {                                                                                C:\usb4all\fw\demo\user\userTemp.c
003a92   0101     MOVLB     0x1                _pTemp = 0;                                                                  C:\usb4all\fw\demo\user\userTemp.c
003a94   6b2e     CLRF      0x2e,0x1                                                                                        
003a96   6b2f     CLRF      0x2f,0x1           _valid_temp = 0;                                                             C:\usb4all\fw\demo\user\userTemp.c
003a98   0012     RETURN    0x0            }//end ResetLog                                                                  C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
003a9a   cfd9     MOVFF     0xfd9,0xfe6    void userTempInit(byte i){                                                       C:\usb4all\fw\demo\user\userTemp.c
003a9c   ffe6                                                                                                               
003a9e   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003aa0   ffd9                                                                                                               
003aa2   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	BOOL res;                                                                       C:\usb4all\fw\demo\user\userTemp.c
003aa4   6a8c     CLRF      0x8c,0x0       	mInitAllLEDs();                                                                 C:\usb4all\fw\demo\user\userTemp.c
003aa6   0ef0     MOVLW     0xf0                                                                                            
003aa8   1695     ANDWF     0x95,0x1,0x0                                                                                    
003aaa   8893     BSF       0x93,0x4,0x0       mInitAllSwitches();                                                          C:\usb4all\fw\demo\user\userTemp.c
003aac   8a93     BSF       0x93,0x5,0x0                                                                                    
003aae   5081     MOVF      0x81,0x0,0x0   	old_sw3 = sw3;                                                                  C:\usb4all\fw\demo\user\userTemp.c
003ab0   0b20     ANDLW     0x20                                                                                            
003ab2   e001     BZ        0x3ab6                                                                                          
003ab4   0e01     MOVLW     0x1                                                                                             
003ab6   0101     MOVLB     0x1                                                                                             
003ab8   6f2b     MOVWF     0x2b,0x1                                                                                        
                                           	//inicializacion del sistema                                                    C:\usb4all\fw\demo\user\userTemp.c
003aba   0efe     MOVLW     0xfe           	tempHandler = i;                                                                C:\usb4all\fw\demo\user\userTemp.c
003abc   cfdb     MOVFF     0xfdb,0x12a                                                                                     
003abe   f12a                                                                                                               
                                           	//agrego mi buffer en el handler module	                                        C:\usb4all\fw\demo\user\userTemp.c
                                           //	setHandlerReceiveBuffer(tempHandler, (byte*)&tempDataPacket);                 C:\usb4all\fw\demo\user\userTemp.c
                                           	//agrego mi funcion de Receive en el handler module                             C:\usb4all\fw\demo\user\userTemp.c
003ac0   0e40     MOVLW     0x40           	setHandlerReceiveFunction(tempHandler,&userTempReceived);                       C:\usb4all\fw\demo\user\userTemp.c
003ac2   6ee6     MOVWF     0xe6,0x0                                                                                        
003ac4   0e3b     MOVLW     0x3b                                                                                            
003ac6   6ee6     MOVWF     0xe6,0x0                                                                                        
003ac8   c12a     MOVFF     0x12a,0xfe6                                                                                     
003aca   ffe6                                                                                                               
003acc   ecc0     CALL      0x2380,0x0                                                                                      
003ace   f011                                                                                                               
003ad0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003ad2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003ad4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	//agrego la funcion de polling                                                  C:\usb4all\fw\demo\user\userTemp.c
003ad6   0e3e     MOVLW     0x3e           	res = addPollingFunction(&TempProcessIO);                                       C:\usb4all\fw\demo\user\userTemp.c
003ad8   6ee6     MOVWF     0xe6,0x0                                                                                        
003ada   0e3a     MOVLW     0x3a                                                                                            
003adc   6ee6     MOVWF     0xe6,0x0                                                                                        
003ade   ec55     CALL      0x14aa,0x0                                                                                      
003ae0   f00a                                                                                                               
003ae2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003ae4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003ae6   6edf     MOVWF     0xdf,0x0                                                                                        
                                           	//inicializacion de modulo                                                      C:\usb4all\fw\demo\user\userTemp.c
                                           	// seteo el buffer para mandar al PC                                            C:\usb4all\fw\demo\user\userTemp.c
003ae8   c12a     MOVFF     0x12a,0xfe6    	sendBufferTemp = getSharedBuffer(tempHandler);                                  C:\usb4all\fw\demo\user\userTemp.c
003aea   ffe6                                                                                                               
003aec   ec73     CALL      0x2ce6,0x0                                                                                      
003aee   f016                                                                                                               
003af0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003af2   cff3     MOVFF     0xff3,0x12c                                                                                     
003af4   f12c                                                                                                               
003af6   cff4     MOVFF     0xff4,0x12d                                                                                     
003af8   f12d                                                                                                               
003afa   df8b     RCALL     0x3a12         	TempUserInit();                                                                 C:\usb4all\fw\demo\user\userTemp.c
                                           	//TODO debo retornar res                                                        C:\usb4all\fw\demo\user\userTemp.c
003afc   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\userTemp.c
003afe   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003b00   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
003b02   ffd9                                                                                                               
003b04   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
003b06   cfd9     MOVFF     0xfd9,0xfe6    void userTempRelease(byte i){                                                    C:\usb4all\fw\demo\user\userTemp.c
003b08   ffe6                                                                                                               
003b0a   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003b0c   ffd9                                                                                                               
003b0e   0efe     MOVLW     0xfe           	tempHandler = i;                                                                C:\usb4all\fw\demo\user\userTemp.c
003b10   cfdb     MOVFF     0xfdb,0x12a                                                                                     
003b12   f12a                                                                                                               
003b14   c12a     MOVFF     0x12a,0xfe6    	unsetHandlerReceiveBuffer(tempHandler);                                         C:\usb4all\fw\demo\user\userTemp.c
003b16   ffe6                                                                                                               
003b18   ecac     CALL      0x2358,0x0                                                                                      
003b1a   f011                                                                                                               
003b1c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003b1e   c12a     MOVFF     0x12a,0xfe6    	unsetHandlerReceiveFunction(tempHandler);                                       C:\usb4all\fw\demo\user\userTemp.c
003b20   ffe6                                                                                                               
003b22   ecd8     CALL      0x23b0,0x0                                                                                      
003b24   f011                                                                                                               
003b26   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003b28   0e3e     MOVLW     0x3e           	removePoolingFunction(&TempProcessIO);                                          C:\usb4all\fw\demo\user\userTemp.c
003b2a   6ee6     MOVWF     0xe6,0x0                                                                                        
003b2c   0e3a     MOVLW     0x3a                                                                                            
003b2e   6ee6     MOVWF     0xe6,0x0                                                                                        
003b30   ec97     CALL      0x152e,0x0                                                                                      
003b32   f00a                                                                                                               
003b34   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003b36   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003b38   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\userTemp.c
003b3a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
003b3c   ffd9                                                                                                               
003b3e   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
003b40   cfd9     MOVFF     0xfd9,0xfe6    void userTempReceived(byte* recBuffPtr,byte len){                                C:\usb4all\fw\demo\user\userTemp.c
003b42   ffe6                                                                                                               
003b44   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003b46   ffd9                                                                                                               
003b48   0e0a     MOVLW     0xa                                                                                             
003b4a   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	  byte index;                                                                   C:\usb4all\fw\demo\user\userTemp.c
003b4c   50d9     MOVF      0xd9,0x0,0x0   	  char mens[9] = "UReceive";	                                                   C:\usb4all\fw\demo\user\userTemp.c
003b4e   0f01     ADDLW     0x1                                                                                             
003b50   6ee9     MOVWF     0xe9,0x0                                                                                        
003b52   cfda     MOVFF     0xfda,0xfea                                                                                     
003b54   ffea                                                                                                               
003b56   0e55     MOVLW     0x55                                                                                            
003b58   6eee     MOVWF     0xee,0x0                                                                                        
003b5a   0e52     MOVLW     0x52                                                                                            
003b5c   6eee     MOVWF     0xee,0x0                                                                                        
003b5e   0e65     MOVLW     0x65                                                                                            
003b60   6eee     MOVWF     0xee,0x0                                                                                        
003b62   0e63     MOVLW     0x63                                                                                            
003b64   6eee     MOVWF     0xee,0x0                                                                                        
003b66   0e65     MOVLW     0x65                                                                                            
003b68   6eee     MOVWF     0xee,0x0                                                                                        
003b6a   0e69     MOVLW     0x69                                                                                            
003b6c   6eee     MOVWF     0xee,0x0                                                                                        
003b6e   0e76     MOVLW     0x76                                                                                            
003b70   6eee     MOVWF     0xee,0x0                                                                                        
003b72   0e65     MOVLW     0x65                                                                                            
003b74   6eee     MOVWF     0xee,0x0                                                                                        
003b76   6aee     CLRF      0xee,0x0                                                                                        
003b78   0101     MOVLB     0x1                  tempCounter = 0;                                                           C:\usb4all\fw\demo\user\userTemp.c
003b7a   6b27     CLRF      0x27,0x1                                                                                        
003b7c   0efd     MOVLW     0xfd                 switch(((DATA_PACKET*)recBuffPtr)->CMD)                                    C:\usb4all\fw\demo\user\userTemp.c
003b7e   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
003b80   ffe9                                                                                                               
003b82   0efe     MOVLW     0xfe                                                                                            
003b84   cfdb     MOVFF     0xfdb,0xfea                                                                                     
003b86   ffea                                                                                                               
003b88   50ef     MOVF      0xef,0x0,0x0                                                                                    
003b8a   0a05     XORLW     0x5                                                                                             
003b8c   e101     BNZ       0x3b90                                                                                          
003b8e   d0bb     BRA       0x3d06                                                                                          
003b90   0afa     XORLW     0xfa                                                                                            
003b92   e101     BNZ       0x3b96                                                                                          
003b94   d0b6     BRA       0x3d02                                                                                          
003b96   0afb     XORLW     0xfb                                                                                            
003b98   e06d     BZ        0x3c74                                                                                          
003b9a   0a07     XORLW     0x7                                                                                             
003b9c   e063     BZ        0x3c64                                                                                          
003b9e   0a37     XORLW     0x37                                                                                            
003ba0   e049     BZ        0x3c34                                                                                          
003ba2   0a35     XORLW     0x35                                                                                            
003ba4   e040     BZ        0x3c26                                                                                          
003ba6   0a01     XORLW     0x1                                                                                             
003ba8   e001     BZ        0x3bac                                                                                          
003baa   d0bb     BRA       0x3d22                                                                                          
                                                 {                                                                          C:\usb4all\fw\demo\user\userTemp.c
                                                   case READ_VERSION:                                                       C:\usb4all\fw\demo\user\userTemp.c
                                                         //dataPacket._byte[1] is len                                       C:\usb4all\fw\demo\user\userTemp.c
003bac   0efd     MOVLW     0xfd           			  ((DATA_PACKET*)sendBufferTemp)->_byte[0] = ((DATA_PACKET*)recBuffPtr)->_byte[0]; // hecho medio en dope a las 3 am	 C:\usb4all\fw\demo\user\userTemp.c
003bae   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
003bb0   ffe9                                                                                                               
003bb2   0efe     MOVLW     0xfe                                                                                            
003bb4   cfdb     MOVFF     0xfdb,0xfea                                                                                     
003bb6   ffea                                                                                                               
003bb8   50ef     MOVF      0xef,0x0,0x0                                                                                    
003bba   6ee6     MOVWF     0xe6,0x0                                                                                        
003bbc   c12c     MOVFF     0x12c,0xfe9                                                                                     
003bbe   ffe9                                                                                                               
003bc0   c12d     MOVFF     0x12d,0xfea                                                                                     
003bc2   ffea                                                                                                               
003bc4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003bc6   50e7     MOVF      0xe7,0x0,0x0                                                                                    
003bc8   6eef     MOVWF     0xef,0x0                                                                                        
003bca   0efd     MOVLW     0xfd           			  ((DATA_PACKET*)sendBufferTemp)->_byte[1] = ((DATA_PACKET*)recBuffPtr)->_byte[1]; // hecho medio en dope a las 3 am despues de yuyos	 C:\usb4all\fw\demo\user\userTemp.c
003bcc   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
003bce   ffe9                                                                                                               
003bd0   0efe     MOVLW     0xfe                                                                                            
003bd2   cfdb     MOVFF     0xfdb,0xfea                                                                                     
003bd4   ffea                                                                                                               
003bd6   0e01     MOVLW     0x1                                                                                             
003bd8   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
003bda   0e00     MOVLW     0x0                                                                                             
003bdc   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003bde   50ef     MOVF      0xef,0x0,0x0                                                                                    
003be0   6ee6     MOVWF     0xe6,0x0                                                                                        
003be2   c12c     MOVFF     0x12c,0xfe9                                                                                     
003be4   ffe9                                                                                                               
003be6   c12d     MOVFF     0x12d,0xfea                                                                                     
003be8   ffea                                                                                                               
003bea   0e01     MOVLW     0x1                                                                                             
003bec   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
003bee   0e00     MOVLW     0x0                                                                                             
003bf0   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003bf2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003bf4   50e7     MOVF      0xe7,0x0,0x0                                                                                    
003bf6   6eef     MOVWF     0xef,0x0                                                                                        
003bf8   c12c     MOVFF     0x12c,0xfe9                  ((DATA_PACKET*)sendBufferTemp)->_byte[2] = MINOR_VERSION;          C:\usb4all\fw\demo\user\userTemp.c
003bfa   ffe9                                                                                                               
003bfc   c12d     MOVFF     0x12d,0xfea                                                                                     
003bfe   ffea                                                                                                               
003c00   0e02     MOVLW     0x2                                                                                             
003c02   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
003c04   0e00     MOVLW     0x0                                                                                             
003c06   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003c08   0e0c     MOVLW     0xc                                                                                             
003c0a   6eef     MOVWF     0xef,0x0                                                                                        
003c0c   c12c     MOVFF     0x12c,0xfe9                  ((DATA_PACKET*)sendBufferTemp)->_byte[3] = MAJOR_VERSION;          C:\usb4all\fw\demo\user\userTemp.c
003c0e   ffe9                                                                                                               
003c10   c12d     MOVFF     0x12d,0xfea                                                                                     
003c12   ffea                                                                                                               
003c14   0e03     MOVLW     0x3                                                                                             
003c16   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
003c18   0e00     MOVLW     0x0                                                                                             
003c1a   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003c1c   6aef     CLRF      0xef,0x0                                                                                        
003c1e   0101     MOVLB     0x1                          tempCounter=0x04;                                                  C:\usb4all\fw\demo\user\userTemp.c
003c20   0e04     MOVLW     0x4                                                                                             
003c22   6f27     MOVWF     0x27,0x1                                                                                        
003c24   d07f     BRA       0x3d24                       break;                                                             C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           		case SET_TEMP_REAL:                                                            C:\usb4all\fw\demo\user\userTemp.c
003c26   0101     MOVLB     0x1                          _temp_mode = TEMP_REAL_TIME;                                       C:\usb4all\fw\demo\user\userTemp.c
003c28   6b29     CLRF      0x29,0x1                                                                                        
003c2a   df33     RCALL     0x3a92                       TempResetTempLog();                                                C:\usb4all\fw\demo\user\userTemp.c
003c2c   0101     MOVLB     0x1                          tempCounter = 0x01;                                                C:\usb4all\fw\demo\user\userTemp.c
003c2e   0e01     MOVLW     0x1                                                                                             
003c30   6f27     MOVWF     0x27,0x1                                                                                        
003c32   d078     BRA       0x3d24                       break;                                                             C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                                     case RD_TEMP:                                                          C:\usb4all\fw\demo\user\userTemp.c
003c34   ecd4     CALL      0x31a8,0x0                   if(AcquireTemperature()){                                          C:\usb4all\fw\demo\user\userTemp.c
003c36   f018                                                                                                               
003c38   0900     IORLW     0x0                                                                                             
003c3a   e013     BZ        0x3c62                                                                                          
003c3c   c12c     MOVFF     0x12c,0xfe9    				  ((DATA_PACKET*)sendBufferTemp)->CMD = RD_TEMP;                             C:\usb4all\fw\demo\user\userTemp.c
003c3e   ffe9                                                                                                               
003c40   c12d     MOVFF     0x12d,0xfea                                                                                     
003c42   ffea                                                                                                               
003c44   0e34     MOVLW     0x34                                                                                            
003c46   6eef     MOVWF     0xef,0x0                                                                                        
003c48   c12c     MOVFF     0x12c,0xfe9                      ((DATA_PACKET*)sendBufferTemp)->word_data = temperature._word; C:\usb4all\fw\demo\user\userTemp.c
003c4a   ffe9                                                                                                               
003c4c   c12d     MOVFF     0x12d,0xfea                                                                                     
003c4e   ffea                                                                                                               
003c50   0e01     MOVLW     0x1                                                                                             
003c52   c11b     MOVFF     0x11b,0xfeb                                                                                     
003c54   ffeb                                                                                                               
003c56   0e02     MOVLW     0x2                                                                                             
003c58   c11c     MOVFF     0x11c,0xfeb                                                                                     
003c5a   ffeb                                                                                                               
003c5c   0101     MOVLB     0x1                              tempCounter=0x03;                                              C:\usb4all\fw\demo\user\userTemp.c
003c5e   0e03     MOVLW     0x3                                                                                             
003c60   6f27     MOVWF     0x27,0x1                                                                                        
                                                         }//end if                                                          C:\usb4all\fw\demo\user\userTemp.c
003c62   d060     BRA       0x3d24                       break;                                                             C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                                     case SET_TEMP_LOGGING:                                                 C:\usb4all\fw\demo\user\userTemp.c
003c64   0101     MOVLB     0x1                          _temp_mode = TEMP_LOGGING;                                         C:\usb4all\fw\demo\user\userTemp.c
003c66   0e01     MOVLW     0x1                                                                                             
003c68   6f29     MOVWF     0x29,0x1                                                                                        
003c6a   df13     RCALL     0x3a92                       TempResetTempLog();                                                C:\usb4all\fw\demo\user\userTemp.c
003c6c   0101     MOVLB     0x1                          tempCounter=0x01;                                                  C:\usb4all\fw\demo\user\userTemp.c
003c6e   0e01     MOVLW     0x1                                                                                             
003c70   6f27     MOVWF     0x27,0x1                                                                                        
003c72   d058     BRA       0x3d24                       break;                                                             C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                                     case RD_TEMP_LOGGING:                                                  C:\usb4all\fw\demo\user\userTemp.c
003c74   0101     MOVLB     0x1                          tempCounter = (_valid_temp<<1)+2;  // Update count in byte         C:\usb4all\fw\demo\user\userTemp.c
003c76   512f     MOVF      0x2f,0x0,0x1                                                                                    
003c78   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
003c7a   0f02     ADDLW     0x2                                                                                             
003c7c   0101     MOVLB     0x1                                                                                             
003c7e   6f27     MOVWF     0x27,0x1                                                                                        
003c80   0101     MOVLB     0x1                          ((DATA_PACKET*)sendBufferTemp)->len = (_valid_temp<<1);            C:\usb4all\fw\demo\user\userTemp.c
003c82   512f     MOVF      0x2f,0x0,0x1                                                                                    
003c84   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
003c86   6ee6     MOVWF     0xe6,0x0                                                                                        
003c88   c12c     MOVFF     0x12c,0xfe9                                                                                     
003c8a   ffe9                                                                                                               
003c8c   c12d     MOVFF     0x12d,0xfea                                                                                     
003c8e   ffea                                                                                                               
003c90   52ee     MOVF      0xee,0x1,0x0                                                                                    
003c92   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003c94   50e7     MOVF      0xe7,0x0,0x0                                                                                    
003c96   6eef     MOVWF     0xef,0x0                                                                                        
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
003c98   c12f     MOVFF     0x12f,0xfdf                  for(index = _valid_temp; index > 0; index--)                       C:\usb4all\fw\demo\user\userTemp.c
003c9a   ffdf                                                                                                               
003c9c   50df     MOVF      0xdf,0x0,0x0                                                                                    
003c9e   0800     SUBLW     0x0                                                                                             
003ca0   e22e     BC        0x3cfe                                                                                          
003cfa   06df     DECF      0xdf,0x1,0x0                                                                                    
003cfc   d7cf     BRA       0x3c9c                                                                                          
                                                         {                                                                  C:\usb4all\fw\demo\user\userTemp.c
003ca2   0101     MOVLB     0x1                              if(_pTemp == 0)                                                C:\usb4all\fw\demo\user\userTemp.c
003ca4   512e     MOVF      0x2e,0x0,0x1                                                                                    
003ca6   e104     BNZ       0x3cb0                                                                                          
003ca8   0101     MOVLB     0x1                                  _pTemp = 29;                                               C:\usb4all\fw\demo\user\userTemp.c
003caa   0e1d     MOVLW     0x1d                                                                                            
003cac   6f2e     MOVWF     0x2e,0x1                                                                                        
003cae   d002     BRA       0x3cb4                           else                                                           C:\usb4all\fw\demo\user\userTemp.c
003cb0   0101     MOVLB     0x1                                  _pTemp--;                                                  C:\usb4all\fw\demo\user\userTemp.c
003cb2   072e     DECF      0x2e,0x1,0x1                                                                                    
003cb4   0101     MOVLB     0x1                              ((DATA_PACKET*)sendBufferTemp)->_word[index] = _temp_data[_pTemp]; C:\usb4all\fw\demo\user\userTemp.c
003cb6   512e     MOVF      0x2e,0x0,0x1                                                                                    
003cb8   6ee9     MOVWF     0xe9,0x0                                                                                        
003cba   6aea     CLRF      0xea,0x0                                                                                        
003cbc   90d8     BCF       0xd8,0x0,0x0                                                                                    
003cbe   36e9     RLCF      0xe9,0x1,0x0                                                                                    
003cc0   36ea     RLCF      0xea,0x1,0x0                                                                                    
003cc2   0e30     MOVLW     0x30                                                                                            
003cc4   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
003cc6   0e01     MOVLW     0x1                                                                                             
003cc8   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003cca   cfee     MOVFF     0xfee,0x12                                                                                      
003ccc   f012                                                                                                               
003cce   cfef     MOVFF     0xfef,0x13                                                                                      
003cd0   f013                                                                                                               
003cd2   c12c     MOVFF     0x12c,0xfe9                                                                                     
003cd4   ffe9                                                                                                               
003cd6   c12d     MOVFF     0x12d,0xfea                                                                                     
003cd8   ffea                                                                                                               
003cda   cfe9     MOVFF     0xfe9,0x10                                                                                      
003cdc   f010                                                                                                               
003cde   cfea     MOVFF     0xfea,0x11                                                                                      
003ce0   f011                                                                                                               
003ce2   50df     MOVF      0xdf,0x0,0x0                                                                                    
003ce4   0d02     MULLW     0x2                                                                                             
003ce6   5010     MOVF      0x10,0x0,0x0                                                                                    
003ce8   24f3     ADDWF     0xf3,0x0,0x0                                                                                    
003cea   6ee9     MOVWF     0xe9,0x0                                                                                        
003cec   5011     MOVF      0x11,0x0,0x0                                                                                    
003cee   20f4     ADDWFC    0xf4,0x0,0x0                                                                                    
003cf0   6eea     MOVWF     0xea,0x0                                                                                        
003cf2   c012     MOVFF     0x12,0xfee                                                                                      
003cf4   ffee                                                                                                               
003cf6   c013     MOVFF     0x13,0xfed                                                                                      
003cf8   ffed                                                                                                               
                                                         }//end for                                                         C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
003cfe   dec9     RCALL     0x3a92                       TempResetTempLog();             // Once read, log will restart     C:\usb4all\fw\demo\user\userTemp.c
003d00   d011     BRA       0x3d24                       break;                                                             C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                                     case RESET:                                                            C:\usb4all\fw\demo\user\userTemp.c
003d02   00ff     RESET                                  Reset();                                                           C:\usb4all\fw\demo\user\userTemp.c
003d04   d00f     BRA       0x3d24         			  break;                                                                      C:\usb4all\fw\demo\user\userTemp.c
                                           		                                                                               C:\usb4all\fw\demo\user\userTemp.c
                                           		 case MESS:                                                                    C:\usb4all\fw\demo\user\userTemp.c
003d06   0e09     MOVLW     0x9            				sendMes(mens, sizeof(mens));                                                 C:\usb4all\fw\demo\user\userTemp.c
003d08   6ee6     MOVWF     0xe6,0x0                                                                                        
003d0a   50d9     MOVF      0xd9,0x0,0x0                                                                                    
003d0c   0f01     ADDLW     0x1                                                                                             
003d0e   6ee6     MOVWF     0xe6,0x0                                                                                        
003d10   0e00     MOVLW     0x0                                                                                             
003d12   20da     ADDWFC    0xda,0x0,0x0                                                                                    
003d14   6ee6     MOVWF     0xe6,0x0                                                                                        
003d16   ece0     CALL      0x19c0,0x0                                                                                      
003d18   f00c                                                                                                               
003d1a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003d1c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003d1e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003d20   d001     BRA       0x3d24                       break;                                                             C:\usb4all\fw\demo\user\userTemp.c
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           		 default:                                                                      C:\usb4all\fw\demo\user\userTemp.c
                                           			  //mLED_3_Off();                                                             C:\usb4all\fw\demo\user\userTemp.c
003d22   d000     BRA       0x3d24                       break;                                                             C:\usb4all\fw\demo\user\userTemp.c
                                                 }//end switch()                                                            C:\usb4all\fw\demo\user\userTemp.c
003d24   0101     MOVLB     0x1                  if(tempCounter != 0)                                                       C:\usb4all\fw\demo\user\userTemp.c
003d26   5127     MOVF      0x27,0x0,0x1                                                                                    
003d28   e00b     BZ        0x3d40                                                                                          
                                                 {                                                                          C:\usb4all\fw\demo\user\userTemp.c
003d2a   0104     MOVLB     0x4                      if(!mUSBGenTxIsBusy())                                                 C:\usb4all\fw\demo\user\userTemp.c
003d2c   bf0c     BTFSC     0xc,0x7,0x1                                                                                     
003d2e   d008     BRA       0x3d40                                                                                          
003d30   c127     MOVFF     0x127,0xfe6                  USBGenWrite2(tempHandler,/*sendBufferTemp,*/tempCounter);          C:\usb4all\fw\demo\user\userTemp.c
003d32   ffe6                                                                                                               
003d34   c12a     MOVFF     0x12a,0xfe6                                                                                     
003d36   ffe6                                                                                                               
003d38   ec36     CALL      0x266c,0x0                                                                                      
003d3a   f013                                                                                                               
003d3c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003d3e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                 }//end if  	  	                                                            C:\usb4all\fw\demo\user\userTemp.c
003d40   0e0a     MOVLW     0xa            }//end userTempReceived                                                          C:\usb4all\fw\demo\user\userTemp.c
003d42   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
003d44   e202     BC        0x3d4a                                                                                          
003d46   6ae1     CLRF      0xe1,0x0                                                                                        
003d48   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003d4a   6ee1     MOVWF     0xe1,0x0                                                                                        
003d4c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003d4e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
003d50   ffd9                                                                                                               
003d52   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\userTemp.c
                                           /** EOF user.c ***************************************************************/  C:\usb4all\fw\demo\user\userTemp.c
                                           /* Author               Date        Comment                                      C:\usb4all\fw\demo\user\descriptorManager.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\usb4all\fw\demo\user\descriptorManager.c
                                            * Andres Aguirre	   07/04/07 	Original                                          C:\usb4all\fw\demo\user\descriptorManager.c
                                            ********************************************************************/           C:\usb4all\fw\demo\user\descriptorManager.c
                                                                                                                            C:\usb4all\fw\demo\user\descriptorManager.c
                                           #include "user\descriptorManager.h"                                              C:\usb4all\fw\demo\user\descriptorManager.c
                                                                                                                            C:\usb4all\fw\demo\user\descriptorManager.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\user\descriptorManager.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\user\descriptorManager.c
                                                                                                                            C:\usb4all\fw\demo\user\descriptorManager.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\user\descriptorManager.c
                                                                                                                            C:\usb4all\fw\demo\user\descriptorManager.c
                                                                                                                            C:\usb4all\fw\demo\user\descriptorManager.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\user\descriptorManager.c
                                           #pragma code sys                                                                 C:\usb4all\fw\demo\user\descriptorManager.c
                                                                                                                            C:\usb4all\fw\demo\user\descriptorManager.c
001a68   cfd9     MOVFF     0xfd9,0xfe6    endpoint getAdminEndpoint(void){                                                 C:\usb4all\fw\demo\user\descriptorManager.c
001a6a   ffe6                                                                                                               
001a6c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001a6e   ffd9                                                                                                               
001a70   0e02     MOVLW     0x2                                                                                             
001a72   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	endpoint adminEndpoint;                                                         C:\usb4all\fw\demo\user\descriptorManager.c
001a74   80df     BSF       0xdf,0x0,0x0   	adminEndpoint.EPNum = 1;                                                        C:\usb4all\fw\demo\user\descriptorManager.c
001a76   92df     BCF       0xdf,0x1,0x0                                                                                    
001a78   94df     BCF       0xdf,0x2,0x0                                                                                    
001a7a   96df     BCF       0xdf,0x3,0x0                                                                                    
001a7c   98df     BCF       0xdf,0x4,0x0   	adminEndpoint.EPDir = 0;                                                        C:\usb4all\fw\demo\user\descriptorManager.c
001a7e   9adf     BCF       0xdf,0x5,0x0   	adminEndpoint.empty = 0;                                                        C:\usb4all\fw\demo\user\descriptorManager.c
001a80   cfde     MOVFF     0xfde,0x10     	return adminEndpoint;                                                           C:\usb4all\fw\demo\user\descriptorManager.c
001a82   f010                                                                                                               
001a84   cfdd     MOVFF     0xfdd,0x11                                                                                      
001a86   f011                                                                                                               
001a88   c010     MOVFF     0x10,0xff3                                                                                      
001a8a   fff3                                                                                                               
001a8c   c011     MOVFF     0x11,0xff4                                                                                      
001a8e   fff4                                                                                                               
001a90   5ce1     SUBWF     0xe1,0x0,0x0   }                                                                                C:\usb4all\fw\demo\user\descriptorManager.c
001a92   e203     BC        0x1a9a                                                                                          
001a94   d000     BRA       0x1a96                                                                                          
001a96   6ae1     CLRF      0xe1,0x0                                                                                        
001a98   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001a9a   6ee1     MOVWF     0xe1,0x0                                                                                        
001a9c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001a9e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001aa0   ffd9                                                                                                               
001aa2   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\descriptorManager.c
                                                                                                                            C:\usb4all\fw\demo\user\descriptorManager.c
                                           /** EOF descriptorManager.c ***************************************************************/ C:\usb4all\fw\demo\user\descriptorManager.c
                                           /* Author               Date        Comment                                      C:\usb4all\fw\demo\user\loaderModule.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\usb4all\fw\demo\user\loaderModule.c
                                            * Andres Aguirre      09/04/07                                                  C:\usb4all\fw\demo\user\loaderModule.c
                                            ********************************************************************/           C:\usb4all\fw\demo\user\loaderModule.c
                                                                                                                            C:\usb4all\fw\demo\user\loaderModule.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\user\loaderModule.c
                                           #include "system\typedefs.h"                        // Required                  C:\usb4all\fw\demo\user\loaderModule.c
                                           #include "user\defines.h"                                                        C:\usb4all\fw\demo\user\loaderModule.c
                                           #include "user\loaderModule.h"                                                   C:\usb4all\fw\demo\user\loaderModule.c
                                                                                                                            C:\usb4all\fw\demo\user\loaderModule.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\user\loaderModule.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\user\loaderModule.c
                                                                                                                            C:\usb4all\fw\demo\user\loaderModule.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\user\loaderModule.c
                                           BOOL isEqual(byte str1[8], byte str2[8]);                                        C:\usb4all\fw\demo\user\loaderModule.c
                                                                                                                            C:\usb4all\fw\demo\user\loaderModule.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\user\loaderModule.c
                                           #pragma code sys                                                                 C:\usb4all\fw\demo\user\loaderModule.c
                                                                                                                            C:\usb4all\fw\demo\user\loaderModule.c
001aa4   cfd9     MOVFF     0xfd9,0xfe6    void loadModule(byte idModule, byte binaryStream[8]){                            C:\usb4all\fw\demo\user\loaderModule.c
001aa6   ffe6                                                                                                               
001aa8   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001aaa   ffd9                                                                                                               
                                                                                                                            C:\usb4all\fw\demo\user\loaderModule.c
001aac   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\loaderModule.c
001aae   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001ab0   ffd9                                                                                                               
001ab2   0012     RETURN    0x0                                                                                             
                                           // No quiero usar strcmp para no incluir string y que consuma mas memoria        C:\usb4all\fw\demo\user\loaderModule.c
001ab4   cfd9     MOVFF     0xfd9,0xfe6    BOOL isEqual(byte str1[8], byte str2[8]){                                        C:\usb4all\fw\demo\user\loaderModule.c
001ab6   ffe6                                                                                                               
001ab8   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001aba   ffd9                                                                                                               
001abc   0e03     MOVLW     0x3                                                                                             
001abe   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
001ac0   6adf     CLRF      0xdf,0x0       	byte j = 0;                                                                     C:\usb4all\fw\demo\user\loaderModule.c
001ac2   52de     MOVF      0xde,0x1,0x0   	BOOL result = TRUE, termine = FALSE;                                            C:\usb4all\fw\demo\user\loaderModule.c
001ac4   0e01     MOVLW     0x1                                                                                             
001ac6   6edd     MOVWF     0xdd,0x0                                                                                        
001ac8   0e02     MOVLW     0x2                                                                                             
001aca   6adb     CLRF      0xdb,0x0                                                                                        
001acc   6adf     CLRF      0xdf,0x0       	for(j = 0; j<8 && !termine; j++){                                               C:\usb4all\fw\demo\user\loaderModule.c
001ace   0e08     MOVLW     0x8                                                                                             
001ad0   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
001ad2   e245     BC        0x1b5e                                                                                          
001ad4   0e02     MOVLW     0x2                                                                                             
001ad6   50db     MOVF      0xdb,0x0,0x0                                                                                    
001ad8   e142     BNZ       0x1b5e                                                                                          
001b5a   2adf     INCF      0xdf,0x1,0x0                                                                                    
001b5c   d7b8     BRA       0x1ace                                                                                          
001ada   50df     MOVF      0xdf,0x0,0x0   		if((str1[j] == (char)'\0') || (str2[j] == (char)'\0')){                        C:\usb4all\fw\demo\user\loaderModule.c
001adc   6ee7     MOVWF     0xe7,0x0                                                                                        
001ade   0efd     MOVLW     0xfd                                                                                            
001ae0   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
001ae2   ffe9                                                                                                               
001ae4   0efe     MOVLW     0xfe                                                                                            
001ae6   cfdb     MOVFF     0xfdb,0xfea                                                                                     
001ae8   ffea                                                                                                               
001aea   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001aec   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
001aee   0e00     MOVLW     0x0                                                                                             
001af0   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001af2   50ef     MOVF      0xef,0x0,0x0                                                                                    
001af4   e00e     BZ        0x1b12                                                                                          
001af6   50df     MOVF      0xdf,0x0,0x0                                                                                    
001af8   6ee7     MOVWF     0xe7,0x0                                                                                        
001afa   0efb     MOVLW     0xfb                                                                                            
001afc   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
001afe   ffe9                                                                                                               
001b00   0efc     MOVLW     0xfc                                                                                            
001b02   cfdb     MOVFF     0xfdb,0xfea                                                                                     
001b04   ffea                                                                                                               
001b06   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001b08   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
001b0a   0e00     MOVLW     0x0                                                                                             
001b0c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001b0e   50ef     MOVF      0xef,0x0,0x0                                                                                    
001b10   e105     BNZ       0x1b1c                                                                                          
001b12   0e01     MOVLW     0x1            			termine = TRUE;                                                               C:\usb4all\fw\demo\user\loaderModule.c
001b14   6ef3     MOVWF     0xf3,0x0                                                                                        
001b16   0e02     MOVLW     0x2                                                                                             
001b18   cff3     MOVFF     0xff3,0xfdb                                                                                     
001b1a   ffdb                                                                                                               
                                           		}                                                                              C:\usb4all\fw\demo\user\loaderModule.c
001b1c   50df     MOVF      0xdf,0x0,0x0   		if((char)str1[j] != (char)str2[j]){                                            C:\usb4all\fw\demo\user\loaderModule.c
001b1e   6ee7     MOVWF     0xe7,0x0                                                                                        
001b20   0efd     MOVLW     0xfd                                                                                            
001b22   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
001b24   ffe9                                                                                                               
001b26   0efe     MOVLW     0xfe                                                                                            
001b28   cfdb     MOVFF     0xfdb,0xfea                                                                                     
001b2a   ffea                                                                                                               
001b2c   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001b2e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
001b30   0e00     MOVLW     0x0                                                                                             
001b32   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001b34   cfef     MOVFF     0xfef,0x10                                                                                      
001b36   f010                                                                                                               
001b38   50df     MOVF      0xdf,0x0,0x0                                                                                    
001b3a   6ee7     MOVWF     0xe7,0x0                                                                                        
001b3c   0efb     MOVLW     0xfb                                                                                            
001b3e   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
001b40   ffe9                                                                                                               
001b42   0efc     MOVLW     0xfc                                                                                            
001b44   cfdb     MOVFF     0xfdb,0xfea                                                                                     
001b46   ffea                                                                                                               
001b48   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001b4a   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
001b4c   0e00     MOVLW     0x0                                                                                             
001b4e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001b50   50ef     MOVF      0xef,0x0,0x0                                                                                    
001b52   5c10     SUBWF     0x10,0x0,0x0                                                                                    
001b54   e002     BZ        0x1b5a                                                                                          
001b56   0e01     MOVLW     0x1            			result = FALSE;                                                               C:\usb4all\fw\demo\user\loaderModule.c
001b58   6adb     CLRF      0xdb,0x0                                                                                        
                                           		}                                                                              C:\usb4all\fw\demo\user\loaderModule.c
                                           	}                                                                               C:\usb4all\fw\demo\user\loaderModule.c
001b5e   0e01     MOVLW     0x1            	return result;                                                                  C:\usb4all\fw\demo\user\loaderModule.c
001b60   50db     MOVF      0xdb,0x0,0x0                                                                                    
001b62   6e10     MOVWF     0x10,0x0       }                                                                                C:\usb4all\fw\demo\user\loaderModule.c
001b64   0e03     MOVLW     0x3                                                                                             
001b66   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
001b68   e203     BC        0x1b70                                                                                          
001b6a   d000     BRA       0x1b6c                                                                                          
001b6c   6ae1     CLRF      0xe1,0x0                                                                                        
001b6e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001b70   6ee1     MOVWF     0xe1,0x0                                                                                        
001b72   5010     MOVF      0x10,0x0,0x0                                                                                    
001b74   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001b76   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001b78   ffd9                                                                                                               
001b7a   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\loaderModule.c
001b7c   cfd9     MOVFF     0xfd9,0xfe6    rom near char* getUserTableDirection(byte moduleId[8]){                          C:\usb4all\fw\demo\user\loaderModule.c
001b7e   ffe6                                                                                                               
001b80   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001b82   ffd9                                                                                                               
001b84   0e0d     MOVLW     0xd                                                                                             
001b86   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
001b88   6ade     CLRF      0xde,0x0       	rom near char * i = (rom near char *)DIRECTION_TABLE;                           C:\usb4all\fw\demo\user\loaderModule.c
001b8a   0e30     MOVLW     0x30                                                                                            
001b8c   6edd     MOVWF     0xdd,0x0                                                                                        
                                           	uTab* tabla;                                                                    C:\usb4all\fw\demo\user\loaderModule.c
                                           	byte dest[8];                                                                   C:\usb4all\fw\demo\user\loaderModule.c
001b8e   0e0c     MOVLW     0xc            	byte j = 0;                                                                     C:\usb4all\fw\demo\user\loaderModule.c
001b90   6adb     CLRF      0xdb,0x0                                                                                        
001b92   cfde     MOVFF     0xfde,0xff6    	while (*i != MEM_VACIO){                                                        C:\usb4all\fw\demo\user\loaderModule.c
001b94   fff6                                                                                                               
001b96   cfdd     MOVFF     0xfdd,0xff7                                                                                     
001b98   fff7                                                                                                               
001b9a   0008     TBLRD                                                                                                     
001b9c   cff5     MOVFF     0xff5,0x10                                                                                      
001b9e   f010                                                                                                               
001ba0   6a11     CLRF      0x11,0x0                                                                                        
001ba2   be10     BTFSC     0x10,0x7,0x0                                                                                    
001ba4   6811     SETF      0x11,0x0                                                                                        
001ba6   0100     MOVLB     0x0                                                                                             
001ba8   1c10     COMF      0x10,0x0,0x0                                                                                    
001baa   e101     BNZ       0x1bae                                                                                          
001bac   1c11     COMF      0x11,0x0,0x0                                                                                    
001bae   e069     BZ        0x1c82                                                                                          
001c80   d788     BRA       0x1b92                                                                                          
001bb0   cfd9     MOVFF     0xfd9,0xfe9    		tabla = (uTab*) i;                                                             C:\usb4all\fw\demo\user\loaderModule.c
001bb2   ffe9                                                                                                               
001bb4   cfda     MOVFF     0xfda,0xfea                                                                                     
001bb6   ffea                                                                                                               
001bb8   0e02     MOVLW     0x2                                                                                             
001bba   cfee     MOVFF     0xfee,0xfdb                                                                                     
001bbc   ffdb                                                                                                               
001bbe   0e03     MOVLW     0x3                                                                                             
001bc0   cfed     MOVFF     0xfed,0xfdb                                                                                     
001bc2   ffdb                                                                                                               
001bc4   0e0c     MOVLW     0xc            		for (j = 0; j < 8; j++){       // hacking para poder comparar strings          C:\usb4all\fw\demo\user\loaderModule.c
001bc6   6adb     CLRF      0xdb,0x0                                                                                        
001bc8   0e08     MOVLW     0x8                                                                                             
001bca   6ef3     MOVWF     0xf3,0x0                                                                                        
001bcc   0e0c     MOVLW     0xc                                                                                             
001bce   cfdb     MOVFF     0xfdb,0xff4                                                                                     
001bd0   fff4                                                                                                               
001bd2   50f3     MOVF      0xf3,0x0,0x0                                                                                    
001bd4   5cf4     SUBWF     0xf4,0x0,0x0                                                                                    
001bd6   e22c     BC        0x1c30                                                                                          
001c2a   0e0c     MOVLW     0xc                                                                                             
001c2c   2adb     INCF      0xdb,0x1,0x0                                                                                    
001c2e   d7cc     BRA       0x1bc8                                                                                          
001bd8   0e02     MOVLW     0x2            			dest[j] = (tabla->id)[j];  // para poderse comparar ambos strings deben estar en igual espacio de memoria (RAM / ROM) C:\usb4all\fw\demo\user\loaderModule.c
001bda   cfdb     MOVFF     0xfdb,0xff6                                                                                     
001bdc   fff6                                                                                                               
001bde   0e03     MOVLW     0x3                                                                                             
001be0   cfdb     MOVFF     0xfdb,0xff7                                                                                     
001be2   fff7                                                                                                               
001be4   0e06     MOVLW     0x6                                                                                             
001be6   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
001be8   0e00     MOVLW     0x0                                                                                             
001bea   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
001bec   cff6     MOVFF     0xff6,0x12                                                                                      
001bee   f012                                                                                                               
001bf0   cff7     MOVFF     0xff7,0x13                                                                                      
001bf2   f013                                                                                                               
001bf4   0e0c     MOVLW     0xc                                                                                             
001bf6   50db     MOVF      0xdb,0x0,0x0                                                                                    
001bf8   010f     MOVLB     0xf                                                                                             
001bfa   2412     ADDWF     0x12,0x0,0x0                                                                                    
001bfc   6ef6     MOVWF     0xf6,0x0                                                                                        
001bfe   0e00     MOVLW     0x0                                                                                             
001c00   2013     ADDWFC    0x13,0x0,0x0                                                                                    
001c02   6ef7     MOVWF     0xf7,0x0                                                                                        
001c04   0008     TBLRD                                                                                                     
001c06   50f5     MOVF      0xf5,0x0,0x0                                                                                    
001c08   6ee6     MOVWF     0xe6,0x0                                                                                        
001c0a   50d9     MOVF      0xd9,0x0,0x0                                                                                    
001c0c   0f04     ADDLW     0x4                                                                                             
001c0e   6e10     MOVWF     0x10,0x0                                                                                        
001c10   cfda     MOVFF     0xfda,0x11                                                                                      
001c12   f011                                                                                                               
001c14   0e0c     MOVLW     0xc                                                                                             
001c16   50db     MOVF      0xdb,0x0,0x0                                                                                    
001c18   010f     MOVLB     0xf                                                                                             
001c1a   2410     ADDWF     0x10,0x0,0x0                                                                                    
001c1c   6ee9     MOVWF     0xe9,0x0                                                                                        
001c1e   0e00     MOVLW     0x0                                                                                             
001c20   2011     ADDWFC    0x11,0x0,0x0                                                                                    
001c22   6eea     MOVWF     0xea,0x0                                                                                        
001c24   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001c26   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001c28   6eef     MOVWF     0xef,0x0                                                                                        
                                           		}                                                                              C:\usb4all\fw\demo\user\loaderModule.c
001c30   0efd     MOVLW     0xfd           		if (isEqual(dest, moduleId)){                                                  C:\usb4all\fw\demo\user\loaderModule.c
001c32   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
001c34   ffe6                                                                                                               
001c36   0efe     MOVLW     0xfe                                                                                            
001c38   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
001c3a   ffe6                                                                                                               
001c3c   50d9     MOVF      0xd9,0x0,0x0                                                                                    
001c3e   0f04     ADDLW     0x4                                                                                             
001c40   6ee6     MOVWF     0xe6,0x0                                                                                        
001c42   0e00     MOVLW     0x0                                                                                             
001c44   20da     ADDWFC    0xda,0x0,0x0                                                                                    
001c46   6ee6     MOVWF     0xe6,0x0                                                                                        
001c48   df35     RCALL     0x1ab4                                                                                          
001c4a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001c4c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001c4e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001c50   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001c52   0900     IORLW     0x0                                                                                             
001c54   e009     BZ        0x1c68                                                                                          
001c56   cfde     MOVFF     0xfde,0x10     			return i;                                                                     C:\usb4all\fw\demo\user\loaderModule.c
001c58   f010                                                                                                               
001c5a   cfdd     MOVFF     0xfdd,0x11                                                                                      
001c5c   f011                                                                                                               
001c5e   c010     MOVFF     0x10,0xff3                                                                                      
001c60   fff3                                                                                                               
001c62   c011     MOVFF     0x11,0xff4                                                                                      
001c64   fff4                                                                                                               
001c66   d010     BRA       0x1c88                                                                                          
                                           		}                                                                              C:\usb4all\fw\demo\user\loaderModule.c
001c68   cfde     MOVFF     0xfde,0x10     		i = i + TAM_U_TAB;                                                             C:\usb4all\fw\demo\user\loaderModule.c
001c6a   f010                                                                                                               
001c6c   cfdd     MOVFF     0xfdd,0x11                                                                                      
001c6e   f011                                                                                                               
001c70   0e0e     MOVLW     0xe                                                                                             
001c72   2610     ADDWF     0x10,0x1,0x0                                                                                    
001c74   0e00     MOVLW     0x0                                                                                             
001c76   2211     ADDWFC    0x11,0x1,0x0                                                                                    
001c78   c010     MOVFF     0x10,0xfde                                                                                      
001c7a   ffde                                                                                                               
001c7c   c011     MOVFF     0x11,0xfdd                                                                                      
001c7e   ffdd                                                                                                               
                                           	}                                                                               C:\usb4all\fw\demo\user\loaderModule.c
001c82   68f3     SETF      0xf3,0x0       	return (rom char*)ERROR;	                                                       C:\usb4all\fw\demo\user\loaderModule.c
001c84   6af4     CLRF      0xf4,0x0                                                                                        
001c86   d000     BRA       0x1c88                                                                                          
001c88   0e0d     MOVLW     0xd            }                                                                                C:\usb4all\fw\demo\user\loaderModule.c
001c8a   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
001c8c   e202     BC        0x1c92                                                                                          
001c8e   6ae1     CLRF      0xe1,0x0                                                                                        
001c90   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001c92   6ee1     MOVWF     0xe1,0x0                                                                                        
001c94   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001c96   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001c98   ffd9                                                                                                               
001c9a   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\loaderModule.c
001c9c   cfd9     MOVFF     0xfd9,0xfe6    byte getUserTableSize(){                                                         C:\usb4all\fw\demo\user\loaderModule.c
001c9e   ffe6                                                                                                               
001ca0   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001ca2   ffd9                                                                                                               
001ca4   0e03     MOVLW     0x3                                                                                             
001ca6   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
001ca8   6ade     CLRF      0xde,0x0       	rom near char * i = (rom near char *)DIRECTION_TABLE;                           C:\usb4all\fw\demo\user\loaderModule.c
001caa   0e30     MOVLW     0x30                                                                                            
001cac   6edd     MOVWF     0xdd,0x0                                                                                        
001cae   0e02     MOVLW     0x2            	byte size = 0;                                                                  C:\usb4all\fw\demo\user\loaderModule.c
001cb0   6adb     CLRF      0xdb,0x0                                                                                        
001cb2   cfde     MOVFF     0xfde,0xff6    	while (*i != MEM_VACIO){                                                        C:\usb4all\fw\demo\user\loaderModule.c
001cb4   fff6                                                                                                               
001cb6   cfdd     MOVFF     0xfdd,0xff7                                                                                     
001cb8   fff7                                                                                                               
001cba   0008     TBLRD                                                                                                     
001cbc   cff5     MOVFF     0xff5,0x10                                                                                      
001cbe   f010                                                                                                               
001cc0   6a11     CLRF      0x11,0x0                                                                                        
001cc2   be10     BTFSC     0x10,0x7,0x0                                                                                    
001cc4   6811     SETF      0x11,0x0                                                                                        
001cc6   0100     MOVLB     0x0                                                                                             
001cc8   1c10     COMF      0x10,0x0,0x0                                                                                    
001cca   e101     BNZ       0x1cce                                                                                          
001ccc   1c11     COMF      0x11,0x0,0x0                                                                                    
001cce   e00f     BZ        0x1cee                                                                                          
001cec   d7e2     BRA       0x1cb2                                                                                          
001cd0   cfde     MOVFF     0xfde,0x10     		i = i + TAM_U_TAB;                                                             C:\usb4all\fw\demo\user\loaderModule.c
001cd2   f010                                                                                                               
001cd4   cfdd     MOVFF     0xfdd,0x11                                                                                      
001cd6   f011                                                                                                               
001cd8   0e0e     MOVLW     0xe                                                                                             
001cda   2610     ADDWF     0x10,0x1,0x0                                                                                    
001cdc   0e00     MOVLW     0x0                                                                                             
001cde   2211     ADDWFC    0x11,0x1,0x0                                                                                    
001ce0   c010     MOVFF     0x10,0xfde                                                                                      
001ce2   ffde                                                                                                               
001ce4   c011     MOVFF     0x11,0xfdd                                                                                      
001ce6   ffdd                                                                                                               
001ce8   0e02     MOVLW     0x2            		size++;                                                                        C:\usb4all\fw\demo\user\loaderModule.c
001cea   2adb     INCF      0xdb,0x1,0x0                                                                                    
                                           	}                                                                               C:\usb4all\fw\demo\user\loaderModule.c
001cee   0e02     MOVLW     0x2            	return size;	                                                                   C:\usb4all\fw\demo\user\loaderModule.c
001cf0   50db     MOVF      0xdb,0x0,0x0                                                                                    
001cf2   6e10     MOVWF     0x10,0x0       }                                                                                C:\usb4all\fw\demo\user\loaderModule.c
001cf4   0e03     MOVLW     0x3                                                                                             
001cf6   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
001cf8   e203     BC        0x1d00                                                                                          
001cfa   d000     BRA       0x1cfc                                                                                          
001cfc   6ae1     CLRF      0xe1,0x0                                                                                        
001cfe   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001d00   6ee1     MOVWF     0xe1,0x0                                                                                        
001d02   5010     MOVF      0x10,0x0,0x0                                                                                    
001d04   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001d06   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001d08   ffd9                                                                                                               
001d0a   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\loaderModule.c
                                           //Precondicion: Capas superiores se encargan de hacer el chequeo de que no se exceda del espacio de modulos C:\usb4all\fw\demo\user\loaderModule.c
001d0c   cfd9     MOVFF     0xfd9,0xfe6    void getModuleName(byte line, char* modName){                                    C:\usb4all\fw\demo\user\loaderModule.c
001d0e   ffe6                                                                                                               
001d10   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001d12   ffd9                                                                                                               
001d14   0e05     MOVLW     0x5                                                                                             
001d16   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	byte j;                                                                         C:\usb4all\fw\demo\user\loaderModule.c
001d18   0e01     MOVLW     0x1            	rom near char * i = (rom near char *)DIRECTION_TABLE;                           C:\usb4all\fw\demo\user\loaderModule.c
001d1a   6adb     CLRF      0xdb,0x0                                                                                        
001d1c   0e30     MOVLW     0x30                                                                                            
001d1e   6ef3     MOVWF     0xf3,0x0                                                                                        
001d20   0e02     MOVLW     0x2                                                                                             
001d22   cff3     MOVFF     0xff3,0xfdb                                                                                     
001d24   ffdb                                                                                                               
                                           	uTab* tabla;                                                                    C:\usb4all\fw\demo\user\loaderModule.c
001d26   0efe     MOVLW     0xfe           	i = i + (line * TAM_U_TAB);                                                     C:\usb4all\fw\demo\user\loaderModule.c
001d28   50db     MOVF      0xdb,0x0,0x0                                                                                    
001d2a   0d0e     MULLW     0xe                                                                                             
001d2c   50f3     MOVF      0xf3,0x0,0x0                                                                                    
001d2e   6ee7     MOVWF     0xe7,0x0                                                                                        
001d30   0e01     MOVLW     0x1                                                                                             
001d32   cfdb     MOVFF     0xfdb,0x10                                                                                      
001d34   f010                                                                                                               
001d36   0e02     MOVLW     0x2                                                                                             
001d38   cfdb     MOVFF     0xfdb,0x11                                                                                      
001d3a   f011                                                                                                               
001d3c   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001d3e   2610     ADDWF     0x10,0x1,0x0                                                                                    
001d40   0e00     MOVLW     0x0                                                                                             
001d42   2211     ADDWFC    0x11,0x1,0x0                                                                                    
001d44   0e01     MOVLW     0x1                                                                                             
001d46   c010     MOVFF     0x10,0xfdb                                                                                      
001d48   ffdb                                                                                                               
001d4a   0e02     MOVLW     0x2                                                                                             
001d4c   c011     MOVFF     0x11,0xfdb                                                                                      
001d4e   ffdb                                                                                                               
001d50   0e01     MOVLW     0x1            	tabla = (uTab*) i;                                                              C:\usb4all\fw\demo\user\loaderModule.c
001d52   cfdb     MOVFF     0xfdb,0x6                                                                                       
001d54   f006                                                                                                               
001d56   0e02     MOVLW     0x2                                                                                             
001d58   cfdb     MOVFF     0xfdb,0x7                                                                                       
001d5a   f007                                                                                                               
001d5c   0e03     MOVLW     0x3                                                                                             
001d5e   c006     MOVFF     0x6,0xfdb                                                                                       
001d60   ffdb                                                                                                               
001d62   0e04     MOVLW     0x4                                                                                             
001d64   c007     MOVFF     0x7,0xfdb                                                                                       
001d66   ffdb                                                                                                               
001d68   6adf     CLRF      0xdf,0x0       	for (j = 0; j < 8; j++){                                                        C:\usb4all\fw\demo\user\loaderModule.c
001d6a   0e08     MOVLW     0x8                                                                                             
001d6c   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
001d6e   e229     BC        0x1dc2                                                                                          
001dbe   2adf     INCF      0xdf,0x1,0x0                                                                                    
001dc0   d7d4     BRA       0x1d6a                                                                                          
001d70   0e03     MOVLW     0x3            		modName[j] = (tabla->id)[j];                                                   C:\usb4all\fw\demo\user\loaderModule.c
001d72   cfdb     MOVFF     0xfdb,0xff6                                                                                     
001d74   fff6                                                                                                               
001d76   0e04     MOVLW     0x4                                                                                             
001d78   cfdb     MOVFF     0xfdb,0xff7                                                                                     
001d7a   fff7                                                                                                               
001d7c   0e06     MOVLW     0x6                                                                                             
001d7e   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
001d80   0e00     MOVLW     0x0                                                                                             
001d82   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
001d84   cff6     MOVFF     0xff6,0x10                                                                                      
001d86   f010                                                                                                               
001d88   cff7     MOVFF     0xff7,0x11                                                                                      
001d8a   f011                                                                                                               
001d8c   50df     MOVF      0xdf,0x0,0x0                                                                                    
001d8e   010f     MOVLB     0xf                                                                                             
001d90   2410     ADDWF     0x10,0x0,0x0                                                                                    
001d92   6ef6     MOVWF     0xf6,0x0                                                                                        
001d94   0e00     MOVLW     0x0                                                                                             
001d96   2011     ADDWFC    0x11,0x0,0x0                                                                                    
001d98   6ef7     MOVWF     0xf7,0x0                                                                                        
001d9a   0008     TBLRD                                                                                                     
001d9c   50f5     MOVF      0xf5,0x0,0x0                                                                                    
001d9e   6ee6     MOVWF     0xe6,0x0                                                                                        
001da0   50df     MOVF      0xdf,0x0,0x0                                                                                    
001da2   6ee7     MOVWF     0xe7,0x0                                                                                        
001da4   0efc     MOVLW     0xfc                                                                                            
001da6   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
001da8   ffe9                                                                                                               
001daa   0efd     MOVLW     0xfd                                                                                            
001dac   cfdb     MOVFF     0xfdb,0xfea                                                                                     
001dae   ffea                                                                                                               
001db0   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001db2   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
001db4   0e00     MOVLW     0x0                                                                                             
001db6   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001db8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001dba   50e7     MOVF      0xe7,0x0,0x0                                                                                    
001dbc   6eef     MOVWF     0xef,0x0                                                                                        
                                           	}                                                                               C:\usb4all\fw\demo\user\loaderModule.c
                                           	//memcpy(modName, tabla->id, 8); no anda, sera porque estan en espacios de memoria separados?(RAM/ROM)	 C:\usb4all\fw\demo\user\loaderModule.c
001dc2   0e05     MOVLW     0x5            }                                                                                C:\usb4all\fw\demo\user\loaderModule.c
001dc4   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
001dc6   e202     BC        0x1dcc                                                                                          
001dc8   6ae1     CLRF      0xe1,0x0                                                                                        
001dca   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001dcc   6ee1     MOVWF     0xe1,0x0                                                                                        
001dce   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001dd0   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001dd2   ffd9                                                                                                               
001dd4   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\loaderModule.c
001dd6   cfd9     MOVFF     0xfd9,0xfe6    pUserFunc getModuleInitDirection(rom near char* direction){                      C:\usb4all\fw\demo\user\loaderModule.c
001dd8   ffe6                                                                                                               
001dda   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001ddc   ffd9                                                                                                               
001dde   0e02     MOVLW     0x2                                                                                             
001de0   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
001de2   0efd     MOVLW     0xfd           	uTab* tabla = (uTab*) direction;                                                C:\usb4all\fw\demo\user\loaderModule.c
001de4   cfdb     MOVFF     0xfdb,0xfde                                                                                     
001de6   ffde                                                                                                               
001de8   cfdb     MOVFF     0xfdb,0xfdd                                                                                     
001dea   ffdd                                                                                                               
001dec   cfde     MOVFF     0xfde,0xff6    	return tabla->pfI;                                                              C:\usb4all\fw\demo\user\loaderModule.c
001dee   fff6                                                                                                               
001df0   cfdd     MOVFF     0xfdd,0xff7                                                                                     
001df2   fff7                                                                                                               
001df4   0009     TBLRDPOSTINC                                                                                              
001df6   cff5     MOVFF     0xff5,0x10                                                                                      
001df8   f010                                                                                                               
001dfa   0008     TBLRD                                                                                                     
001dfc   cff5     MOVFF     0xff5,0x11                                                                                      
001dfe   f011                                                                                                               
001e00   c010     MOVFF     0x10,0xff3                                                                                      
001e02   fff3                                                                                                               
001e04   c011     MOVFF     0x11,0xff4                                                                                      
001e06   fff4                                                                                                               
001e08   0e02     MOVLW     0x2            }                                                                                C:\usb4all\fw\demo\user\loaderModule.c
001e0a   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
001e0c   e203     BC        0x1e14                                                                                          
001e0e   d000     BRA       0x1e10                                                                                          
001e10   6ae1     CLRF      0xe1,0x0                                                                                        
001e12   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001e14   6ee1     MOVWF     0xe1,0x0                                                                                        
001e16   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001e18   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001e1a   ffd9                                                                                                               
001e1c   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\loaderModule.c
001e1e   cfd9     MOVFF     0xfd9,0xfe6    pUserFunc getModuleReleaseDirection(rom near char* direction){                   C:\usb4all\fw\demo\user\loaderModule.c
001e20   ffe6                                                                                                               
001e22   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001e24   ffd9                                                                                                               
001e26   0e02     MOVLW     0x2                                                                                             
001e28   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
001e2a   0efd     MOVLW     0xfd           	uTab* tabla = (uTab*) direction;                                                C:\usb4all\fw\demo\user\loaderModule.c
001e2c   cfdb     MOVFF     0xfdb,0xfde                                                                                     
001e2e   ffde                                                                                                               
001e30   cfdb     MOVFF     0xfdb,0xfdd                                                                                     
001e32   ffdd                                                                                                               
001e34   cfde     MOVFF     0xfde,0xff6    	return tabla->pfR;                                                              C:\usb4all\fw\demo\user\loaderModule.c
001e36   fff6                                                                                                               
001e38   cfdd     MOVFF     0xfdd,0xff7                                                                                     
001e3a   fff7                                                                                                               
001e3c   0e02     MOVLW     0x2                                                                                             
001e3e   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
001e40   0e00     MOVLW     0x0                                                                                             
001e42   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
001e44   0009     TBLRDPOSTINC                                                                                              
001e46   cff5     MOVFF     0xff5,0x10                                                                                      
001e48   f010                                                                                                               
001e4a   0008     TBLRD                                                                                                     
001e4c   cff5     MOVFF     0xff5,0x11                                                                                      
001e4e   f011                                                                                                               
001e50   c010     MOVFF     0x10,0xff3                                                                                      
001e52   fff3                                                                                                               
001e54   c011     MOVFF     0x11,0xff4                                                                                      
001e56   fff4                                                                                                               
001e58   0e02     MOVLW     0x2            }                                                                                C:\usb4all\fw\demo\user\loaderModule.c
001e5a   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
001e5c   e203     BC        0x1e64                                                                                          
001e5e   d000     BRA       0x1e60                                                                                          
001e60   6ae1     CLRF      0xe1,0x0                                                                                        
001e62   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001e64   6ee1     MOVWF     0xe1,0x0                                                                                        
001e66   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001e68   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001e6a   ffd9                                                                                                               
001e6c   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\loaderModule.c
001e6e   cfd9     MOVFF     0xfd9,0xfe6    pUserFunc getModuleConfigureDirection(rom near char* direction){                 C:\usb4all\fw\demo\user\loaderModule.c
001e70   ffe6                                                                                                               
001e72   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001e74   ffd9                                                                                                               
001e76   0e02     MOVLW     0x2                                                                                             
001e78   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
001e7a   0efd     MOVLW     0xfd           	uTab* tabla = (uTab*) direction;                                                C:\usb4all\fw\demo\user\loaderModule.c
001e7c   cfdb     MOVFF     0xfdb,0xfde                                                                                     
001e7e   ffde                                                                                                               
001e80   cfdb     MOVFF     0xfdb,0xfdd                                                                                     
001e82   ffdd                                                                                                               
001e84   cfde     MOVFF     0xfde,0xff6    	return tabla->pfC;                                                              C:\usb4all\fw\demo\user\loaderModule.c
001e86   fff6                                                                                                               
001e88   cfdd     MOVFF     0xfdd,0xff7                                                                                     
001e8a   fff7                                                                                                               
001e8c   0e04     MOVLW     0x4                                                                                             
001e8e   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
001e90   0e00     MOVLW     0x0                                                                                             
001e92   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
001e94   0009     TBLRDPOSTINC                                                                                              
001e96   cff5     MOVFF     0xff5,0x10                                                                                      
001e98   f010                                                                                                               
001e9a   0008     TBLRD                                                                                                     
001e9c   cff5     MOVFF     0xff5,0x11                                                                                      
001e9e   f011                                                                                                               
001ea0   c010     MOVFF     0x10,0xff3                                                                                      
001ea2   fff3                                                                                                               
001ea4   c011     MOVFF     0x11,0xff4                                                                                      
001ea6   fff4                                                                                                               
001ea8   0e02     MOVLW     0x2            }                                                                                C:\usb4all\fw\demo\user\loaderModule.c
001eaa   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
001eac   e203     BC        0x1eb4                                                                                          
001eae   d000     BRA       0x1eb0                                                                                          
001eb0   6ae1     CLRF      0xe1,0x0                                                                                        
001eb2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001eb4   6ee1     MOVWF     0xe1,0x0                                                                                        
001eb6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001eb8   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001eba   ffd9                                                                                                               
001ebc   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\loaderModule.c
                                           /** EOF loaderModule.c ***************************************************************/ C:\usb4all\fw\demo\user\loaderModule.c
                                           /* Author             									  Date        Comment                             C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~   C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Andrés Aguirre, Rafael Fernandez					       03/11/07    Original.             C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\user\usr_skeleton.c
                                           #include <p18cxxx.h>                                                             C:\usb4all\fw\demo\user\usr_skeleton.c
                                           #include <usart.h>                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                           #include "system\typedefs.h"                                                     C:\usb4all\fw\demo\user\usr_skeleton.c
                                           #include "system\usb\usb.h"                                                      C:\usb4all\fw\demo\user\usr_skeleton.c
                                           #include "user\usr_skeleton.h"                                                   C:\usb4all\fw\demo\user\usr_skeleton.c
                                           #include "io_cfg.h"              // I/O pin mapping                              C:\usb4all\fw\demo\user\usr_skeleton.c
                                           #include "user\handlerManager.h"                                                 C:\usb4all\fw\demo\user\usr_skeleton.c
                                           #include "dynamicPolling.h"                                                      C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\user\usr_skeleton.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
                                           byte  usrSkelHandler;	 // Handler number asigned to the module                   C:\usb4all\fw\demo\user\usr_skeleton.c
                                           byte* sendBufferUsrSkel; // buffer to send data                                  C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\user\usr_skeleton.c
                                           void UserSkelProcessIO(void);                                                    C:\usb4all\fw\demo\user\usr_skeleton.c
                                           void UserSkelInit(byte i);                                                       C:\usb4all\fw\demo\user\usr_skeleton.c
                                           void UserSkelReceived(byte*, byte);                                              C:\usb4all\fw\demo\user\usr_skeleton.c
                                           void UserSkelRelease(byte i);                                                    C:\usb4all\fw\demo\user\usr_skeleton.c
                                           void UserSkelConfigure(void);                                                    C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
                                           // Table used by te framework to get a fixed reference point to the user module functions defined by the framework  C:\usb4all\fw\demo\user\usr_skeleton.c
                                           /** USER MODULE REFERENCE*****************************************************/  C:\usb4all\fw\demo\user\usr_skeleton.c
                                           #pragma romdata user                                                             C:\usb4all\fw\demo\user\usr_skeleton.c
                                           uTab userSkelModuleTable = {&UserSkelInit,&UserSkelRelease,&UserSkelConfigure,"modName"}; //modName must be less or equal 8 characters C:\usb4all\fw\demo\user\usr_skeleton.c
                                           #pragma code                                                                     C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\user\usr_skeleton.c
                                           #pragma code module                                                              C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Function:        UserSkelInit(void)                                           C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Overview:        This function is initialices the resources that the user module needs to work, it is called by the framework  C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *					when the module is opened	                                                C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
003d54   cfd9     MOVFF     0xfd9,0xfe6    void UserSkelInit(byte i){                                                       C:\usb4all\fw\demo\user\usr_skeleton.c
003d56   ffe6                                                                                                               
003d58   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003d5a   ffd9                                                                                                               
003d5c   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	BOOL res;                                                                       C:\usb4all\fw\demo\user\usr_skeleton.c
003d5e   0efe     MOVLW     0xfe           	usrSkelHandler = i;                                                             C:\usb4all\fw\demo\user\usr_skeleton.c
003d60   cfdb     MOVFF     0xfdb,0x17e                                                                                     
003d62   f17e                                                                                                               
                                           	// add my receive function to the handler module, to be called automatically when the pc sends data to the user module C:\usb4all\fw\demo\user\usr_skeleton.c
003d64   0ef4     MOVLW     0xf4           	setHandlerReceiveFunction(usrSkelHandler,&UserSkelReceived);                    C:\usb4all\fw\demo\user\usr_skeleton.c
003d66   6ee6     MOVWF     0xe6,0x0                                                                                        
003d68   0e3d     MOVLW     0x3d                                                                                            
003d6a   6ee6     MOVWF     0xe6,0x0                                                                                        
003d6c   c17e     MOVFF     0x17e,0xfe6                                                                                     
003d6e   ffe6                                                                                                               
003d70   ecc0     CALL      0x2380,0x0                                                                                      
003d72   f011                                                                                                               
003d74   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003d76   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003d78   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	// add my receive pooling function to the dynamic pooling module, to be called periodically  C:\usb4all\fw\demo\user\usr_skeleton.c
003d7a   0eaa     MOVLW     0xaa           	res = addPollingFunction(&UserSkelProcessIO);                                   C:\usb4all\fw\demo\user\usr_skeleton.c
003d7c   6ee6     MOVWF     0xe6,0x0                                                                                        
003d7e   0e3d     MOVLW     0x3d                                                                                            
003d80   6ee6     MOVWF     0xe6,0x0                                                                                        
003d82   ec55     CALL      0x14aa,0x0                                                                                      
003d84   f00a                                                                                                               
003d86   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003d88   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003d8a   6edf     MOVWF     0xdf,0x0                                                                                        
                                           	// initialize the send buffer, used to send data to the PC                      C:\usb4all\fw\demo\user\usr_skeleton.c
003d8c   c17e     MOVFF     0x17e,0xfe6    	sendBufferUsrSkel = getSharedBuffer(usrSkelHandler);                            C:\usb4all\fw\demo\user\usr_skeleton.c
003d8e   ffe6                                                                                                               
003d90   ec73     CALL      0x2ce6,0x0                                                                                      
003d92   f016                                                                                                               
003d94   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003d96   cff3     MOVFF     0xff3,0x17f                                                                                     
003d98   f17f                                                                                                               
003d9a   cff4     MOVFF     0xff4,0x180                                                                                     
003d9c   f180                                                                                                               
                                           	//TODO return res value                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
003d9e   52e5     MOVF      0xe5,0x1,0x0   }//end UserSkelInit                                                              C:\usb4all\fw\demo\user\usr_skeleton.c
003da0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003da2   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
003da4   ffd9                                                                                                               
003da6   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Function:        UserSkelConfigure(void)                                      C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Overview:        This function sets the specific configuration for the user module, it is called by the framework  C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *						                                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\usr_skeleton.c
                                           void UserSkelConfigure(void){                                                    C:\usb4all\fw\demo\user\usr_skeleton.c
                                           // Do the configuration                                                          C:\usb4all\fw\demo\user\usr_skeleton.c
003da8   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Function:        UserSkelProcessIO(void)                                      C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Overview:        This function is registered in the dinamic polling, who call ir periodically to process the IO interaction C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *					int the PIC, also it can comunicate things to the pc by the USB	          C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
                                           void UserSkelProcessIO(void){                                                    C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
003daa   0e06     MOVLW     0x6                if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;      C:\usb4all\fw\demo\user\usr_skeleton.c
003dac   0101     MOVLB     0x1                                                                                             
003dae   5d72     SUBWF     0x72,0x0,0x1                                                                                    
003db0   e303     BNC       0x3db8                                                                                          
003db2   506d     MOVF      0x6d,0x0,0x0                                                                                    
003db4   0b02     ANDLW     0x2                                                                                             
003db6   e001     BZ        0x3dba                                                                                          
003db8   d000     BRA       0x3dba                                                                                          
                                           	// here enter the code that want to be called periodically, per example interaction with buttons and leds C:\usb4all\fw\demo\user\usr_skeleton.c
                                           	                                                                                C:\usb4all\fw\demo\user\usr_skeleton.c
003dba   0012     RETURN    0x0            }//end ProcessIO                                                                 C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Function:        UserSkelRelease(byte i)                                      C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Overview:        This function release all the resources that the user module used, it is called by the framework  C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *					when the module is close	                                                 C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
003dbc   cfd9     MOVFF     0xfd9,0xfe6    void UserSkelRelease(byte i){                                                    C:\usb4all\fw\demo\user\usr_skeleton.c
003dbe   ffe6                                                                                                               
003dc0   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003dc2   ffd9                                                                                                               
003dc4   0efe     MOVLW     0xfe           	unsetHandlerReceiveBuffer(i);                                                   C:\usb4all\fw\demo\user\usr_skeleton.c
003dc6   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
003dc8   ffe6                                                                                                               
003dca   ecac     CALL      0x2358,0x0                                                                                      
003dcc   f011                                                                                                               
003dce   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003dd0   0efe     MOVLW     0xfe           	unsetHandlerReceiveFunction(i);                                                 C:\usb4all\fw\demo\user\usr_skeleton.c
003dd2   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
003dd4   ffe6                                                                                                               
003dd6   ecd8     CALL      0x23b0,0x0                                                                                      
003dd8   f011                                                                                                               
003dda   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003ddc   0eaa     MOVLW     0xaa           	removePoolingFunction(&UserSkelProcessIO);                                      C:\usb4all\fw\demo\user\usr_skeleton.c
003dde   6ee6     MOVWF     0xe6,0x0                                                                                        
003de0   0e3d     MOVLW     0x3d                                                                                            
003de2   6ee6     MOVWF     0xe6,0x0                                                                                        
003de4   ec97     CALL      0x152e,0x0                                                                                      
003de6   f00a                                                                                                               
003de8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003dea   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003dec   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\usr_skeleton.c
003dee   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
003df0   ffd9                                                                                                               
003df2   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Function:        UserSkelReceived(byte* recBuffPtr, byte len)                 C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Overview:        This function manages the comunication with the pc           C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\usr_skeleton.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
003df4   cfd9     MOVFF     0xfd9,0xfe6    void UserSkelReceived(byte* recBuffPtr, byte len){                               C:\usb4all\fw\demo\user\usr_skeleton.c
003df6   ffe6                                                                                                               
003df8   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003dfa   ffd9                                                                                                               
003dfc   0e0b     MOVLW     0xb                                                                                             
003dfe   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	  byte index;                                                                   C:\usb4all\fw\demo\user\usr_skeleton.c
003e00   50d9     MOVF      0xd9,0x0,0x0   	  char mens[9] = "User Skeleton is alive";	                                     C:\usb4all\fw\demo\user\usr_skeleton.c
003e02   0f01     ADDLW     0x1                                                                                             
003e04   6ee9     MOVWF     0xe9,0x0                                                                                        
003e06   cfda     MOVFF     0xfda,0xfea                                                                                     
003e08   ffea                                                                                                               
003e0a   0e55     MOVLW     0x55                                                                                            
003e0c   6eee     MOVWF     0xee,0x0                                                                                        
003e0e   0e73     MOVLW     0x73                                                                                            
003e10   6eee     MOVWF     0xee,0x0                                                                                        
003e12   0e65     MOVLW     0x65                                                                                            
003e14   6eee     MOVWF     0xee,0x0                                                                                        
003e16   0e72     MOVLW     0x72                                                                                            
003e18   6eee     MOVWF     0xee,0x0                                                                                        
003e1a   0e20     MOVLW     0x20                                                                                            
003e1c   6eee     MOVWF     0xee,0x0                                                                                        
003e1e   0e53     MOVLW     0x53                                                                                            
003e20   6eee     MOVWF     0xee,0x0                                                                                        
003e22   0e6b     MOVLW     0x6b                                                                                            
003e24   6eee     MOVWF     0xee,0x0                                                                                        
003e26   0e65     MOVLW     0x65                                                                                            
003e28   6eee     MOVWF     0xee,0x0                                                                                        
003e2a   0e6c     MOVLW     0x6c                                                                                            
003e2c   6eee     MOVWF     0xee,0x0                                                                                        
003e2e   0e0a     MOVLW     0xa                  byte userSkelCounter = 0;                                                  C:\usb4all\fw\demo\user\usr_skeleton.c
003e30   6adb     CLRF      0xdb,0x0                                                                                        
003e32   0efd     MOVLW     0xfd                 switch(((SKEL_DATA_PACKET*)recBuffPtr)->CMD)                               C:\usb4all\fw\demo\user\usr_skeleton.c
003e34   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
003e36   ffe9                                                                                                               
003e38   0efe     MOVLW     0xfe                                                                                            
003e3a   cfdb     MOVFF     0xfdb,0xfea                                                                                     
003e3c   ffea                                                                                                               
003e3e   50ef     MOVF      0xef,0x0,0x0                                                                                    
003e40   0a05     XORLW     0x5                                                                                             
003e42   e046     BZ        0x3ed0                                                                                          
003e44   0afa     XORLW     0xfa                                                                                            
003e46   e042     BZ        0x3ecc                                                                                          
003e48   0aff     XORLW     0xff                                                                                            
003e4a   e001     BZ        0x3e4e                                                                                          
003e4c   d04f     BRA       0x3eec                                                                                          
                                                 {                                                                          C:\usb4all\fw\demo\user\usr_skeleton.c
                                                   case READ_VERSION:                                                       C:\usb4all\fw\demo\user\usr_skeleton.c
                                                         //dataPacket._byte[1] is len                                       C:\usb4all\fw\demo\user\usr_skeleton.c
003e4e   0efd     MOVLW     0xfd           			  ((SKEL_DATA_PACKET*)sendBufferUsrSkel)->_byte[0] = ((SKEL_DATA_PACKET*)recBuffPtr)->_byte[0];  C:\usb4all\fw\demo\user\usr_skeleton.c
003e50   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
003e52   ffe9                                                                                                               
003e54   0efe     MOVLW     0xfe                                                                                            
003e56   cfdb     MOVFF     0xfdb,0xfea                                                                                     
003e58   ffea                                                                                                               
003e5a   50ef     MOVF      0xef,0x0,0x0                                                                                    
003e5c   6ee6     MOVWF     0xe6,0x0                                                                                        
003e5e   c17f     MOVFF     0x17f,0xfe9                                                                                     
003e60   ffe9                                                                                                               
003e62   c180     MOVFF     0x180,0xfea                                                                                     
003e64   ffea                                                                                                               
003e66   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003e68   50e7     MOVF      0xe7,0x0,0x0                                                                                    
003e6a   6eef     MOVWF     0xef,0x0                                                                                        
003e6c   0efd     MOVLW     0xfd           			  ((SKEL_DATA_PACKET*)sendBufferUsrSkel)->_byte[1] = ((SKEL_DATA_PACKET*)recBuffPtr)->_byte[1];  C:\usb4all\fw\demo\user\usr_skeleton.c
003e6e   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
003e70   ffe9                                                                                                               
003e72   0efe     MOVLW     0xfe                                                                                            
003e74   cfdb     MOVFF     0xfdb,0xfea                                                                                     
003e76   ffea                                                                                                               
003e78   0e01     MOVLW     0x1                                                                                             
003e7a   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
003e7c   0e00     MOVLW     0x0                                                                                             
003e7e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003e80   50ef     MOVF      0xef,0x0,0x0                                                                                    
003e82   6ee6     MOVWF     0xe6,0x0                                                                                        
003e84   c17f     MOVFF     0x17f,0xfe9                                                                                     
003e86   ffe9                                                                                                               
003e88   c180     MOVFF     0x180,0xfea                                                                                     
003e8a   ffea                                                                                                               
003e8c   0e01     MOVLW     0x1                                                                                             
003e8e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
003e90   0e00     MOVLW     0x0                                                                                             
003e92   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003e94   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003e96   50e7     MOVF      0xe7,0x0,0x0                                                                                    
003e98   6eef     MOVWF     0xef,0x0                                                                                        
003e9a   c17f     MOVFF     0x17f,0xfe9                  ((SKEL_DATA_PACKET*)sendBufferUsrSkel)->_byte[2] = SKEL_MINOR_VERSION; C:\usb4all\fw\demo\user\usr_skeleton.c
003e9c   ffe9                                                                                                               
003e9e   c180     MOVFF     0x180,0xfea                                                                                     
003ea0   ffea                                                                                                               
003ea2   0e02     MOVLW     0x2                                                                                             
003ea4   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
003ea6   0e00     MOVLW     0x0                                                                                             
003ea8   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003eaa   0e0d     MOVLW     0xd                                                                                             
003eac   6eef     MOVWF     0xef,0x0                                                                                        
003eae   c17f     MOVFF     0x17f,0xfe9                  ((SKEL_DATA_PACKET*)sendBufferUsrSkel)->_byte[3] = SKEL_MAJOR_VERSION; C:\usb4all\fw\demo\user\usr_skeleton.c
003eb0   ffe9                                                                                                               
003eb2   c180     MOVFF     0x180,0xfea                                                                                     
003eb4   ffea                                                                                                               
003eb6   0e03     MOVLW     0x3                                                                                             
003eb8   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
003eba   0e00     MOVLW     0x0                                                                                             
003ebc   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003ebe   6aef     CLRF      0xef,0x0                                                                                        
003ec0   0e04     MOVLW     0x4                          userSkelCounter=0x04;                                              C:\usb4all\fw\demo\user\usr_skeleton.c
003ec2   6ef3     MOVWF     0xf3,0x0                                                                                        
003ec4   0e0a     MOVLW     0xa                                                                                             
003ec6   cff3     MOVFF     0xff3,0xfdb                                                                                     
003ec8   ffdb                                                                                                               
003eca   d011     BRA       0x3eee                       break;                                                             C:\usb4all\fw\demo\user\usr_skeleton.c
                                           	                                                                                C:\usb4all\fw\demo\user\usr_skeleton.c
                                                   /*case ANY_COMMAND:                                                      C:\usb4all\fw\demo\user\usr_skeleton.c
                                                         fill the SKEL_DATA_PACKET acording to the data to be sent          C:\usb4all\fw\demo\user\usr_skeleton.c
                                           			  userSkelCounter=size of data to be sent;                                    C:\usb4all\fw\demo\user\usr_skeleton.c
                                                         break;                                                             C:\usb4all\fw\demo\user\usr_skeleton.c
                                                   */                                                                       C:\usb4all\fw\demo\user\usr_skeleton.c
                                                     case RESET:                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
003ecc   00ff     RESET                                  Reset();                                                           C:\usb4all\fw\demo\user\usr_skeleton.c
003ece   d00f     BRA       0x3eee         			  break;                                                                      C:\usb4all\fw\demo\user\usr_skeleton.c
                                           		                                                                               C:\usb4all\fw\demo\user\usr_skeleton.c
                                           		 case MESS:                                                                    C:\usb4all\fw\demo\user\usr_skeleton.c
003ed0   0e09     MOVLW     0x9            				sendMes(mens, sizeof(mens));                                                 C:\usb4all\fw\demo\user\usr_skeleton.c
003ed2   6ee6     MOVWF     0xe6,0x0                                                                                        
003ed4   50d9     MOVF      0xd9,0x0,0x0                                                                                    
003ed6   0f01     ADDLW     0x1                                                                                             
003ed8   6ee6     MOVWF     0xe6,0x0                                                                                        
003eda   0e00     MOVLW     0x0                                                                                             
003edc   20da     ADDWFC    0xda,0x0,0x0                                                                                    
003ede   6ee6     MOVWF     0xe6,0x0                                                                                        
003ee0   ece0     CALL      0x19c0,0x0                                                                                      
003ee2   f00c                                                                                                               
003ee4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003ee6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003ee8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003eea   d001     BRA       0x3eee                       break;                                                             C:\usb4all\fw\demo\user\usr_skeleton.c
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
                                           		 default:                                                                      C:\usb4all\fw\demo\user\usr_skeleton.c
003eec   d000     BRA       0x3eee                       break;                                                             C:\usb4all\fw\demo\user\usr_skeleton.c
                                                 }//end switch(s)                                                           C:\usb4all\fw\demo\user\usr_skeleton.c
003eee   0e0a     MOVLW     0xa                  if(userSkelCounter != 0)                                                   C:\usb4all\fw\demo\user\usr_skeleton.c
003ef0   50db     MOVF      0xdb,0x0,0x0                                                                                    
003ef2   e00c     BZ        0x3f0c                                                                                          
                                                 {                                                                          C:\usb4all\fw\demo\user\usr_skeleton.c
003ef4   0104     MOVLB     0x4                      if(!mUSBGenTxIsBusy())                                                 C:\usb4all\fw\demo\user\usr_skeleton.c
003ef6   bf0c     BTFSC     0xc,0x7,0x1                                                                                     
003ef8   d009     BRA       0x3f0c                                                                                          
003efa   0e0a     MOVLW     0xa                          USBGenWrite2(usrSkelHandler, userSkelCounter);                     C:\usb4all\fw\demo\user\usr_skeleton.c
003efc   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
003efe   ffe6                                                                                                               
003f00   c17e     MOVFF     0x17e,0xfe6                                                                                     
003f02   ffe6                                                                                                               
003f04   ec36     CALL      0x266c,0x0                                                                                      
003f06   f013                                                                                                               
003f08   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003f0a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                 }//end if  	  	                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
003f0c   0e0b     MOVLW     0xb            }//end UserSkelReceived                                                          C:\usb4all\fw\demo\user\usr_skeleton.c
003f0e   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
003f10   e202     BC        0x3f16                                                                                          
003f12   6ae1     CLRF      0xe1,0x0                                                                                        
003f14   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003f16   6ee1     MOVWF     0xe1,0x0                                                                                        
003f18   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003f1a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
003f1c   ffd9                                                                                                               
003f1e   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\usr_skeleton.c
                                           /** EOF usr_skeleton.c ***************************************************************/ C:\usb4all\fw\demo\user\usr_skeleton.c
                                           /* Author             									  Date        Comment                             C:\usb4all\fw\demo\user\manchester.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~   C:\usb4all\fw\demo\user\manchester.c
                                            * Andrés Aguirre, Rafael Fernandez, Carlos Grossy       02/06/07    Original.   C:\usb4all\fw\demo\user\manchester.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\user\manchester.c
                                           #include <p18cxxx.h>                                                             C:\usb4all\fw\demo\user\manchester.c
                                           #include <usart.h>                                                               C:\usb4all\fw\demo\user\manchester.c
                                           #include "system\typedefs.h"                                                     C:\usb4all\fw\demo\user\manchester.c
                                           #include "system\usb\usb.h"                                                      C:\usb4all\fw\demo\user\manchester.c
                                           #include "user\manchester.h"                                                     C:\usb4all\fw\demo\user\manchester.c
                                           #include "io_cfg.h"              // I/O pin mapping                              C:\usb4all\fw\demo\user\manchester.c
                                           #include "user\handlerManager.h"                                                 C:\usb4all\fw\demo\user\manchester.c
                                           #include "dynamicPolling.h"                                                      C:\usb4all\fw\demo\user\manchester.c
                                           #define CLOCK_PATTERN 0xAAAA                                                     C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\user\manchester.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           byte  usrManchesterHandler;	 // Handler number asigned to the module             C:\usb4all\fw\demo\user\manchester.c
                                           byte* sendBufferUsrManchester; // buffer to send data                            C:\usb4all\fw\demo\user\manchester.c
                                           unsigned short byteManchester;                                                   C:\usb4all\fw\demo\user\manchester.c
                                           byte  sendingBit;                                                                C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\user\manchester.c
                                           void UserManchesterProcessIO(void);                                              C:\usb4all\fw\demo\user\manchester.c
                                           void UserManchesterInit(byte i);                                                 C:\usb4all\fw\demo\user\manchester.c
                                           void UserManchesterReceived(byte*, byte);                                        C:\usb4all\fw\demo\user\manchester.c
                                           void UserManchesterRelease(byte i);                                              C:\usb4all\fw\demo\user\manchester.c
                                           void UserManchesterConfigure(void);                                              C:\usb4all\fw\demo\user\manchester.c
                                           // Table used by te framework to get a fixed reference point to the user module functions defined by the framework  C:\usb4all\fw\demo\user\manchester.c
                                           /** USER MODULE REFERENCE*****************************************************/  C:\usb4all\fw\demo\user\manchester.c
                                           #pragma romdata user                                                             C:\usb4all\fw\demo\user\manchester.c
                                           uTab userManchesterModuleTable = {&UserManchesterInit,&UserManchesterRelease,&UserManchesterConfigure,"manch"}; //modName must be less or equal 8 characters C:\usb4all\fw\demo\user\manchester.c
                                           #pragma code                                                                     C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\user\manchester.c
                                           #pragma code module                                                              C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\manchester.c
                                            * Function:        UserManchesterInit(void)                                     C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Overview:        This function is initialices the resources that the user module needs to work, it is called by the framework  C:\usb4all\fw\demo\user\manchester.c
                                            *					when the module is opened	                                                C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
003f20   cfd9     MOVFF     0xfd9,0xfe6    void UserManchesterInit(byte i){                                                 C:\usb4all\fw\demo\user\manchester.c
003f22   ffe6                                                                                                               
003f24   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003f26   ffd9                                                                                                               
003f28   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	BOOL res;                                                                       C:\usb4all\fw\demo\user\manchester.c
003f2a   0efe     MOVLW     0xfe           	usrManchesterHandler = i;                                                       C:\usb4all\fw\demo\user\manchester.c
003f2c   cfdb     MOVFF     0xfdb,0x161                                                                                     
003f2e   f161                                                                                                               
                                           	// add my receive function to the handler module, to be called automatically when the pc sends data to the user module C:\usb4all\fw\demo\user\manchester.c
003f30   0e18     MOVLW     0x18           	setHandlerReceiveFunction(usrManchesterHandler,&UserManchesterReceived);        C:\usb4all\fw\demo\user\manchester.c
003f32   6ee6     MOVWF     0xe6,0x0                                                                                        
003f34   0e43     MOVLW     0x43                                                                                            
003f36   6ee6     MOVWF     0xe6,0x0                                                                                        
003f38   c161     MOVFF     0x161,0xfe6                                                                                     
003f3a   ffe6                                                                                                               
003f3c   ecc0     CALL      0x2380,0x0                                                                                      
003f3e   f011                                                                                                               
003f40   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003f42   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003f44   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	// add my receive pooling function to the dynamic pooling module, to be called periodically  C:\usb4all\fw\demo\user\manchester.c
003f46   0e88     MOVLW     0x88           	res = addPollingFunction(&UserManchesterProcessIO);                             C:\usb4all\fw\demo\user\manchester.c
003f48   6ee6     MOVWF     0xe6,0x0                                                                                        
003f4a   0e3f     MOVLW     0x3f                                                                                            
003f4c   6ee6     MOVWF     0xe6,0x0                                                                                        
003f4e   ec55     CALL      0x14aa,0x0                                                                                      
003f50   f00a                                                                                                               
003f52   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003f54   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003f56   6edf     MOVWF     0xdf,0x0                                                                                        
                                           	// initialize the send buffer, used to send data to the PC                      C:\usb4all\fw\demo\user\manchester.c
003f58   c161     MOVFF     0x161,0xfe6    	sendBufferUsrManchester = getSharedBuffer(usrManchesterHandler);                C:\usb4all\fw\demo\user\manchester.c
003f5a   ffe6                                                                                                               
003f5c   ec73     CALL      0x2ce6,0x0                                                                                      
003f5e   f016                                                                                                               
003f60   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003f62   cff3     MOVFF     0xff3,0x162                                                                                     
003f64   f162                                                                                                               
003f66   cff4     MOVFF     0xff4,0x163                                                                                     
003f68   f163                                                                                                               
                                           	                                                                                C:\usb4all\fw\demo\user\manchester.c
                                           	//TODO seteo el pin de salida del manchester como out.                          C:\usb4all\fw\demo\user\manchester.c
003f6a   6a8c     CLRF      0x8c,0x0       	mInitAllLEDs();                                                                 C:\usb4all\fw\demo\user\manchester.c
003f6c   0ef0     MOVLW     0xf0                                                                                            
003f6e   1695     ANDWF     0x95,0x1,0x0                                                                                    
003f70   9895     BCF       0x95,0x4,0x0   	TRISD &= (255-MANCHESTER_BIT);                                                  C:\usb4all\fw\demo\user\manchester.c
003f72   948c     BCF       0x8c,0x2,0x0   	mLED_3_Off();                                                                   C:\usb4all\fw\demo\user\manchester.c
003f74   968c     BCF       0x8c,0x3,0x0   	mLED_4_Off();                                                                   C:\usb4all\fw\demo\user\manchester.c
                                           			                                                                              C:\usb4all\fw\demo\user\manchester.c
003f76   0101     MOVLB     0x1            	sendingBit=16;                                                                  C:\usb4all\fw\demo\user\manchester.c
003f78   0e10     MOVLW     0x10                                                                                            
003f7a   6f66     MOVWF     0x66,0x1                                                                                        
                                           	//TODO return res value                                                         C:\usb4all\fw\demo\user\manchester.c
003f7c   52e5     MOVF      0xe5,0x1,0x0   }//end UserSkelInit                                                              C:\usb4all\fw\demo\user\manchester.c
003f7e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003f80   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
003f82   ffd9                                                                                                               
003f84   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\manchester.c
                                            * Function:        UserManchesterConfigure(void)                                C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Overview:        This function sets the specific configuration for the user module, it is called by the framework  C:\usb4all\fw\demo\user\manchester.c
                                            *						                                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\manchester.c
                                           void UserManchesterConfigure(void){                                              C:\usb4all\fw\demo\user\manchester.c
                                           // Do the configuration                                                          C:\usb4all\fw\demo\user\manchester.c
003f86   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\manchester.c
                                            * Function:        UserManchesterProcessIO(void)                                C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Overview:        This function is registered in the dinamic polling, who call ir periodically to process the IO interaction C:\usb4all\fw\demo\user\manchester.c
                                            *					int the PIC, also it can comunicate things to the pc by the USB	          C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           /*                                                                               C:\usb4all\fw\demo\user\manchester.c
                                           void UserManchesterProcessIO(void){                                              C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                               if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;      C:\usb4all\fw\demo\user\manchester.c
                                           	                                                                                C:\usb4all\fw\demo\user\manchester.c
                                           	if (INTCONbits.TMR0IF==1){                                                      C:\usb4all\fw\demo\user\manchester.c
                                           		//hago algo con el led                                                         C:\usb4all\fw\demo\user\manchester.c
                                           		if (sendingBit==0){                                                            C:\usb4all\fw\demo\user\manchester.c
                                           			sendingBit=1;                                                                 C:\usb4all\fw\demo\user\manchester.c
                                           		}                                                                              C:\usb4all\fw\demo\user\manchester.c
                                           		else {                                                                         C:\usb4all\fw\demo\user\manchester.c
                                           			sendingBit=0;                                                                 C:\usb4all\fw\demo\user\manchester.c
                                           		}                                                                              C:\usb4all\fw\demo\user\manchester.c
                                           		manchesterOut(sendingBit);                                                     C:\usb4all\fw\demo\user\manchester.c
                                           		prendoTimer();                                                                 C:\usb4all\fw\demo\user\manchester.c
                                           	}                                                                               C:\usb4all\fw\demo\user\manchester.c
                                           	                                                                                C:\usb4all\fw\demo\user\manchester.c
                                           }                                                                                C:\usb4all\fw\demo\user\manchester.c
                                           */                                                                               C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           void UserManchesterProcessIO(void){                                              C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                               //if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;    C:\usb4all\fw\demo\user\manchester.c
                                           	// here enter the code that want to be called periodically, per example interaction with buttons and leds C:\usb4all\fw\demo\user\manchester.c
                                           	//chequeo si estoy enviando                                                     C:\usb4all\fw\demo\user\manchester.c
003f88   0e10     MOVLW     0x10           	if (sendingBit<16){                                                             C:\usb4all\fw\demo\user\manchester.c
003f8a   0101     MOVLB     0x1                                                                                             
003f8c   5d66     SUBWF     0x66,0x0,0x1                                                                                    
003f8e   e217     BC        0x3fbe                                                                                          
                                           		//empiezo a enviar o todavia estoy enviando un byteManchester                  C:\usb4all\fw\demo\user\manchester.c
003f90   5166     MOVF      0x66,0x0,0x1   		if (sendingBit==0){                                                            C:\usb4all\fw\demo\user\manchester.c
003f92   e107     BNZ       0x3fa2                                                                                          
003f94   848c     BSF       0x8c,0x2,0x0   			mLED_3_On();                                                                  C:\usb4all\fw\demo\user\manchester.c
003f96   968c     BCF       0x8c,0x3,0x0   			mLED_4_Off();                                                                 C:\usb4all\fw\demo\user\manchester.c
                                           				                                                                             C:\usb4all\fw\demo\user\manchester.c
                                           			//envio el bit 0 de manchester y                                              C:\usb4all\fw\demo\user\manchester.c
003f98   d813     RCALL     0x3fc0         			sendCurrentBit(); //mando el bit sendingBit por la patita de out              C:\usb4all\fw\demo\user\manchester.c
003f9a   db37     RCALL     0x460a         			prendoTimer(); //prendemos el timer                                           C:\usb4all\fw\demo\user\manchester.c
003f9c   0101     MOVLB     0x1            			sendingBit++;                                                                 C:\usb4all\fw\demo\user\manchester.c
003f9e   2b66     INCF      0x66,0x1,0x1                                                                                    
                                           		}	                                                                             C:\usb4all\fw\demo\user\manchester.c
003fa0   d00e     BRA       0x3fbe         		else {                                                                         C:\usb4all\fw\demo\user\manchester.c
003fa2   a4f2     BTFSS     0xf2,0x2,0x0   			if (INTCONbits.TMR0IF==1) {                                                   C:\usb4all\fw\demo\user\manchester.c
003fa4   d00c     BRA       0x3fbe                                                                                          
003fa6   768c     BTG       0x8c,0x3,0x0   				mLED_4_Toggle();                                                             C:\usb4all\fw\demo\user\manchester.c
003fa8   748c     BTG       0x8c,0x2,0x0   				mLED_3_Toggle();                                                             C:\usb4all\fw\demo\user\manchester.c
                                           				//sendingBit++;                                                              C:\usb4all\fw\demo\user\manchester.c
003faa   0e0f     MOVLW     0xf            				if (sendingBit<15){                                                          C:\usb4all\fw\demo\user\manchester.c
003fac   5d66     SUBWF     0x66,0x0,0x1                                                                                    
003fae   e205     BC        0x3fba                                                                                          
003fb0   d807     RCALL     0x3fc0         					sendCurrentBit(); //mando el bit sendingBit por la patita de out            C:\usb4all\fw\demo\user\manchester.c
003fb2   0101     MOVLB     0x1            					sendingBit++;                                                               C:\usb4all\fw\demo\user\manchester.c
003fb4   2b66     INCF      0x66,0x1,0x1                                                                                    
003fb6   db29     RCALL     0x460a         					prendoTimer(); //prendemos el timer                                         C:\usb4all\fw\demo\user\manchester.c
                                           				}                                                                            C:\usb4all\fw\demo\user\manchester.c
003fb8   d002     BRA       0x3fbe         				else{                                                                        C:\usb4all\fw\demo\user\manchester.c
                                           					//terminé de mandar                                                         C:\usb4all\fw\demo\user\manchester.c
003fba   d802     RCALL     0x3fc0         					sendCurrentBit();                                                           C:\usb4all\fw\demo\user\manchester.c
003fbc   d843     RCALL     0x4044         					termineDeMandar();                                                          C:\usb4all\fw\demo\user\manchester.c
                                           				}                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           			}                                                                             C:\usb4all\fw\demo\user\manchester.c
                                           		}                                                                              C:\usb4all\fw\demo\user\manchester.c
                                           	}                                                                               C:\usb4all\fw\demo\user\manchester.c
003fbe   0012     RETURN    0x0            }//end ProcessIO                                                                 C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           void sendCurrentBit(){                                                           C:\usb4all\fw\demo\user\manchester.c
                                           	//TODO envia el bit seteado en sendBit de la variable byteManchester por la pata x del pic C:\usb4all\fw\demo\user\manchester.c
003fc0   6a14     CLRF      0x14,0x0       	if ((byteManchester & (0x8000>>sendingBit))>0) manchesterOut(1);                C:\usb4all\fw\demo\user\manchester.c
003fc2   0e80     MOVLW     0x80                                                                                            
003fc4   6e15     MOVWF     0x15,0x0                                                                                        
003fc6   0101     MOVLB     0x1                                                                                             
003fc8   5166     MOVF      0x66,0x0,0x1                                                                                    
003fca   c014     MOVFF     0x14,0x12                                                                                       
003fcc   f012                                                                                                               
003fce   c015     MOVFF     0x15,0x13                                                                                       
003fd0   f013                                                                                                               
003fd2   e005     BZ        0x3fde                                                                                          
003fd4   90d8     BCF       0xd8,0x0,0x0                                                                                    
003fd6   3213     RRCF      0x13,0x1,0x0                                                                                    
003fd8   3212     RRCF      0x12,0x1,0x0                                                                                    
003fda   04e8     DECF      0xe8,0x0,0x0                                                                                    
003fdc   e1fb     BNZ       0x3fd4                                                                                          
003fde   0101     MOVLB     0x1                                                                                             
003fe0   5164     MOVF      0x64,0x0,0x1                                                                                    
003fe2   1412     ANDWF     0x12,0x0,0x0                                                                                    
003fe4   6e10     MOVWF     0x10,0x0                                                                                        
003fe6   5165     MOVF      0x65,0x0,0x1                                                                                    
003fe8   1413     ANDWF     0x13,0x0,0x0                                                                                    
003fea   6e11     MOVWF     0x11,0x0                                                                                        
003fec   0e00     MOVLW     0x0                                                                                             
003fee   80d8     BSF       0xd8,0x0,0x0                                                                                    
003ff0   5410     SUBFWB    0x10,0x0,0x0                                                                                    
003ff2   0e00     MOVLW     0x0                                                                                             
003ff4   5411     SUBFWB    0x11,0x0,0x0                                                                                    
003ff6   e205     BC        0x4002                                                                                          
003ff8   0e01     MOVLW     0x1                                                                                             
003ffa   6ee6     MOVWF     0xe6,0x0                                                                                        
003ffc   daf8     RCALL     0x45ee                                                                                          
003ffe   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004000   d003     BRA       0x4008         	else manchesterOut(0);                                                          C:\usb4all\fw\demo\user\manchester.c
004002   6ae6     CLRF      0xe6,0x0                                                                                        
004004   daf4     RCALL     0x45ee                                                                                          
004006   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	                                                                                C:\usb4all\fw\demo\user\manchester.c
004008   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\manchester.c
                                            * Function:        UserManchesterRelease(byte i)                                C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Overview:        This function release all the resources that the user module used, it is called by the framework  C:\usb4all\fw\demo\user\manchester.c
                                            *					when the module is close	                                                 C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
00400a   cfd9     MOVFF     0xfd9,0xfe6    void UserManchesterRelease(byte i){                                              C:\usb4all\fw\demo\user\manchester.c
00400c   ffe6                                                                                                               
00400e   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
004010   ffd9                                                                                                               
004012   0efe     MOVLW     0xfe           	unsetHandlerReceiveBuffer(i);                                                   C:\usb4all\fw\demo\user\manchester.c
004014   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
004016   ffe6                                                                                                               
004018   ecac     CALL      0x2358,0x0                                                                                      
00401a   f011                                                                                                               
00401c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00401e   0efe     MOVLW     0xfe           	unsetHandlerReceiveFunction(i);                                                 C:\usb4all\fw\demo\user\manchester.c
004020   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
004022   ffe6                                                                                                               
004024   ecd8     CALL      0x23b0,0x0                                                                                      
004026   f011                                                                                                               
004028   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00402a   0e88     MOVLW     0x88           	removePoolingFunction(&UserManchesterProcessIO);                                C:\usb4all\fw\demo\user\manchester.c
00402c   6ee6     MOVWF     0xe6,0x0                                                                                        
00402e   0e3f     MOVLW     0x3f                                                                                            
004030   6ee6     MOVWF     0xe6,0x0                                                                                        
004032   ec97     CALL      0x152e,0x0                                                                                      
004034   f00a                                                                                                               
004036   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004038   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00403a   8895     BSF       0x95,0x4,0x0   	TRISD |= MANCHESTER_BIT;                                                        C:\usb4all\fw\demo\user\manchester.c
00403c   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\manchester.c
00403e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
004040   ffd9                                                                                                               
004042   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           void termineDeMandar(){                                                          C:\usb4all\fw\demo\user\manchester.c
004044   daea     RCALL     0x461a         	apagoTimer();//apago timer                                                      C:\usb4all\fw\demo\user\manchester.c
                                           	//envio respuesta pq el modulo Manchester en la pc se queda bloqueado en un receive C:\usb4all\fw\demo\user\manchester.c
004046   0e03     MOVLW     0x3            	USBGenWrite2(usrManchesterHandler, 0x03);                                       C:\usb4all\fw\demo\user\manchester.c
004048   6ee6     MOVWF     0xe6,0x0                                                                                        
00404a   c161     MOVFF     0x161,0xfe6                                                                                     
00404c   ffe6                                                                                                               
00404e   ec36     CALL      0x266c,0x0                                                                                      
004050   f013                                                                                                               
004052   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004054   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	                                                                                C:\usb4all\fw\demo\user\manchester.c
004056   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
004058   cfd9     MOVFF     0xfd9,0xfe6    void startSendByte(byte sbyte){                                                  C:\usb4all\fw\demo\user\manchester.c
00405a   ffe6                                                                                                               
00405c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00405e   ffd9                                                                                                               
004060   0e02     MOVLW     0x2                                                                                             
004062   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	/*IEE 802.3 Aplico metodo con xor que consiste en hacer clock xor mensaje_prop  C:\usb4all\fw\demo\user\manchester.c
                                           	donde mensaje prop es construir un mensaje de 2 bytes a partir de uno de 1 byte repitiendo los  C:\usb4all\fw\demo\user\manchester.c
                                           	bits consecutivos, ver http://en.wikipedia.org/wiki/Manchester_code */          C:\usb4all\fw\demo\user\manchester.c
                                           	BYTE* sbyte_manch;                                                              C:\usb4all\fw\demo\user\manchester.c
004064   50d9     MOVF      0xd9,0x0,0x0       sbyte_manch = (BYTE*)&sbyte;                                                 C:\usb4all\fw\demo\user\manchester.c
004066   0ffe     ADDLW     0xfe                                                                                            
004068   6e10     MOVWF     0x10,0x0                                                                                        
00406a   0eff     MOVLW     0xff                                                                                            
00406c   20da     ADDWFC    0xda,0x0,0x0                                                                                    
00406e   6e11     MOVWF     0x11,0x0                                                                                        
004070   c010     MOVFF     0x10,0xfde                                                                                      
004072   ffde                                                                                                               
004074   c011     MOVFF     0x11,0xfdd                                                                                      
004076   ffdd                                                                                                               
004078   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b0 = sbyte_manch->b0;              C:\usb4all\fw\demo\user\manchester.c
00407a   ffe9                                                                                                               
00407c   cfdd     MOVFF     0xfdd,0xfea                                                                                     
00407e   ffea                                                                                                               
004080   0101     MOVLB     0x1                                                                                             
004082   9164     BCF       0x64,0x0,0x1                                                                                    
004084   50ef     MOVF      0xef,0x0,0x0                                                                                    
004086   0b01     ANDLW     0x1                                                                                             
004088   e001     BZ        0x408c                                                                                          
00408a   8164     BSF       0x64,0x0,0x1                                                                                    
00408c   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b1 = sbyte_manch->b0;              C:\usb4all\fw\demo\user\manchester.c
00408e   ffe9                                                                                                               
004090   cfdd     MOVFF     0xfdd,0xfea                                                                                     
004092   ffea                                                                                                               
004094   9364     BCF       0x64,0x1,0x1                                                                                    
004096   50ef     MOVF      0xef,0x0,0x0                                                                                    
004098   0b01     ANDLW     0x1                                                                                             
00409a   e001     BZ        0x409e                                                                                          
00409c   8364     BSF       0x64,0x1,0x1                                                                                    
00409e   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b2 = sbyte_manch->b1;              C:\usb4all\fw\demo\user\manchester.c
0040a0   ffe9                                                                                                               
0040a2   cfdd     MOVFF     0xfdd,0xfea                                                                                     
0040a4   ffea                                                                                                               
0040a6   9564     BCF       0x64,0x2,0x1                                                                                    
0040a8   50ef     MOVF      0xef,0x0,0x0                                                                                    
0040aa   0b02     ANDLW     0x2                                                                                             
0040ac   e001     BZ        0x40b0                                                                                          
0040ae   8564     BSF       0x64,0x2,0x1                                                                                    
0040b0   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b3 = sbyte_manch->b1;              C:\usb4all\fw\demo\user\manchester.c
0040b2   ffe9                                                                                                               
0040b4   cfdd     MOVFF     0xfdd,0xfea                                                                                     
0040b6   ffea                                                                                                               
0040b8   9764     BCF       0x64,0x3,0x1                                                                                    
0040ba   50ef     MOVF      0xef,0x0,0x0                                                                                    
0040bc   0b02     ANDLW     0x2                                                                                             
0040be   e001     BZ        0x40c2                                                                                          
0040c0   8764     BSF       0x64,0x3,0x1                                                                                    
0040c2   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b4 = sbyte_manch->b2;              C:\usb4all\fw\demo\user\manchester.c
0040c4   ffe9                                                                                                               
0040c6   cfdd     MOVFF     0xfdd,0xfea                                                                                     
0040c8   ffea                                                                                                               
0040ca   9964     BCF       0x64,0x4,0x1                                                                                    
0040cc   50ef     MOVF      0xef,0x0,0x0                                                                                    
0040ce   0b04     ANDLW     0x4                                                                                             
0040d0   e001     BZ        0x40d4                                                                                          
0040d2   8964     BSF       0x64,0x4,0x1                                                                                    
0040d4   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b5 = sbyte_manch->b2;              C:\usb4all\fw\demo\user\manchester.c
0040d6   ffe9                                                                                                               
0040d8   cfdd     MOVFF     0xfdd,0xfea                                                                                     
0040da   ffea                                                                                                               
0040dc   9b64     BCF       0x64,0x5,0x1                                                                                    
0040de   50ef     MOVF      0xef,0x0,0x0                                                                                    
0040e0   0b04     ANDLW     0x4                                                                                             
0040e2   e001     BZ        0x40e6                                                                                          
0040e4   8b64     BSF       0x64,0x5,0x1                                                                                    
0040e6   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b6 = sbyte_manch->b3;              C:\usb4all\fw\demo\user\manchester.c
0040e8   ffe9                                                                                                               
0040ea   cfdd     MOVFF     0xfdd,0xfea                                                                                     
0040ec   ffea                                                                                                               
0040ee   9d64     BCF       0x64,0x6,0x1                                                                                    
0040f0   50ef     MOVF      0xef,0x0,0x0                                                                                    
0040f2   0b08     ANDLW     0x8                                                                                             
0040f4   e001     BZ        0x40f8                                                                                          
0040f6   8d64     BSF       0x64,0x6,0x1                                                                                    
0040f8   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b7 = sbyte_manch->b3;              C:\usb4all\fw\demo\user\manchester.c
0040fa   ffe9                                                                                                               
0040fc   cfdd     MOVFF     0xfdd,0xfea                                                                                     
0040fe   ffea                                                                                                               
004100   9f64     BCF       0x64,0x7,0x1                                                                                    
004102   50ef     MOVF      0xef,0x0,0x0                                                                                    
004104   0b08     ANDLW     0x8                                                                                             
004106   e001     BZ        0x410a                                                                                          
004108   8f64     BSF       0x64,0x7,0x1                                                                                    
00410a   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b8 = sbyte_manch->b4;              C:\usb4all\fw\demo\user\manchester.c
00410c   ffe9                                                                                                               
00410e   cfdd     MOVFF     0xfdd,0xfea                                                                                     
004110   ffea                                                                                                               
004112   9165     BCF       0x65,0x0,0x1                                                                                    
004114   50ef     MOVF      0xef,0x0,0x0                                                                                    
004116   0b10     ANDLW     0x10                                                                                            
004118   e001     BZ        0x411c                                                                                          
00411a   8165     BSF       0x65,0x0,0x1                                                                                    
00411c   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b9 = sbyte_manch->b4;              C:\usb4all\fw\demo\user\manchester.c
00411e   ffe9                                                                                                               
004120   cfdd     MOVFF     0xfdd,0xfea                                                                                     
004122   ffea                                                                                                               
004124   9365     BCF       0x65,0x1,0x1                                                                                    
004126   50ef     MOVF      0xef,0x0,0x0                                                                                    
004128   0b10     ANDLW     0x10                                                                                            
00412a   e001     BZ        0x412e                                                                                          
00412c   8365     BSF       0x65,0x1,0x1                                                                                    
00412e   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b10 = sbyte_manch->b5;             C:\usb4all\fw\demo\user\manchester.c
004130   ffe9                                                                                                               
004132   cfdd     MOVFF     0xfdd,0xfea                                                                                     
004134   ffea                                                                                                               
004136   9565     BCF       0x65,0x2,0x1                                                                                    
004138   50ef     MOVF      0xef,0x0,0x0                                                                                    
00413a   0b20     ANDLW     0x20                                                                                            
00413c   e001     BZ        0x4140                                                                                          
00413e   8565     BSF       0x65,0x2,0x1                                                                                    
004140   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b11 = sbyte_manch->b5;             C:\usb4all\fw\demo\user\manchester.c
004142   ffe9                                                                                                               
004144   cfdd     MOVFF     0xfdd,0xfea                                                                                     
004146   ffea                                                                                                               
004148   9765     BCF       0x65,0x3,0x1                                                                                    
00414a   50ef     MOVF      0xef,0x0,0x0                                                                                    
00414c   0b20     ANDLW     0x20                                                                                            
00414e   e001     BZ        0x4152                                                                                          
004150   8765     BSF       0x65,0x3,0x1                                                                                    
004152   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b12 = sbyte_manch->b6;             C:\usb4all\fw\demo\user\manchester.c
004154   ffe9                                                                                                               
004156   cfdd     MOVFF     0xfdd,0xfea                                                                                     
004158   ffea                                                                                                               
00415a   9965     BCF       0x65,0x4,0x1                                                                                    
00415c   50ef     MOVF      0xef,0x0,0x0                                                                                    
00415e   0b40     ANDLW     0x40                                                                                            
004160   e001     BZ        0x4164                                                                                          
004162   8965     BSF       0x65,0x4,0x1                                                                                    
004164   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b13 = sbyte_manch->b6;             C:\usb4all\fw\demo\user\manchester.c
004166   ffe9                                                                                                               
004168   cfdd     MOVFF     0xfdd,0xfea                                                                                     
00416a   ffea                                                                                                               
00416c   9b65     BCF       0x65,0x5,0x1                                                                                    
00416e   50ef     MOVF      0xef,0x0,0x0                                                                                    
004170   0b40     ANDLW     0x40                                                                                            
004172   e001     BZ        0x4176                                                                                          
004174   8b65     BSF       0x65,0x5,0x1                                                                                    
004176   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b14 = sbyte_manch->b7;             C:\usb4all\fw\demo\user\manchester.c
004178   ffe9                                                                                                               
00417a   cfdd     MOVFF     0xfdd,0xfea                                                                                     
00417c   ffea                                                                                                               
00417e   9d65     BCF       0x65,0x6,0x1                                                                                    
004180   50ef     MOVF      0xef,0x0,0x0                                                                                    
004182   0b80     ANDLW     0x80                                                                                            
004184   e001     BZ        0x4188                                                                                          
004186   8d65     BSF       0x65,0x6,0x1                                                                                    
004188   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b15 = sbyte_manch->b7;             C:\usb4all\fw\demo\user\manchester.c
00418a   ffe9                                                                                                               
00418c   cfdd     MOVFF     0xfdd,0xfea                                                                                     
00418e   ffea                                                                                                               
004190   9f65     BCF       0x65,0x7,0x1                                                                                    
004192   50ef     MOVF      0xef,0x0,0x0                                                                                    
004194   0b80     ANDLW     0x80                                                                                            
004196   e001     BZ        0x419a                                                                                          
004198   8f65     BSF       0x65,0x7,0x1                                                                                    
00419a   0eaa     MOVLW     0xaa               ((MANCHESTER_DATA_TO_SEND*)&byteManchester)->m_data ^= CLOCK_PATTERN;        C:\usb4all\fw\demo\user\manchester.c
00419c   1b64     XORWF     0x64,0x1,0x1                                                                                    
00419e   1b65     XORWF     0x65,0x1,0x1                                                                                    
                                               //inicializo sendingBit                                                      C:\usb4all\fw\demo\user\manchester.c
0041a0   6b66     CLRF      0x66,0x1       	sendingBit=0;                                                                   C:\usb4all\fw\demo\user\manchester.c
0041a2   0e02     MOVLW     0x2            }                                                                                C:\usb4all\fw\demo\user\manchester.c
0041a4   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0041a6   e202     BC        0x41ac                                                                                          
0041a8   6ae1     CLRF      0xe1,0x0                                                                                        
0041aa   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0041ac   6ee1     MOVWF     0xe1,0x0                                                                                        
0041ae   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0041b0   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0041b2   ffd9                                                                                                               
0041b4   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           			                                                                              C:\usb4all\fw\demo\user\manchester.c
0041b6   cfd9     MOVFF     0xfd9,0xfe6    void startSendByteThomas(byte sbyte){                                            C:\usb4all\fw\demo\user\manchester.c
0041b8   ffe6                                                                                                               
0041ba   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0041bc   ffd9                                                                                                               
0041be   0e02     MOVLW     0x2                                                                                             
0041c0   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	/*IEE 802.3 Aplico metodo con xor que consiste en hacer clock xor mensaje_prop  C:\usb4all\fw\demo\user\manchester.c
                                           	donde mensaje prop es construir un mensaje de 2 bytes a partir de uno de 1 byte repitiendo los  C:\usb4all\fw\demo\user\manchester.c
                                           	bits consecutivos, ver http://en.wikipedia.org/wiki/Manchester_code */          C:\usb4all\fw\demo\user\manchester.c
                                           	BYTE* sbyte_manch;                                                              C:\usb4all\fw\demo\user\manchester.c
0041c2   50d9     MOVF      0xd9,0x0,0x0       sbyte_manch = (BYTE*)&sbyte;                                                 C:\usb4all\fw\demo\user\manchester.c
0041c4   0ffe     ADDLW     0xfe                                                                                            
0041c6   6e10     MOVWF     0x10,0x0                                                                                        
0041c8   0eff     MOVLW     0xff                                                                                            
0041ca   20da     ADDWFC    0xda,0x0,0x0                                                                                    
0041cc   6e11     MOVWF     0x11,0x0                                                                                        
0041ce   c010     MOVFF     0x10,0xfde                                                                                      
0041d0   ffde                                                                                                               
0041d2   c011     MOVFF     0x11,0xfdd                                                                                      
0041d4   ffdd                                                                                                               
0041d6   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b0 = sbyte_manch->b0;              C:\usb4all\fw\demo\user\manchester.c
0041d8   ffe9                                                                                                               
0041da   cfdd     MOVFF     0xfdd,0xfea                                                                                     
0041dc   ffea                                                                                                               
0041de   0101     MOVLB     0x1                                                                                             
0041e0   9164     BCF       0x64,0x0,0x1                                                                                    
0041e2   50ef     MOVF      0xef,0x0,0x0                                                                                    
0041e4   0b01     ANDLW     0x1                                                                                             
0041e6   e001     BZ        0x41ea                                                                                          
0041e8   8164     BSF       0x64,0x0,0x1                                                                                    
0041ea   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b1 = sbyte_manch->b0;              C:\usb4all\fw\demo\user\manchester.c
0041ec   ffe9                                                                                                               
0041ee   cfdd     MOVFF     0xfdd,0xfea                                                                                     
0041f0   ffea                                                                                                               
0041f2   9364     BCF       0x64,0x1,0x1                                                                                    
0041f4   50ef     MOVF      0xef,0x0,0x0                                                                                    
0041f6   0b01     ANDLW     0x1                                                                                             
0041f8   e001     BZ        0x41fc                                                                                          
0041fa   8364     BSF       0x64,0x1,0x1                                                                                    
0041fc   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b2 = sbyte_manch->b1;              C:\usb4all\fw\demo\user\manchester.c
0041fe   ffe9                                                                                                               
004200   cfdd     MOVFF     0xfdd,0xfea                                                                                     
004202   ffea                                                                                                               
004204   9564     BCF       0x64,0x2,0x1                                                                                    
004206   50ef     MOVF      0xef,0x0,0x0                                                                                    
004208   0b02     ANDLW     0x2                                                                                             
00420a   e001     BZ        0x420e                                                                                          
00420c   8564     BSF       0x64,0x2,0x1                                                                                    
00420e   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b3 = sbyte_manch->b1;              C:\usb4all\fw\demo\user\manchester.c
004210   ffe9                                                                                                               
004212   cfdd     MOVFF     0xfdd,0xfea                                                                                     
004214   ffea                                                                                                               
004216   9764     BCF       0x64,0x3,0x1                                                                                    
004218   50ef     MOVF      0xef,0x0,0x0                                                                                    
00421a   0b02     ANDLW     0x2                                                                                             
00421c   e001     BZ        0x4220                                                                                          
00421e   8764     BSF       0x64,0x3,0x1                                                                                    
004220   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b4 = sbyte_manch->b2;              C:\usb4all\fw\demo\user\manchester.c
004222   ffe9                                                                                                               
004224   cfdd     MOVFF     0xfdd,0xfea                                                                                     
004226   ffea                                                                                                               
004228   9964     BCF       0x64,0x4,0x1                                                                                    
00422a   50ef     MOVF      0xef,0x0,0x0                                                                                    
00422c   0b04     ANDLW     0x4                                                                                             
00422e   e001     BZ        0x4232                                                                                          
004230   8964     BSF       0x64,0x4,0x1                                                                                    
004232   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b5 = sbyte_manch->b2;              C:\usb4all\fw\demo\user\manchester.c
004234   ffe9                                                                                                               
004236   cfdd     MOVFF     0xfdd,0xfea                                                                                     
004238   ffea                                                                                                               
00423a   9b64     BCF       0x64,0x5,0x1                                                                                    
00423c   50ef     MOVF      0xef,0x0,0x0                                                                                    
00423e   0b04     ANDLW     0x4                                                                                             
004240   e001     BZ        0x4244                                                                                          
004242   8b64     BSF       0x64,0x5,0x1                                                                                    
004244   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b6 = sbyte_manch->b3;              C:\usb4all\fw\demo\user\manchester.c
004246   ffe9                                                                                                               
004248   cfdd     MOVFF     0xfdd,0xfea                                                                                     
00424a   ffea                                                                                                               
00424c   9d64     BCF       0x64,0x6,0x1                                                                                    
00424e   50ef     MOVF      0xef,0x0,0x0                                                                                    
004250   0b08     ANDLW     0x8                                                                                             
004252   e001     BZ        0x4256                                                                                          
004254   8d64     BSF       0x64,0x6,0x1                                                                                    
004256   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b7 = sbyte_manch->b3;              C:\usb4all\fw\demo\user\manchester.c
004258   ffe9                                                                                                               
00425a   cfdd     MOVFF     0xfdd,0xfea                                                                                     
00425c   ffea                                                                                                               
00425e   9f64     BCF       0x64,0x7,0x1                                                                                    
004260   50ef     MOVF      0xef,0x0,0x0                                                                                    
004262   0b08     ANDLW     0x8                                                                                             
004264   e001     BZ        0x4268                                                                                          
004266   8f64     BSF       0x64,0x7,0x1                                                                                    
004268   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b8 = sbyte_manch->b4;              C:\usb4all\fw\demo\user\manchester.c
00426a   ffe9                                                                                                               
00426c   cfdd     MOVFF     0xfdd,0xfea                                                                                     
00426e   ffea                                                                                                               
004270   9165     BCF       0x65,0x0,0x1                                                                                    
004272   50ef     MOVF      0xef,0x0,0x0                                                                                    
004274   0b10     ANDLW     0x10                                                                                            
004276   e001     BZ        0x427a                                                                                          
004278   8165     BSF       0x65,0x0,0x1                                                                                    
00427a   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b9 = sbyte_manch->b4;              C:\usb4all\fw\demo\user\manchester.c
00427c   ffe9                                                                                                               
00427e   cfdd     MOVFF     0xfdd,0xfea                                                                                     
004280   ffea                                                                                                               
004282   9365     BCF       0x65,0x1,0x1                                                                                    
004284   50ef     MOVF      0xef,0x0,0x0                                                                                    
004286   0b10     ANDLW     0x10                                                                                            
004288   e001     BZ        0x428c                                                                                          
00428a   8365     BSF       0x65,0x1,0x1                                                                                    
00428c   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b10 = sbyte_manch->b5;             C:\usb4all\fw\demo\user\manchester.c
00428e   ffe9                                                                                                               
004290   cfdd     MOVFF     0xfdd,0xfea                                                                                     
004292   ffea                                                                                                               
004294   9565     BCF       0x65,0x2,0x1                                                                                    
004296   50ef     MOVF      0xef,0x0,0x0                                                                                    
004298   0b20     ANDLW     0x20                                                                                            
00429a   e001     BZ        0x429e                                                                                          
00429c   8565     BSF       0x65,0x2,0x1                                                                                    
00429e   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b11 = sbyte_manch->b5;             C:\usb4all\fw\demo\user\manchester.c
0042a0   ffe9                                                                                                               
0042a2   cfdd     MOVFF     0xfdd,0xfea                                                                                     
0042a4   ffea                                                                                                               
0042a6   9765     BCF       0x65,0x3,0x1                                                                                    
0042a8   50ef     MOVF      0xef,0x0,0x0                                                                                    
0042aa   0b20     ANDLW     0x20                                                                                            
0042ac   e001     BZ        0x42b0                                                                                          
0042ae   8765     BSF       0x65,0x3,0x1                                                                                    
0042b0   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b12 = sbyte_manch->b6;             C:\usb4all\fw\demo\user\manchester.c
0042b2   ffe9                                                                                                               
0042b4   cfdd     MOVFF     0xfdd,0xfea                                                                                     
0042b6   ffea                                                                                                               
0042b8   9965     BCF       0x65,0x4,0x1                                                                                    
0042ba   50ef     MOVF      0xef,0x0,0x0                                                                                    
0042bc   0b40     ANDLW     0x40                                                                                            
0042be   e001     BZ        0x42c2                                                                                          
0042c0   8965     BSF       0x65,0x4,0x1                                                                                    
0042c2   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b13 = sbyte_manch->b6;             C:\usb4all\fw\demo\user\manchester.c
0042c4   ffe9                                                                                                               
0042c6   cfdd     MOVFF     0xfdd,0xfea                                                                                     
0042c8   ffea                                                                                                               
0042ca   9b65     BCF       0x65,0x5,0x1                                                                                    
0042cc   50ef     MOVF      0xef,0x0,0x0                                                                                    
0042ce   0b40     ANDLW     0x40                                                                                            
0042d0   e001     BZ        0x42d4                                                                                          
0042d2   8b65     BSF       0x65,0x5,0x1                                                                                    
0042d4   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b14 = sbyte_manch->b7;             C:\usb4all\fw\demo\user\manchester.c
0042d6   ffe9                                                                                                               
0042d8   cfdd     MOVFF     0xfdd,0xfea                                                                                     
0042da   ffea                                                                                                               
0042dc   9d65     BCF       0x65,0x6,0x1                                                                                    
0042de   50ef     MOVF      0xef,0x0,0x0                                                                                    
0042e0   0b80     ANDLW     0x80                                                                                            
0042e2   e001     BZ        0x42e6                                                                                          
0042e4   8d65     BSF       0x65,0x6,0x1                                                                                    
0042e6   cfde     MOVFF     0xfde,0xfe9    	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->b15 = sbyte_manch->b7;             C:\usb4all\fw\demo\user\manchester.c
0042e8   ffe9                                                                                                               
0042ea   cfdd     MOVFF     0xfdd,0xfea                                                                                     
0042ec   ffea                                                                                                               
0042ee   9f65     BCF       0x65,0x7,0x1                                                                                    
0042f0   50ef     MOVF      0xef,0x0,0x0                                                                                    
0042f2   0b80     ANDLW     0x80                                                                                            
0042f4   e001     BZ        0x42f8                                                                                          
0042f6   8f65     BSF       0x65,0x7,0x1                                                                                    
0042f8   0eaa     MOVLW     0xaa               ((MANCHESTER_DATA_TO_SEND*)&byteManchester)->m_data ^= CLOCK_PATTERN;        C:\usb4all\fw\demo\user\manchester.c
0042fa   1b64     XORWF     0x64,0x1,0x1                                                                                    
0042fc   1b65     XORWF     0x65,0x1,0x1                                                                                    
0042fe   1f64     COMF      0x64,0x1,0x1   	((MANCHESTER_DATA_TO_SEND*)&byteManchester)->m_data =  ~((MANCHESTER_DATA_TO_SEND*)&byteManchester)->m_data; C:\usb4all\fw\demo\user\manchester.c
004300   1f65     COMF      0x65,0x1,0x1                                                                                    
                                               //inicializo sendingBit                                                      C:\usb4all\fw\demo\user\manchester.c
004302   6b66     CLRF      0x66,0x1       	sendingBit=0;                                                                   C:\usb4all\fw\demo\user\manchester.c
004304   0e02     MOVLW     0x2            }                                                                                C:\usb4all\fw\demo\user\manchester.c
004306   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
004308   e202     BC        0x430e                                                                                          
00430a   6ae1     CLRF      0xe1,0x0                                                                                        
00430c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00430e   6ee1     MOVWF     0xe1,0x0                                                                                        
004310   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004312   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
004314   ffd9                                                                                                               
004316   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\manchester.c
                                            * Function:        UserManchesterReceived(byte* recBuffPtr, byte len)           C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Overview:        This function manages the comunication with the pc           C:\usb4all\fw\demo\user\manchester.c
                                            *                                                                               C:\usb4all\fw\demo\user\manchester.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\manchester.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
004318   cfd9     MOVFF     0xfd9,0xfe6    void UserManchesterReceived(byte* recBuffPtr, byte len){                         C:\usb4all\fw\demo\user\manchester.c
00431a   ffe6                                                                                                               
00431c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00431e   ffd9                                                                                                               
004320   0e0b     MOVLW     0xb                                                                                             
004322   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	  byte index;                                                                   C:\usb4all\fw\demo\user\manchester.c
004324   50d9     MOVF      0xd9,0x0,0x0   	  char mens[9] = "Is Alive";	                                                   C:\usb4all\fw\demo\user\manchester.c
004326   0f01     ADDLW     0x1                                                                                             
004328   6ee9     MOVWF     0xe9,0x0                                                                                        
00432a   cfda     MOVFF     0xfda,0xfea                                                                                     
00432c   ffea                                                                                                               
00432e   0e49     MOVLW     0x49                                                                                            
004330   6eee     MOVWF     0xee,0x0                                                                                        
004332   0e73     MOVLW     0x73                                                                                            
004334   6eee     MOVWF     0xee,0x0                                                                                        
004336   0e20     MOVLW     0x20                                                                                            
004338   6eee     MOVWF     0xee,0x0                                                                                        
00433a   0e41     MOVLW     0x41                                                                                            
00433c   6eee     MOVWF     0xee,0x0                                                                                        
00433e   0e6c     MOVLW     0x6c                                                                                            
004340   6eee     MOVWF     0xee,0x0                                                                                        
004342   0e69     MOVLW     0x69                                                                                            
004344   6eee     MOVWF     0xee,0x0                                                                                        
004346   0e76     MOVLW     0x76                                                                                            
004348   6eee     MOVWF     0xee,0x0                                                                                        
00434a   0e65     MOVLW     0x65                                                                                            
00434c   6eee     MOVWF     0xee,0x0                                                                                        
00434e   6aee     CLRF      0xee,0x0                                                                                        
004350   0e0a     MOVLW     0xa                  byte userManchesterCounter = 0;                                            C:\usb4all\fw\demo\user\manchester.c
004352   6adb     CLRF      0xdb,0x0                                                                                        
004354   0efd     MOVLW     0xfd                 switch(((MANCHESTER_DATA_PACKET*)recBuffPtr)->CMD)                         C:\usb4all\fw\demo\user\manchester.c
004356   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004358   ffe9                                                                                                               
00435a   0efe     MOVLW     0xfe                                                                                            
00435c   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00435e   ffea                                                                                                               
004360   50ef     MOVF      0xef,0x0,0x0                                                                                    
004362   0a05     XORLW     0x5                                                                                             
004364   e101     BNZ       0x4368                                                                                          
004366   d11b     BRA       0x459e                                                                                          
004368   0afa     XORLW     0xfa                                                                                            
00436a   e101     BNZ       0x436e                                                                                          
00436c   d116     BRA       0x459a                                                                                          
00436e   0adf     XORLW     0xdf                                                                                            
004370   e101     BNZ       0x4374                                                                                          
004372   d0cf     BRA       0x4512                                                                                          
004374   0a31     XORLW     0x31                                                                                            
004376   e101     BNZ       0x437a                                                                                          
004378   d088     BRA       0x448a                                                                                          
00437a   0a01     XORLW     0x1                                                                                             
00437c   e042     BZ        0x4402                                                                                          
00437e   0a10     XORLW     0x10                                                                                            
004380   e001     BZ        0x4384                                                                                          
004382   d11b     BRA       0x45ba                                                                                          
                                                 {                                                                          C:\usb4all\fw\demo\user\manchester.c
                                                   case READ_VERSION:                                                       C:\usb4all\fw\demo\user\manchester.c
                                                         //dataPacket._byte[1] is len                                       C:\usb4all\fw\demo\user\manchester.c
004384   0efd     MOVLW     0xfd           			  ((MANCHESTER_DATA_PACKET*)sendBufferUsrManchester)->_byte[0] = ((MANCHESTER_DATA_PACKET*)recBuffPtr)->_byte[0];  C:\usb4all\fw\demo\user\manchester.c
004386   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004388   ffe9                                                                                                               
00438a   0efe     MOVLW     0xfe                                                                                            
00438c   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00438e   ffea                                                                                                               
004390   50ef     MOVF      0xef,0x0,0x0                                                                                    
004392   6ee6     MOVWF     0xe6,0x0                                                                                        
004394   c162     MOVFF     0x162,0xfe9                                                                                     
004396   ffe9                                                                                                               
004398   c163     MOVFF     0x163,0xfea                                                                                     
00439a   ffea                                                                                                               
00439c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00439e   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0043a0   6eef     MOVWF     0xef,0x0                                                                                        
0043a2   0efd     MOVLW     0xfd           			  ((MANCHESTER_DATA_PACKET*)sendBufferUsrManchester)->_byte[1] = ((MANCHESTER_DATA_PACKET*)recBuffPtr)->_byte[1];  C:\usb4all\fw\demo\user\manchester.c
0043a4   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0043a6   ffe9                                                                                                               
0043a8   0efe     MOVLW     0xfe                                                                                            
0043aa   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0043ac   ffea                                                                                                               
0043ae   0e01     MOVLW     0x1                                                                                             
0043b0   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0043b2   0e00     MOVLW     0x0                                                                                             
0043b4   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0043b6   50ef     MOVF      0xef,0x0,0x0                                                                                    
0043b8   6ee6     MOVWF     0xe6,0x0                                                                                        
0043ba   c162     MOVFF     0x162,0xfe9                                                                                     
0043bc   ffe9                                                                                                               
0043be   c163     MOVFF     0x163,0xfea                                                                                     
0043c0   ffea                                                                                                               
0043c2   0e01     MOVLW     0x1                                                                                             
0043c4   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0043c6   0e00     MOVLW     0x0                                                                                             
0043c8   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0043ca   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0043cc   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0043ce   6eef     MOVWF     0xef,0x0                                                                                        
0043d0   c162     MOVFF     0x162,0xfe9                  ((MANCHESTER_DATA_PACKET*)sendBufferUsrManchester)->_byte[2] = MANCHESTER_MINOR_VERSION; C:\usb4all\fw\demo\user\manchester.c
0043d2   ffe9                                                                                                               
0043d4   c163     MOVFF     0x163,0xfea                                                                                     
0043d6   ffea                                                                                                               
0043d8   0e02     MOVLW     0x2                                                                                             
0043da   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0043dc   0e00     MOVLW     0x0                                                                                             
0043de   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0043e0   0e0d     MOVLW     0xd                                                                                             
0043e2   6eef     MOVWF     0xef,0x0                                                                                        
0043e4   c162     MOVFF     0x162,0xfe9                  ((MANCHESTER_DATA_PACKET*)sendBufferUsrManchester)->_byte[3] = MANCHESTER_MAJOR_VERSION; C:\usb4all\fw\demo\user\manchester.c
0043e6   ffe9                                                                                                               
0043e8   c163     MOVFF     0x163,0xfea                                                                                     
0043ea   ffea                                                                                                               
0043ec   0e03     MOVLW     0x3                                                                                             
0043ee   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0043f0   0e00     MOVLW     0x0                                                                                             
0043f2   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0043f4   6aef     CLRF      0xef,0x0                                                                                        
0043f6   0e04     MOVLW     0x4                          userManchesterCounter=0x04;                                        C:\usb4all\fw\demo\user\manchester.c
0043f8   6ef3     MOVWF     0xf3,0x0                                                                                        
0043fa   0e0a     MOVLW     0xa                                                                                             
0043fc   cff3     MOVFF     0xff3,0xfdb                                                                                     
0043fe   ffdb                                                                                                               
004400   d0dd     BRA       0x45bc                       break;                                                             C:\usb4all\fw\demo\user\manchester.c
                                           	                                                                                C:\usb4all\fw\demo\user\manchester.c
                                                   case SENDBYTE:                                                           C:\usb4all\fw\demo\user\manchester.c
                                                         //dejo preparado el paquete de respuesta                           C:\usb4all\fw\demo\user\manchester.c
004402   0efd     MOVLW     0xfd           			  ((MANCHESTER_DATA_PACKET*)sendBufferUsrManchester)->_byte[0] = ((MANCHESTER_DATA_PACKET*)recBuffPtr)->_byte[0];  C:\usb4all\fw\demo\user\manchester.c
004404   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004406   ffe9                                                                                                               
004408   0efe     MOVLW     0xfe                                                                                            
00440a   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00440c   ffea                                                                                                               
00440e   50ef     MOVF      0xef,0x0,0x0                                                                                    
004410   6ee6     MOVWF     0xe6,0x0                                                                                        
004412   c162     MOVFF     0x162,0xfe9                                                                                     
004414   ffe9                                                                                                               
004416   c163     MOVFF     0x163,0xfea                                                                                     
004418   ffea                                                                                                               
00441a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00441c   50e7     MOVF      0xe7,0x0,0x0                                                                                    
00441e   6eef     MOVWF     0xef,0x0                                                                                        
004420   0efd     MOVLW     0xfd           			  ((MANCHESTER_DATA_PACKET*)sendBufferUsrManchester)->_byte[1] = ((MANCHESTER_DATA_PACKET*)recBuffPtr)->_byte[1];  C:\usb4all\fw\demo\user\manchester.c
004422   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004424   ffe9                                                                                                               
004426   0efe     MOVLW     0xfe                                                                                            
004428   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00442a   ffea                                                                                                               
00442c   0e01     MOVLW     0x1                                                                                             
00442e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004430   0e00     MOVLW     0x0                                                                                             
004432   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004434   50ef     MOVF      0xef,0x0,0x0                                                                                    
004436   6ee6     MOVWF     0xe6,0x0                                                                                        
004438   c162     MOVFF     0x162,0xfe9                                                                                     
00443a   ffe9                                                                                                               
00443c   c163     MOVFF     0x163,0xfea                                                                                     
00443e   ffea                                                                                                               
004440   0e01     MOVLW     0x1                                                                                             
004442   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004444   0e00     MOVLW     0x0                                                                                             
004446   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004448   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00444a   50e7     MOVF      0xe7,0x0,0x0                                                                                    
00444c   6eef     MOVWF     0xef,0x0                                                                                        
00444e   c162     MOVFF     0x162,0xfe9                  ((MANCHESTER_DATA_PACKET*)sendBufferUsrManchester)->_byte[2] = ACK;  C:\usb4all\fw\demo\user\manchester.c
004450   ffe9                                                                                                               
004452   c163     MOVFF     0x163,0xfea                                                                                     
004454   ffea                                                                                                               
004456   0e02     MOVLW     0x2                                                                                             
004458   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00445a   0e00     MOVLW     0x0                                                                                             
00445c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00445e   0e01     MOVLW     0x1                                                                                             
004460   6eef     MOVWF     0xef,0x0                                                                                        
004462   0efd     MOVLW     0xfd           			  startSendByte(((MANCHESTER_DATA_PACKET*)recBuffPtr)->_byte[2]);             C:\usb4all\fw\demo\user\manchester.c
004464   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004466   ffe9                                                                                                               
004468   0efe     MOVLW     0xfe                                                                                            
00446a   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00446c   ffea                                                                                                               
00446e   0e02     MOVLW     0x2                                                                                             
004470   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004472   0e00     MOVLW     0x0                                                                                             
004474   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004476   50ef     MOVF      0xef,0x0,0x0                                                                                    
004478   6ee6     MOVWF     0xe6,0x0                                                                                        
00447a   ddee     RCALL     0x4058                                                                                          
00447c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00447e   0e03     MOVLW     0x3            			  userManchesterCounter=0x03;                                                 C:\usb4all\fw\demo\user\manchester.c
004480   6ef3     MOVWF     0xf3,0x0                                                                                        
004482   0e0a     MOVLW     0xa                                                                                             
004484   cff3     MOVFF     0xff3,0xfdb                                                                                     
004486   ffdb                                                                                                               
004488   d099     BRA       0x45bc                       break;                                                             C:\usb4all\fw\demo\user\manchester.c
                                                   case SENDBYTE_T:                                                         C:\usb4all\fw\demo\user\manchester.c
                                                         //dejo preparado el paquete de respuesta                           C:\usb4all\fw\demo\user\manchester.c
00448a   0efd     MOVLW     0xfd           			  ((MANCHESTER_DATA_PACKET*)sendBufferUsrManchester)->_byte[0] = ((MANCHESTER_DATA_PACKET*)recBuffPtr)->_byte[0];  C:\usb4all\fw\demo\user\manchester.c
00448c   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00448e   ffe9                                                                                                               
004490   0efe     MOVLW     0xfe                                                                                            
004492   cfdb     MOVFF     0xfdb,0xfea                                                                                     
004494   ffea                                                                                                               
004496   50ef     MOVF      0xef,0x0,0x0                                                                                    
004498   6ee6     MOVWF     0xe6,0x0                                                                                        
00449a   c162     MOVFF     0x162,0xfe9                                                                                     
00449c   ffe9                                                                                                               
00449e   c163     MOVFF     0x163,0xfea                                                                                     
0044a0   ffea                                                                                                               
0044a2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0044a4   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0044a6   6eef     MOVWF     0xef,0x0                                                                                        
0044a8   0efd     MOVLW     0xfd           			  ((MANCHESTER_DATA_PACKET*)sendBufferUsrManchester)->_byte[1] = ((MANCHESTER_DATA_PACKET*)recBuffPtr)->_byte[1];  C:\usb4all\fw\demo\user\manchester.c
0044aa   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0044ac   ffe9                                                                                                               
0044ae   0efe     MOVLW     0xfe                                                                                            
0044b0   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0044b2   ffea                                                                                                               
0044b4   0e01     MOVLW     0x1                                                                                             
0044b6   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0044b8   0e00     MOVLW     0x0                                                                                             
0044ba   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0044bc   50ef     MOVF      0xef,0x0,0x0                                                                                    
0044be   6ee6     MOVWF     0xe6,0x0                                                                                        
0044c0   c162     MOVFF     0x162,0xfe9                                                                                     
0044c2   ffe9                                                                                                               
0044c4   c163     MOVFF     0x163,0xfea                                                                                     
0044c6   ffea                                                                                                               
0044c8   0e01     MOVLW     0x1                                                                                             
0044ca   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0044cc   0e00     MOVLW     0x0                                                                                             
0044ce   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0044d0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0044d2   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0044d4   6eef     MOVWF     0xef,0x0                                                                                        
0044d6   c162     MOVFF     0x162,0xfe9                  ((MANCHESTER_DATA_PACKET*)sendBufferUsrManchester)->_byte[2] = ACK;  C:\usb4all\fw\demo\user\manchester.c
0044d8   ffe9                                                                                                               
0044da   c163     MOVFF     0x163,0xfea                                                                                     
0044dc   ffea                                                                                                               
0044de   0e02     MOVLW     0x2                                                                                             
0044e0   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0044e2   0e00     MOVLW     0x0                                                                                             
0044e4   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0044e6   0e01     MOVLW     0x1                                                                                             
0044e8   6eef     MOVWF     0xef,0x0                                                                                        
0044ea   0efd     MOVLW     0xfd           			  startSendByteThomas(((MANCHESTER_DATA_PACKET*)recBuffPtr)->_byte[2]);       C:\usb4all\fw\demo\user\manchester.c
0044ec   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0044ee   ffe9                                                                                                               
0044f0   0efe     MOVLW     0xfe                                                                                            
0044f2   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0044f4   ffea                                                                                                               
0044f6   0e02     MOVLW     0x2                                                                                             
0044f8   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0044fa   0e00     MOVLW     0x0                                                                                             
0044fc   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0044fe   50ef     MOVF      0xef,0x0,0x0                                                                                    
004500   6ee6     MOVWF     0xe6,0x0                                                                                        
004502   de59     RCALL     0x41b6                                                                                          
004504   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004506   0e03     MOVLW     0x3            			  userManchesterCounter=0x03;                                                 C:\usb4all\fw\demo\user\manchester.c
004508   6ef3     MOVWF     0xf3,0x0                                                                                        
00450a   0e0a     MOVLW     0xa                                                                                             
00450c   cff3     MOVFF     0xff3,0xfdb                                                                                     
00450e   ffdb                                                                                                               
004510   d055     BRA       0x45bc                       break;                                                             C:\usb4all\fw\demo\user\manchester.c
                                                   case DEBUG:                                                              C:\usb4all\fw\demo\user\manchester.c
                                           			  //dejo preparado el paquete de respuesta                                    C:\usb4all\fw\demo\user\manchester.c
004512   0efd     MOVLW     0xfd           			  ((MANCHESTER_DATA_PACKET*)sendBufferUsrManchester)->_byte[0] = ((MANCHESTER_DATA_PACKET*)recBuffPtr)->_byte[0];  C:\usb4all\fw\demo\user\manchester.c
004514   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004516   ffe9                                                                                                               
004518   0efe     MOVLW     0xfe                                                                                            
00451a   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00451c   ffea                                                                                                               
00451e   50ef     MOVF      0xef,0x0,0x0                                                                                    
004520   6ee6     MOVWF     0xe6,0x0                                                                                        
004522   c162     MOVFF     0x162,0xfe9                                                                                     
004524   ffe9                                                                                                               
004526   c163     MOVFF     0x163,0xfea                                                                                     
004528   ffea                                                                                                               
00452a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00452c   50e7     MOVF      0xe7,0x0,0x0                                                                                    
00452e   6eef     MOVWF     0xef,0x0                                                                                        
004530   0efd     MOVLW     0xfd           			  ((MANCHESTER_DATA_PACKET*)sendBufferUsrManchester)->_byte[1] = ((MANCHESTER_DATA_PACKET*)recBuffPtr)->_byte[1];  C:\usb4all\fw\demo\user\manchester.c
004532   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004534   ffe9                                                                                                               
004536   0efe     MOVLW     0xfe                                                                                            
004538   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00453a   ffea                                                                                                               
00453c   0e01     MOVLW     0x1                                                                                             
00453e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004540   0e00     MOVLW     0x0                                                                                             
004542   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004544   50ef     MOVF      0xef,0x0,0x0                                                                                    
004546   6ee6     MOVWF     0xe6,0x0                                                                                        
004548   c162     MOVFF     0x162,0xfe9                                                                                     
00454a   ffe9                                                                                                               
00454c   c163     MOVFF     0x163,0xfea                                                                                     
00454e   ffea                                                                                                               
004550   0e01     MOVLW     0x1                                                                                             
004552   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004554   0e00     MOVLW     0x0                                                                                             
004556   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004558   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00455a   50e7     MOVF      0xe7,0x0,0x0                                                                                    
00455c   6eef     MOVWF     0xef,0x0                                                                                        
00455e   0efd     MOVLW     0xfd                         manchesterOut(((MANCHESTER_DATA_PACKET*)recBuffPtr)->_byte[2]);    C:\usb4all\fw\demo\user\manchester.c
004560   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004562   ffe9                                                                                                               
004564   0efe     MOVLW     0xfe                                                                                            
004566   cfdb     MOVFF     0xfdb,0xfea                                                                                     
004568   ffea                                                                                                               
00456a   0e02     MOVLW     0x2                                                                                             
00456c   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00456e   0e00     MOVLW     0x0                                                                                             
004570   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004572   50ef     MOVF      0xef,0x0,0x0                                                                                    
004574   6ee6     MOVWF     0xe6,0x0                                                                                        
004576   d83b     RCALL     0x45ee                                                                                          
004578   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00457a   c162     MOVFF     0x162,0xfe9    		 	  ((MANCHESTER_DATA_PACKET*)sendBufferUsrManchester)->_byte[2] = ACK;        C:\usb4all\fw\demo\user\manchester.c
00457c   ffe9                                                                                                               
00457e   c163     MOVFF     0x163,0xfea                                                                                     
004580   ffea                                                                                                               
004582   0e02     MOVLW     0x2                                                                                             
004584   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004586   0e00     MOVLW     0x0                                                                                             
004588   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00458a   0e01     MOVLW     0x1                                                                                             
00458c   6eef     MOVWF     0xef,0x0                                                                                        
00458e   0e03     MOVLW     0x3            			  userManchesterCounter=0x03;                                                 C:\usb4all\fw\demo\user\manchester.c
004590   6ef3     MOVWF     0xf3,0x0                                                                                        
004592   0e0a     MOVLW     0xa                                                                                             
004594   cff3     MOVFF     0xff3,0xfdb                                                                                     
004596   ffdb                                                                                                               
004598   d011     BRA       0x45bc                       break;                                                             C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           		  case RESET:                                                                  C:\usb4all\fw\demo\user\manchester.c
00459a   00ff     RESET                                  Reset();                                                           C:\usb4all\fw\demo\user\manchester.c
00459c   d00f     BRA       0x45bc         			  break;                                                                      C:\usb4all\fw\demo\user\manchester.c
                                           		                                                                               C:\usb4all\fw\demo\user\manchester.c
                                           		 case MESS:                                                                    C:\usb4all\fw\demo\user\manchester.c
00459e   0e09     MOVLW     0x9            				sendMes(mens, sizeof(mens));                                                 C:\usb4all\fw\demo\user\manchester.c
0045a0   6ee6     MOVWF     0xe6,0x0                                                                                        
0045a2   50d9     MOVF      0xd9,0x0,0x0                                                                                    
0045a4   0f01     ADDLW     0x1                                                                                             
0045a6   6ee6     MOVWF     0xe6,0x0                                                                                        
0045a8   0e00     MOVLW     0x0                                                                                             
0045aa   20da     ADDWFC    0xda,0x0,0x0                                                                                    
0045ac   6ee6     MOVWF     0xe6,0x0                                                                                        
0045ae   ece0     CALL      0x19c0,0x0                                                                                      
0045b0   f00c                                                                                                               
0045b2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0045b4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0045b6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0045b8   d001     BRA       0x45bc                       break;                                                             C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           		 default:                                                                      C:\usb4all\fw\demo\user\manchester.c
0045ba   d000     BRA       0x45bc                       break;                                                             C:\usb4all\fw\demo\user\manchester.c
                                                 }//end switch(s)                                                           C:\usb4all\fw\demo\user\manchester.c
0045bc   0e0a     MOVLW     0xa                  if(userManchesterCounter != 0)                                             C:\usb4all\fw\demo\user\manchester.c
0045be   50db     MOVF      0xdb,0x0,0x0                                                                                    
0045c0   e00c     BZ        0x45da                                                                                          
                                                 {                                                                          C:\usb4all\fw\demo\user\manchester.c
0045c2   0104     MOVLB     0x4                      if(!mUSBGenTxIsBusy())                                                 C:\usb4all\fw\demo\user\manchester.c
0045c4   bf0c     BTFSC     0xc,0x7,0x1                                                                                     
0045c6   d009     BRA       0x45da                                                                                          
0045c8   0e0a     MOVLW     0xa                          USBGenWrite2(usrManchesterHandler, userManchesterCounter);         C:\usb4all\fw\demo\user\manchester.c
0045ca   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0045cc   ffe6                                                                                                               
0045ce   c161     MOVFF     0x161,0xfe6                                                                                     
0045d0   ffe6                                                                                                               
0045d2   ec36     CALL      0x266c,0x0                                                                                      
0045d4   f013                                                                                                               
0045d6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0045d8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                 }//end if  	  	                                                            C:\usb4all\fw\demo\user\manchester.c
0045da   0e0b     MOVLW     0xb            }//end UserManchesterReceived                                                    C:\usb4all\fw\demo\user\manchester.c
0045dc   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0045de   e202     BC        0x45e4                                                                                          
0045e0   6ae1     CLRF      0xe1,0x0                                                                                        
0045e2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0045e4   6ee1     MOVWF     0xe1,0x0                                                                                        
0045e6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0045e8   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0045ea   ffd9                                                                                                               
0045ec   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
0045ee   cfd9     MOVFF     0xfd9,0xfe6    void manchesterOut(byte valor){                                                  C:\usb4all\fw\demo\user\manchester.c
0045f0   ffe6                                                                                                               
0045f2   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0045f4   ffd9                                                                                                               
0045f6   0efe     MOVLW     0xfe               if (valor==0){                                                               C:\usb4all\fw\demo\user\manchester.c
0045f8   50db     MOVF      0xdb,0x0,0x0                                                                                    
0045fa   e102     BNZ       0x4600                                                                                          
0045fc   988c     BCF       0x8c,0x4,0x0   		MANCHESTER_PORT &= (255-MANCHESTER_BIT);                                       C:\usb4all\fw\demo\user\manchester.c
                                           	}                                                                               C:\usb4all\fw\demo\user\manchester.c
0045fe   d001     BRA       0x4602         	else {                                                                          C:\usb4all\fw\demo\user\manchester.c
004600   888c     BSF       0x8c,0x4,0x0   		MANCHESTER_PORT |= MANCHESTER_BIT;                                             C:\usb4all\fw\demo\user\manchester.c
                                           	}                                                                               C:\usb4all\fw\demo\user\manchester.c
004602   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\manchester.c
004604   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
004606   ffd9                                                                                                               
004608   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           void prendoTimer(void){                                                          C:\usb4all\fw\demo\user\manchester.c
                                           	//inicializo timer                                                              C:\usb4all\fw\demo\user\manchester.c
00460a   0e07     MOVLW     0x7            	T0CON = 0x07;                                                                   C:\usb4all\fw\demo\user\manchester.c
00460c   6ed5     MOVWF     0xd5,0x0                                                                                        
00460e   0e01     MOVLW     0x1            	TMR0L = 1;                                                                      C:\usb4all\fw\demo\user\manchester.c
004610   6ed6     MOVWF     0xd6,0x0                                                                                        
004612   6ed7     MOVWF     0xd7,0x0       	TMR0H = 1;                                                                      C:\usb4all\fw\demo\user\manchester.c
004614   94f2     BCF       0xf2,0x2,0x0   	INTCONbits.TMR0IF = 0;                                                          C:\usb4all\fw\demo\user\manchester.c
004616   8ed5     BSF       0xd5,0x7,0x0   	T0CONbits.TMR0ON  = TRUE;                                                       C:\usb4all\fw\demo\user\manchester.c
004618   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           void apagoTimer(void){                                                           C:\usb4all\fw\demo\user\manchester.c
00461a   9ed5     BCF       0xd5,0x7,0x0   	T0CONbits.TMR0ON  = FALSE;                                                      C:\usb4all\fw\demo\user\manchester.c
00461c   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                                                                                                            C:\usb4all\fw\demo\user\manchester.c
                                           /** EOF manchester.c ***************************************************************/ C:\usb4all\fw\demo\user\manchester.c
                                           /* Author               Date        Comment                                      C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                            * Rafael Fernandez    16/06/07 	Original                                        C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                            *                                                                               C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                            ********************************************************************/           C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           #include <p18cxxx.h>                                                             C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           #include "system\typedefs.h"                        // Required                  C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           #include "system\usb\usb.h"                         // Required                  C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           #include "io_cfg.h"                                 // Required                  C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           #include "dynamicISR.h"                              // Modifiable               C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           #include "system\usb\usb_compile_time_validation.h" // Optional                  C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           //#include "user\user.h"                                                         C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           //#include "user\handlerManager.h"                              // Modifiable    C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           volatile void ( *ISRFunction[MAX_ISR_FUNCTIONS]) (void) ;//arreglo de punteros a las funciones ISR de los modulos C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           volatile byte ISRListeners;                                                      C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           #pragma code sys                                                                 C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001ebe   cfd9     MOVFF     0xfd9,0xfe6    void initISRFunctions(void){                                                     C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001ec0   ffe6                                                                                                               
001ec2   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001ec4   ffd9                                                                                                               
001ec6   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	byte i;                                                                         C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001ec8   6adf     CLRF      0xdf,0x0       	for (i=0; i<MAX_ISR_FUNCTIONS;i++){                                             C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001eca   0e05     MOVLW     0x5                                                                                             
001ecc   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
001ece   e20d     BC        0x1eea                                                                                          
001ee6   2adf     INCF      0xdf,0x1,0x0                                                                                    
001ee8   d7f0     BRA       0x1eca                                                                                          
001ed0   6aea     CLRF      0xea,0x0       		ISRFunction[i] = 0; //supongo 0 = null                                         C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001ed2   34df     RLCF      0xdf,0x0,0x0                                                                                    
001ed4   0bfe     ANDLW     0xfe                                                                                            
001ed6   36ea     RLCF      0xea,0x1,0x0                                                                                    
001ed8   6ee9     MOVWF     0xe9,0x0                                                                                        
001eda   0e32     MOVLW     0x32                                                                                            
001edc   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
001ede   0e01     MOVLW     0x1                                                                                             
001ee0   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001ee2   6aee     CLRF      0xee,0x0                                                                                        
001ee4   6aed     CLRF      0xed,0x0                                                                                        
                                           	}                                                                               C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001eea   0101     MOVLB     0x1            	ISRListeners=0;							                                                          C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001eec   6b3c     CLRF      0x3c,0x1                                                                                        
001eee   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001ef0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001ef2   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001ef4   ffd9                                                                                                               
001ef6   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001ef8   cfd9     MOVFF     0xfd9,0xfe6    BOOL addISRFunction(volatile void (*ISRFun) (void)){                             C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001efa   ffe6                                                                                                               
001efc   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001efe   ffd9                                                                                                               
001f00   0e02     MOVLW     0x2                                                                                             
001f02   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
001f04   6adf     CLRF      0xdf,0x0       	byte i = 0;                                                                     C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001f06   0e01     MOVLW     0x1            	BOOL termine = FALSE;                                                           C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001f08   6adb     CLRF      0xdb,0x0                                                                                        
001f0a   0e05     MOVLW     0x5            	while (i<MAX_ISR_FUNCTIONS && !termine){                                        C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001f0c   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
001f0e   e223     BC        0x1f56                                                                                          
001f10   0e01     MOVLW     0x1                                                                                             
001f12   50db     MOVF      0xdb,0x0,0x0                                                                                    
001f14   e120     BNZ       0x1f56                                                                                          
001f54   d7da     BRA       0x1f0a                                                                                          
001f16   6aea     CLRF      0xea,0x0       		if ( ISRFunction[i] == 0) { //TODO ojo que cambie != por ==                    C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001f18   34df     RLCF      0xdf,0x0,0x0                                                                                    
001f1a   0bfe     ANDLW     0xfe                                                                                            
001f1c   36ea     RLCF      0xea,0x1,0x0                                                                                    
001f1e   6ee9     MOVWF     0xe9,0x0                                                                                        
001f20   0e32     MOVLW     0x32                                                                                            
001f22   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
001f24   0e01     MOVLW     0x1                                                                                             
001f26   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001f28   50ee     MOVF      0xee,0x0,0x0                                                                                    
001f2a   10ed     IORWF     0xed,0x0,0x0                                                                                    
001f2c   e112     BNZ       0x1f52                                                                                          
001f2e   52de     MOVF      0xde,0x1,0x0   			termine = TRUE;                                                               C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001f30   0e01     MOVLW     0x1                                                                                             
001f32   6edd     MOVWF     0xdd,0x0                                                                                        
001f34   6aea     CLRF      0xea,0x0       			ISRFunction[i] = ISRFun;                                                      C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001f36   34df     RLCF      0xdf,0x0,0x0                                                                                    
001f38   0bfe     ANDLW     0xfe                                                                                            
001f3a   36ea     RLCF      0xea,0x1,0x0                                                                                    
001f3c   6ee9     MOVWF     0xe9,0x0                                                                                        
001f3e   0e32     MOVLW     0x32                                                                                            
001f40   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
001f42   0e01     MOVLW     0x1                                                                                             
001f44   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001f46   0efd     MOVLW     0xfd                                                                                            
001f48   cfdb     MOVFF     0xfdb,0xfee                                                                                     
001f4a   ffee                                                                                                               
001f4c   0efe     MOVLW     0xfe                                                                                            
001f4e   cfdb     MOVFF     0xfdb,0xfed                                                                                     
001f50   ffed                                                                                                               
                                           		}                                                                              C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001f52   2adf     INCF      0xdf,0x1,0x0   		i++;                                                                           C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           	}                                                                               C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001f56   0e01     MOVLW     0x1            	if (!termine) return FALSE;                                                     C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001f58   50db     MOVF      0xdb,0x0,0x0                                                                                    
001f5a   e102     BNZ       0x1f60                                                                                          
001f5c   0e00     MOVLW     0x0                                                                                             
001f5e   d008     BRA       0x1f70                                                                                          
001f60   0101     MOVLB     0x1            	if ((ISRListeners++)==0){                                                       C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001f62   513c     MOVF      0x3c,0x0,0x1                                                                                    
001f64   2b3c     INCF      0x3c,0x1,0x1                                                                                    
001f66   0900     IORLW     0x0                                                                                             
001f68   e101     BNZ       0x1f6c                                                                                          
001f6a   8ef2     BSF       0xf2,0x7,0x0   		INTCONbits.GIE = 1; //cuando se agrega la primer funcion listener prendo ints globales  C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           		//mLED_3_On(); raro, no anda el debug                                          C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           	}                                                                               C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001f6c   0e01     MOVLW     0x1            	return TRUE;                                                                    C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001f6e   d000     BRA       0x1f70                                                                                          
001f70   6e10     MOVWF     0x10,0x0       } 		                                                                             C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001f72   0e02     MOVLW     0x2                                                                                             
001f74   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
001f76   e202     BC        0x1f7c                                                                                          
001f78   6ae1     CLRF      0xe1,0x0                                                                                        
001f7a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001f7c   6ee1     MOVWF     0xe1,0x0                                                                                        
001f7e   5010     MOVF      0x10,0x0,0x0                                                                                    
001f80   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001f82   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
001f84   ffd9                                                                                                               
001f86   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001f88   cfd9     MOVFF     0xfd9,0xfe6    BOOL removeISRFunction(volatile void (*ISRFun) (void)){                          C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001f8a   ffe6                                                                                                               
001f8c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
001f8e   ffd9                                                                                                               
001f90   0e02     MOVLW     0x2                                                                                             
001f92   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
001f94   6adf     CLRF      0xdf,0x0       	byte i=0;                                                                       C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001f96   0e01     MOVLW     0x1            	BOOL termine=FALSE;                                                             C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001f98   6adb     CLRF      0xdb,0x0                                                                                        
001f9a   0e05     MOVLW     0x5            	while (i<MAX_ISR_FUNCTIONS && !termine){                                        C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001f9c   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
001f9e   e228     BC        0x1ff0                                                                                          
001fa0   0e01     MOVLW     0x1                                                                                             
001fa2   50db     MOVF      0xdb,0x0,0x0                                                                                    
001fa4   e125     BNZ       0x1ff0                                                                                          
001fee   d7d5     BRA       0x1f9a                                                                                          
001fa6   6aea     CLRF      0xea,0x0       		if ( ISRFunction[i] == ISRFun) {                                               C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001fa8   34df     RLCF      0xdf,0x0,0x0                                                                                    
001faa   0bfe     ANDLW     0xfe                                                                                            
001fac   36ea     RLCF      0xea,0x1,0x0                                                                                    
001fae   6ee9     MOVWF     0xe9,0x0                                                                                        
001fb0   0e32     MOVLW     0x32                                                                                            
001fb2   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
001fb4   0e01     MOVLW     0x1                                                                                             
001fb6   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001fb8   cfee     MOVFF     0xfee,0x10                                                                                      
001fba   f010                                                                                                               
001fbc   cfef     MOVFF     0xfef,0x11                                                                                      
001fbe   f011                                                                                                               
001fc0   0efd     MOVLW     0xfd                                                                                            
001fc2   50db     MOVF      0xdb,0x0,0x0                                                                                    
001fc4   1810     XORWF     0x10,0x0,0x0                                                                                    
001fc6   e103     BNZ       0x1fce                                                                                          
001fc8   0efe     MOVLW     0xfe                                                                                            
001fca   50db     MOVF      0xdb,0x0,0x0                                                                                    
001fcc   1811     XORWF     0x11,0x0,0x0                                                                                    
001fce   e10e     BNZ       0x1fec                                                                                          
001fd0   52de     MOVF      0xde,0x1,0x0   			termine = TRUE;                                                               C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001fd2   0e01     MOVLW     0x1                                                                                             
001fd4   6edd     MOVWF     0xdd,0x0                                                                                        
001fd6   6aea     CLRF      0xea,0x0       			ISRFunction [i] = 0;                                                          C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001fd8   34df     RLCF      0xdf,0x0,0x0                                                                                    
001fda   0bfe     ANDLW     0xfe                                                                                            
001fdc   36ea     RLCF      0xea,0x1,0x0                                                                                    
001fde   6ee9     MOVWF     0xe9,0x0                                                                                        
001fe0   0e32     MOVLW     0x32                                                                                            
001fe2   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
001fe4   0e01     MOVLW     0x1                                                                                             
001fe6   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001fe8   6aee     CLRF      0xee,0x0                                                                                        
001fea   6aed     CLRF      0xed,0x0                                                                                        
                                           		}                                                                              C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001fec   2adf     INCF      0xdf,0x1,0x0   		i++;                                                                           C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           	}                                                                               C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001ff0   0e01     MOVLW     0x1            	if (!termine) return FALSE;                                                     C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001ff2   50db     MOVF      0xdb,0x0,0x0                                                                                    
001ff4   e102     BNZ       0x1ffa                                                                                          
001ff6   0e00     MOVLW     0x0                                                                                             
001ff8   d006     BRA       0x2006                                                                                          
001ffa   0101     MOVLB     0x1            	if ((--ISRListeners)==0) {                                                      C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
001ffc   073c     DECF      0x3c,0x1,0x1                                                                                    
001ffe   e101     BNZ       0x2002                                                                                          
002000   9ef2     BCF       0xf2,0x7,0x0   		INTCONbits.GIE = 0; //si se va el ultimo listener apago ints globales          C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           		//mLED_3_Off(); raro, no anda el debug                                         C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           	}                                                                               C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
002002   0e01     MOVLW     0x1            	return TRUE;                                                                    C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
002004   d000     BRA       0x2006                                                                                          
002006   6e10     MOVWF     0x10,0x0       }                                                                                C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
002008   0e02     MOVLW     0x2                                                                                             
00200a   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
00200c   e202     BC        0x2012                                                                                          
00200e   6ae1     CLRF      0xe1,0x0                                                                                        
002010   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002012   6ee1     MOVWF     0xe1,0x0                                                                                        
002014   5010     MOVF      0x10,0x0,0x0                                                                                    
002016   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002018   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00201a   ffd9                                                                                                               
00201c   0012     RETURN    0x0                                                                                             
                                           #pragma interrupt interruption save=section(".tmpdata")                          C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
00201e   cfda     MOVFF     0xfda,0xfe4    void interruption(void){                                                         C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
002020   ffe4                                                                                                               
002022   cfe2     MOVFF     0xfe2,0xfda                                                                                     
002024   ffda                                                                                                               
002026   cfe9     MOVFF     0xfe9,0xfe4                                                                                     
002028   ffe4                                                                                                               
00202a   cfea     MOVFF     0xfea,0xfe4                                                                                     
00202c   ffe4                                                                                                               
00202e   cff6     MOVFF     0xff6,0xfe4                                                                                     
002030   ffe4                                                                                                               
002032   cff7     MOVFF     0xff7,0xfe4                                                                                     
002034   ffe4                                                                                                               
002036   cff5     MOVFF     0xff5,0xfe4                                                                                     
002038   ffe4                                                                                                               
00203a   cff3     MOVFF     0xff3,0xfe4                                                                                     
00203c   ffe4                                                                                                               
00203e   cff4     MOVFF     0xff4,0xfe4                                                                                     
002040   ffe4                                                                                                               
002042   cffa     MOVFF     0xffa,0xfe4                                                                                     
002044   ffe4                                                                                                               
002046   ee00     LFSR      0x0,0x0                                                                                         
002048   f000                                                                                                               
00204a   0e10     MOVLW     0x10                                                                                            
00204c   04e8     DECF      0xe8,0x0,0x0                                                                                    
00204e   e303     BNC       0x2056                                                                                          
002050   cfee     MOVFF     0xfee,0xfe4                                                                                     
002052   ffe4                                                                                                               
002054   d7fb     BRA       0x204c                                                                                          
002056   ee00     LFSR      0x0,0x10                                                                                        
002058   f010                                                                                                               
00205a   0e06     MOVLW     0x6                                                                                             
00205c   04e8     DECF      0xe8,0x0,0x0                                                                                    
00205e   e303     BNC       0x2066                                                                                          
002060   cfee     MOVFF     0xfee,0xfe4                                                                                     
002062   ffe4                                                                                                               
002064   d7fb     BRA       0x205c                                                                                          
002066   52e6     MOVF      0xe6,0x1,0x0                                                                                    
002068   cfd9     MOVFF     0xfd9,0xfe6                                                                                     
00206a   ffe6                                                                                                               
00206c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00206e   ffd9                                                                                                               
002070   52e6     MOVF      0xe6,0x1,0x0                                                                                    
002072   6adf     CLRF      0xdf,0x0       	volatile byte i=0;                                                              C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
002074   0e05     MOVLW     0x5            	while (i<MAX_ISR_FUNCTIONS){                                                    C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
002076   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
002078   e221     BC        0x20bc                                                                                          
0020ba   d7dc     BRA       0x2074                                                                                          
                                           		//mLED_4_On();                                                                 C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
00207a   6aea     CLRF      0xea,0x0       		if(ISRFunction[i] != 0){ //tube que bajar esta condicion del while al if, porque cuando me remueven pueden quedar "huecos" C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
00207c   34df     RLCF      0xdf,0x0,0x0                                                                                    
00207e   0bfe     ANDLW     0xfe                                                                                            
002080   36ea     RLCF      0xea,0x1,0x0                                                                                    
002082   6ee9     MOVWF     0xe9,0x0                                                                                        
002084   0e32     MOVLW     0x32                                                                                            
002086   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002088   0e01     MOVLW     0x1                                                                                             
00208a   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00208c   50ee     MOVF      0xee,0x0,0x0                                                                                    
00208e   10ed     IORWF     0xed,0x0,0x0                                                                                    
002090   e013     BZ        0x20b8                                                                                          
002092   6aea     CLRF      0xea,0x0       			ISRFunction[i]();                                                             C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
002094   34df     RLCF      0xdf,0x0,0x0                                                                                    
002096   0bfe     ANDLW     0xfe                                                                                            
002098   36ea     RLCF      0xea,0x1,0x0                                                                                    
00209a   6ee9     MOVWF     0xe9,0x0                                                                                        
00209c   0e32     MOVLW     0x32                                                                                            
00209e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0020a0   0e01     MOVLW     0x1                                                                                             
0020a2   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0020a4   cfee     MOVFF     0xfee,0x16                                                                                      
0020a6   f016                                                                                                               
0020a8   cfef     MOVFF     0xfef,0x17                                                                                      
0020aa   f017                                                                                                               
0020ac   d004     BRA       0x20b6                                                                                          
0020ae   c017     MOVFF     0x17,0xffa                                                                                      
0020b0   fffa                                                                                                               
0020b2   5016     MOVF      0x16,0x0,0x0                                                                                    
0020b4   6ef9     MOVWF     0xf9,0x0                                                                                        
0020b6   dffb     RCALL     0x20ae                                                                                          
                                           		}                                                                              C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
0020b8   2adf     INCF      0xdf,0x1,0x0   		i++;                                                                           C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           	}                                                                               C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
0020bc   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
0020be   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0020c0   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0020c2   ffd9                                                                                                               
0020c4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0020c6   ee00     LFSR      0x0,0x15                                                                                        
0020c8   f015                                                                                                               
0020ca   0e06     MOVLW     0x6                                                                                             
0020cc   04e8     DECF      0xe8,0x0,0x0                                                                                    
0020ce   e303     BNC       0x20d6                                                                                          
0020d0   cfe5     MOVFF     0xfe5,0xfed                                                                                     
0020d2   ffed                                                                                                               
0020d4   d7fb     BRA       0x20cc                                                                                          
0020d6   ee00     LFSR      0x0,0xf                                                                                         
0020d8   f00f                                                                                                               
0020da   0e10     MOVLW     0x10                                                                                            
0020dc   04e8     DECF      0xe8,0x0,0x0                                                                                    
0020de   e303     BNC       0x20e6                                                                                          
0020e0   cfe5     MOVFF     0xfe5,0xfed                                                                                     
0020e2   ffed                                                                                                               
0020e4   d7fb     BRA       0x20dc                                                                                          
0020e6   cfe5     MOVFF     0xfe5,0xffa                                                                                     
0020e8   fffa                                                                                                               
0020ea   cfe5     MOVFF     0xfe5,0xff4                                                                                     
0020ec   fff4                                                                                                               
0020ee   cfe5     MOVFF     0xfe5,0xff3                                                                                     
0020f0   fff3                                                                                                               
0020f2   cfe5     MOVFF     0xfe5,0xff5                                                                                     
0020f4   fff5                                                                                                               
0020f6   cfe5     MOVFF     0xfe5,0xff7                                                                                     
0020f8   fff7                                                                                                               
0020fa   cfe5     MOVFF     0xfe5,0xff6                                                                                     
0020fc   fff6                                                                                                               
0020fe   cfe5     MOVFF     0xfe5,0xfea                                                                                     
002100   ffea                                                                                                               
002102   cfe5     MOVFF     0xfe5,0xfe9                                                                                     
002104   ffe9                                                                                                               
002106   cfe5     MOVFF     0xfe5,0xfda                                                                                     
002108   ffda                                                                                                               
00210a   0011     RETFIE    0x1                                                                                             
                                                                                                                            C:\usb4all\fw\demo\usb4all\dynamicISR\dynamicISR.c
                                           /* Author             									  Date        Comment                             C:\usb4all\fw\demo\user\testT0Prx.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~   C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Rafael Fernandez								         17/06/07    Original.                        C:\usb4all\fw\demo\user\testT0Prx.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\user\testT0Prx.c
                                           #include <p18cxxx.h>                                                             C:\usb4all\fw\demo\user\testT0Prx.c
                                           #include "system\typedefs.h"                                                     C:\usb4all\fw\demo\user\testT0Prx.c
                                           #include "system\usb\usb.h"                                                      C:\usb4all\fw\demo\user\testT0Prx.c
                                           #include "user\testT0Prx.h"                                                      C:\usb4all\fw\demo\user\testT0Prx.c
                                           #include "io_cfg.h"              // I/O pin mapping                              C:\usb4all\fw\demo\user\testT0Prx.c
                                           #include "user\handlerManager.h"                                                 C:\usb4all\fw\demo\user\testT0Prx.c
                                           //#include "dynamicPolling.h"                                                    C:\usb4all\fw\demo\user\testT0Prx.c
                                           #include "usb4all\proxys\T0Proxy.h"                                              C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\user\testT0Prx.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                           byte  testT0PrxHandler;	 // Handler number asigned to the module                 C:\usb4all\fw\demo\user\testT0Prx.c
                                           byte* sendBufferTestT0Prx; // buffer to send data                                C:\usb4all\fw\demo\user\testT0Prx.c
                                           // GLOBAL VARIALES THAT CHANGE IN ISR MUST BE DECLARATED WITH VOLATILE!!         C:\usb4all\fw\demo\user\testT0Prx.c
                                           volatile byte estadoLed2;                                                        C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\user\testT0Prx.c
                                           void TestT0PrxProcessIO(void);                                                   C:\usb4all\fw\demo\user\testT0Prx.c
                                           void TestT0PrxInit(byte i);                                                      C:\usb4all\fw\demo\user\testT0Prx.c
                                           void TestT0PrxReceived(byte*, byte);                                             C:\usb4all\fw\demo\user\testT0Prx.c
                                           void TestT0PrxRelease(byte i);                                                   C:\usb4all\fw\demo\user\testT0Prx.c
                                           void TestT0Configure(void);                                                      C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                           // Table used by te framework to get a fixed reference point to the user module functions defined by the framework  C:\usb4all\fw\demo\user\testT0Prx.c
                                           /** USER MODULE REFERENCE*****************************************************/  C:\usb4all\fw\demo\user\testT0Prx.c
                                           #pragma romdata user                                                             C:\usb4all\fw\demo\user\testT0Prx.c
                                           uTab testT0PrxModuleTable = {&TestT0PrxInit,&TestT0PrxRelease,&TestT0Configure,"testTpx"}; //modName must be less or equal 8 characters C:\usb4all\fw\demo\user\testT0Prx.c
                                           #pragma code                                                                     C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\user\testT0Prx.c
                                           #pragma code module                                                              C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Function:        UserSkelInit(void)                                           C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Overview:        This function is initialices the resources that the user module needs to work, it is called by the framework  C:\usb4all\fw\demo\user\testT0Prx.c
                                            *					when the module is opened	                                                C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
00461e   cfd9     MOVFF     0xfd9,0xfe6    void TestT0PrxInit(byte i){                                                      C:\usb4all\fw\demo\user\testT0Prx.c
004620   ffe6                                                                                                               
004622   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
004624   ffd9                                                                                                               
004626   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	BOOL res;                                                                       C:\usb4all\fw\demo\user\testT0Prx.c
004628   0efe     MOVLW     0xfe           	testT0PrxHandler = i;                                                           C:\usb4all\fw\demo\user\testT0Prx.c
00462a   cfdb     MOVFF     0xfdb,0x176                                                                                     
00462c   f176                                                                                                               
                                           	// add my receive function to the handler module, to be called automatically when the pc sends data to the user module C:\usb4all\fw\demo\user\testT0Prx.c
00462e   0ece     MOVLW     0xce           	setHandlerReceiveFunction(testT0PrxHandler,&TestT0PrxReceived);                 C:\usb4all\fw\demo\user\testT0Prx.c
004630   6ee6     MOVWF     0xe6,0x0                                                                                        
004632   0e46     MOVLW     0x46                                                                                            
004634   6ee6     MOVWF     0xe6,0x0                                                                                        
004636   c176     MOVFF     0x176,0xfe6                                                                                     
004638   ffe6                                                                                                               
00463a   ecc0     CALL      0x2380,0x0                                                                                      
00463c   f011                                                                                                               
00463e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004640   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004642   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	                                                                                C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                           	// add my receive ISR function to the dynamic pooling module, to be called periodically  C:\usb4all\fw\demo\user\testT0Prx.c
                                           	//TODO inicializar T0Proxy en otro lado                                         C:\usb4all\fw\demo\user\testT0Prx.c
004644   ec86     CALL      0x210c,0x0     	initT0Functions();                                                              C:\usb4all\fw\demo\user\testT0Prx.c
004646   f010                                                                                                               
                                           	//configurar T0Proxy                                                            C:\usb4all\fw\demo\user\testT0Prx.c
004648   0e01     MOVLW     0x1            	configT0(1, 1);                                                                 C:\usb4all\fw\demo\user\testT0Prx.c
00464a   6ee6     MOVWF     0xe6,0x0                                                                                        
00464c   6ee6     MOVWF     0xe6,0x0                                                                                        
00464e   ec4e     CALL      0x229c,0x0                                                                                      
004650   f011                                                                                                               
004652   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004654   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004656   0e92     MOVLW     0x92           	res = addT0Function(&TestT0PrxProcessIO);                                       C:\usb4all\fw\demo\user\testT0Prx.c
004658   6ee6     MOVWF     0xe6,0x0                                                                                        
00465a   0e46     MOVLW     0x46                                                                                            
00465c   6ee6     MOVWF     0xe6,0x0                                                                                        
00465e   eca3     CALL      0x2146,0x0                                                                                      
004660   f010                                                                                                               
004662   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004664   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004666   6edf     MOVWF     0xdf,0x0                                                                                        
                                           	//initialize ISR Resource, for example a timer and set it interrupt bits.       C:\usb4all\fw\demo\user\testT0Prx.c
                                           	                                                                                C:\usb4all\fw\demo\user\testT0Prx.c
004668   6a8c     CLRF      0x8c,0x0       	mInitAllLEDs(); //debugueo con leds                                             C:\usb4all\fw\demo\user\testT0Prx.c
00466a   0ef0     MOVLW     0xf0                                                                                            
00466c   1695     ANDWF     0x95,0x1,0x0                                                                                    
00466e   808c     BSF       0x8c,0x0,0x0   	mLED_1_On();                                                                    C:\usb4all\fw\demo\user\testT0Prx.c
                                           	//TODO inicializar timer                                                        C:\usb4all\fw\demo\user\testT0Prx.c
                                           	                                                                                C:\usb4all\fw\demo\user\testT0Prx.c
                                           	//TODO ponerlo en el modulo de ISR y que se ponga cuando hay un tipo colgado y deshabilitar cuando no quedan mas C:\usb4all\fw\demo\user\testT0Prx.c
004670   0101     MOVLB     0x1            	estadoLed2 = 0;                                                                 C:\usb4all\fw\demo\user\testT0Prx.c
004672   6b79     CLRF      0x79,0x1                                                                                        
                                           	// initialize the send buffer, used to send data to the PC                      C:\usb4all\fw\demo\user\testT0Prx.c
004674   c176     MOVFF     0x176,0xfe6    	sendBufferTestT0Prx = getSharedBuffer(testT0PrxHandler);                        C:\usb4all\fw\demo\user\testT0Prx.c
004676   ffe6                                                                                                               
004678   ec73     CALL      0x2ce6,0x0                                                                                      
00467a   f016                                                                                                               
00467c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00467e   cff3     MOVFF     0xff3,0x177                                                                                     
004680   f177                                                                                                               
004682   cff4     MOVFF     0xff4,0x178                                                                                     
004684   f178                                                                                                               
                                           	//TODO return res value                                                         C:\usb4all\fw\demo\user\testT0Prx.c
004686   52e5     MOVF      0xe5,0x1,0x0   }//end UserSkelInit                                                              C:\usb4all\fw\demo\user\testT0Prx.c
004688   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00468a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00468c   ffd9                                                                                                               
00468e   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Function:        TestT0Configure(void)                                        C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Overview:        This function sets the specific configuration for the user module, it is called by the framework  C:\usb4all\fw\demo\user\testT0Prx.c
                                            *						                                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\testT0Prx.c
                                           void TestT0Configure(void){                                                      C:\usb4all\fw\demo\user\testT0Prx.c
                                           // Do the configuration                                                          C:\usb4all\fw\demo\user\testT0Prx.c
004690   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Function:        UserSkelProcessIO(void)                                      C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Overview:        This function is registered in the dinamic polling, who call ir periodically to process the IO interaction C:\usb4all\fw\demo\user\testT0Prx.c
                                            *					int the PIC, also it can comunicate things to the pc by the USB	          C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                           void TestT0PrxProcessIO(void){                                                   C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                               //if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;    C:\usb4all\fw\demo\user\testT0Prx.c
                                           	// module ISR routine.                                                          C:\usb4all\fw\demo\user\testT0Prx.c
                                           	// VARIABLES modificable with ISR are defines with volatile                     C:\usb4all\fw\demo\user\testT0Prx.c
                                           	// clear used Interrupt FLAG                                                    C:\usb4all\fw\demo\user\testT0Prx.c
004692   728c     BTG       0x8c,0x1,0x0   		mLED_2_Toggle();                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                           		/*                                                                             C:\usb4all\fw\demo\user\testT0Prx.c
                                           		if (estadoLed == 0) {                                                          C:\usb4all\fw\demo\user\testT0Prx.c
                                           			estadoLed=1;                                                                  C:\usb4all\fw\demo\user\testT0Prx.c
                                           			mLED_2_On();                                                                  C:\usb4all\fw\demo\user\testT0Prx.c
                                           		}	                                                                             C:\usb4all\fw\demo\user\testT0Prx.c
                                           		else {                                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                           			estadoLed=0;                                                                  C:\usb4all\fw\demo\user\testT0Prx.c
                                           			mLED_2_Off();                                                                 C:\usb4all\fw\demo\user\testT0Prx.c
                                           		}                                                                              C:\usb4all\fw\demo\user\testT0Prx.c
                                           		*/	                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                           		                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
004694   0012     RETURN    0x0            }//end ProcessIO                                                                 C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Function:        UserSkelRelease(byte i)                                      C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Overview:        This function release all the resources that the user module used, it is called by the framework  C:\usb4all\fw\demo\user\testT0Prx.c
                                            *					when the module is close	                                                 C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
004696   cfd9     MOVFF     0xfd9,0xfe6    void TestT0PrxRelease(byte i){                                                   C:\usb4all\fw\demo\user\testT0Prx.c
004698   ffe6                                                                                                               
00469a   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00469c   ffd9                                                                                                               
                                           	                                                                                C:\usb4all\fw\demo\user\testT0Prx.c
                                           	//apago timer                                                                   C:\usb4all\fw\demo\user\testT0Prx.c
                                           	//TODO ponerlo en el modulo de ISR y que se ponga cuando hay un tipo colgado y deshabilitar cuando no quedan mas C:\usb4all\fw\demo\user\testT0Prx.c
                                           	//INTCONbits.GIE = 0; //apago las interrupciones globales                       C:\usb4all\fw\demo\user\testT0Prx.c
                                           	                                                                                C:\usb4all\fw\demo\user\testT0Prx.c
00469e   0efe     MOVLW     0xfe           	unsetHandlerReceiveBuffer(i);                                                   C:\usb4all\fw\demo\user\testT0Prx.c
0046a0   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0046a2   ffe6                                                                                                               
0046a4   ecac     CALL      0x2358,0x0                                                                                      
0046a6   f011                                                                                                               
0046a8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0046aa   0efe     MOVLW     0xfe           	unsetHandlerReceiveFunction(i);                                                 C:\usb4all\fw\demo\user\testT0Prx.c
0046ac   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0046ae   ffe6                                                                                                               
0046b0   ecd8     CALL      0x23b0,0x0                                                                                      
0046b2   f011                                                                                                               
0046b4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0046b6   0e92     MOVLW     0x92           	removeT0Function(&TestT0PrxProcessIO);                                          C:\usb4all\fw\demo\user\testT0Prx.c
0046b8   6ee6     MOVWF     0xe6,0x0                                                                                        
0046ba   0e46     MOVLW     0x46                                                                                            
0046bc   6ee6     MOVWF     0xe6,0x0                                                                                        
0046be   ecf9     CALL      0x21f2,0x0                                                                                      
0046c0   f010                                                                                                               
0046c2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0046c4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0046c6   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\testT0Prx.c
0046c8   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0046ca   ffd9                                                                                                               
0046cc   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Function:        UserSkelReceived(byte* recBuffPtr, byte len)                 C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Overview:        This function manages the comunication with the pc           C:\usb4all\fw\demo\user\testT0Prx.c
                                            *                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\testT0Prx.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
0046ce   cfd9     MOVFF     0xfd9,0xfe6    void TestT0PrxReceived(byte* recBuffPtr, byte len){                              C:\usb4all\fw\demo\user\testT0Prx.c
0046d0   ffe6                                                                                                               
0046d2   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0046d4   ffd9                                                                                                               
0046d6   0e0b     MOVLW     0xb                                                                                             
0046d8   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	  byte index;                                                                   C:\usb4all\fw\demo\user\testT0Prx.c
0046da   50d9     MOVF      0xd9,0x0,0x0   	  char mens[9] = "testISRP";	                                                   C:\usb4all\fw\demo\user\testT0Prx.c
0046dc   0f01     ADDLW     0x1                                                                                             
0046de   6ee9     MOVWF     0xe9,0x0                                                                                        
0046e0   cfda     MOVFF     0xfda,0xfea                                                                                     
0046e2   ffea                                                                                                               
0046e4   0e74     MOVLW     0x74                                                                                            
0046e6   6eee     MOVWF     0xee,0x0                                                                                        
0046e8   0e65     MOVLW     0x65                                                                                            
0046ea   6eee     MOVWF     0xee,0x0                                                                                        
0046ec   0e73     MOVLW     0x73                                                                                            
0046ee   6eee     MOVWF     0xee,0x0                                                                                        
0046f0   0e74     MOVLW     0x74                                                                                            
0046f2   6eee     MOVWF     0xee,0x0                                                                                        
0046f4   0e49     MOVLW     0x49                                                                                            
0046f6   6eee     MOVWF     0xee,0x0                                                                                        
0046f8   0e53     MOVLW     0x53                                                                                            
0046fa   6eee     MOVWF     0xee,0x0                                                                                        
0046fc   0e52     MOVLW     0x52                                                                                            
0046fe   6eee     MOVWF     0xee,0x0                                                                                        
004700   0e50     MOVLW     0x50                                                                                            
004702   6eee     MOVWF     0xee,0x0                                                                                        
004704   6aee     CLRF      0xee,0x0                                                                                        
004706   0e0a     MOVLW     0xa                  byte testT0PrxCounter = 0;                                                 C:\usb4all\fw\demo\user\testT0Prx.c
004708   6adb     CLRF      0xdb,0x0                                                                                        
00470a   0efd     MOVLW     0xfd                 switch(((TESTT0PRX_DATA_PACKET*)recBuffPtr)->CMD)                          C:\usb4all\fw\demo\user\testT0Prx.c
00470c   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00470e   ffe9                                                                                                               
004710   0efe     MOVLW     0xfe                                                                                            
004712   cfdb     MOVFF     0xfdb,0xfea                                                                                     
004714   ffea                                                                                                               
004716   50ef     MOVF      0xef,0x0,0x0                                                                                    
004718   0a05     XORLW     0x5                                                                                             
00471a   e046     BZ        0x47a8                                                                                          
00471c   0afa     XORLW     0xfa                                                                                            
00471e   e042     BZ        0x47a4                                                                                          
004720   0aff     XORLW     0xff                                                                                            
004722   e001     BZ        0x4726                                                                                          
004724   d04f     BRA       0x47c4                                                                                          
                                                 {                                                                          C:\usb4all\fw\demo\user\testT0Prx.c
                                                   case READ_VERSION:                                                       C:\usb4all\fw\demo\user\testT0Prx.c
                                                         //dataPacket._byte[1] is len                                       C:\usb4all\fw\demo\user\testT0Prx.c
004726   0efd     MOVLW     0xfd           			  ((TESTT0PRX_DATA_PACKET*)sendBufferTestT0Prx)->_byte[0] = ((TESTT0PRX_DATA_PACKET*)recBuffPtr)->_byte[0];  C:\usb4all\fw\demo\user\testT0Prx.c
004728   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00472a   ffe9                                                                                                               
00472c   0efe     MOVLW     0xfe                                                                                            
00472e   cfdb     MOVFF     0xfdb,0xfea                                                                                     
004730   ffea                                                                                                               
004732   50ef     MOVF      0xef,0x0,0x0                                                                                    
004734   6ee6     MOVWF     0xe6,0x0                                                                                        
004736   c177     MOVFF     0x177,0xfe9                                                                                     
004738   ffe9                                                                                                               
00473a   c178     MOVFF     0x178,0xfea                                                                                     
00473c   ffea                                                                                                               
00473e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004740   50e7     MOVF      0xe7,0x0,0x0                                                                                    
004742   6eef     MOVWF     0xef,0x0                                                                                        
004744   0efd     MOVLW     0xfd           			  ((TESTT0PRX_DATA_PACKET*)sendBufferTestT0Prx)->_byte[1] = ((TESTT0PRX_DATA_PACKET*)recBuffPtr)->_byte[1];  C:\usb4all\fw\demo\user\testT0Prx.c
004746   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004748   ffe9                                                                                                               
00474a   0efe     MOVLW     0xfe                                                                                            
00474c   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00474e   ffea                                                                                                               
004750   0e01     MOVLW     0x1                                                                                             
004752   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004754   0e00     MOVLW     0x0                                                                                             
004756   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004758   50ef     MOVF      0xef,0x0,0x0                                                                                    
00475a   6ee6     MOVWF     0xe6,0x0                                                                                        
00475c   c177     MOVFF     0x177,0xfe9                                                                                     
00475e   ffe9                                                                                                               
004760   c178     MOVFF     0x178,0xfea                                                                                     
004762   ffea                                                                                                               
004764   0e01     MOVLW     0x1                                                                                             
004766   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004768   0e00     MOVLW     0x0                                                                                             
00476a   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00476c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00476e   50e7     MOVF      0xe7,0x0,0x0                                                                                    
004770   6eef     MOVWF     0xef,0x0                                                                                        
004772   c177     MOVFF     0x177,0xfe9                  ((TESTT0PRX_DATA_PACKET*)sendBufferTestT0Prx)->_byte[2] = TESTT0PRX_MINOR_VERSION; C:\usb4all\fw\demo\user\testT0Prx.c
004774   ffe9                                                                                                               
004776   c178     MOVFF     0x178,0xfea                                                                                     
004778   ffea                                                                                                               
00477a   0e02     MOVLW     0x2                                                                                             
00477c   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00477e   0e00     MOVLW     0x0                                                                                             
004780   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004782   0e46     MOVLW     0x46                                                                                            
004784   6eef     MOVWF     0xef,0x0                                                                                        
004786   c177     MOVFF     0x177,0xfe9                  ((TESTT0PRX_DATA_PACKET*)sendBufferTestT0Prx)->_byte[3] = TESTT0PRX_MAJOR_VERSION; C:\usb4all\fw\demo\user\testT0Prx.c
004788   ffe9                                                                                                               
00478a   c178     MOVFF     0x178,0xfea                                                                                     
00478c   ffea                                                                                                               
00478e   0e03     MOVLW     0x3                                                                                             
004790   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004792   0e00     MOVLW     0x0                                                                                             
004794   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004796   6aef     CLRF      0xef,0x0                                                                                        
004798   0e04     MOVLW     0x4                          testT0PrxCounter=0x04;                                             C:\usb4all\fw\demo\user\testT0Prx.c
00479a   6ef3     MOVWF     0xf3,0x0                                                                                        
00479c   0e0a     MOVLW     0xa                                                                                             
00479e   cff3     MOVFF     0xff3,0xfdb                                                                                     
0047a0   ffdb                                                                                                               
0047a2   d011     BRA       0x47c6                       break;                                                             C:\usb4all\fw\demo\user\testT0Prx.c
                                           	                                                                                C:\usb4all\fw\demo\user\testT0Prx.c
                                                   /*case ANY_COMMAND:                                                      C:\usb4all\fw\demo\user\testT0Prx.c
                                                         fill the SKEL_DATA_PACKET acording to the data to be sent          C:\usb4all\fw\demo\user\testT0Prx.c
                                           			  userSkelCounter=size of data to be sent;                                    C:\usb4all\fw\demo\user\testT0Prx.c
                                                         break;                                                             C:\usb4all\fw\demo\user\testT0Prx.c
                                                   */                                                                       C:\usb4all\fw\demo\user\testT0Prx.c
                                                     case RESET:                                                            C:\usb4all\fw\demo\user\testT0Prx.c
0047a4   00ff     RESET                                  Reset();                                                           C:\usb4all\fw\demo\user\testT0Prx.c
0047a6   d00f     BRA       0x47c6         			  break;                                                                      C:\usb4all\fw\demo\user\testT0Prx.c
                                           		                                                                               C:\usb4all\fw\demo\user\testT0Prx.c
                                           		 case MESS:                                                                    C:\usb4all\fw\demo\user\testT0Prx.c
0047a8   0e09     MOVLW     0x9            				sendMes(mens, sizeof(mens));                                                 C:\usb4all\fw\demo\user\testT0Prx.c
0047aa   6ee6     MOVWF     0xe6,0x0                                                                                        
0047ac   50d9     MOVF      0xd9,0x0,0x0                                                                                    
0047ae   0f01     ADDLW     0x1                                                                                             
0047b0   6ee6     MOVWF     0xe6,0x0                                                                                        
0047b2   0e00     MOVLW     0x0                                                                                             
0047b4   20da     ADDWFC    0xda,0x0,0x0                                                                                    
0047b6   6ee6     MOVWF     0xe6,0x0                                                                                        
0047b8   ece0     CALL      0x19c0,0x0                                                                                      
0047ba   f00c                                                                                                               
0047bc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0047be   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0047c0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0047c2   d001     BRA       0x47c6                       break;                                                             C:\usb4all\fw\demo\user\testT0Prx.c
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                           		 default:                                                                      C:\usb4all\fw\demo\user\testT0Prx.c
0047c4   d000     BRA       0x47c6                       break;                                                             C:\usb4all\fw\demo\user\testT0Prx.c
                                                 }//end switch(s)                                                           C:\usb4all\fw\demo\user\testT0Prx.c
0047c6   0e0a     MOVLW     0xa                  if(testT0PrxCounter != 0)                                                  C:\usb4all\fw\demo\user\testT0Prx.c
0047c8   50db     MOVF      0xdb,0x0,0x0                                                                                    
0047ca   e00c     BZ        0x47e4                                                                                          
                                                 {                                                                          C:\usb4all\fw\demo\user\testT0Prx.c
0047cc   0104     MOVLB     0x4                      if(!mUSBGenTxIsBusy())                                                 C:\usb4all\fw\demo\user\testT0Prx.c
0047ce   bf0c     BTFSC     0xc,0x7,0x1                                                                                     
0047d0   d009     BRA       0x47e4                                                                                          
0047d2   0e0a     MOVLW     0xa                          USBGenWrite2(testT0PrxHandler, testT0PrxCounter);                  C:\usb4all\fw\demo\user\testT0Prx.c
0047d4   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0047d6   ffe6                                                                                                               
0047d8   c176     MOVFF     0x176,0xfe6                                                                                     
0047da   ffe6                                                                                                               
0047dc   ec36     CALL      0x266c,0x0                                                                                      
0047de   f013                                                                                                               
0047e0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0047e2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                 }//end if  	  	                                                            C:\usb4all\fw\demo\user\testT0Prx.c
0047e4   0e0b     MOVLW     0xb            }//end UserSkelReceived                                                          C:\usb4all\fw\demo\user\testT0Prx.c
0047e6   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0047e8   e202     BC        0x47ee                                                                                          
0047ea   6ae1     CLRF      0xe1,0x0                                                                                        
0047ec   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0047ee   6ee1     MOVWF     0xe1,0x0                                                                                        
0047f0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0047f2   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0047f4   ffd9                                                                                                               
0047f6   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\testT0Prx.c
                                           /** EOF testT0Prx.c ***************************************************************/ C:\usb4all\fw\demo\user\testT0Prx.c
                                           /* Author             									  Date        Comment                             C:\usb4all\fw\demo\user\testISR.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~   C:\usb4all\fw\demo\user\testISR.c
                                            * Rafael Fernandez								         14/06/07    Original.                        C:\usb4all\fw\demo\user\testISR.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\testISR.c
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\user\testISR.c
                                           #include <p18cxxx.h>                                                             C:\usb4all\fw\demo\user\testISR.c
                                           #include "system\typedefs.h"                                                     C:\usb4all\fw\demo\user\testISR.c
                                           #include "system\usb\usb.h"                                                      C:\usb4all\fw\demo\user\testISR.c
                                           #include "user\testISR.h"                                                        C:\usb4all\fw\demo\user\testISR.c
                                           #include "io_cfg.h"              // I/O pin mapping                              C:\usb4all\fw\demo\user\testISR.c
                                           #include "user\handlerManager.h"                                                 C:\usb4all\fw\demo\user\testISR.c
                                           //#include "dynamicPolling.h"                                                    C:\usb4all\fw\demo\user\testISR.c
                                           #include "usb4all\dynamicISR\dynamicISR.h"                                       C:\usb4all\fw\demo\user\testISR.c
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\user\testISR.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\user\testISR.c
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
                                           byte  testISRHandler;	 // Handler number asigned to the module                   C:\usb4all\fw\demo\user\testISR.c
                                           byte* sendBufferTestISR; // buffer to send data                                  C:\usb4all\fw\demo\user\testISR.c
                                           // GLOBAL VARIALES THAT CHANGE IN ISR MUST BE DECLARATED WITH VOLATILE!!         C:\usb4all\fw\demo\user\testISR.c
                                           volatile byte estadoLed;                                                         C:\usb4all\fw\demo\user\testISR.c
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\user\testISR.c
                                           void TestISRProcessIO(void);                                                     C:\usb4all\fw\demo\user\testISR.c
                                           void TestISRInit(byte i);                                                        C:\usb4all\fw\demo\user\testISR.c
                                           void TestISRReceived(byte*, byte);                                               C:\usb4all\fw\demo\user\testISR.c
                                           void TestISRRelease(byte i);                                                     C:\usb4all\fw\demo\user\testISR.c
                                           void userISRConfigure(void);                                                     C:\usb4all\fw\demo\user\testISR.c
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
                                           // Table used by te framework to get a fixed reference point to the user module functions defined by the framework  C:\usb4all\fw\demo\user\testISR.c
                                           /** USER MODULE REFERENCE*****************************************************/  C:\usb4all\fw\demo\user\testISR.c
                                           #pragma romdata user                                                             C:\usb4all\fw\demo\user\testISR.c
                                           uTab testISRModuleTable = {&TestISRInit,&TestISRRelease,&userISRConfigure,"testISR"}; //modName must be less or equal 8 characters C:\usb4all\fw\demo\user\testISR.c
                                           #pragma code                                                                     C:\usb4all\fw\demo\user\testISR.c
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\user\testISR.c
                                           #pragma code module                                                              C:\usb4all\fw\demo\user\testISR.c
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\testISR.c
                                            * Function:        UserSkelInit(void)                                           C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Overview:        This function is initialices the resources that the user module needs to work, it is called by the framework  C:\usb4all\fw\demo\user\testISR.c
                                            *					when the module is opened	                                                C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\testISR.c
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
0047f8   cfd9     MOVFF     0xfd9,0xfe6    void TestISRInit(byte i){                                                        C:\usb4all\fw\demo\user\testISR.c
0047fa   ffe6                                                                                                               
0047fc   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0047fe   ffd9                                                                                                               
004800   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	BOOL res;                                                                       C:\usb4all\fw\demo\user\testISR.c
004802   0efe     MOVLW     0xfe           	testISRHandler = i;                                                             C:\usb4all\fw\demo\user\testISR.c
004804   cfdb     MOVFF     0xfdb,0x17a                                                                                     
004806   f17a                                                                                                               
                                           	// add my receive function to the handler module, to be called automatically when the pc sends data to the user module C:\usb4all\fw\demo\user\testISR.c
004808   0eca     MOVLW     0xca           	setHandlerReceiveFunction(testISRHandler,&TestISRReceived);                     C:\usb4all\fw\demo\user\testISR.c
00480a   6ee6     MOVWF     0xe6,0x0                                                                                        
00480c   0e48     MOVLW     0x48                                                                                            
00480e   6ee6     MOVWF     0xe6,0x0                                                                                        
004810   c17a     MOVFF     0x17a,0xfe6                                                                                     
004812   ffe6                                                                                                               
004814   ecc0     CALL      0x2380,0x0                                                                                      
004816   f011                                                                                                               
004818   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00481a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00481c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	// add my receive ISR function to the dynamic pooling module, to be called periodically  C:\usb4all\fw\demo\user\testISR.c
00481e   0e6a     MOVLW     0x6a           	res = addISRFunction(&TestISRProcessIO);                                        C:\usb4all\fw\demo\user\testISR.c
004820   6ee6     MOVWF     0xe6,0x0                                                                                        
004822   0e48     MOVLW     0x48                                                                                            
004824   6ee6     MOVWF     0xe6,0x0                                                                                        
004826   ec7c     CALL      0x1ef8,0x0                                                                                      
004828   f00f                                                                                                               
00482a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00482c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00482e   6edf     MOVWF     0xdf,0x0                                                                                        
                                           	//initialize ISR Resource, for example a timer and set it interrupt bits.       C:\usb4all\fw\demo\user\testISR.c
                                           	                                                                                C:\usb4all\fw\demo\user\testISR.c
004830   6a8c     CLRF      0x8c,0x0       	mInitAllLEDs(); //debugueo con leds                                             C:\usb4all\fw\demo\user\testISR.c
004832   0ef0     MOVLW     0xf0                                                                                            
004834   1695     ANDWF     0x95,0x1,0x0                                                                                    
004836   848c     BSF       0x8c,0x2,0x0   	mLED_3_On();                                                                    C:\usb4all\fw\demo\user\testISR.c
                                           	//TODO inicializar timer                                                        C:\usb4all\fw\demo\user\testISR.c
                                           	                                                                                C:\usb4all\fw\demo\user\testISR.c
                                           	//inicializo timer                                                              C:\usb4all\fw\demo\user\testISR.c
004838   0e03     MOVLW     0x3            	T0CON = 0x03;                                                                   C:\usb4all\fw\demo\user\testISR.c
00483a   6ed5     MOVWF     0xd5,0x0                                                                                        
00483c   0e01     MOVLW     0x1            	TMR0L = 1;                                                                      C:\usb4all\fw\demo\user\testISR.c
00483e   6ed6     MOVWF     0xd6,0x0                                                                                        
004840   6ed7     MOVWF     0xd7,0x0       	TMR0H = 1;                                                                      C:\usb4all\fw\demo\user\testISR.c
004842   8ed5     BSF       0xd5,0x7,0x0   	T0CONbits.TMR0ON  = TRUE; //prendo el timer	                                    C:\usb4all\fw\demo\user\testISR.c
004844   94f2     BCF       0xf2,0x2,0x0   	INTCONbits.TMR0IF = 0;                                                          C:\usb4all\fw\demo\user\testISR.c
004846   8af2     BSF       0xf2,0x5,0x0   	INTCONbits.TMR0IE = 1; //prendo las interrupciones del timer 0                  C:\usb4all\fw\demo\user\testISR.c
                                           	//TODO ponerlo en el modulo de ISR y que se ponga cuando hay un tipo colgado y deshabilitar cuando no quedan mas C:\usb4all\fw\demo\user\testISR.c
004848   0101     MOVLB     0x1            	estadoLed = 0;                                                                  C:\usb4all\fw\demo\user\testISR.c
00484a   6b7d     CLRF      0x7d,0x1                                                                                        
                                           	// initialize the send buffer, used to send data to the PC                      C:\usb4all\fw\demo\user\testISR.c
00484c   c17a     MOVFF     0x17a,0xfe6    	sendBufferTestISR = getSharedBuffer(testISRHandler);                            C:\usb4all\fw\demo\user\testISR.c
00484e   ffe6                                                                                                               
004850   ec73     CALL      0x2ce6,0x0                                                                                      
004852   f016                                                                                                               
004854   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004856   cff3     MOVFF     0xff3,0x17b                                                                                     
004858   f17b                                                                                                               
00485a   cff4     MOVFF     0xff4,0x17c                                                                                     
00485c   f17c                                                                                                               
                                           	//TODO return res value                                                         C:\usb4all\fw\demo\user\testISR.c
00485e   52e5     MOVF      0xe5,0x1,0x0   }//end UserSkelInit                                                              C:\usb4all\fw\demo\user\testISR.c
004860   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004862   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
004864   ffd9                                                                                                               
004866   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\testISR.c
                                            * Function:        UserISRConfigure(void)                                       C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Overview:        This function sets the specific configuration for the user module, it is called by the framework  C:\usb4all\fw\demo\user\testISR.c
                                            *						                                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\testISR.c
                                           void userISRConfigure(void){                                                     C:\usb4all\fw\demo\user\testISR.c
                                           // Do the configuration                                                          C:\usb4all\fw\demo\user\testISR.c
004868   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\user\testISR.c
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\testISR.c
                                            * Function:        UserSkelProcessIO(void)                                      C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Overview:        This function is registered in the dinamic polling, who call ir periodically to process the IO interaction C:\usb4all\fw\demo\user\testISR.c
                                            *					int the PIC, also it can comunicate things to the pc by the USB	          C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\testISR.c
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
                                           void TestISRProcessIO(void){                                                     C:\usb4all\fw\demo\user\testISR.c
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
                                               //if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;    C:\usb4all\fw\demo\user\testISR.c
                                           	// module ISR routine.                                                          C:\usb4all\fw\demo\user\testISR.c
                                           	// VARIABLES modificable with ISR are defines with volatile                     C:\usb4all\fw\demo\user\testISR.c
                                           	// clear used Interrupt FLAG                                                    C:\usb4all\fw\demo\user\testISR.c
00486a   a4f2     BTFSS     0xf2,0x2,0x0   	if(	INTCONbits.TMR0IF){                                                         C:\usb4all\fw\demo\user\testISR.c
00486c   d009     BRA       0x4880                                                                                          
00486e   94f2     BCF       0xf2,0x2,0x0   		INTCONbits.TMR0IF = 0;                                                         C:\usb4all\fw\demo\user\testISR.c
                                           		//inicializo denuevo el timer                                                  C:\usb4all\fw\demo\user\testISR.c
004870   0e03     MOVLW     0x3            		T0CON = 0x03;                                                                  C:\usb4all\fw\demo\user\testISR.c
004872   6ed5     MOVWF     0xd5,0x0                                                                                        
004874   0e01     MOVLW     0x1            		TMR0L = 1;                                                                     C:\usb4all\fw\demo\user\testISR.c
004876   6ed6     MOVWF     0xd6,0x0                                                                                        
004878   6ed7     MOVWF     0xd7,0x0       		TMR0H = 1;                                                                     C:\usb4all\fw\demo\user\testISR.c
00487a   8af2     BSF       0xf2,0x5,0x0   		INTCONbits.TMR0IE = 1; //prendo las interrupciones del timer 0                 C:\usb4all\fw\demo\user\testISR.c
00487c   8ed5     BSF       0xd5,0x7,0x0   		T0CONbits.TMR0ON  = TRUE;                                                      C:\usb4all\fw\demo\user\testISR.c
00487e   728c     BTG       0x8c,0x1,0x0   		mLED_2_Toggle();                                                               C:\usb4all\fw\demo\user\testISR.c
                                           		/*                                                                             C:\usb4all\fw\demo\user\testISR.c
                                           		if (estadoLed == 0) {                                                          C:\usb4all\fw\demo\user\testISR.c
                                           			estadoLed=1;                                                                  C:\usb4all\fw\demo\user\testISR.c
                                           			mLED_2_On();                                                                  C:\usb4all\fw\demo\user\testISR.c
                                           		}	                                                                             C:\usb4all\fw\demo\user\testISR.c
                                           		else {                                                                         C:\usb4all\fw\demo\user\testISR.c
                                           			estadoLed=0;                                                                  C:\usb4all\fw\demo\user\testISR.c
                                           			mLED_2_Off();                                                                 C:\usb4all\fw\demo\user\testISR.c
                                           		}                                                                              C:\usb4all\fw\demo\user\testISR.c
                                           		*/	                                                                            C:\usb4all\fw\demo\user\testISR.c
                                           	}	                                                                              C:\usb4all\fw\demo\user\testISR.c
004880   0012     RETURN    0x0            }//end ProcessIO                                                                 C:\usb4all\fw\demo\user\testISR.c
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\testISR.c
                                            * Function:        UserSkelRelease(byte i)                                      C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Overview:        This function release all the resources that the user module used, it is called by the framework  C:\usb4all\fw\demo\user\testISR.c
                                            *					when the module is close	                                                 C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\testISR.c
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
004882   cfd9     MOVFF     0xfd9,0xfe6    void TestISRRelease(byte i){                                                     C:\usb4all\fw\demo\user\testISR.c
004884   ffe6                                                                                                               
004886   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
004888   ffd9                                                                                                               
                                           	                                                                                C:\usb4all\fw\demo\user\testISR.c
                                           	//apago timer                                                                   C:\usb4all\fw\demo\user\testISR.c
00488a   0e03     MOVLW     0x3            	T0CON = 0x03;                                                                   C:\usb4all\fw\demo\user\testISR.c
00488c   6ed5     MOVWF     0xd5,0x0                                                                                        
00488e   0e01     MOVLW     0x1            	TMR0L = 1;                                                                      C:\usb4all\fw\demo\user\testISR.c
004890   6ed6     MOVWF     0xd6,0x0                                                                                        
004892   6ed7     MOVWF     0xd7,0x0       	TMR0H = 1;                                                                      C:\usb4all\fw\demo\user\testISR.c
004894   94f2     BCF       0xf2,0x2,0x0   	INTCONbits.TMR0IF = 0;                                                          C:\usb4all\fw\demo\user\testISR.c
004896   9ed5     BCF       0xd5,0x7,0x0   	T0CONbits.TMR0ON  = FALSE;                                                      C:\usb4all\fw\demo\user\testISR.c
004898   9af2     BCF       0xf2,0x5,0x0   	INTCONbits.TMR0IE = 0; //apago las interrupciones del timer 0                   C:\usb4all\fw\demo\user\testISR.c
                                           	//TODO ponerlo en el modulo de ISR y que se ponga cuando hay un tipo colgado y deshabilitar cuando no quedan mas C:\usb4all\fw\demo\user\testISR.c
                                           	//INTCONbits.GIE = 0; //apago las interrupciones globales                       C:\usb4all\fw\demo\user\testISR.c
                                           	                                                                                C:\usb4all\fw\demo\user\testISR.c
00489a   0efe     MOVLW     0xfe           	unsetHandlerReceiveBuffer(i);                                                   C:\usb4all\fw\demo\user\testISR.c
00489c   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
00489e   ffe6                                                                                                               
0048a0   ecac     CALL      0x2358,0x0                                                                                      
0048a2   f011                                                                                                               
0048a4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0048a6   0efe     MOVLW     0xfe           	unsetHandlerReceiveFunction(i);                                                 C:\usb4all\fw\demo\user\testISR.c
0048a8   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0048aa   ffe6                                                                                                               
0048ac   ecd8     CALL      0x23b0,0x0                                                                                      
0048ae   f011                                                                                                               
0048b0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0048b2   0e6a     MOVLW     0x6a           	removeISRFunction(&TestISRProcessIO);                                           C:\usb4all\fw\demo\user\testISR.c
0048b4   6ee6     MOVWF     0xe6,0x0                                                                                        
0048b6   0e48     MOVLW     0x48                                                                                            
0048b8   6ee6     MOVWF     0xe6,0x0                                                                                        
0048ba   ecc4     CALL      0x1f88,0x0                                                                                      
0048bc   f00f                                                                                                               
0048be   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0048c0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0048c2   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\testISR.c
0048c4   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0048c6   ffd9                                                                                                               
0048c8   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\testISR.c
                                            * Function:        UserSkelReceived(byte* recBuffPtr, byte len)                 C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Overview:        This function manages the comunication with the pc           C:\usb4all\fw\demo\user\testISR.c
                                            *                                                                               C:\usb4all\fw\demo\user\testISR.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\testISR.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\testISR.c
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
0048ca   cfd9     MOVFF     0xfd9,0xfe6    void TestISRReceived(byte* recBuffPtr, byte len){                                C:\usb4all\fw\demo\user\testISR.c
0048cc   ffe6                                                                                                               
0048ce   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0048d0   ffd9                                                                                                               
0048d2   0e0b     MOVLW     0xb                                                                                             
0048d4   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	  byte index;                                                                   C:\usb4all\fw\demo\user\testISR.c
0048d6   50d9     MOVF      0xd9,0x0,0x0   	  char mens[9] = "testISR";	                                                    C:\usb4all\fw\demo\user\testISR.c
0048d8   0f01     ADDLW     0x1                                                                                             
0048da   6ee9     MOVWF     0xe9,0x0                                                                                        
0048dc   cfda     MOVFF     0xfda,0xfea                                                                                     
0048de   ffea                                                                                                               
0048e0   0e74     MOVLW     0x74                                                                                            
0048e2   6eee     MOVWF     0xee,0x0                                                                                        
0048e4   0e65     MOVLW     0x65                                                                                            
0048e6   6eee     MOVWF     0xee,0x0                                                                                        
0048e8   0e73     MOVLW     0x73                                                                                            
0048ea   6eee     MOVWF     0xee,0x0                                                                                        
0048ec   0e74     MOVLW     0x74                                                                                            
0048ee   6eee     MOVWF     0xee,0x0                                                                                        
0048f0   0e49     MOVLW     0x49                                                                                            
0048f2   6eee     MOVWF     0xee,0x0                                                                                        
0048f4   0e53     MOVLW     0x53                                                                                            
0048f6   6eee     MOVWF     0xee,0x0                                                                                        
0048f8   0e52     MOVLW     0x52                                                                                            
0048fa   6eee     MOVWF     0xee,0x0                                                                                        
0048fc   6aee     CLRF      0xee,0x0                                                                                        
0048fe   0e03     MOVLW     0x3                                                                                             
004900   6eee     MOVWF     0xee,0x0                                                                                        
004902   0e0a     MOVLW     0xa                  byte testISRCounter = 0;                                                   C:\usb4all\fw\demo\user\testISR.c
004904   6adb     CLRF      0xdb,0x0                                                                                        
004906   0efd     MOVLW     0xfd                 switch(((TESTISR_DATA_PACKET*)recBuffPtr)->CMD)                            C:\usb4all\fw\demo\user\testISR.c
004908   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00490a   ffe9                                                                                                               
00490c   0efe     MOVLW     0xfe                                                                                            
00490e   cfdb     MOVFF     0xfdb,0xfea                                                                                     
004910   ffea                                                                                                               
004912   50ef     MOVF      0xef,0x0,0x0                                                                                    
004914   0a05     XORLW     0x5                                                                                             
004916   e046     BZ        0x49a4                                                                                          
004918   0afa     XORLW     0xfa                                                                                            
00491a   e042     BZ        0x49a0                                                                                          
00491c   0aff     XORLW     0xff                                                                                            
00491e   e001     BZ        0x4922                                                                                          
004920   d04f     BRA       0x49c0                                                                                          
                                                 {                                                                          C:\usb4all\fw\demo\user\testISR.c
                                                   case READ_VERSION:                                                       C:\usb4all\fw\demo\user\testISR.c
                                                         //dataPacket._byte[1] is len                                       C:\usb4all\fw\demo\user\testISR.c
004922   0efd     MOVLW     0xfd           			  ((TESTISR_DATA_PACKET*)sendBufferTestISR)->_byte[0] = ((TESTISR_DATA_PACKET*)recBuffPtr)->_byte[0];  C:\usb4all\fw\demo\user\testISR.c
004924   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004926   ffe9                                                                                                               
004928   0efe     MOVLW     0xfe                                                                                            
00492a   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00492c   ffea                                                                                                               
00492e   50ef     MOVF      0xef,0x0,0x0                                                                                    
004930   6ee6     MOVWF     0xe6,0x0                                                                                        
004932   c17b     MOVFF     0x17b,0xfe9                                                                                     
004934   ffe9                                                                                                               
004936   c17c     MOVFF     0x17c,0xfea                                                                                     
004938   ffea                                                                                                               
00493a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00493c   50e7     MOVF      0xe7,0x0,0x0                                                                                    
00493e   6eef     MOVWF     0xef,0x0                                                                                        
004940   0efd     MOVLW     0xfd           			  ((TESTISR_DATA_PACKET*)sendBufferTestISR)->_byte[1] = ((TESTISR_DATA_PACKET*)recBuffPtr)->_byte[1];  C:\usb4all\fw\demo\user\testISR.c
004942   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004944   ffe9                                                                                                               
004946   0efe     MOVLW     0xfe                                                                                            
004948   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00494a   ffea                                                                                                               
00494c   0e01     MOVLW     0x1                                                                                             
00494e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004950   0e00     MOVLW     0x0                                                                                             
004952   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004954   50ef     MOVF      0xef,0x0,0x0                                                                                    
004956   6ee6     MOVWF     0xe6,0x0                                                                                        
004958   c17b     MOVFF     0x17b,0xfe9                                                                                     
00495a   ffe9                                                                                                               
00495c   c17c     MOVFF     0x17c,0xfea                                                                                     
00495e   ffea                                                                                                               
004960   0e01     MOVLW     0x1                                                                                             
004962   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004964   0e00     MOVLW     0x0                                                                                             
004966   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004968   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00496a   50e7     MOVF      0xe7,0x0,0x0                                                                                    
00496c   6eef     MOVWF     0xef,0x0                                                                                        
00496e   c17b     MOVFF     0x17b,0xfe9                  ((TESTISR_DATA_PACKET*)sendBufferTestISR)->_byte[2] = TESTISR_MINOR_VERSION; C:\usb4all\fw\demo\user\testISR.c
004970   ffe9                                                                                                               
004972   c17c     MOVFF     0x17c,0xfea                                                                                     
004974   ffea                                                                                                               
004976   0e02     MOVLW     0x2                                                                                             
004978   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00497a   0e00     MOVLW     0x0                                                                                             
00497c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00497e   0e35     MOVLW     0x35                                                                                            
004980   6eef     MOVWF     0xef,0x0                                                                                        
004982   c17b     MOVFF     0x17b,0xfe9                  ((TESTISR_DATA_PACKET*)sendBufferTestISR)->_byte[3] = TESTISR_MAJOR_VERSION; C:\usb4all\fw\demo\user\testISR.c
004984   ffe9                                                                                                               
004986   c17c     MOVFF     0x17c,0xfea                                                                                     
004988   ffea                                                                                                               
00498a   0e03     MOVLW     0x3                                                                                             
00498c   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00498e   0e00     MOVLW     0x0                                                                                             
004990   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004992   6aef     CLRF      0xef,0x0                                                                                        
004994   0e04     MOVLW     0x4                          testISRCounter=0x04;                                               C:\usb4all\fw\demo\user\testISR.c
004996   6ef3     MOVWF     0xf3,0x0                                                                                        
004998   0e0a     MOVLW     0xa                                                                                             
00499a   cff3     MOVFF     0xff3,0xfdb                                                                                     
00499c   ffdb                                                                                                               
00499e   d011     BRA       0x49c2                       break;                                                             C:\usb4all\fw\demo\user\testISR.c
                                           	                                                                                C:\usb4all\fw\demo\user\testISR.c
                                                   /*case ANY_COMMAND:                                                      C:\usb4all\fw\demo\user\testISR.c
                                                         fill the SKEL_DATA_PACKET acording to the data to be sent          C:\usb4all\fw\demo\user\testISR.c
                                           			  userSkelCounter=size of data to be sent;                                    C:\usb4all\fw\demo\user\testISR.c
                                                         break;                                                             C:\usb4all\fw\demo\user\testISR.c
                                                   */                                                                       C:\usb4all\fw\demo\user\testISR.c
                                                     case RESET:                                                            C:\usb4all\fw\demo\user\testISR.c
0049a0   00ff     RESET                                  Reset();                                                           C:\usb4all\fw\demo\user\testISR.c
0049a2   d00f     BRA       0x49c2         			  break;                                                                      C:\usb4all\fw\demo\user\testISR.c
                                           		                                                                               C:\usb4all\fw\demo\user\testISR.c
                                           		 case MESS:                                                                    C:\usb4all\fw\demo\user\testISR.c
0049a4   0e09     MOVLW     0x9            				sendMes(mens, sizeof(mens));                                                 C:\usb4all\fw\demo\user\testISR.c
0049a6   6ee6     MOVWF     0xe6,0x0                                                                                        
0049a8   50d9     MOVF      0xd9,0x0,0x0                                                                                    
0049aa   0f01     ADDLW     0x1                                                                                             
0049ac   6ee6     MOVWF     0xe6,0x0                                                                                        
0049ae   0e00     MOVLW     0x0                                                                                             
0049b0   20da     ADDWFC    0xda,0x0,0x0                                                                                    
0049b2   6ee6     MOVWF     0xe6,0x0                                                                                        
0049b4   ece0     CALL      0x19c0,0x0                                                                                      
0049b6   f00c                                                                                                               
0049b8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0049ba   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0049bc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0049be   d001     BRA       0x49c2                       break;                                                             C:\usb4all\fw\demo\user\testISR.c
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
                                           		 default:                                                                      C:\usb4all\fw\demo\user\testISR.c
0049c0   d000     BRA       0x49c2                       break;                                                             C:\usb4all\fw\demo\user\testISR.c
                                                 }//end switch(s)                                                           C:\usb4all\fw\demo\user\testISR.c
0049c2   0e0a     MOVLW     0xa                  if(testISRCounter != 0)                                                    C:\usb4all\fw\demo\user\testISR.c
0049c4   50db     MOVF      0xdb,0x0,0x0                                                                                    
0049c6   e00c     BZ        0x49e0                                                                                          
                                                 {                                                                          C:\usb4all\fw\demo\user\testISR.c
0049c8   0104     MOVLB     0x4                      if(!mUSBGenTxIsBusy())                                                 C:\usb4all\fw\demo\user\testISR.c
0049ca   bf0c     BTFSC     0xc,0x7,0x1                                                                                     
0049cc   d009     BRA       0x49e0                                                                                          
0049ce   0e0a     MOVLW     0xa                          USBGenWrite2(testISRHandler, testISRCounter);                      C:\usb4all\fw\demo\user\testISR.c
0049d0   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0049d2   ffe6                                                                                                               
0049d4   c17a     MOVFF     0x17a,0xfe6                                                                                     
0049d6   ffe6                                                                                                               
0049d8   ec36     CALL      0x266c,0x0                                                                                      
0049da   f013                                                                                                               
0049dc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0049de   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                 }//end if  	  	                                                            C:\usb4all\fw\demo\user\testISR.c
0049e0   0e0b     MOVLW     0xb            }//end UserSkelReceived                                                          C:\usb4all\fw\demo\user\testISR.c
0049e2   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0049e4   e202     BC        0x49ea                                                                                          
0049e6   6ae1     CLRF      0xe1,0x0                                                                                        
0049e8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0049ea   6ee1     MOVWF     0xe1,0x0                                                                                        
0049ec   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0049ee   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0049f0   ffd9                                                                                                               
0049f2   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\testISR.c
                                           /** EOF usr_skeleton.c ***************************************************************/ C:\usb4all\fw\demo\user\testISR.c
                                           /* Author               Date        Comment                                      C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                            * Rafael Fernandez      17/06/07 	Original                                      C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                            * Andrés Aguirre Dorelo 19/04/09   Parametrización de configuración             C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                            ********************************************************************/           C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           #include <p18cxxx.h>                                                             C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           #include "system\typedefs.h"                        // Required                  C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           #include "system\usb\usb.h"                         // Required                  C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           #include "io_cfg.h"                                 // Required                  C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           #include "usb4all\dynamicISR\dynamicISR.h"                                       C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           #include "t0Proxy.h"                              // Modifiable                  C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           #include "system\usb\usb_compile_time_validation.h" // Optional                  C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           //#include "user\user.h"                                                         C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           //#include "user\handlerManager.h"                              // Modifiable    C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           volatile void ( *t0Function[MAX_T0_FUNCTIONS]) (void) ;//arreglo de punteros a las funciones ISR de los modulos que usan Timer0 C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           volatile byte t0Listeners;                                                       C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           volatile byte t0LoadHigh;                                                        C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           volatile byte t0LoadLow;                                                         C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           #pragma code sys                                                                 C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                                                                                                            C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
00210c   cfd9     MOVFF     0xfd9,0xfe6    void initT0Functions(void){                                                      C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
00210e   ffe6                                                                                                               
002110   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002112   ffd9                                                                                                               
002114   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	byte i;                                                                         C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002116   6adf     CLRF      0xdf,0x0       	for (i=0; i<MAX_T0_FUNCTIONS;i++){                                              C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002118   0e05     MOVLW     0x5                                                                                             
00211a   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
00211c   e20d     BC        0x2138                                                                                          
002134   2adf     INCF      0xdf,0x1,0x0                                                                                    
002136   d7f0     BRA       0x2118                                                                                          
00211e   6aea     CLRF      0xea,0x0       		t0Function[i] = 0; //supongo 0 = null                                          C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002120   34df     RLCF      0xdf,0x0,0x0                                                                                    
002122   0bfe     ANDLW     0xfe                                                                                            
002124   36ea     RLCF      0xea,0x1,0x0                                                                                    
002126   6ee9     MOVWF     0xe9,0x0                                                                                        
002128   0e0e     MOVLW     0xe                                                                                             
00212a   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00212c   0e01     MOVLW     0x1                                                                                             
00212e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002130   6aee     CLRF      0xee,0x0                                                                                        
002132   6aed     CLRF      0xed,0x0                                                                                        
                                           	}                                                                               C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002138   0101     MOVLB     0x1            	t0Listeners=0;							                                                           C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
00213a   6b18     CLRF      0x18,0x1                                                                                        
00213c   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
00213e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002140   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002142   ffd9                                                                                                               
002144   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002146   cfd9     MOVFF     0xfd9,0xfe6    BOOL addT0Function(volatile void (*ISRFun) (void)){                              C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002148   ffe6                                                                                                               
00214a   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00214c   ffd9                                                                                                               
00214e   0e02     MOVLW     0x2                                                                                             
002150   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
002152   6adf     CLRF      0xdf,0x0       	byte i = 0;                                                                     C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002154   0e01     MOVLW     0x1            	BOOL termine = FALSE;                                                           C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002156   6adb     CLRF      0xdb,0x0                                                                                        
002158   0e05     MOVLW     0x5            	while (i<MAX_T0_FUNCTIONS && !termine){                                         C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
00215a   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
00215c   e223     BC        0x21a4                                                                                          
00215e   0e01     MOVLW     0x1                                                                                             
002160   50db     MOVF      0xdb,0x0,0x0                                                                                    
002162   e120     BNZ       0x21a4                                                                                          
0021a2   d7da     BRA       0x2158                                                                                          
002164   6aea     CLRF      0xea,0x0       		if ( t0Function[i] == 0) { //TODO ojo que cambie != por ==                     C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002166   34df     RLCF      0xdf,0x0,0x0                                                                                    
002168   0bfe     ANDLW     0xfe                                                                                            
00216a   36ea     RLCF      0xea,0x1,0x0                                                                                    
00216c   6ee9     MOVWF     0xe9,0x0                                                                                        
00216e   0e0e     MOVLW     0xe                                                                                             
002170   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002172   0e01     MOVLW     0x1                                                                                             
002174   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002176   50ee     MOVF      0xee,0x0,0x0                                                                                    
002178   10ed     IORWF     0xed,0x0,0x0                                                                                    
00217a   e112     BNZ       0x21a0                                                                                          
00217c   52de     MOVF      0xde,0x1,0x0   			termine = TRUE;                                                               C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
00217e   0e01     MOVLW     0x1                                                                                             
002180   6edd     MOVWF     0xdd,0x0                                                                                        
002182   6aea     CLRF      0xea,0x0       			t0Function[i] = ISRFun;                                                       C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002184   34df     RLCF      0xdf,0x0,0x0                                                                                    
002186   0bfe     ANDLW     0xfe                                                                                            
002188   36ea     RLCF      0xea,0x1,0x0                                                                                    
00218a   6ee9     MOVWF     0xe9,0x0                                                                                        
00218c   0e0e     MOVLW     0xe                                                                                             
00218e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002190   0e01     MOVLW     0x1                                                                                             
002192   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002194   0efd     MOVLW     0xfd                                                                                            
002196   cfdb     MOVFF     0xfdb,0xfee                                                                                     
002198   ffee                                                                                                               
00219a   0efe     MOVLW     0xfe                                                                                            
00219c   cfdb     MOVFF     0xfdb,0xfed                                                                                     
00219e   ffed                                                                                                               
                                           		}                                                                              C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0021a0   2adf     INCF      0xdf,0x1,0x0   		i++;                                                                           C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           	}                                                                               C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0021a4   0e01     MOVLW     0x1            	if (!termine) return FALSE;                                                     C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0021a6   50db     MOVF      0xdb,0x0,0x0                                                                                    
0021a8   e102     BNZ       0x21ae                                                                                          
0021aa   0e00     MOVLW     0x0                                                                                             
0021ac   d016     BRA       0x21da                                                                                          
0021ae   0101     MOVLB     0x1            	if ((t0Listeners++)==0){                                                        C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0021b0   5118     MOVF      0x18,0x0,0x1                                                                                    
0021b2   2b18     INCF      0x18,0x1,0x1                                                                                    
0021b4   0900     IORLW     0x0                                                                                             
0021b6   e10f     BNZ       0x21d6                                                                                          
                                           		// add my receive ISR function to the dynamic pooling module, to be called periodically  C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0021b8   0ebc     MOVLW     0xbc           		addISRFunction(&t0Interrupt);                                                  C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0021ba   6ee6     MOVWF     0xe6,0x0                                                                                        
0021bc   0e22     MOVLW     0x22                                                                                            
0021be   6ee6     MOVWF     0xe6,0x0                                                                                        
0021c0   ec7c     CALL      0x1ef8,0x0                                                                                      
0021c2   f00f                                                                                                               
0021c4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0021c6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0021c8   94f2     BCF       0xf2,0x2,0x0   		INTCONbits.TMR0IF = 0; //apago bandera de interrupcion de timer0 por las dudas C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0021ca   8af2     BSF       0xf2,0x5,0x0   		INTCONbits.TMR0IE = 1; //cuando se agrega la primer funcion listener prendo ints de Timer0  C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           		//cargo valores                                                                C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0021cc   c11a     MOVFF     0x11a,0xfd6    		TMR0L = t0LoadLow;                                                             C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0021ce   ffd6                                                                                                               
0021d0   c119     MOVFF     0x119,0xfd7    		TMR0H = t0LoadHigh;                                                            C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0021d2   ffd7                                                                                                               
0021d4   8ed5     BSF       0xd5,0x7,0x0   		T0CONbits.TMR0ON  = TRUE; //prendo timer0                                      C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           		//mLED_3_On(); raro, no anda el debug                                          C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           	}                                                                               C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0021d6   0e01     MOVLW     0x1            	return TRUE;                                                                    C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0021d8   d000     BRA       0x21da                                                                                          
0021da   6e10     MOVWF     0x10,0x0       } 		                                                                             C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0021dc   0e02     MOVLW     0x2                                                                                             
0021de   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0021e0   e202     BC        0x21e6                                                                                          
0021e2   6ae1     CLRF      0xe1,0x0                                                                                        
0021e4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0021e6   6ee1     MOVWF     0xe1,0x0                                                                                        
0021e8   5010     MOVF      0x10,0x0,0x0                                                                                    
0021ea   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0021ec   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0021ee   ffd9                                                                                                               
0021f0   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0021f2   cfd9     MOVFF     0xfd9,0xfe6    BOOL removeT0Function(volatile void (*ISRFun) (void)){                           C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0021f4   ffe6                                                                                                               
0021f6   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0021f8   ffd9                                                                                                               
0021fa   0e02     MOVLW     0x2                                                                                             
0021fc   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
0021fe   6adf     CLRF      0xdf,0x0       	byte i=0;                                                                       C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002200   0e01     MOVLW     0x1            	BOOL termine=FALSE;                                                             C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002202   6adb     CLRF      0xdb,0x0                                                                                        
002204   0e05     MOVLW     0x5            	while (i<MAX_T0_FUNCTIONS && !termine){                                         C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002206   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
002208   e228     BC        0x225a                                                                                          
00220a   0e01     MOVLW     0x1                                                                                             
00220c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00220e   e125     BNZ       0x225a                                                                                          
002258   d7d5     BRA       0x2204                                                                                          
002210   6aea     CLRF      0xea,0x0       		if ( t0Function[i] == ISRFun) {                                                C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002212   34df     RLCF      0xdf,0x0,0x0                                                                                    
002214   0bfe     ANDLW     0xfe                                                                                            
002216   36ea     RLCF      0xea,0x1,0x0                                                                                    
002218   6ee9     MOVWF     0xe9,0x0                                                                                        
00221a   0e0e     MOVLW     0xe                                                                                             
00221c   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00221e   0e01     MOVLW     0x1                                                                                             
002220   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002222   cfee     MOVFF     0xfee,0x10                                                                                      
002224   f010                                                                                                               
002226   cfef     MOVFF     0xfef,0x11                                                                                      
002228   f011                                                                                                               
00222a   0efd     MOVLW     0xfd                                                                                            
00222c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00222e   1810     XORWF     0x10,0x0,0x0                                                                                    
002230   e103     BNZ       0x2238                                                                                          
002232   0efe     MOVLW     0xfe                                                                                            
002234   50db     MOVF      0xdb,0x0,0x0                                                                                    
002236   1811     XORWF     0x11,0x0,0x0                                                                                    
002238   e10e     BNZ       0x2256                                                                                          
00223a   52de     MOVF      0xde,0x1,0x0   			termine = TRUE;                                                               C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
00223c   0e01     MOVLW     0x1                                                                                             
00223e   6edd     MOVWF     0xdd,0x0                                                                                        
002240   6aea     CLRF      0xea,0x0       			t0Function [i] = 0;                                                           C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002242   34df     RLCF      0xdf,0x0,0x0                                                                                    
002244   0bfe     ANDLW     0xfe                                                                                            
002246   36ea     RLCF      0xea,0x1,0x0                                                                                    
002248   6ee9     MOVWF     0xe9,0x0                                                                                        
00224a   0e0e     MOVLW     0xe                                                                                             
00224c   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00224e   0e01     MOVLW     0x1                                                                                             
002250   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002252   6aee     CLRF      0xee,0x0                                                                                        
002254   6aed     CLRF      0xed,0x0                                                                                        
                                           		}                                                                              C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002256   2adf     INCF      0xdf,0x1,0x0   		i++;                                                                           C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           	}                                                                               C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
00225a   0e01     MOVLW     0x1            	if (!termine) return FALSE;                                                     C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
00225c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00225e   e102     BNZ       0x2264                                                                                          
002260   0e00     MOVLW     0x0                                                                                             
002262   d010     BRA       0x2284                                                                                          
002264   0101     MOVLB     0x1            	if ((--t0Listeners)==0) {                                                       C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002266   0718     DECF      0x18,0x1,0x1                                                                                    
002268   e10b     BNZ       0x2280                                                                                          
00226a   9ed5     BCF       0xd5,0x7,0x0   		T0CONbits.TMR0ON  = FALSE; //apago timer 0                                     C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
00226c   94f2     BCF       0xf2,0x2,0x0   		INTCONbits.TMR0IF = 0; //apago bandera de interrupcion de timer0 por las dudas C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
00226e   9af2     BCF       0xf2,0x5,0x0   		INTCONbits.TMR0IE = 0; //cuando se quita la ultima funcion listener apagago ints de Timer0  C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002270   0ebc     MOVLW     0xbc           		removeISRFunction(&t0Interrupt);                                               C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002272   6ee6     MOVWF     0xe6,0x0                                                                                        
002274   0e22     MOVLW     0x22                                                                                            
002276   6ee6     MOVWF     0xe6,0x0                                                                                        
002278   ecc4     CALL      0x1f88,0x0                                                                                      
00227a   f00f                                                                                                               
00227c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00227e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           		//mLED_3_Off(); raro, no anda el debug                                         C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           	}                                                                               C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002280   0e01     MOVLW     0x1            	return TRUE;                                                                    C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002282   d000     BRA       0x2284                                                                                          
002284   6e10     MOVWF     0x10,0x0       }                                                                                C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002286   0e02     MOVLW     0x2                                                                                             
002288   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
00228a   e202     BC        0x2290                                                                                          
00228c   6ae1     CLRF      0xe1,0x0                                                                                        
00228e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002290   6ee1     MOVWF     0xe1,0x0                                                                                        
002292   5010     MOVF      0x10,0x0,0x0                                                                                    
002294   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002296   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002298   ffd9                                                                                                               
00229a   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
00229c   cfd9     MOVFF     0xfd9,0xfe6    void configT0(unsigned char t0_low, unsigned char t0_high){                      C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
00229e   ffe6                                                                                                               
0022a0   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0022a2   ffd9                                                                                                               
0022a4   0e02     MOVLW     0x2            	T0CON = 0x02; //TODO parametrizarlo también                                     C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0022a6   6ed5     MOVWF     0xd5,0x0                                                                                        
                                           	//t0LoadLow = 1;                                                                C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           	//t0LoadHigh = 1;                                                               C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0022a8   0efe     MOVLW     0xfe           	t0LoadLow = t0_low;                                                             C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0022aa   cfdb     MOVFF     0xfdb,0x11a                                                                                     
0022ac   f11a                                                                                                               
0022ae   0efd     MOVLW     0xfd           	t0LoadHigh = t0_high;                                                           C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0022b0   cfdb     MOVFF     0xfdb,0x119                                                                                     
0022b2   f119                                                                                                               
0022b4   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0022b6   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0022b8   ffd9                                                                                                               
0022ba   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0022bc   cfd9     MOVFF     0xfd9,0xfe6    void t0Interrupt(void){                                                          C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0022be   ffe6                                                                                                               
0022c0   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0022c2   ffd9                                                                                                               
0022c4   52e6     MOVF      0xe6,0x1,0x0                                                                                    
0022c6   6adf     CLRF      0xdf,0x0       	volatile byte i=0;                                                              C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0022c8   a4f2     BTFSS     0xf2,0x2,0x0   	if (INTCONbits.TMR0IF){                                                         C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0022ca   d029     BRA       0x231e                                                                                          
                                           		//si hubo interrupcion del timer0 apago la bandera de interrucion y hago notify a todos los observers C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0022cc   94f2     BCF       0xf2,0x2,0x0   		INTCONbits.TMR0IF = 0;                                                         C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           		//vuelvo a setear el timer                                                     C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0022ce   c11a     MOVFF     0x11a,0xfd6    		TMR0L = t0LoadLow;                                                             C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0022d0   ffd6                                                                                                               
0022d2   c119     MOVFF     0x119,0xfd7    		TMR0H = t0LoadHigh;                                                            C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0022d4   ffd7                                                                                                               
0022d6   0e05     MOVLW     0x5            		while (i<MAX_T0_FUNCTIONS){                                                    C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0022d8   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
0022da   e221     BC        0x231e                                                                                          
00231c   d7dc     BRA       0x22d6                                                                                          
                                           			//mLED_4_On();                                                                C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0022dc   6aea     CLRF      0xea,0x0       			if(t0Function[i] != 0){ //tube que bajar esta condicion del while al if, porque cuando me remueven pueden quedar "huecos" C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0022de   34df     RLCF      0xdf,0x0,0x0                                                                                    
0022e0   0bfe     ANDLW     0xfe                                                                                            
0022e2   36ea     RLCF      0xea,0x1,0x0                                                                                    
0022e4   6ee9     MOVWF     0xe9,0x0                                                                                        
0022e6   0e0e     MOVLW     0xe                                                                                             
0022e8   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0022ea   0e01     MOVLW     0x1                                                                                             
0022ec   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0022ee   50ee     MOVF      0xee,0x0,0x0                                                                                    
0022f0   10ed     IORWF     0xed,0x0,0x0                                                                                    
0022f2   e013     BZ        0x231a                                                                                          
0022f4   6aea     CLRF      0xea,0x0       				t0Function[i]();                                                             C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
0022f6   34df     RLCF      0xdf,0x0,0x0                                                                                    
0022f8   0bfe     ANDLW     0xfe                                                                                            
0022fa   36ea     RLCF      0xea,0x1,0x0                                                                                    
0022fc   6ee9     MOVWF     0xe9,0x0                                                                                        
0022fe   0e0e     MOVLW     0xe                                                                                             
002300   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002302   0e01     MOVLW     0x1                                                                                             
002304   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002306   cfee     MOVFF     0xfee,0x10                                                                                      
002308   f010                                                                                                               
00230a   cfef     MOVFF     0xfef,0x11                                                                                      
00230c   f011                                                                                                               
00230e   d004     BRA       0x2318                                                                                          
002310   c011     MOVFF     0x11,0xffa                                                                                      
002312   fffa                                                                                                               
002314   5010     MOVF      0x10,0x0,0x0                                                                                    
002316   6ef9     MOVWF     0xf9,0x0                                                                                        
002318   dffb     RCALL     0x2310                                                                                          
                                           			}                                                                             C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
00231a   2adf     INCF      0xdf,0x1,0x0   			i++;                                                                          C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           		}                                                                              C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           	}                                                                               C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
00231e   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
002320   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002322   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002324   ffd9                                                                                                               
002326   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\usb4all\proxys\T0Proxy.c
                                           /* Author             									  Date        Comment                             C:\usb4all\fw\demo\user\userLoopBack.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~   C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Andrés Aguirre, Rafael Fernandez, Carlos Grossy       16/10/07    Original.   C:\usb4all\fw\demo\user\userLoopBack.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\userLoopBack.c
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\user\userLoopBack.c
                                           #include <p18cxxx.h>                                                             C:\usb4all\fw\demo\user\userLoopBack.c
                                           #include <usart.h>                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                           #include "system\typedefs.h"                                                     C:\usb4all\fw\demo\user\userLoopBack.c
                                           #include "system\usb\usb.h"                                                      C:\usb4all\fw\demo\user\userLoopBack.c
                                           #include "user\userLoopBack.h"                                                   C:\usb4all\fw\demo\user\userLoopBack.c
                                           #include "io_cfg.h"              // I/O pin mapping                              C:\usb4all\fw\demo\user\userLoopBack.c
                                           #include "user\handlerManager.h"                                                 C:\usb4all\fw\demo\user\userLoopBack.c
                                           #include "dynamicPolling.h"                                                      C:\usb4all\fw\demo\user\userLoopBack.c
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\user\userLoopBack.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\user\userLoopBack.c
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                           byte  usrLoopbackHandler;	 // Handler number asigned to the module               C:\usb4all\fw\demo\user\userLoopBack.c
                                           byte* sendBufferUsrLoopback; // buffer to send data                              C:\usb4all\fw\demo\user\userLoopBack.c
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\user\userLoopBack.c
                                           void UserLoopBackProcessIO(void);                                                C:\usb4all\fw\demo\user\userLoopBack.c
                                           void UserLoopBackInit(byte i);                                                   C:\usb4all\fw\demo\user\userLoopBack.c
                                           void UserLoopBackReceived(byte*, byte);                                          C:\usb4all\fw\demo\user\userLoopBack.c
                                           void UserLoopBackRelease(byte i);                                                C:\usb4all\fw\demo\user\userLoopBack.c
                                           void UserLoopBackConfigure(void);                                                C:\usb4all\fw\demo\user\userLoopBack.c
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                           // Table used by te framework to get a fixed reference point to the user module functions defined by the framework  C:\usb4all\fw\demo\user\userLoopBack.c
                                           /** USER MODULE REFERENCE*****************************************************/  C:\usb4all\fw\demo\user\userLoopBack.c
                                           #pragma romdata user                                                             C:\usb4all\fw\demo\user\userLoopBack.c
                                           uTab UserLoopBackModuleTable = {&UserLoopBackInit,&UserLoopBackRelease,&UserLoopBackConfigure,"lback"}; //modName must be less or equal 8 characters C:\usb4all\fw\demo\user\userLoopBack.c
                                           #pragma code                                                                     C:\usb4all\fw\demo\user\userLoopBack.c
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\user\userLoopBack.c
                                           #pragma code module                                                              C:\usb4all\fw\demo\user\userLoopBack.c
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Function:        UserLoopBackInit(void)                                       C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Overview:        This function is initialices the resources that the user module needs to work, it is called by the framework  C:\usb4all\fw\demo\user\userLoopBack.c
                                            *					when the module is opened	                                                C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\userLoopBack.c
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
0049f4   cfd9     MOVFF     0xfd9,0xfe6    void UserLoopBackInit(byte i){                                                   C:\usb4all\fw\demo\user\userLoopBack.c
0049f6   ffe6                                                                                                               
0049f8   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0049fa   ffd9                                                                                                               
0049fc   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	BOOL res;                                                                       C:\usb4all\fw\demo\user\userLoopBack.c
0049fe   0efe     MOVLW     0xfe           	usrLoopbackHandler = i;                                                         C:\usb4all\fw\demo\user\userLoopBack.c
004a00   cfdb     MOVFF     0xfdb,0x181                                                                                     
004a02   f181                                                                                                               
                                           	// add my receive function to the handler module, to be called automatically when the pc sends data to the user module C:\usb4all\fw\demo\user\userLoopBack.c
004a04   0e94     MOVLW     0x94           	setHandlerReceiveFunction(usrLoopbackHandler,&UserLoopBackReceived);            C:\usb4all\fw\demo\user\userLoopBack.c
004a06   6ee6     MOVWF     0xe6,0x0                                                                                        
004a08   0e4a     MOVLW     0x4a                                                                                            
004a0a   6ee6     MOVWF     0xe6,0x0                                                                                        
004a0c   c181     MOVFF     0x181,0xfe6                                                                                     
004a0e   ffe6                                                                                                               
004a10   ecc0     CALL      0x2380,0x0                                                                                      
004a12   f011                                                                                                               
004a14   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004a16   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004a18   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	// add my receive pooling function to the dynamic pooling module, to be called periodically  C:\usb4all\fw\demo\user\userLoopBack.c
004a1a   0e4a     MOVLW     0x4a           	res = addPollingFunction(&UserLoopBackProcessIO);                               C:\usb4all\fw\demo\user\userLoopBack.c
004a1c   6ee6     MOVWF     0xe6,0x0                                                                                        
004a1e   0e4a     MOVLW     0x4a                                                                                            
004a20   6ee6     MOVWF     0xe6,0x0                                                                                        
004a22   ec55     CALL      0x14aa,0x0                                                                                      
004a24   f00a                                                                                                               
004a26   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004a28   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004a2a   6edf     MOVWF     0xdf,0x0                                                                                        
                                           	// initialize the send buffer, used to send data to the PC                      C:\usb4all\fw\demo\user\userLoopBack.c
004a2c   c181     MOVFF     0x181,0xfe6    	sendBufferUsrLoopback = getSharedBuffer(usrLoopbackHandler);                    C:\usb4all\fw\demo\user\userLoopBack.c
004a2e   ffe6                                                                                                               
004a30   ec73     CALL      0x2ce6,0x0                                                                                      
004a32   f016                                                                                                               
004a34   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004a36   cff3     MOVFF     0xff3,0x182                                                                                     
004a38   f182                                                                                                               
004a3a   cff4     MOVFF     0xff4,0x183                                                                                     
004a3c   f183                                                                                                               
                                           	//TODO return res value                                                         C:\usb4all\fw\demo\user\userLoopBack.c
004a3e   52e5     MOVF      0xe5,0x1,0x0   }//end UserLoopBackInit                                                          C:\usb4all\fw\demo\user\userLoopBack.c
004a40   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004a42   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
004a44   ffd9                                                                                                               
004a46   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Function:        UserLoopBackConfigure(void)                                  C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Overview:        This function sets the specific configuration for the user module, it is called by the framework  C:\usb4all\fw\demo\user\userLoopBack.c
                                            *						                                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\userLoopBack.c
                                           void UserLoopBackConfigure(void){                                                C:\usb4all\fw\demo\user\userLoopBack.c
                                           // Do the configuration                                                          C:\usb4all\fw\demo\user\userLoopBack.c
004a48   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\user\userLoopBack.c
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Function:        UserLoopBackProcessIO(void)                                  C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Overview:        This function is registered in the dinamic polling, who call ir periodically to process the IO interaction C:\usb4all\fw\demo\user\userLoopBack.c
                                            *					int the PIC, also it can comunicate things to the pc by the USB	          C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\userLoopBack.c
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                           void UserLoopBackProcessIO(void){                                                C:\usb4all\fw\demo\user\userLoopBack.c
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
004a4a   0e06     MOVLW     0x6                if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;      C:\usb4all\fw\demo\user\userLoopBack.c
004a4c   0101     MOVLB     0x1                                                                                             
004a4e   5d72     SUBWF     0x72,0x0,0x1                                                                                    
004a50   e303     BNC       0x4a58                                                                                          
004a52   506d     MOVF      0x6d,0x0,0x0                                                                                    
004a54   0b02     ANDLW     0x2                                                                                             
004a56   e001     BZ        0x4a5a                                                                                          
004a58   d000     BRA       0x4a5a                                                                                          
                                           	// here enter the code that want to be called periodically, per example interaction with buttons and leds C:\usb4all\fw\demo\user\userLoopBack.c
                                           	                                                                                C:\usb4all\fw\demo\user\userLoopBack.c
004a5a   0012     RETURN    0x0            }//end ProcessIO                                                                 C:\usb4all\fw\demo\user\userLoopBack.c
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Function:        UserLoopBackRelease(byte i)                                  C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Overview:        This function release all the resources that the user module used, it is called by the framework  C:\usb4all\fw\demo\user\userLoopBack.c
                                            *					when the module is close	                                                 C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\userLoopBack.c
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
004a5c   cfd9     MOVFF     0xfd9,0xfe6    void UserLoopBackRelease(byte i){                                                C:\usb4all\fw\demo\user\userLoopBack.c
004a5e   ffe6                                                                                                               
004a60   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
004a62   ffd9                                                                                                               
004a64   0efe     MOVLW     0xfe           	unsetHandlerReceiveBuffer(i);                                                   C:\usb4all\fw\demo\user\userLoopBack.c
004a66   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
004a68   ffe6                                                                                                               
004a6a   ecac     CALL      0x2358,0x0                                                                                      
004a6c   f011                                                                                                               
004a6e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004a70   0efe     MOVLW     0xfe           	unsetHandlerReceiveFunction(i);                                                 C:\usb4all\fw\demo\user\userLoopBack.c
004a72   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
004a74   ffe6                                                                                                               
004a76   ecd8     CALL      0x23b0,0x0                                                                                      
004a78   f011                                                                                                               
004a7a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004a7c   0e4a     MOVLW     0x4a           	removePoolingFunction(&UserLoopBackProcessIO);                                  C:\usb4all\fw\demo\user\userLoopBack.c
004a7e   6ee6     MOVWF     0xe6,0x0                                                                                        
004a80   0e4a     MOVLW     0x4a                                                                                            
004a82   6ee6     MOVWF     0xe6,0x0                                                                                        
004a84   ec97     CALL      0x152e,0x0                                                                                      
004a86   f00a                                                                                                               
004a88   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004a8a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004a8c   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\userLoopBack.c
004a8e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
004a90   ffd9                                                                                                               
004a92   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Function:        UserLoopBackReceived(byte* recBuffPtr, byte len)             C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Overview:        This function manages the comunication with the pc           C:\usb4all\fw\demo\user\userLoopBack.c
                                            *                                                                               C:\usb4all\fw\demo\user\userLoopBack.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\userLoopBack.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\userLoopBack.c
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
004a94   cfd9     MOVFF     0xfd9,0xfe6    void UserLoopBackReceived(byte* recBuffPtr, byte len){                           C:\usb4all\fw\demo\user\userLoopBack.c
004a96   ffe6                                                                                                               
004a98   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
004a9a   ffd9                                                                                                               
004a9c   0e0b     MOVLW     0xb                                                                                             
004a9e   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	  byte index;                                                                   C:\usb4all\fw\demo\user\userLoopBack.c
004aa0   50d9     MOVF      0xd9,0x0,0x0   	  char mens[9] = "LBACK :)";	                                                   C:\usb4all\fw\demo\user\userLoopBack.c
004aa2   0f01     ADDLW     0x1                                                                                             
004aa4   6ee9     MOVWF     0xe9,0x0                                                                                        
004aa6   cfda     MOVFF     0xfda,0xfea                                                                                     
004aa8   ffea                                                                                                               
004aaa   0e4c     MOVLW     0x4c                                                                                            
004aac   6eee     MOVWF     0xee,0x0                                                                                        
004aae   0e42     MOVLW     0x42                                                                                            
004ab0   6eee     MOVWF     0xee,0x0                                                                                        
004ab2   0e41     MOVLW     0x41                                                                                            
004ab4   6eee     MOVWF     0xee,0x0                                                                                        
004ab6   0e43     MOVLW     0x43                                                                                            
004ab8   6eee     MOVWF     0xee,0x0                                                                                        
004aba   0e4b     MOVLW     0x4b                                                                                            
004abc   6eee     MOVWF     0xee,0x0                                                                                        
004abe   0e20     MOVLW     0x20                                                                                            
004ac0   6eee     MOVWF     0xee,0x0                                                                                        
004ac2   0e3a     MOVLW     0x3a                                                                                            
004ac4   6eee     MOVWF     0xee,0x0                                                                                        
004ac6   0e29     MOVLW     0x29                                                                                            
004ac8   6eee     MOVWF     0xee,0x0                                                                                        
004aca   6aee     CLRF      0xee,0x0                                                                                        
004acc   0e0a     MOVLW     0xa                  byte UserLoopBackCounter = 0;                                              C:\usb4all\fw\demo\user\userLoopBack.c
004ace   6adb     CLRF      0xdb,0x0                                                                                        
004ad0   6adb     CLRF      0xdb,0x0       	  for (UserLoopBackCounter=0 ; UserLoopBackCounter < len ; UserLoopBackCounter++){ C:\usb4all\fw\demo\user\userLoopBack.c
004ad2   0efc     MOVLW     0xfc                                                                                            
004ad4   50db     MOVF      0xdb,0x0,0x0                                                                                    
004ad6   6ef3     MOVWF     0xf3,0x0                                                                                        
004ad8   0e0a     MOVLW     0xa                                                                                             
004ada   cfdb     MOVFF     0xfdb,0xff4                                                                                     
004adc   fff4                                                                                                               
004ade   50f3     MOVF      0xf3,0x0,0x0                                                                                    
004ae0   5cf4     SUBWF     0xf4,0x0,0x0                                                                                    
004ae2   e21d     BC        0x4b1e                                                                                          
004b18   0e0a     MOVLW     0xa                                                                                             
004b1a   2adb     INCF      0xdb,0x1,0x0                                                                                    
004b1c   d7da     BRA       0x4ad2                                                                                          
004ae4   0e0a     MOVLW     0xa            	  	*(sendBufferUsrLoopback+UserLoopBackCounter)= *(recBuffPtr+UserLoopBackCounter); // TODO pensar algo mas eficiente C:\usb4all\fw\demo\user\userLoopBack.c
004ae6   50db     MOVF      0xdb,0x0,0x0                                                                                    
004ae8   6ee7     MOVWF     0xe7,0x0                                                                                        
004aea   0efd     MOVLW     0xfd                                                                                            
004aec   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004aee   ffe9                                                                                                               
004af0   0efe     MOVLW     0xfe                                                                                            
004af2   cfdb     MOVFF     0xfdb,0xfea                                                                                     
004af4   ffea                                                                                                               
004af6   50e7     MOVF      0xe7,0x0,0x0                                                                                    
004af8   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004afa   0e00     MOVLW     0x0                                                                                             
004afc   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004afe   50ef     MOVF      0xef,0x0,0x0                                                                                    
004b00   6ee6     MOVWF     0xe6,0x0                                                                                        
004b02   0e0a     MOVLW     0xa                                                                                             
004b04   50db     MOVF      0xdb,0x0,0x0                                                                                    
004b06   0101     MOVLB     0x1                                                                                             
004b08   6aea     CLRF      0xea,0x0                                                                                        
004b0a   2582     ADDWF     0x82,0x0,0x1                                                                                    
004b0c   6ee9     MOVWF     0xe9,0x0                                                                                        
004b0e   5183     MOVF      0x83,0x0,0x1                                                                                    
004b10   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004b12   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004b14   50e7     MOVF      0xe7,0x0,0x0                                                                                    
004b16   6eef     MOVWF     0xef,0x0                                                                                        
                                           	  }                                                                             C:\usb4all\fw\demo\user\userLoopBack.c
004b1e   0efc     MOVLW     0xfc           	  UserLoopBackCounter=len; //por las dudas                                      C:\usb4all\fw\demo\user\userLoopBack.c
004b20   50db     MOVF      0xdb,0x0,0x0                                                                                    
004b22   6ee7     MOVWF     0xe7,0x0                                                                                        
004b24   0e0a     MOVLW     0xa                                                                                             
004b26   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
004b28   ffdb                                                                                                               
                                           	  /*                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                           	  //para que devuelva el doble de lo que recibe                                 C:\usb4all\fw\demo\user\userLoopBack.c
                                           	  for (UserLoopBackCounter=0 ; UserLoopBackCounter < len ; UserLoopBackCounter++){ C:\usb4all\fw\demo\user\userLoopBack.c
                                           	  	*(sendBufferUsrLoopback+(UserLoopBackCounter+len))= *(recBuffPtr+UserLoopBackCounter); // TODO pensar algo mas eficiente C:\usb4all\fw\demo\user\userLoopBack.c
                                           	  }                                                                             C:\usb4all\fw\demo\user\userLoopBack.c
                                                 UserLoopBackCounter=len*2; //por las dudas                                 C:\usb4all\fw\demo\user\userLoopBack.c
                                           	  */                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                           	                                                                                C:\usb4all\fw\demo\user\userLoopBack.c
004b2a   50db     MOVF      0xdb,0x0,0x0         if(UserLoopBackCounter != 0)                                               C:\usb4all\fw\demo\user\userLoopBack.c
004b2c   e00c     BZ        0x4b46                                                                                          
                                                 {                                                                          C:\usb4all\fw\demo\user\userLoopBack.c
004b2e   0104     MOVLB     0x4                      if(!mUSBGenTxIsBusy())                                                 C:\usb4all\fw\demo\user\userLoopBack.c
004b30   bf0c     BTFSC     0xc,0x7,0x1                                                                                     
004b32   d009     BRA       0x4b46                                                                                          
004b34   0e0a     MOVLW     0xa                          USBGenWrite2(usrLoopbackHandler, UserLoopBackCounter);             C:\usb4all\fw\demo\user\userLoopBack.c
004b36   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
004b38   ffe6                                                                                                               
004b3a   c181     MOVFF     0x181,0xfe6                                                                                     
004b3c   ffe6                                                                                                               
004b3e   ec36     CALL      0x266c,0x0                                                                                      
004b40   f013                                                                                                               
004b42   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004b44   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                 }//end if  	  	                                                            C:\usb4all\fw\demo\user\userLoopBack.c
004b46   0e0b     MOVLW     0xb            }//end UserLoopBackReceived                                                      C:\usb4all\fw\demo\user\userLoopBack.c
004b48   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
004b4a   e202     BC        0x4b50                                                                                          
004b4c   6ae1     CLRF      0xe1,0x0                                                                                        
004b4e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004b50   6ee1     MOVWF     0xe1,0x0                                                                                        
004b52   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004b54   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
004b56   ffd9                                                                                                               
004b58   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\userLoopBack.c
                                           /** EOF usr_skeleton.c ***************************************************************/ C:\usb4all\fw\demo\user\userLoopBack.c
                                           /* Author             									  Date        Comment                             C:\usb4all\fw\demo\user\dac.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~   C:\usb4all\fw\demo\user\dac.c
                                            * Andrés Aguirre, Rafael Fernandez					       03/11/07    Original.             C:\usb4all\fw\demo\user\dac.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\user\dac.c
                                           #include <p18cxxx.h>                                                             C:\usb4all\fw\demo\user\dac.c
                                           #include <usart.h>                                                               C:\usb4all\fw\demo\user\dac.c
                                           #include "system\typedefs.h"                                                     C:\usb4all\fw\demo\user\dac.c
                                           #include "system\usb\usb.h"                                                      C:\usb4all\fw\demo\user\dac.c
                                           #include "user\dac.h"                                                            C:\usb4all\fw\demo\user\dac.c
                                           #include "io_cfg.h"              // I/O pin mapping                              C:\usb4all\fw\demo\user\dac.c
                                           #include "user\handlerManager.h"                                                 C:\usb4all\fw\demo\user\dac.c
                                           #include "dynamicPolling.h"                                                      C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\user\dac.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                           byte  usrDACHandler;	 // Handler number asigned to the module                    C:\usb4all\fw\demo\user\dac.c
                                           byte* sendBufferUsrDAC; // buffer to send data                                   C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\user\dac.c
                                           void UserDACProcessIO(void);                                                     C:\usb4all\fw\demo\user\dac.c
                                           void UserDACInit(byte i);                                                        C:\usb4all\fw\demo\user\dac.c
                                           void UserDACReceived(byte*, byte);                                               C:\usb4all\fw\demo\user\dac.c
                                           void UserDACRelease(byte i);                                                     C:\usb4all\fw\demo\user\dac.c
                                           void UserDACConfigure(void);                                                     C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                           // Table used by te framework to get a fixed reference point to the user module functions defined by the framework  C:\usb4all\fw\demo\user\dac.c
                                           /** USER MODULE REFERENCE*****************************************************/  C:\usb4all\fw\demo\user\dac.c
                                           #pragma romdata user                                                             C:\usb4all\fw\demo\user\dac.c
                                           uTab userDACModuleTable = {&UserDACInit,&UserDACRelease,&UserDACConfigure,"dac"};  C:\usb4all\fw\demo\user\dac.c
                                           #pragma code                                                                     C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\user\dac.c
                                           #pragma code module                                                              C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\dac.c
                                            * Function:        UserDACInit(void)                                            C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Overview:        This function is initialices the resources that the user module needs to work, it is called by the framework  C:\usb4all\fw\demo\user\dac.c
                                            *					when the module is opened	                                                C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
004b5a   cfd9     MOVFF     0xfd9,0xfe6    void UserDACInit(byte i){                                                        C:\usb4all\fw\demo\user\dac.c
004b5c   ffe6                                                                                                               
004b5e   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
004b60   ffd9                                                                                                               
004b62   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	BOOL res;                                                                       C:\usb4all\fw\demo\user\dac.c
004b64   0efe     MOVLW     0xfe           	usrDACHandler = i;                                                              C:\usb4all\fw\demo\user\dac.c
004b66   cfdb     MOVFF     0xfdb,0x187                                                                                     
004b68   f187                                                                                                               
                                           	// add my receive function to the handler module, to be called automatically when the pc sends data to the user module C:\usb4all\fw\demo\user\dac.c
004b6a   0ee8     MOVLW     0xe8           	setHandlerReceiveFunction(usrDACHandler,&UserDACReceived);                      C:\usb4all\fw\demo\user\dac.c
004b6c   6ee6     MOVWF     0xe6,0x0                                                                                        
004b6e   0e4b     MOVLW     0x4b                                                                                            
004b70   6ee6     MOVWF     0xe6,0x0                                                                                        
004b72   c187     MOVFF     0x187,0xfe6                                                                                     
004b74   ffe6                                                                                                               
004b76   ecc0     CALL      0x2380,0x0                                                                                      
004b78   f011                                                                                                               
004b7a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004b7c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004b7e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	// add my receive pooling function to the dynamic pooling module, to be called periodically  C:\usb4all\fw\demo\user\dac.c
                                           	//res = addPollingFunction(&UserDACProcessIO);                                  C:\usb4all\fw\demo\user\dac.c
                                           	// initialize the send buffer, used to send data to the PC                      C:\usb4all\fw\demo\user\dac.c
004b80   c187     MOVFF     0x187,0xfe6    	sendBufferUsrDAC = getSharedBuffer(usrDACHandler);                              C:\usb4all\fw\demo\user\dac.c
004b82   ffe6                                                                                                               
004b84   ec73     CALL      0x2ce6,0x0                                                                                      
004b86   f016                                                                                                               
004b88   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004b8a   cff3     MOVFF     0xff3,0x188                                                                                     
004b8c   f188                                                                                                               
004b8e   cff4     MOVFF     0xff4,0x189                                                                                     
004b90   f189                                                                                                               
004b92   6a93     CLRF      0x93,0x0       	mInitDAC_A();                                                                   C:\usb4all\fw\demo\user\dac.c
004b94   6a94     CLRF      0x94,0x0       	mInitDAC_BLow();                                                                C:\usb4all\fw\demo\user\dac.c
004b96   0e0f     MOVLW     0xf            	mInitDAC_BHigh                                                                  C:\usb4all\fw\demo\user\dac.c
004b98   1695     ANDWF     0x95,0x1,0x0                                                                                    
                                           	//TODO return res value                                                         C:\usb4all\fw\demo\user\dac.c
004b9a   52e5     MOVF      0xe5,0x1,0x0   }//end UserDACInit                                                               C:\usb4all\fw\demo\user\dac.c
004b9c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004b9e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
004ba0   ffd9                                                                                                               
004ba2   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\dac.c
                                            * Function:        UserDACConfigure(void)                                       C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Overview:        This function sets the specific configuration for the user module, it is called by the framework  C:\usb4all\fw\demo\user\dac.c
                                            *						                                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\dac.c
                                           void UserDACConfigure(void){                                                     C:\usb4all\fw\demo\user\dac.c
                                           // Do the configuration                                                          C:\usb4all\fw\demo\user\dac.c
004ba4   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\dac.c
                                            * Function:        UserDACProcessIO(void)                                       C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Overview:        This function is registered in the dinamic polling, who call ir periodically to process the IO interaction C:\usb4all\fw\demo\user\dac.c
                                            *					int the PIC, also it can comunicate things to the pc by the USB	          C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                           void UserDACProcessIO(void){                                                     C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
004ba6   0e06     MOVLW     0x6                if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;      C:\usb4all\fw\demo\user\dac.c
004ba8   0101     MOVLB     0x1                                                                                             
004baa   5d72     SUBWF     0x72,0x0,0x1                                                                                    
004bac   e303     BNC       0x4bb4                                                                                          
004bae   506d     MOVF      0x6d,0x0,0x0                                                                                    
004bb0   0b02     ANDLW     0x2                                                                                             
004bb2   e001     BZ        0x4bb6                                                                                          
004bb4   d000     BRA       0x4bb6                                                                                          
                                           	// here enter the code that want to be called periodically, per example interaction with buttons and leds C:\usb4all\fw\demo\user\dac.c
                                           	                                                                                C:\usb4all\fw\demo\user\dac.c
004bb6   0012     RETURN    0x0            }//end ProcessIO                                                                 C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\dac.c
                                            * Function:        UserDACRelease(byte i)                                       C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Overview:        This function release all the resources that the user module used, it is called by the framework  C:\usb4all\fw\demo\user\dac.c
                                            *					when the module is close	                                                 C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
004bb8   cfd9     MOVFF     0xfd9,0xfe6    void UserDACRelease(byte i){                                                     C:\usb4all\fw\demo\user\dac.c
004bba   ffe6                                                                                                               
004bbc   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
004bbe   ffd9                                                                                                               
004bc0   0efe     MOVLW     0xfe           	unsetHandlerReceiveBuffer(i);                                                   C:\usb4all\fw\demo\user\dac.c
004bc2   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
004bc4   ffe6                                                                                                               
004bc6   ecac     CALL      0x2358,0x0                                                                                      
004bc8   f011                                                                                                               
004bca   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004bcc   0efe     MOVLW     0xfe           	unsetHandlerReceiveFunction(i);                                                 C:\usb4all\fw\demo\user\dac.c
004bce   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
004bd0   ffe6                                                                                                               
004bd2   ecd8     CALL      0x23b0,0x0                                                                                      
004bd4   f011                                                                                                               
004bd6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	//removePoolingFunction(&UserDACProcessIO);                                     C:\usb4all\fw\demo\user\dac.c
004bd8   6893     SETF      0x93,0x0       	mReleaseDAC_A();                                                                C:\usb4all\fw\demo\user\dac.c
004bda   6894     SETF      0x94,0x0       	mReleaseDAC_BLow();                                                             C:\usb4all\fw\demo\user\dac.c
004bdc   0ef0     MOVLW     0xf0           	mReleaseDAC_BHigh();                                                            C:\usb4all\fw\demo\user\dac.c
004bde   1295     IORWF     0x95,0x1,0x0                                                                                    
004be0   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\dac.c
004be2   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
004be4   ffd9                                                                                                               
004be6   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\dac.c
                                            * Function:        UserDACReceived(byte* recBuffPtr, byte len)                  C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Overview:        This function manages the comunication with the pc           C:\usb4all\fw\demo\user\dac.c
                                            *                                                                               C:\usb4all\fw\demo\user\dac.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\dac.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
004be8   cfd9     MOVFF     0xfd9,0xfe6    void UserDACReceived(byte* recBuffPtr, byte len){                                C:\usb4all\fw\demo\user\dac.c
004bea   ffe6                                                                                                               
004bec   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
004bee   ffd9                                                                                                               
004bf0   0e10     MOVLW     0x10                                                                                            
004bf2   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	  byte index, low, high, a;                                                     C:\usb4all\fw\demo\user\dac.c
004bf4   50d9     MOVF      0xd9,0x0,0x0   	  char mens[9] = "DACalive";	                                                   C:\usb4all\fw\demo\user\dac.c
004bf6   0f04     ADDLW     0x4                                                                                             
004bf8   6ee9     MOVWF     0xe9,0x0                                                                                        
004bfa   cfda     MOVFF     0xfda,0xfea                                                                                     
004bfc   ffea                                                                                                               
004bfe   0e44     MOVLW     0x44                                                                                            
004c00   6eee     MOVWF     0xee,0x0                                                                                        
004c02   0e41     MOVLW     0x41                                                                                            
004c04   6eee     MOVWF     0xee,0x0                                                                                        
004c06   0e43     MOVLW     0x43                                                                                            
004c08   6eee     MOVWF     0xee,0x0                                                                                        
004c0a   0e61     MOVLW     0x61                                                                                            
004c0c   6eee     MOVWF     0xee,0x0                                                                                        
004c0e   0e6c     MOVLW     0x6c                                                                                            
004c10   6eee     MOVWF     0xee,0x0                                                                                        
004c12   0e69     MOVLW     0x69                                                                                            
004c14   6eee     MOVWF     0xee,0x0                                                                                        
004c16   0e76     MOVLW     0x76                                                                                            
004c18   6eee     MOVWF     0xee,0x0                                                                                        
004c1a   0e65     MOVLW     0x65                                                                                            
004c1c   6eee     MOVWF     0xee,0x0                                                                                        
004c1e   6aee     CLRF      0xee,0x0                                                                                        
004c20   0e0d     MOVLW     0xd                  byte userDACCounter = 0;                                                   C:\usb4all\fw\demo\user\dac.c
004c22   6adb     CLRF      0xdb,0x0                                                                                        
004c24   0e0e     MOVLW     0xe            	  byte dacs[2] = {0x00, 0x00}; 	                                                C:\usb4all\fw\demo\user\dac.c
004c26   6adb     CLRF      0xdb,0x0                                                                                        
004c28   0e0f     MOVLW     0xf                                                                                             
004c2a   6adb     CLRF      0xdb,0x0                                                                                        
004c2c   0efd     MOVLW     0xfd                 switch(((DAC_DATA_PACKET*)recBuffPtr)->CMD)                                C:\usb4all\fw\demo\user\dac.c
004c2e   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004c30   ffe9                                                                                                               
004c32   0efe     MOVLW     0xfe                                                                                            
004c34   cfdb     MOVFF     0xfdb,0xfea                                                                                     
004c36   ffea                                                                                                               
004c38   50ef     MOVF      0xef,0x0,0x0                                                                                    
004c3a   0a05     XORLW     0x5                                                                                             
004c3c   e101     BNZ       0x4c40                                                                                          
004c3e   d091     BRA       0x4d62                                                                                          
004c40   0afa     XORLW     0xfa                                                                                            
004c42   e101     BNZ       0x4c46                                                                                          
004c44   d08c     BRA       0x4d5e                                                                                          
004c46   0afb     XORLW     0xfb                                                                                            
004c48   e042     BZ        0x4cce                                                                                          
004c4a   0a04     XORLW     0x4                                                                                             
004c4c   e001     BZ        0x4c50                                                                                          
004c4e   d097     BRA       0x4d7e                                                                                          
                                                 {                                                                          C:\usb4all\fw\demo\user\dac.c
                                                   case READ_VERSION:                                                       C:\usb4all\fw\demo\user\dac.c
                                                         //dataPacket._byte[1] is len                                       C:\usb4all\fw\demo\user\dac.c
004c50   0efd     MOVLW     0xfd           			  ((DAC_DATA_PACKET*)sendBufferUsrDAC)->_byte[0] = ((DAC_DATA_PACKET*)recBuffPtr)->_byte[0];  C:\usb4all\fw\demo\user\dac.c
004c52   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004c54   ffe9                                                                                                               
004c56   0efe     MOVLW     0xfe                                                                                            
004c58   cfdb     MOVFF     0xfdb,0xfea                                                                                     
004c5a   ffea                                                                                                               
004c5c   50ef     MOVF      0xef,0x0,0x0                                                                                    
004c5e   6ee6     MOVWF     0xe6,0x0                                                                                        
004c60   c188     MOVFF     0x188,0xfe9                                                                                     
004c62   ffe9                                                                                                               
004c64   c189     MOVFF     0x189,0xfea                                                                                     
004c66   ffea                                                                                                               
004c68   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004c6a   50e7     MOVF      0xe7,0x0,0x0                                                                                    
004c6c   6eef     MOVWF     0xef,0x0                                                                                        
004c6e   0efd     MOVLW     0xfd           			  ((DAC_DATA_PACKET*)sendBufferUsrDAC)->_byte[1] = ((DAC_DATA_PACKET*)recBuffPtr)->_byte[1];  C:\usb4all\fw\demo\user\dac.c
004c70   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004c72   ffe9                                                                                                               
004c74   0efe     MOVLW     0xfe                                                                                            
004c76   cfdb     MOVFF     0xfdb,0xfea                                                                                     
004c78   ffea                                                                                                               
004c7a   0e01     MOVLW     0x1                                                                                             
004c7c   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004c7e   0e00     MOVLW     0x0                                                                                             
004c80   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004c82   50ef     MOVF      0xef,0x0,0x0                                                                                    
004c84   6ee6     MOVWF     0xe6,0x0                                                                                        
004c86   c188     MOVFF     0x188,0xfe9                                                                                     
004c88   ffe9                                                                                                               
004c8a   c189     MOVFF     0x189,0xfea                                                                                     
004c8c   ffea                                                                                                               
004c8e   0e01     MOVLW     0x1                                                                                             
004c90   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004c92   0e00     MOVLW     0x0                                                                                             
004c94   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004c96   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004c98   50e7     MOVF      0xe7,0x0,0x0                                                                                    
004c9a   6eef     MOVWF     0xef,0x0                                                                                        
004c9c   c188     MOVFF     0x188,0xfe9                  ((DAC_DATA_PACKET*)sendBufferUsrDAC)->_byte[2] = DAC_MINOR_VERSION; C:\usb4all\fw\demo\user\dac.c
004c9e   ffe9                                                                                                               
004ca0   c189     MOVFF     0x189,0xfea                                                                                     
004ca2   ffea                                                                                                               
004ca4   0e02     MOVLW     0x2                                                                                             
004ca6   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004ca8   0e00     MOVLW     0x0                                                                                             
004caa   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004cac   0e01     MOVLW     0x1                                                                                             
004cae   6eef     MOVWF     0xef,0x0                                                                                        
004cb0   c188     MOVFF     0x188,0xfe9                  ((DAC_DATA_PACKET*)sendBufferUsrDAC)->_byte[3] = DAC_MAJOR_VERSION; C:\usb4all\fw\demo\user\dac.c
004cb2   ffe9                                                                                                               
004cb4   c189     MOVFF     0x189,0xfea                                                                                     
004cb6   ffea                                                                                                               
004cb8   0e03     MOVLW     0x3                                                                                             
004cba   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004cbc   0e00     MOVLW     0x0                                                                                             
004cbe   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004cc0   6aef     CLRF      0xef,0x0                                                                                        
004cc2   0e04     MOVLW     0x4                          userDACCounter=0x04;                                               C:\usb4all\fw\demo\user\dac.c
004cc4   6ef3     MOVWF     0xf3,0x0                                                                                        
004cc6   0e0d     MOVLW     0xd                                                                                             
004cc8   cff3     MOVFF     0xff3,0xfdb                                                                                     
004cca   ffdb                                                                                                               
004ccc   d059     BRA       0x4d80                       break;                                                             C:\usb4all\fw\demo\user\dac.c
                                           	                                                                                C:\usb4all\fw\demo\user\dac.c
                                                     case SEND_DAC:                                                         C:\usb4all\fw\demo\user\dac.c
004cce   0efd     MOVLW     0xfd                         ((DAC_DATA_PACKET*)sendBufferUsrDAC)->_byte[0] = ((DAC_DATA_PACKET*)recBuffPtr)->_byte[0];  C:\usb4all\fw\demo\user\dac.c
004cd0   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004cd2   ffe9                                                                                                               
004cd4   0efe     MOVLW     0xfe                                                                                            
004cd6   cfdb     MOVFF     0xfdb,0xfea                                                                                     
004cd8   ffea                                                                                                               
004cda   50ef     MOVF      0xef,0x0,0x0                                                                                    
004cdc   6ee6     MOVWF     0xe6,0x0                                                                                        
004cde   c188     MOVFF     0x188,0xfe9                                                                                     
004ce0   ffe9                                                                                                               
004ce2   c189     MOVFF     0x189,0xfea                                                                                     
004ce4   ffea                                                                                                               
004ce6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004ce8   50e7     MOVF      0xe7,0x0,0x0                                                                                    
004cea   6eef     MOVWF     0xef,0x0                                                                                        
004cec   0efd     MOVLW     0xfd           			  a = ((DAC_DATA_PACKET*)recBuffPtr)->_byte[1];                               C:\usb4all\fw\demo\user\dac.c
004cee   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004cf0   ffe9                                                                                                               
004cf2   0efe     MOVLW     0xfe                                                                                            
004cf4   cfdb     MOVFF     0xfdb,0xfea                                                                                     
004cf6   ffea                                                                                                               
004cf8   0e01     MOVLW     0x1                                                                                             
004cfa   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004cfc   0e00     MOVLW     0x0                                                                                             
004cfe   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004d00   0e03     MOVLW     0x3                                                                                             
004d02   cfef     MOVFF     0xfef,0xfdb                                                                                     
004d04   ffdb                                                                                                               
                                           			  //high = ((a / 64) << 6);                                                   C:\usb4all\fw\demo\user\dac.c
                                           			  //low  = (a % 64);                                                          C:\usb4all\fw\demo\user\dac.c
                                           			  //DACPortA = high | (low >> 1);                                             C:\usb4all\fw\demo\user\dac.c
004d06   0e03     MOVLW     0x3            			  DACPortA = a;	                                                              C:\usb4all\fw\demo\user\dac.c
004d08   50db     MOVF      0xdb,0x0,0x0                                                                                    
004d0a   6e8a     MOVWF     0x8a,0x0                                                                                        
004d0c   0efd     MOVLW     0xfd           			  a = ((DAC_DATA_PACKET*)recBuffPtr)->_byte[2];                               C:\usb4all\fw\demo\user\dac.c
004d0e   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004d10   ffe9                                                                                                               
004d12   0efe     MOVLW     0xfe                                                                                            
004d14   cfdb     MOVFF     0xfdb,0xfea                                                                                     
004d16   ffea                                                                                                               
004d18   0e02     MOVLW     0x2                                                                                             
004d1a   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004d1c   0e00     MOVLW     0x0                                                                                             
004d1e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004d20   0e03     MOVLW     0x3                                                                                             
004d22   cfef     MOVFF     0xfef,0xfdb                                                                                     
004d24   ffdb                                                                                                               
004d26   0e03     MOVLW     0x3            			  low  = (a % 16);                                                            C:\usb4all\fw\demo\user\dac.c
004d28   50db     MOVF      0xdb,0x0,0x0                                                                                    
004d2a   0b0f     ANDLW     0xf                                                                                             
004d2c   6ee7     MOVWF     0xe7,0x0                                                                                        
004d2e   0e01     MOVLW     0x1                                                                                             
004d30   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
004d32   ffdb                                                                                                               
004d34   0e03     MOVLW     0x3            			  high = ((a / 16) << 4);                                                     C:\usb4all\fw\demo\user\dac.c
004d36   50db     MOVF      0xdb,0x0,0x0                                                                                    
004d38   0bf0     ANDLW     0xf0                                                                                            
004d3a   3ae8     SWAPF     0xe8,0x1,0x0                                                                                    
004d3c   0d10     MULLW     0x10                                                                                            
004d3e   0e02     MOVLW     0x2                                                                                             
004d40   cff3     MOVFF     0xff3,0xfdb                                                                                     
004d42   ffdb                                                                                                               
004d44   0e01     MOVLW     0x1            			  DACPortBLow  = low >> 1;                                                    C:\usb4all\fw\demo\user\dac.c
004d46   40db     RRNCF     0xdb,0x0,0x0                                                                                    
004d48   0b7f     ANDLW     0x7f                                                                                            
004d4a   6e8b     MOVWF     0x8b,0x0                                                                                        
004d4c   0e02     MOVLW     0x2            			  DACPortBHigh = high;                                                        C:\usb4all\fw\demo\user\dac.c
004d4e   50db     MOVF      0xdb,0x0,0x0                                                                                    
004d50   6e8c     MOVWF     0x8c,0x0                                                                                        
004d52   0e01     MOVLW     0x1            			  userDACCounter=0x01;                                                        C:\usb4all\fw\demo\user\dac.c
004d54   6ef3     MOVWF     0xf3,0x0                                                                                        
004d56   0e0d     MOVLW     0xd                                                                                             
004d58   cff3     MOVFF     0xff3,0xfdb                                                                                     
004d5a   ffdb                                                                                                               
004d5c   d011     BRA       0x4d80                       break;                                                             C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                                     case RESET:                                                            C:\usb4all\fw\demo\user\dac.c
004d5e   00ff     RESET                                  Reset();                                                           C:\usb4all\fw\demo\user\dac.c
004d60   d00f     BRA       0x4d80         			  break;                                                                      C:\usb4all\fw\demo\user\dac.c
                                           		                                                                               C:\usb4all\fw\demo\user\dac.c
                                           		 case MESS:                                                                    C:\usb4all\fw\demo\user\dac.c
004d62   0e09     MOVLW     0x9            				sendMes(mens, sizeof(mens));                                                 C:\usb4all\fw\demo\user\dac.c
004d64   6ee6     MOVWF     0xe6,0x0                                                                                        
004d66   50d9     MOVF      0xd9,0x0,0x0                                                                                    
004d68   0f04     ADDLW     0x4                                                                                             
004d6a   6ee6     MOVWF     0xe6,0x0                                                                                        
004d6c   0e00     MOVLW     0x0                                                                                             
004d6e   20da     ADDWFC    0xda,0x0,0x0                                                                                    
004d70   6ee6     MOVWF     0xe6,0x0                                                                                        
004d72   ece0     CALL      0x19c0,0x0                                                                                      
004d74   f00c                                                                                                               
004d76   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004d78   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004d7a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004d7c   d001     BRA       0x4d80                       break;                                                             C:\usb4all\fw\demo\user\dac.c
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                           		 default:                                                                      C:\usb4all\fw\demo\user\dac.c
004d7e   d000     BRA       0x4d80                       break;                                                             C:\usb4all\fw\demo\user\dac.c
                                                 }//end switch(s)                                                           C:\usb4all\fw\demo\user\dac.c
004d80   0e0d     MOVLW     0xd                  if(userDACCounter != 0)                                                    C:\usb4all\fw\demo\user\dac.c
004d82   50db     MOVF      0xdb,0x0,0x0                                                                                    
004d84   e00c     BZ        0x4d9e                                                                                          
                                                 {                                                                          C:\usb4all\fw\demo\user\dac.c
004d86   0104     MOVLB     0x4                      if(!mUSBGenTxIsBusy())                                                 C:\usb4all\fw\demo\user\dac.c
004d88   bf0c     BTFSC     0xc,0x7,0x1                                                                                     
004d8a   d009     BRA       0x4d9e                                                                                          
004d8c   0e0d     MOVLW     0xd                          USBGenWrite2(usrDACHandler, userDACCounter);                       C:\usb4all\fw\demo\user\dac.c
004d8e   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
004d90   ffe6                                                                                                               
004d92   c187     MOVFF     0x187,0xfe6                                                                                     
004d94   ffe6                                                                                                               
004d96   ec36     CALL      0x266c,0x0                                                                                      
004d98   f013                                                                                                               
004d9a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004d9c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                 }//end if  	  	                                                            C:\usb4all\fw\demo\user\dac.c
004d9e   0e10     MOVLW     0x10           }//end UserDACReceived                                                           C:\usb4all\fw\demo\user\dac.c
004da0   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
004da2   e202     BC        0x4da8                                                                                          
004da4   6ae1     CLRF      0xe1,0x0                                                                                        
004da6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004da8   6ee1     MOVWF     0xe1,0x0                                                                                        
004daa   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004dac   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
004dae   ffd9                                                                                                               
004db0   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\dac.c
                                           /** EOF usr_DACeton.c ***************************************************************/ C:\usb4all\fw\demo\user\dac.c
                                           /* Author             									  Date        Comment                             C:\usb4all\fw\demo\user\ior.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~   C:\usb4all\fw\demo\user\ior.c
                                            * Andrés Aguirre									       27/11/08    Original.                           C:\usb4all\fw\demo\user\ior.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\user\ior.c
                                           #include <p18cxxx.h>                                                             C:\usb4all\fw\demo\user\ior.c
                                           #include <usart.h>                                                               C:\usb4all\fw\demo\user\ior.c
                                           #include "system\typedefs.h"                                                     C:\usb4all\fw\demo\user\ior.c
                                           #include "system\usb\usb.h"                                                      C:\usb4all\fw\demo\user\ior.c
                                           #include "user\ior.h"                                                            C:\usb4all\fw\demo\user\ior.c
                                           #include "io_cfg.h"              // I/O pin mapping                              C:\usb4all\fw\demo\user\ior.c
                                           #include "user\handlerManager.h"                                                 C:\usb4all\fw\demo\user\ior.c
                                           #include "dynamicPolling.h"                                                      C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\user\ior.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                           byte  usrIORHandler;	 // Handler number asigned to the module                    C:\usb4all\fw\demo\user\ior.c
                                           byte* sendBufferUsrIOR; // buffer to send data                                   C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\user\ior.c
                                           void UserIORProcessIO(void);                                                     C:\usb4all\fw\demo\user\ior.c
                                           void UserIORInit(byte i);                                                        C:\usb4all\fw\demo\user\ior.c
                                           void UserIORReceived(byte*, byte);                                               C:\usb4all\fw\demo\user\ior.c
                                           void UserIORRelease(byte i);                                                     C:\usb4all\fw\demo\user\ior.c
                                           void UserIORConfigure(void);                                                     C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                           // Table used by te framework to get a fixed reference point to the user module functions defined by the framework  C:\usb4all\fw\demo\user\ior.c
                                           /** USER MODULE REFERENCE*****************************************************/  C:\usb4all\fw\demo\user\ior.c
                                           #pragma romdata user                                                             C:\usb4all\fw\demo\user\ior.c
                                           uTab userIORModuleTable = {&UserIORInit,&UserIORRelease,&UserIORConfigure,"ior"};  C:\usb4all\fw\demo\user\ior.c
                                           #pragma code                                                                     C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\user\ior.c
                                           #pragma code module                                                              C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\ior.c
                                            * Function:        UserIORInit(void)                                            C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Overview:        This function is initialices the resources that the user module needs to work, it is called by the framework  C:\usb4all\fw\demo\user\ior.c
                                            *					when the module is opened	                                                C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
004db2   cfd9     MOVFF     0xfd9,0xfe6    void UserIORInit(byte i){                                                        C:\usb4all\fw\demo\user\ior.c
004db4   ffe6                                                                                                               
004db6   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
004db8   ffd9                                                                                                               
004dba   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	BOOL res;                                                                       C:\usb4all\fw\demo\user\ior.c
004dbc   0efe     MOVLW     0xfe           	usrIORHandler = i;                                                              C:\usb4all\fw\demo\user\ior.c
004dbe   cfdb     MOVFF     0xfdb,0x184                                                                                     
004dc0   f184                                                                                                               
                                           	// add my receive function to the handler module, to be called automatically when the pc sends data to the user module C:\usb4all\fw\demo\user\ior.c
004dc2   0e40     MOVLW     0x40           	setHandlerReceiveFunction(usrIORHandler,&UserIORReceived);                      C:\usb4all\fw\demo\user\ior.c
004dc4   6ee6     MOVWF     0xe6,0x0                                                                                        
004dc6   0e4e     MOVLW     0x4e                                                                                            
004dc8   6ee6     MOVWF     0xe6,0x0                                                                                        
004dca   c184     MOVFF     0x184,0xfe6                                                                                     
004dcc   ffe6                                                                                                               
004dce   ecc0     CALL      0x2380,0x0                                                                                      
004dd0   f011                                                                                                               
004dd2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004dd4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004dd6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	// add my receive pooling function to the dynamic pooling module, to be called periodically  C:\usb4all\fw\demo\user\ior.c
                                           	//res = addPollingFunction(&UserIORProcessIO);                                  C:\usb4all\fw\demo\user\ior.c
                                           	// initialize the send buffer, used to send data to the PC                      C:\usb4all\fw\demo\user\ior.c
004dd8   c184     MOVFF     0x184,0xfe6    	sendBufferUsrIOR = getSharedBuffer(usrIORHandler);                              C:\usb4all\fw\demo\user\ior.c
004dda   ffe6                                                                                                               
004ddc   ec73     CALL      0x2ce6,0x0                                                                                      
004dde   f016                                                                                                               
004de0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004de2   cff3     MOVFF     0xff3,0x185                                                                                     
004de4   f185                                                                                                               
004de6   cff4     MOVFF     0xff4,0x186                                                                                     
004de8   f186                                                                                                               
004dea   6a93     CLRF      0x93,0x0       	mInitIOR_A();                                                                   C:\usb4all\fw\demo\user\ior.c
004dec   6a94     CLRF      0x94,0x0       	mInitIOR_BLow();                                                                C:\usb4all\fw\demo\user\ior.c
004dee   0e0f     MOVLW     0xf            	mInitIOR_BHigh                                                                  C:\usb4all\fw\demo\user\ior.c
004df0   1695     ANDWF     0x95,0x1,0x0                                                                                    
                                           	//TODO return res value                                                         C:\usb4all\fw\demo\user\ior.c
004df2   52e5     MOVF      0xe5,0x1,0x0   }//end UserIORInit                                                               C:\usb4all\fw\demo\user\ior.c
004df4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004df6   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
004df8   ffd9                                                                                                               
004dfa   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\ior.c
                                            * Function:        UserIORConfigure(void)                                       C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Overview:        This function sets the specific configuration for the user module, it is called by the framework  C:\usb4all\fw\demo\user\ior.c
                                            *						                                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\ior.c
                                           void UserIORConfigure(void){                                                     C:\usb4all\fw\demo\user\ior.c
                                           // Do the configuration                                                          C:\usb4all\fw\demo\user\ior.c
004dfc   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\ior.c
                                            * Function:        UserIORProcessIO(void)                                       C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Overview:        This function is registered in the dinamic polling, who call ir periodically to process the IO interaction C:\usb4all\fw\demo\user\ior.c
                                            *					int the PIC, also it can comunicate things to the pc by the USB	          C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                           void UserIORProcessIO(void){                                                     C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
004dfe   0e06     MOVLW     0x6                if((usb_device_state < CONFIGURED_STATE)||(UCONbits.SUSPND==1)) return;      C:\usb4all\fw\demo\user\ior.c
004e00   0101     MOVLB     0x1                                                                                             
004e02   5d72     SUBWF     0x72,0x0,0x1                                                                                    
004e04   e303     BNC       0x4e0c                                                                                          
004e06   506d     MOVF      0x6d,0x0,0x0                                                                                    
004e08   0b02     ANDLW     0x2                                                                                             
004e0a   e001     BZ        0x4e0e                                                                                          
004e0c   d000     BRA       0x4e0e                                                                                          
                                           	// here enter the code that want to be called periodically, per example interaction with buttons and leds C:\usb4all\fw\demo\user\ior.c
                                           	                                                                                C:\usb4all\fw\demo\user\ior.c
004e0e   0012     RETURN    0x0            }//end ProcessIO                                                                 C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\ior.c
                                            * Function:        UserIORRelease(byte i)                                       C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Overview:        This function release all the resources that the user module used, it is called by the framework  C:\usb4all\fw\demo\user\ior.c
                                            *					when the module is close	                                                 C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
004e10   cfd9     MOVFF     0xfd9,0xfe6    void UserIORRelease(byte i){                                                     C:\usb4all\fw\demo\user\ior.c
004e12   ffe6                                                                                                               
004e14   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
004e16   ffd9                                                                                                               
004e18   0efe     MOVLW     0xfe           	unsetHandlerReceiveBuffer(i);                                                   C:\usb4all\fw\demo\user\ior.c
004e1a   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
004e1c   ffe6                                                                                                               
004e1e   ecac     CALL      0x2358,0x0                                                                                      
004e20   f011                                                                                                               
004e22   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004e24   0efe     MOVLW     0xfe           	unsetHandlerReceiveFunction(i);                                                 C:\usb4all\fw\demo\user\ior.c
004e26   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
004e28   ffe6                                                                                                               
004e2a   ecd8     CALL      0x23b0,0x0                                                                                      
004e2c   f011                                                                                                               
004e2e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	//removePoolingFunction(&UserIORProcessIO);                                     C:\usb4all\fw\demo\user\ior.c
004e30   6893     SETF      0x93,0x0       	mReleaseIOR_A();                                                                C:\usb4all\fw\demo\user\ior.c
004e32   6894     SETF      0x94,0x0       	mReleaseIOR_BLow();                                                             C:\usb4all\fw\demo\user\ior.c
004e34   0ef0     MOVLW     0xf0           	mReleaseIOR_BHigh();                                                            C:\usb4all\fw\demo\user\ior.c
004e36   1295     IORWF     0x95,0x1,0x0                                                                                    
004e38   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\ior.c
004e3a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
004e3c   ffd9                                                                                                               
004e3e   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\ior.c
                                            * Function:        UserIORReceived(byte* recBuffPtr, byte len)                  C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Overview:        This function manages the comunication with the pc           C:\usb4all\fw\demo\user\ior.c
                                            *                                                                               C:\usb4all\fw\demo\user\ior.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\ior.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
004e40   cfd9     MOVFF     0xfd9,0xfe6    void UserIORReceived(byte* recBuffPtr, byte len){                                C:\usb4all\fw\demo\user\ior.c
004e42   ffe6                                                                                                               
004e44   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
004e46   ffd9                                                                                                               
004e48   0e11     MOVLW     0x11                                                                                            
004e4a   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	  byte index, low, high, a, i;                                                  C:\usb4all\fw\demo\user\ior.c
004e4c   50d9     MOVF      0xd9,0x0,0x0   	  char mens[9] = "IORalive";	                                                   C:\usb4all\fw\demo\user\ior.c
004e4e   0f05     ADDLW     0x5                                                                                             
004e50   6ee9     MOVWF     0xe9,0x0                                                                                        
004e52   cfda     MOVFF     0xfda,0xfea                                                                                     
004e54   ffea                                                                                                               
004e56   0e49     MOVLW     0x49                                                                                            
004e58   6eee     MOVWF     0xee,0x0                                                                                        
004e5a   0e4f     MOVLW     0x4f                                                                                            
004e5c   6eee     MOVWF     0xee,0x0                                                                                        
004e5e   0e52     MOVLW     0x52                                                                                            
004e60   6eee     MOVWF     0xee,0x0                                                                                        
004e62   0e61     MOVLW     0x61                                                                                            
004e64   6eee     MOVWF     0xee,0x0                                                                                        
004e66   0e6c     MOVLW     0x6c                                                                                            
004e68   6eee     MOVWF     0xee,0x0                                                                                        
004e6a   0e69     MOVLW     0x69                                                                                            
004e6c   6eee     MOVWF     0xee,0x0                                                                                        
004e6e   0e76     MOVLW     0x76                                                                                            
004e70   6eee     MOVWF     0xee,0x0                                                                                        
004e72   0e65     MOVLW     0x65                                                                                            
004e74   6eee     MOVWF     0xee,0x0                                                                                        
004e76   6aee     CLRF      0xee,0x0                                                                                        
004e78   0e0e     MOVLW     0xe                  byte userIORCounter = 0;                                                   C:\usb4all\fw\demo\user\ior.c
004e7a   6adb     CLRF      0xdb,0x0                                                                                        
004e7c   0e0f     MOVLW     0xf            	  byte iors[2] = {0x00, 0x00}; 	                                                C:\usb4all\fw\demo\user\ior.c
004e7e   6adb     CLRF      0xdb,0x0                                                                                        
004e80   0e10     MOVLW     0x10                                                                                            
004e82   6adb     CLRF      0xdb,0x0                                                                                        
004e84   0efd     MOVLW     0xfd                 switch(((IOR_DATA_PACKET*)recBuffPtr)->CMD)                                C:\usb4all\fw\demo\user\ior.c
004e86   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004e88   ffe9                                                                                                               
004e8a   0efe     MOVLW     0xfe                                                                                            
004e8c   cfdb     MOVFF     0xfdb,0xfea                                                                                     
004e8e   ffea                                                                                                               
004e90   50ef     MOVF      0xef,0x0,0x0                                                                                    
004e92   0a05     XORLW     0x5                                                                                             
004e94   e101     BNZ       0x4e98                                                                                          
004e96   d0a2     BRA       0x4fdc                                                                                          
004e98   0afa     XORLW     0xfa                                                                                            
004e9a   e101     BNZ       0x4e9e                                                                                          
004e9c   d09d     BRA       0x4fd8                                                                                          
004e9e   0af8     XORLW     0xf8                                                                                            
004ea0   e101     BNZ       0x4ea4                                                                                          
004ea2   d092     BRA       0x4fc8                                                                                          
004ea4   0a01     XORLW     0x1                                                                                             
004ea6   e101     BNZ       0x4eaa                                                                                          
004ea8   d078     BRA       0x4f9a                                                                                          
004eaa   0a02     XORLW     0x2                                                                                             
004eac   e042     BZ        0x4f32                                                                                          
004eae   0a04     XORLW     0x4                                                                                             
004eb0   e001     BZ        0x4eb4                                                                                          
004eb2   d0a2     BRA       0x4ff8                                                                                          
                                                 {                                                                          C:\usb4all\fw\demo\user\ior.c
                                                   case READ_VERSION:                                                       C:\usb4all\fw\demo\user\ior.c
                                                         //dataPacket._byte[1] is len                                       C:\usb4all\fw\demo\user\ior.c
004eb4   0efd     MOVLW     0xfd           			  ((IOR_DATA_PACKET*)sendBufferUsrIOR)->_byte[0] = ((IOR_DATA_PACKET*)recBuffPtr)->_byte[0];  C:\usb4all\fw\demo\user\ior.c
004eb6   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004eb8   ffe9                                                                                                               
004eba   0efe     MOVLW     0xfe                                                                                            
004ebc   cfdb     MOVFF     0xfdb,0xfea                                                                                     
004ebe   ffea                                                                                                               
004ec0   50ef     MOVF      0xef,0x0,0x0                                                                                    
004ec2   6ee6     MOVWF     0xe6,0x0                                                                                        
004ec4   c185     MOVFF     0x185,0xfe9                                                                                     
004ec6   ffe9                                                                                                               
004ec8   c186     MOVFF     0x186,0xfea                                                                                     
004eca   ffea                                                                                                               
004ecc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004ece   50e7     MOVF      0xe7,0x0,0x0                                                                                    
004ed0   6eef     MOVWF     0xef,0x0                                                                                        
004ed2   0efd     MOVLW     0xfd           			  ((IOR_DATA_PACKET*)sendBufferUsrIOR)->_byte[1] = ((IOR_DATA_PACKET*)recBuffPtr)->_byte[1];  C:\usb4all\fw\demo\user\ior.c
004ed4   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004ed6   ffe9                                                                                                               
004ed8   0efe     MOVLW     0xfe                                                                                            
004eda   cfdb     MOVFF     0xfdb,0xfea                                                                                     
004edc   ffea                                                                                                               
004ede   0e01     MOVLW     0x1                                                                                             
004ee0   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004ee2   0e00     MOVLW     0x0                                                                                             
004ee4   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004ee6   50ef     MOVF      0xef,0x0,0x0                                                                                    
004ee8   6ee6     MOVWF     0xe6,0x0                                                                                        
004eea   c185     MOVFF     0x185,0xfe9                                                                                     
004eec   ffe9                                                                                                               
004eee   c186     MOVFF     0x186,0xfea                                                                                     
004ef0   ffea                                                                                                               
004ef2   0e01     MOVLW     0x1                                                                                             
004ef4   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004ef6   0e00     MOVLW     0x0                                                                                             
004ef8   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004efa   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004efc   50e7     MOVF      0xe7,0x0,0x0                                                                                    
004efe   6eef     MOVWF     0xef,0x0                                                                                        
004f00   c185     MOVFF     0x185,0xfe9                  ((IOR_DATA_PACKET*)sendBufferUsrIOR)->_byte[2] = IOR_MINOR_VERSION; C:\usb4all\fw\demo\user\ior.c
004f02   ffe9                                                                                                               
004f04   c186     MOVFF     0x186,0xfea                                                                                     
004f06   ffea                                                                                                               
004f08   0e02     MOVLW     0x2                                                                                             
004f0a   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004f0c   0e00     MOVLW     0x0                                                                                             
004f0e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004f10   0e01     MOVLW     0x1                                                                                             
004f12   6eef     MOVWF     0xef,0x0                                                                                        
004f14   c185     MOVFF     0x185,0xfe9                  ((IOR_DATA_PACKET*)sendBufferUsrIOR)->_byte[3] = IOR_MAJOR_VERSION; C:\usb4all\fw\demo\user\ior.c
004f16   ffe9                                                                                                               
004f18   c186     MOVFF     0x186,0xfea                                                                                     
004f1a   ffea                                                                                                               
004f1c   0e03     MOVLW     0x3                                                                                             
004f1e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004f20   0e00     MOVLW     0x0                                                                                             
004f22   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004f24   6aef     CLRF      0xef,0x0                                                                                        
004f26   0e04     MOVLW     0x4                          userIORCounter=0x04;                                               C:\usb4all\fw\demo\user\ior.c
004f28   6ef3     MOVWF     0xf3,0x0                                                                                        
004f2a   0e0e     MOVLW     0xe                                                                                             
004f2c   cff3     MOVFF     0xff3,0xfdb                                                                                     
004f2e   ffdb                                                                                                               
004f30   d064     BRA       0x4ffa                       break;                                                             C:\usb4all\fw\demo\user\ior.c
                                           	                                                                                C:\usb4all\fw\demo\user\ior.c
                                                     case SEND_IOR:                                                         C:\usb4all\fw\demo\user\ior.c
004f32   6a8b     CLRF      0x8b,0x0                     IORPortBLow = 0x0;  // blanqueo para generar int                   C:\usb4all\fw\demo\user\ior.c
004f34   6a8c     CLRF      0x8c,0x0       			  IORPortBHigh = 0x0; // blanqueo para generar int                            C:\usb4all\fw\demo\user\ior.c
004f36   0efd     MOVLW     0xfd                         ((IOR_DATA_PACKET*)sendBufferUsrIOR)->_byte[0] = ((IOR_DATA_PACKET*)recBuffPtr)->_byte[0];  C:\usb4all\fw\demo\user\ior.c
004f38   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004f3a   ffe9                                                                                                               
004f3c   0efe     MOVLW     0xfe                                                                                            
004f3e   cfdb     MOVFF     0xfdb,0xfea                                                                                     
004f40   ffea                                                                                                               
004f42   50ef     MOVF      0xef,0x0,0x0                                                                                    
004f44   6ee6     MOVWF     0xe6,0x0                                                                                        
004f46   c185     MOVFF     0x185,0xfe9                                                                                     
004f48   ffe9                                                                                                               
004f4a   c186     MOVFF     0x186,0xfea                                                                                     
004f4c   ffea                                                                                                               
004f4e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004f50   50e7     MOVF      0xe7,0x0,0x0                                                                                    
004f52   6eef     MOVWF     0xef,0x0                                                                                        
004f54   0efd     MOVLW     0xfd           			  a = ((IOR_DATA_PACKET*)recBuffPtr)->_byte[1];                               C:\usb4all\fw\demo\user\ior.c
004f56   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004f58   ffe9                                                                                                               
004f5a   0efe     MOVLW     0xfe                                                                                            
004f5c   cfdb     MOVFF     0xfdb,0xfea                                                                                     
004f5e   ffea                                                                                                               
004f60   0e01     MOVLW     0x1                                                                                             
004f62   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004f64   0e00     MOVLW     0x0                                                                                             
004f66   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004f68   0e03     MOVLW     0x3                                                                                             
004f6a   cfef     MOVFF     0xfef,0xfdb                                                                                     
004f6c   ffdb                                                                                                               
004f6e   0e03     MOVLW     0x3            			  IORPortA = a;                                                               C:\usb4all\fw\demo\user\ior.c
004f70   50db     MOVF      0xdb,0x0,0x0                                                                                    
004f72   6e8a     MOVWF     0x8a,0x0                                                                                        
004f74   0efd     MOVLW     0xfd           			  a = ((IOR_DATA_PACKET*)recBuffPtr)->_byte[2];                               C:\usb4all\fw\demo\user\ior.c
004f76   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
004f78   ffe9                                                                                                               
004f7a   0efe     MOVLW     0xfe                                                                                            
004f7c   cfdb     MOVFF     0xfdb,0xfea                                                                                     
004f7e   ffea                                                                                                               
004f80   0e02     MOVLW     0x2                                                                                             
004f82   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
004f84   0e00     MOVLW     0x0                                                                                             
004f86   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
004f88   0e03     MOVLW     0x3                                                                                             
004f8a   cfef     MOVFF     0xfef,0xfdb                                                                                     
004f8c   ffdb                                                                                                               
004f8e   0e01     MOVLW     0x1            			  userIORCounter=0x01;                                                        C:\usb4all\fw\demo\user\ior.c
004f90   6ef3     MOVWF     0xf3,0x0                                                                                        
004f92   0e0e     MOVLW     0xe                                                                                             
004f94   cff3     MOVFF     0xff3,0xfdb                                                                                     
004f96   ffdb                                                                                                               
004f98   d030     BRA       0x4ffa         			  break;                                                                      C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                                     case INTE:                                                             C:\usb4all\fw\demo\user\ior.c
004f9a   688b     SETF      0x8b,0x0       			  IORPortBLow = 0xFF;  // hay datos para consumir                             C:\usb4all\fw\demo\user\ior.c
004f9c   688c     SETF      0x8c,0x0       			  IORPortBHigh = 0xFF; // hay datos para consumir                             C:\usb4all\fw\demo\user\ior.c
004f9e   0e04     MOVLW     0x4            			  for(i=0;i<100;i++);	                                                        C:\usb4all\fw\demo\user\ior.c
004fa0   6adb     CLRF      0xdb,0x0                                                                                        
004fa2   0e64     MOVLW     0x64                                                                                            
004fa4   6ef3     MOVWF     0xf3,0x0                                                                                        
004fa6   0e04     MOVLW     0x4                                                                                             
004fa8   cfdb     MOVFF     0xfdb,0xff4                                                                                     
004faa   fff4                                                                                                               
004fac   50f3     MOVF      0xf3,0x0,0x0                                                                                    
004fae   5cf4     SUBWF     0xf4,0x0,0x0                                                                                    
004fb0   e203     BC        0x4fb8                                                                                          
004fb2   0e04     MOVLW     0x4                                                                                             
004fb4   2adb     INCF      0xdb,0x1,0x0                                                                                    
004fb6   d7f5     BRA       0x4fa2                                                                                          
004fb8   6a8b     CLRF      0x8b,0x0       			  IORPortBLow = 0x00;  // hay datos para consumir                             C:\usb4all\fw\demo\user\ior.c
004fba   6a8c     CLRF      0x8c,0x0       			  IORPortBHigh = 0x00; // hay datos para consumir                             C:\usb4all\fw\demo\user\ior.c
004fbc   0e01     MOVLW     0x1            			  userIORCounter=0x01;                                                        C:\usb4all\fw\demo\user\ior.c
004fbe   6ef3     MOVWF     0xf3,0x0                                                                                        
004fc0   0e0e     MOVLW     0xe                                                                                             
004fc2   cff3     MOVFF     0xff3,0xfdb                                                                                     
004fc4   ffdb                                                                                                               
004fc6   d019     BRA       0x4ffa         			  break;                                                                      C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                                     case TEST:                                                             C:\usb4all\fw\demo\user\ior.c
004fc8   688b     SETF      0x8b,0x0       			  IORPortBLow = 0xFF;  // hay datos para consumir                             C:\usb4all\fw\demo\user\ior.c
004fca   688c     SETF      0x8c,0x0       			  IORPortBHigh = 0xFF; // hay datos para consumir                             C:\usb4all\fw\demo\user\ior.c
004fcc   0e01     MOVLW     0x1            			  userIORCounter=0x01;                                                        C:\usb4all\fw\demo\user\ior.c
004fce   6ef3     MOVWF     0xf3,0x0                                                                                        
004fd0   0e0e     MOVLW     0xe                                                                                             
004fd2   cff3     MOVFF     0xff3,0xfdb                                                                                     
004fd4   ffdb                                                                                                               
004fd6   d011     BRA       0x4ffa         			  break;                                                                      C:\usb4all\fw\demo\user\ior.c
                                                     case RESET:                                                            C:\usb4all\fw\demo\user\ior.c
004fd8   00ff     RESET                                  Reset();                                                           C:\usb4all\fw\demo\user\ior.c
004fda   d00f     BRA       0x4ffa         			  break;                                                                      C:\usb4all\fw\demo\user\ior.c
                                           		                                                                               C:\usb4all\fw\demo\user\ior.c
                                           		 case MESS:                                                                    C:\usb4all\fw\demo\user\ior.c
004fdc   0e09     MOVLW     0x9            				sendMes(mens, sizeof(mens));                                                 C:\usb4all\fw\demo\user\ior.c
004fde   6ee6     MOVWF     0xe6,0x0                                                                                        
004fe0   50d9     MOVF      0xd9,0x0,0x0                                                                                    
004fe2   0f05     ADDLW     0x5                                                                                             
004fe4   6ee6     MOVWF     0xe6,0x0                                                                                        
004fe6   0e00     MOVLW     0x0                                                                                             
004fe8   20da     ADDWFC    0xda,0x0,0x0                                                                                    
004fea   6ee6     MOVWF     0xe6,0x0                                                                                        
004fec   ece0     CALL      0x19c0,0x0                                                                                      
004fee   f00c                                                                                                               
004ff0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004ff2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004ff4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
004ff6   d001     BRA       0x4ffa                       break;                                                             C:\usb4all\fw\demo\user\ior.c
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                           		 default:                                                                      C:\usb4all\fw\demo\user\ior.c
004ff8   d000     BRA       0x4ffa                       break;                                                             C:\usb4all\fw\demo\user\ior.c
                                                 }//end switch(s)                                                           C:\usb4all\fw\demo\user\ior.c
004ffa   0e0e     MOVLW     0xe                  if(userIORCounter != 0)                                                    C:\usb4all\fw\demo\user\ior.c
004ffc   50db     MOVF      0xdb,0x0,0x0                                                                                    
004ffe   e00c     BZ        0x5018                                                                                          
                                                 {                                                                          C:\usb4all\fw\demo\user\ior.c
005000   0104     MOVLB     0x4                      if(!mUSBGenTxIsBusy())                                                 C:\usb4all\fw\demo\user\ior.c
005002   bf0c     BTFSC     0xc,0x7,0x1                                                                                     
005004   d009     BRA       0x5018                                                                                          
005006   0e0e     MOVLW     0xe                          USBGenWrite2(usrIORHandler, userIORCounter);                       C:\usb4all\fw\demo\user\ior.c
005008   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
00500a   ffe6                                                                                                               
00500c   c184     MOVFF     0x184,0xfe6                                                                                     
00500e   ffe6                                                                                                               
005010   ec36     CALL      0x266c,0x0                                                                                      
005012   f013                                                                                                               
005014   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005016   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                 }//end if  	  	                                                            C:\usb4all\fw\demo\user\ior.c
005018   0e11     MOVLW     0x11           }//end UserIORReceived                                                           C:\usb4all\fw\demo\user\ior.c
00501a   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
00501c   e202     BC        0x5022                                                                                          
00501e   6ae1     CLRF      0xe1,0x0                                                                                        
005020   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005022   6ee1     MOVWF     0xe1,0x0                                                                                        
005024   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005026   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
005028   ffd9                                                                                                               
00502a   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\ior.c
                                           /** EOF usr_IOReton.c ***************************************************************/ C:\usb4all\fw\demo\user\ior.c
                                           /* Author             									  Date        Comment                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~   C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Gonzalo Tejera, Santiago Margini, Andres Aguirre       17/04/2009  Original.  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           /** I N C L U D E S **********************************************************/  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #include <p18cxxx.h>                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #include "system\typedefs.h"                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #include "system\usb\usb.h"                                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #include "stepMotorSUMBOT.h"                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #include "io_cfg.h"              // I/O pin mapping                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #include "user\handlerManager.h"                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #include "usb4all\proxys\T0Proxy.h"                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           /** V A R I A B L E S ********************************************************/  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #pragma udata                                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #define 	_INS						1                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #define _FRENO_SUELTO	1  // 1 - Frena sin energizar bobinas, 0 - Frena energizando bobinas C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #define _ACEL_INI		35   // 15                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #define _VELZERO 		150                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #define _VEL_TORQUE_BAJA_INI 		1     // REVER PORQUE EL VALOR ANTERIOR ERA 5 Y EN REALIDAD LO QUERÍA PONER EN 3 PERO SURGIÓ ESTA PRUEBA C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #define _MAXPASO_INI	4                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #define _MINPASO_INI	1                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #define _ADELANTE 		1                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #define _ATRAS			0                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #define _TMR1_INI_L		119                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #define _TMR1_INI_H		236	                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           byte  MotorISRHandler;	  // Handler number asigned to the module                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           byte* sendBufferMotorISR; // buffer to send data                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char ins     = _INS;                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char cuenta;                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char ACEL;                                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char paso_puerto1;                                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char paso_puerto2;                                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char puertoAux;                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char puerto1 		= 1;                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char puerto2 		= 1;                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char velActual_1  	= _VELZERO;                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char velNueva_1   	= _VELZERO;                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char velObjetivo_1	= _VELZERO;                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char tiempoAcel_1 	= 1;                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char paso_1       	= _MAXPASO_INI;                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char tiempoPaso_1 	= 1;                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char dirActual_1  	= _ADELANTE;                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char dirObjetivo_1	= _ADELANTE;                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char velActual_2  	= _VELZERO;                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char velNueva_2   	= _VELZERO;                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char velObjetivo_2	= _VELZERO;                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char tiempoAcel_2 	= 1;                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char paso_2       	= _MAXPASO_INI;                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char tiempoPaso_2 	= 1;                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char dirActual_2  	= _ADELANTE;                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char dirObjetivo_2	= _ADELANTE;                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char TORQUE_1      = 1;                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char TORQUE_2      = 1;                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char VEL_TORQUE_BAJA;                                                   C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #define TORQUE_FIJO     1  // 1 doble bobina                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           						   // 2 microSteeping	                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           						   // 3 simple bobina                                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #define ADAPTATIVO		1                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #define N0_ADAPTATIVO   0                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char MAXPASO_1;                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char MINPASO_1;                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char MAXPASO_2;                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char MINPASO_2;                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char FRENO_SUELTO = 1;                                                  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           unsigned char CONTROL_TORQUE = N0_ADAPTATIVO;                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           BOOL volatile packetMade = FALSE;                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           char volatile speed_1 = 0;                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           char volatile speed_2 = 0;                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           // GLOBAL VARIALES THAT CHANGE IN ISR MUST BE DECLARATED WITH VOLATILE!!         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           volatile byte estadoLed2Mot;                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           void MotorISRProcessIO(void);                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           void MotorISRInit(byte i);                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           void MotorISRReceived(byte*, byte);                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           void MotorISRRelease(byte i);                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           void MotorISRConfigure(void);                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           // Table used by te framework to get a fixed reference point to the user module functions defined by the framework  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           /** USER MODULE REFERENCE*****************************************************/  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #pragma romdata user                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           uTab MotorISRModuleTable = {&MotorISRInit,&MotorISRRelease,&MotorISRConfigure,"stmtr"}; //modName must be less or equal 8 characters C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #pragma code                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           #pragma code module                                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           //Dada una entrada, devuleve la direccion en la que va el robot.                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00502c   cfd9     MOVFF     0xfd9,0xfe6    unsigned char getDireccion(char entrada) {                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00502e   ffe6                                                                                                               
005030   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
005032   ffd9                                                                                                               
005034   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	unsigned char resultado;                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005036   0efe     MOVLW     0xfe           	if (entrada > 0)                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005038   cfdb     MOVFF     0xfdb,0x10                                                                                      
00503a   f010                                                                                                               
00503c   0e00     MOVLW     0x0                                                                                             
00503e   6ee7     MOVWF     0xe7,0x0                                                                                        
005040   1810     XORWF     0x10,0x0,0x0                                                                                    
005042   aee8     BTFSS     0xe8,0x7,0x0                                                                                    
005044   d002     BRA       0x504a                                                                                          
005046   3410     RLCF      0x10,0x0,0x0                                                                                    
005048   d003     BRA       0x5050                                                                                          
00504a   50e7     MOVF      0xe7,0x0,0x0                                                                                    
00504c   80d8     BSF       0xd8,0x0,0x0                                                                                    
00504e   5410     SUBFWB    0x10,0x0,0x0                                                                                    
005050   e203     BC        0x5058                                                                                          
005052   0e01     MOVLW     0x1            		resultado = 1;                                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005054   6edf     MOVWF     0xdf,0x0                                                                                        
005056   d001     BRA       0x505a         	else                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005058   6adf     CLRF      0xdf,0x0       		resultado = 0;                                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00505a   50df     MOVF      0xdf,0x0,0x0   	return resultado;                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00505c   d000     BRA       0x505e                                                                                          
00505e   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005060   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005062   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
005064   ffd9                                                                                                               
005066   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           //Dada una entrada, devuelve la velocidad en la que va el robot.                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005068   cfd9     MOVFF     0xfd9,0xfe6    unsigned char getVelocidad(char entrada) {                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00506a   ffe6                                                                                                               
00506c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00506e   ffd9                                                                                                               
005070   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	unsigned char resultado;                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005072   0efe     MOVLW     0xfe           	if (entrada < 0)                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005074   cfdb     MOVFF     0xfdb,0x10                                                                                      
005076   f010                                                                                                               
005078   3410     RLCF      0x10,0x0,0x0                                                                                    
00507a   e306     BNC       0x5088                                                                                          
00507c   0efe     MOVLW     0xfe           		resultado = - entrada;                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00507e   50db     MOVF      0xdb,0x0,0x0                                                                                    
005080   0dff     MULLW     0xff                                                                                            
005082   50f3     MOVF      0xf3,0x0,0x0                                                                                    
005084   6edf     MOVWF     0xdf,0x0                                                                                        
005086   d003     BRA       0x508e         	else                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005088   0efe     MOVLW     0xfe           		resultado = entrada;                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00508a   50db     MOVF      0xdb,0x0,0x0                                                                                    
00508c   6edf     MOVWF     0xdf,0x0                                                                                        
00508e   50df     MOVF      0xdf,0x0,0x0   	return resultado;	                                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005090   d000     BRA       0x5092                                                                                          
005092   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005094   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005096   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
005098   ffd9                                                                                                               
00509a   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           ///////////////////////////////////////////////////////////////////////////////  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           // la funcion invierte los 4 bits menos significativos                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           // de un byte que tiene los 4 bits mas significativos = 0                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00509c   cfd9     MOVFF     0xfd9,0xfe6    unsigned char invierto( unsigned char dato ){                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00509e   ffe6                                                                                                               
0050a0   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0050a2   ffd9                                                                                                               
0050a4   52e6     MOVF      0xe6,0x1,0x0                                                                                    
0050a6   6adf     CLRF      0xdf,0x0       	unsigned char respuesta = 0;                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0050a8   0efe     MOVLW     0xfe           	dato = dato << 4;                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0050aa   50db     MOVF      0xdb,0x0,0x0                                                                                    
0050ac   0d10     MULLW     0x10                                                                                            
0050ae   0efe     MOVLW     0xfe                                                                                            
0050b0   cff3     MOVFF     0xff3,0xfdb                                                                                     
0050b2   ffdb                                                                                                               
0050b4   50db     MOVF      0xdb,0x0,0x0   	if (dato > 127)                                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0050b6   087f     SUBLW     0x7f                                                                                            
0050b8   e202     BC        0x50be                                                                                          
0050ba   0e01     MOVLW     0x1            		respuesta = 1;                                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0050bc   6edf     MOVWF     0xdf,0x0                                                                                        
0050be   0efe     MOVLW     0xfe           	dato = dato << 1;                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0050c0   50db     MOVF      0xdb,0x0,0x0                                                                                    
0050c2   0d02     MULLW     0x2                                                                                             
0050c4   0efe     MOVLW     0xfe                                                                                            
0050c6   cff3     MOVFF     0xff3,0xfdb                                                                                     
0050c8   ffdb                                                                                                               
0050ca   50db     MOVF      0xdb,0x0,0x0   	if (dato > 127)                                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0050cc   087f     SUBLW     0x7f                                                                                            
0050ce   e203     BC        0x50d6                                                                                          
0050d0   0e02     MOVLW     0x2            		respuesta = respuesta + 2;                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0050d2   24df     ADDWF     0xdf,0x0,0x0                                                                                    
0050d4   6edf     MOVWF     0xdf,0x0                                                                                        
0050d6   0efe     MOVLW     0xfe           	dato = dato << 1;                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0050d8   50db     MOVF      0xdb,0x0,0x0                                                                                    
0050da   0d02     MULLW     0x2                                                                                             
0050dc   0efe     MOVLW     0xfe                                                                                            
0050de   cff3     MOVFF     0xff3,0xfdb                                                                                     
0050e0   ffdb                                                                                                               
0050e2   50db     MOVF      0xdb,0x0,0x0   	if (dato > 127)                                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0050e4   087f     SUBLW     0x7f                                                                                            
0050e6   e203     BC        0x50ee                                                                                          
0050e8   0e04     MOVLW     0x4            		respuesta = respuesta + 4;                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0050ea   24df     ADDWF     0xdf,0x0,0x0                                                                                    
0050ec   6edf     MOVWF     0xdf,0x0                                                                                        
0050ee   0efe     MOVLW     0xfe           	dato = dato << 1;                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0050f0   50db     MOVF      0xdb,0x0,0x0                                                                                    
0050f2   0d02     MULLW     0x2                                                                                             
0050f4   0efe     MOVLW     0xfe                                                                                            
0050f6   cff3     MOVFF     0xff3,0xfdb                                                                                     
0050f8   ffdb                                                                                                               
0050fa   50db     MOVF      0xdb,0x0,0x0   	if (dato > 127)                                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0050fc   087f     SUBLW     0x7f                                                                                            
0050fe   e203     BC        0x5106                                                                                          
005100   0e08     MOVLW     0x8            		respuesta = respuesta + 8;                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005102   24df     ADDWF     0xdf,0x0,0x0                                                                                    
005104   6edf     MOVWF     0xdf,0x0                                                                                        
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005106   50df     MOVF      0xdf,0x0,0x0   	return respuesta;                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005108   d000     BRA       0x510a                                                                                          
00510a   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00510c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00510e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
005110   ffd9                                                                                                               
005112   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           //////////////////////////////////////////////////////////////////////////////   C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           // setea la variable que corresponde a un motor u otro dependiendo               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           // del valor que recibe por parametro.                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           // determina si se debe avanzar o retroceder el paso de un motor                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           // dependiendo de si la                                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           // velocidad actual es mayor que la constante _VELZERO que es la que             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           // determina el valor de motor detenido.                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005114   cfd9     MOVFF     0xfd9,0xfe6    void doyPaso( unsigned char motor ){                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005116   ffe6                                                                                                               
005118   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00511a   ffd9                                                                                                               
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00511c   0efe     MOVLW     0xfe           	if (motor == 1){                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00511e   04db     DECF      0xdb,0x0,0x0                                                                                    
005120   e122     BNZ       0x5166                                                                                          
005122   0100     MOVLB     0x0            		if (dirActual_1 == _ADELANTE){                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005124   05ee     DECF      0xee,0x0,0x1                                                                                    
005126   e10f     BNZ       0x5146                                                                                          
005128   0101     MOVLB     0x1            			if (paso_1 == MAXPASO_1){                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00512a   5109     MOVF      0x9,0x0,0x1                                                                                     
00512c   0100     MOVLB     0x0                                                                                             
00512e   5dec     SUBWF     0xec,0x0,0x1                                                                                    
005130   e105     BNZ       0x513c                                                                                          
005132   c10a     MOVFF     0x10a,0xec     				paso_1 = MINPASO_1;                                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005134   f0ec                                                                                                               
005136   0e01     MOVLW     0x1            				puerto1 = 1;                                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005138   6fe6     MOVWF     0xe6,0x1                                                                                        
00513a   d004     BRA       0x5144         			}else{                                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00513c   2bec     INCF      0xec,0x1,0x1   				paso_1++;                                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00513e   51e6     MOVF      0xe6,0x0,0x1   				puerto1 = puerto1 * 2;                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005140   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
005142   6fe6     MOVWF     0xe6,0x1                                                                                        
                                           			}                                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005144   d00f     BRA       0x5164         		}else{                                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005146   0101     MOVLB     0x1            			if (paso_1 == MINPASO_1){                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005148   510a     MOVF      0xa,0x0,0x1                                                                                     
00514a   0100     MOVLB     0x0                                                                                             
00514c   5dec     SUBWF     0xec,0x0,0x1                                                                                    
00514e   e105     BNZ       0x515a                                                                                          
005150   c109     MOVFF     0x109,0xec     				paso_1 = MAXPASO_1;                                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005152   f0ec                                                                                                               
005154   0e08     MOVLW     0x8            				puerto1 = 8;                                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005156   6fe6     MOVWF     0xe6,0x1                                                                                        
                                           			}                                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005158   d005     BRA       0x5164         			else{                                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00515a   07ec     DECF      0xec,0x1,0x1   				paso_1--;                                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00515c   51e6     MOVF      0xe6,0x0,0x1   				puerto1 = puerto1 / 2;                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00515e   0bfe     ANDLW     0xfe                                                                                            
005160   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
005162   6fe6     MOVWF     0xe6,0x1                                                                                        
                                           			}                                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           		}                                                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005164   d021     BRA       0x51a8         	}else {                                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005166   0100     MOVLB     0x0            		if (dirActual_2 == _ADELANTE){                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005168   05f6     DECF      0xf6,0x0,0x1                                                                                    
00516a   e10f     BNZ       0x518a                                                                                          
00516c   0101     MOVLB     0x1            			if (paso_2 == MAXPASO_2){                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00516e   510b     MOVF      0xb,0x0,0x1                                                                                     
005170   0100     MOVLB     0x0                                                                                             
005172   5df4     SUBWF     0xf4,0x0,0x1                                                                                    
005174   e105     BNZ       0x5180                                                                                          
005176   c10c     MOVFF     0x10c,0xf4     				paso_2 = MINPASO_2;                                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005178   f0f4                                                                                                               
00517a   0e01     MOVLW     0x1            				puerto2 = 1;                                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00517c   6fe7     MOVWF     0xe7,0x1                                                                                        
00517e   d004     BRA       0x5188         			}else{                                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005180   2bf4     INCF      0xf4,0x1,0x1   				paso_2++;                                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005182   51e7     MOVF      0xe7,0x0,0x1   				puerto2 = puerto2 * 2;                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005184   24e8     ADDWF     0xe8,0x0,0x0                                                                                    
005186   6fe7     MOVWF     0xe7,0x1                                                                                        
                                           			}                                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005188   d00f     BRA       0x51a8         		}else{                                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00518a   0101     MOVLB     0x1            			if (paso_2 == MINPASO_2){                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00518c   510c     MOVF      0xc,0x0,0x1                                                                                     
00518e   0100     MOVLB     0x0                                                                                             
005190   5df4     SUBWF     0xf4,0x0,0x1                                                                                    
005192   e105     BNZ       0x519e                                                                                          
005194   c10b     MOVFF     0x10b,0xf4     				paso_2 = MAXPASO_2;                                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005196   f0f4                                                                                                               
005198   0e08     MOVLW     0x8            				puerto2 = 8;                                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00519a   6fe7     MOVWF     0xe7,0x1                                                                                        
                                           			}                                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00519c   d005     BRA       0x51a8         			else{                                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00519e   07f4     DECF      0xf4,0x1,0x1   				paso_2--;                                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051a0   51e7     MOVF      0xe7,0x0,0x1   				puerto2 = puerto2 / 2;                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051a2   0bfe     ANDLW     0xfe                                                                                            
0051a4   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
0051a6   6fe7     MOVWF     0xe7,0x1                                                                                        
                                           			}                                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           		}                                                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	}                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051a8   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051aa   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0051ac   ffd9                                                                                                               
0051ae   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           /////////////////////////////////////////////////////////////////                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           // el paso adecuado para que el motor energice las bobinas dobles.               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           void controlTorque(){                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	//	MOTOR 1                                                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051b0   0100     MOVLB     0x0            	switch ( TORQUE_1 ) {                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051b2   51f8     MOVF      0xf8,0x0,0x1                                                                                    
0051b4   0a03     XORLW     0x3                                                                                             
0051b6   e00b     BZ        0x51ce                                                                                          
0051b8   0a02     XORLW     0x2                                                                                             
0051ba   e001     BZ        0x51be                                                                                          
0051bc   d00f     BRA       0x51dc                                                                                          
                                           		case 1 :{                                                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051be   0101     MOVLB     0x1            			if ( velActual_1 < VEL_TORQUE_BAJA ){                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051c0   5108     MOVF      0x8,0x0,0x1                                                                                     
0051c2   0100     MOVLB     0x0                                                                                             
0051c4   5de8     SUBWF     0xe8,0x0,0x1                                                                                    
0051c6   e202     BC        0x51cc                                                                                          
0051c8   0e03     MOVLW     0x3            				TORQUE_1  = 3;                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051ca   6ff8     MOVWF     0xf8,0x1                                                                                        
                                           			}                                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051cc   d007     BRA       0x51dc         			break;                                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           				}                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           		case 3 :{                                                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051ce   0101     MOVLB     0x1            			if ( velActual_1 >= VEL_TORQUE_BAJA ){                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051d0   5108     MOVF      0x8,0x0,0x1                                                                                     
0051d2   0100     MOVLB     0x0                                                                                             
0051d4   5de8     SUBWF     0xe8,0x0,0x1                                                                                    
0051d6   e302     BNC       0x51dc                                                                                          
0051d8   0e01     MOVLW     0x1            				TORQUE_1  = 1;                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051da   6ff8     MOVWF     0xf8,0x1                                                                                        
                                           			}                                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           				}                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	}                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	//	MOTOR 2                                                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051dc   51f9     MOVF      0xf9,0x0,0x1   	switch ( TORQUE_2 ) {                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051de   0a03     XORLW     0x3                                                                                             
0051e0   e00b     BZ        0x51f8                                                                                          
0051e2   0a02     XORLW     0x2                                                                                             
0051e4   e001     BZ        0x51e8                                                                                          
0051e6   d00f     BRA       0x5206                                                                                          
                                           		case 1 :{                                                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051e8   0101     MOVLB     0x1            			if ( velActual_2 < VEL_TORQUE_BAJA ){                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051ea   5108     MOVF      0x8,0x0,0x1                                                                                     
0051ec   0100     MOVLB     0x0                                                                                             
0051ee   5df0     SUBWF     0xf0,0x0,0x1                                                                                    
0051f0   e202     BC        0x51f6                                                                                          
0051f2   0e03     MOVLW     0x3            				TORQUE_2  = 3;                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051f4   6ff9     MOVWF     0xf9,0x1                                                                                        
                                           			}                                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051f6   d007     BRA       0x5206         			break;                                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           				}                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           		case 3 :{                                                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051f8   0101     MOVLB     0x1            			if ( velActual_2 >= VEL_TORQUE_BAJA ){                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0051fa   5108     MOVF      0x8,0x0,0x1                                                                                     
0051fc   0100     MOVLB     0x0                                                                                             
0051fe   5df0     SUBWF     0xf0,0x0,0x1                                                                                    
005200   e302     BNC       0x5206                                                                                          
005202   0e01     MOVLW     0x1            				TORQUE_2  = 1;                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005204   6ff9     MOVWF     0xf9,0x1                                                                                        
                                           			}                                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           				}                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	}                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005206   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           // Esta funcion relaciona el valor del paso en el que esta el calculo            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           // con el valor del puerto conectado al motor para lograr este paso              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           // segun el torque actual.                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005208   cfd9     MOVFF     0xfd9,0xfe6    unsigned char pasoDoble( unsigned char paso, unsigned char torque ){             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00520a   ffe6                                                                                                               
00520c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00520e   ffd9                                                                                                               
005210   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	unsigned char puerto;                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005212   0efd     MOVLW     0xfd           	if ( torque == 3 ){                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005214   50db     MOVF      0xdb,0x0,0x0                                                                                    
005216   0803     SUBLW     0x3                                                                                             
005218   e118     BNZ       0x524a                                                                                          
00521a   0efe     MOVLW     0xfe           		switch ( paso ) {                                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00521c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00521e   0a04     XORLW     0x4                                                                                             
005220   e010     BZ        0x5242                                                                                          
005222   0a07     XORLW     0x7                                                                                             
005224   e00b     BZ        0x523c                                                                                          
005226   0a01     XORLW     0x1                                                                                             
005228   e006     BZ        0x5236                                                                                          
00522a   0a03     XORLW     0x3                                                                                             
00522c   e001     BZ        0x5230                                                                                          
00522e   d00c     BRA       0x5248                                                                                          
                                           			case 1 :{                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005230   0e01     MOVLW     0x1            				puerto = 0b00000001;                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005232   6edf     MOVWF     0xdf,0x0                                                                                        
005234   d009     BRA       0x5248         				break;                                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           					}                                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			case 2 :{                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005236   0e02     MOVLW     0x2            				puerto = 0b00000010;                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005238   6edf     MOVWF     0xdf,0x0                                                                                        
00523a   d006     BRA       0x5248         				break;		                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           					}                                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			case 3 :{                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00523c   0e04     MOVLW     0x4            				puerto = 0b00000100;                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00523e   6edf     MOVWF     0xdf,0x0                                                                                        
005240   d003     BRA       0x5248         				break;		                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           					}                                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			case 4 :{                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005242   0e08     MOVLW     0x8            				puerto = 0b00001000;                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005244   6edf     MOVWF     0xdf,0x0                                                                                        
005246   d000     BRA       0x5248         				break;		                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           					}                                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           		}                                                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	}                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005248   d017     BRA       0x5278         	else {	// torque es 1                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00524a   0efe     MOVLW     0xfe           		switch ( paso ) {                                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00524c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00524e   0a04     XORLW     0x4                                                                                             
005250   e010     BZ        0x5272                                                                                          
005252   0a07     XORLW     0x7                                                                                             
005254   e00b     BZ        0x526c                                                                                          
005256   0a01     XORLW     0x1                                                                                             
005258   e006     BZ        0x5266                                                                                          
00525a   0a03     XORLW     0x3                                                                                             
00525c   e001     BZ        0x5260                                                                                          
00525e   d00c     BRA       0x5278                                                                                          
                                           			case 1 :{                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005260   0e03     MOVLW     0x3            				puerto = 0b00000011;                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005262   6edf     MOVWF     0xdf,0x0                                                                                        
005264   d009     BRA       0x5278         				break;                                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           					}                                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			case 2 :{                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005266   0e06     MOVLW     0x6            				puerto = 0b00000110;                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005268   6edf     MOVWF     0xdf,0x0                                                                                        
00526a   d006     BRA       0x5278         				break;		                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           					}                                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			case 3 :{                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00526c   0e0c     MOVLW     0xc            				puerto = 0b00001100;                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00526e   6edf     MOVWF     0xdf,0x0                                                                                        
005270   d003     BRA       0x5278         				break;		                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           					}                                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			case 4 :{                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005272   0e09     MOVLW     0x9            				puerto = 0b00001001;                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005274   6edf     MOVWF     0xdf,0x0                                                                                        
005276   d000     BRA       0x5278         				break;		                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           					}                                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           		}                                                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	}                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005278   50df     MOVF      0xdf,0x0,0x0   	return puerto;                                                                  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00527a   d000     BRA       0x527c                                                                                          
00527c   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00527e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005280   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
005282   ffd9                                                                                                               
005284   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           ///////////////////////////////////////////////////////////////////////////////  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           // La rutina setea la velocidad nueva y objetivo del motor 1.                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005286   cfd9     MOVFF     0xfd9,0xfe6    int setVelMotor1( unsigned char direccion, unsigned char velocidad ){            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005288   ffe6                                                                                                               
00528a   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00528c   ffd9                                                                                                               
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00528e   0efe     MOVLW     0xfe           	if ( dirActual_1 == direccion ){ 			// dirObjetivo_1 ){                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005290   50db     MOVF      0xdb,0x0,0x0                                                                                    
005292   0100     MOVLB     0x0                                                                                             
005294   5dee     SUBWF     0xee,0x0,0x1                                                                                    
005296   e119     BNZ       0x52ca                                                                                          
                                           		// es la misma direccion, solo cambio la velocidad.                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           //		GIE = 0; TODO ver el GIE                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005298   0e5c     MOVLW     0x5c           		removeT0Function(&MotorISRProcessIO);                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00529a   6ee6     MOVWF     0xe6,0x0                                                                                        
00529c   0e54     MOVLW     0x54                                                                                            
00529e   6ee6     MOVWF     0xe6,0x0                                                                                        
0052a0   ecf9     CALL      0x21f2,0x0                                                                                      
0052a2   f010                                                                                                               
0052a4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0052a6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0052a8   0efe     MOVLW     0xfe           		dirObjetivo_1 = direccion;                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0052aa   cfdb     MOVFF     0xfdb,0xef                                                                                      
0052ac   f0ef                                                                                                               
0052ae   0efd     MOVLW     0xfd           		velObjetivo_1 = velocidad;                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0052b0   cfdb     MOVFF     0xfdb,0xea                                                                                      
0052b2   f0ea                                                                                                               
0052b4   cfdb     MOVFF     0xfdb,0xe9     		velNueva_1    = velocidad;                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0052b6   f0e9                                                                                                               
0052b8   0e5c     MOVLW     0x5c           		addT0Function(&MotorISRProcessIO);                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0052ba   6ee6     MOVWF     0xe6,0x0                                                                                        
0052bc   0e54     MOVLW     0x54                                                                                            
0052be   6ee6     MOVWF     0xe6,0x0                                                                                        
0052c0   eca3     CALL      0x2146,0x0                                                                                      
0052c2   f010                                                                                                               
0052c4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0052c6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           //		GIE = 1;                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0052c8   d019     BRA       0x52fc         	} else {                                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           		// se solicita un cambio de direccion, la nueva velocidad es detenerse.        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           //		GIE = 0;                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0052ca   0e5c     MOVLW     0x5c           		removeT0Function(&MotorISRProcessIO);                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0052cc   6ee6     MOVWF     0xe6,0x0                                                                                        
0052ce   0e54     MOVLW     0x54                                                                                            
0052d0   6ee6     MOVWF     0xe6,0x0                                                                                        
0052d2   ecf9     CALL      0x21f2,0x0                                                                                      
0052d4   f010                                                                                                               
0052d6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0052d8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0052da   0efe     MOVLW     0xfe           		dirObjetivo_1 = direccion;                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0052dc   cfdb     MOVFF     0xfdb,0xef                                                                                      
0052de   f0ef                                                                                                               
0052e0   0efd     MOVLW     0xfd           		velObjetivo_1 = velocidad;                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0052e2   cfdb     MOVFF     0xfdb,0xea                                                                                      
0052e4   f0ea                                                                                                               
0052e6   0100     MOVLB     0x0            		velNueva_1    = _VELZERO;                                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0052e8   0e96     MOVLW     0x96                                                                                            
0052ea   6fe9     MOVWF     0xe9,0x1                                                                                        
0052ec   0e5c     MOVLW     0x5c           		addT0Function(&MotorISRProcessIO);                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0052ee   6ee6     MOVWF     0xe6,0x0                                                                                        
0052f0   0e54     MOVLW     0x54                                                                                            
0052f2   6ee6     MOVWF     0xe6,0x0                                                                                        
0052f4   eca3     CALL      0x2146,0x0                                                                                      
0052f6   f010                                                                                                               
0052f8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0052fa   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           //		GIE = 1;                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	}                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0052fc   6af3     CLRF      0xf3,0x0       	return 0;                                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0052fe   6af4     CLRF      0xf4,0x0                                                                                        
005300   d000     BRA       0x5302                                                                                          
005302   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005304   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
005306   ffd9                                                                                                               
005308   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           // La rutina setea la velocidad nueva y objetivo del motor 2.                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00530a   cfd9     MOVFF     0xfd9,0xfe6    int setVelMotor2( unsigned char direccion, unsigned char velocidad ){            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00530c   ffe6                                                                                                               
00530e   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
005310   ffd9                                                                                                               
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005312   0efe     MOVLW     0xfe           	if ( dirActual_2 == direccion ){		// dirObjetivo_2 ){                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005314   50db     MOVF      0xdb,0x0,0x0                                                                                    
005316   0100     MOVLB     0x0                                                                                             
005318   5df6     SUBWF     0xf6,0x0,0x1                                                                                    
00531a   e119     BNZ       0x534e                                                                                          
                                           		// es la misma direccion, solo cambio la velocidad.                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           //		GIE = 0;                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00531c   0e5c     MOVLW     0x5c           		removeT0Function(&MotorISRProcessIO);                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00531e   6ee6     MOVWF     0xe6,0x0                                                                                        
005320   0e54     MOVLW     0x54                                                                                            
005322   6ee6     MOVWF     0xe6,0x0                                                                                        
005324   ecf9     CALL      0x21f2,0x0                                                                                      
005326   f010                                                                                                               
005328   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00532a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00532c   0efe     MOVLW     0xfe           		dirObjetivo_2 = direccion;                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00532e   cfdb     MOVFF     0xfdb,0xf7                                                                                      
005330   f0f7                                                                                                               
005332   0efd     MOVLW     0xfd           		velObjetivo_2 = velocidad;                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005334   cfdb     MOVFF     0xfdb,0xf2                                                                                      
005336   f0f2                                                                                                               
005338   cfdb     MOVFF     0xfdb,0xf1     		velNueva_2    = velocidad;                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00533a   f0f1                                                                                                               
00533c   0e5c     MOVLW     0x5c           		addT0Function(&MotorISRProcessIO);                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00533e   6ee6     MOVWF     0xe6,0x0                                                                                        
005340   0e54     MOVLW     0x54                                                                                            
005342   6ee6     MOVWF     0xe6,0x0                                                                                        
005344   eca3     CALL      0x2146,0x0                                                                                      
005346   f010                                                                                                               
005348   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00534a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           //		GIE = 1;                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00534c   d019     BRA       0x5380         	} else {                                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           		// se solicita un cambio de direccion, la nueva velocidad es detenerse.        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           //		GIE = 0;                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00534e   0e5c     MOVLW     0x5c           		removeT0Function(&MotorISRProcessIO);                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005350   6ee6     MOVWF     0xe6,0x0                                                                                        
005352   0e54     MOVLW     0x54                                                                                            
005354   6ee6     MOVWF     0xe6,0x0                                                                                        
005356   ecf9     CALL      0x21f2,0x0                                                                                      
005358   f010                                                                                                               
00535a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00535c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00535e   0efe     MOVLW     0xfe           		dirObjetivo_2 = direccion;                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005360   cfdb     MOVFF     0xfdb,0xf7                                                                                      
005362   f0f7                                                                                                               
005364   0efd     MOVLW     0xfd           		velObjetivo_2 = velocidad;                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005366   cfdb     MOVFF     0xfdb,0xf2                                                                                      
005368   f0f2                                                                                                               
00536a   0100     MOVLB     0x0            		velNueva_2    = _VELZERO;                                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00536c   0e96     MOVLW     0x96                                                                                            
00536e   6ff1     MOVWF     0xf1,0x1                                                                                        
005370   0e5c     MOVLW     0x5c           		addT0Function(&MotorISRProcessIO);                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005372   6ee6     MOVWF     0xe6,0x0                                                                                        
005374   0e54     MOVLW     0x54                                                                                            
005376   6ee6     MOVWF     0xe6,0x0                                                                                        
005378   eca3     CALL      0x2146,0x0                                                                                      
00537a   f010                                                                                                               
00537c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00537e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           //		GIE = 1;                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	}                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005380   6af3     CLRF      0xf3,0x0       	return 0;                                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005382   6af4     CLRF      0xf4,0x0                                                                                        
005384   d000     BRA       0x5386                                                                                          
005386   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005388   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00538a   ffd9                                                                                                               
00538c   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           //////////////////////////////////////////////////////////////////               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           // Mapea las velocidades a los tiempos asignados para cada una.                  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00538e   cfd9     MOVFF     0xfd9,0xfe6    unsigned char mapeo( unsigned char dato ){                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005390   ffe6                                                                                                               
005392   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
005394   ffd9                                                                                                               
005396   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	unsigned char resultado;                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005398   0efe     MOVLW     0xfe           	if (dato == 0) {                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00539a   50db     MOVF      0xdb,0x0,0x0                                                                                    
00539c   e103     BNZ       0x53a4                                                                                          
00539e   0e96     MOVLW     0x96           		resultado = _VELZERO;                                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0053a0   6edf     MOVWF     0xdf,0x0                                                                                        
0053a2   d00b     BRA       0x53ba         	} else {                                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0053a4   0efe     MOVLW     0xfe           		resultado = 128 - dato;                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0053a6   50db     MOVF      0xdb,0x0,0x0                                                                                    
0053a8   6e10     MOVWF     0x10,0x0                                                                                        
0053aa   6a11     CLRF      0x11,0x0                                                                                        
0053ac   0e80     MOVLW     0x80                                                                                            
0053ae   80d8     BSF       0xd8,0x0,0x0                                                                                    
0053b0   5610     SUBFWB    0x10,0x1,0x0                                                                                    
0053b2   0e00     MOVLW     0x0                                                                                             
0053b4   5611     SUBFWB    0x11,0x1,0x0                                                                                    
0053b6   5010     MOVF      0x10,0x0,0x0                                                                                    
0053b8   6edf     MOVWF     0xdf,0x0                                                                                        
                                           	}                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0053ba   50df     MOVF      0xdf,0x0,0x0   	return (resultado);                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0053bc   d000     BRA       0x53be                                                                                          
0053be   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0053c0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0053c2   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0053c4   ffd9                                                                                                               
0053c6   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Function:        MotorISRInit(void)                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Overview:        This function is initialices the resources that the user module needs to work, it is called by the framework  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *					when the module is opened	                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0053c8   cfd9     MOVFF     0xfd9,0xfe6    void MotorISRInit(byte i){                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0053ca   ffe6                                                                                                               
0053cc   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0053ce   ffd9                                                                                                               
0053d0   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	BOOL res;                                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0053d2   0efe     MOVLW     0xfe           	MotorISRHandler = i;                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0053d4   cfdb     MOVFF     0xfdb,0x100                                                                                     
0053d6   f100                                                                                                               
                                           	// add my receive function to the handler module, to be called automatically when the pc sends data to the user module C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0053d8   0ed4     MOVLW     0xd4           	setHandlerReceiveFunction(MotorISRHandler,&MotorISRReceived);                   C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0053da   6ee6     MOVWF     0xe6,0x0                                                                                        
0053dc   0e55     MOVLW     0x55                                                                                            
0053de   6ee6     MOVWF     0xe6,0x0                                                                                        
0053e0   c100     MOVFF     0x100,0xfe6                                                                                     
0053e2   ffe6                                                                                                               
0053e4   ecc0     CALL      0x2380,0x0                                                                                      
0053e6   f011                                                                                                               
0053e8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0053ea   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0053ec   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0053ee   6a95     CLRF      0x95,0x0       	mInitMotor();                                                                   C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	// add my receive ISR function to the dynamic pooling module, to be called periodically  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0053f0   ec86     CALL      0x210c,0x0     	initT0Functions();                                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0053f2   f010                                                                                                               
0053f4   0eec     MOVLW     0xec           	configT0(_TMR1_INI_L, _TMR1_INI_H);                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0053f6   6ee6     MOVWF     0xe6,0x0                                                                                        
0053f8   0e77     MOVLW     0x77                                                                                            
0053fa   6ee6     MOVWF     0xe6,0x0                                                                                        
0053fc   ec4e     CALL      0x229c,0x0                                                                                      
0053fe   f011                                                                                                               
005400   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005402   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005404   0e5c     MOVLW     0x5c           	res = addT0Function(&MotorISRProcessIO);                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005406   6ee6     MOVWF     0xe6,0x0                                                                                        
005408   0e54     MOVLW     0x54                                                                                            
00540a   6ee6     MOVWF     0xe6,0x0                                                                                        
00540c   eca3     CALL      0x2146,0x0                                                                                      
00540e   f010                                                                                                               
005410   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005412   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005414   6edf     MOVWF     0xdf,0x0                                                                                        
                                           	//initialize ISR Resource, for example a timer and set it interrupt bits.       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	                                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005416   6a8c     CLRF      0x8c,0x0       	mInitAllLEDs(); //debugueo con leds                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005418   0ef0     MOVLW     0xf0                                                                                            
00541a   1695     ANDWF     0x95,0x1,0x0                                                                                    
00541c   808c     BSF       0x8c,0x0,0x0   	mLED_1_On();                                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	//TODO inicializar timer                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	                                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	//TODO ponerlo en el modulo de ISR y que se ponga cuando hay un tipo colgado y deshabilitar cuando no quedan mas C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00541e   0101     MOVLB     0x1            	estadoLed2Mot = 0;                                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005420   6b0d     CLRF      0xd,0x1                                                                                         
                                           	// initialize the send buffer, used to send data to the PC                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005422   c100     MOVFF     0x100,0xfe6    	sendBufferMotorISR = getSharedBuffer(MotorISRHandler);                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005424   ffe6                                                                                                               
005426   ec73     CALL      0x2ce6,0x0                                                                                      
005428   f016                                                                                                               
00542a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00542c   cff3     MOVFF     0xff3,0x101                                                                                     
00542e   f101                                                                                                               
005430   cff4     MOVFF     0xff4,0x102                                                                                     
005432   f102                                                                                                               
                                           	//TODO return res value                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	// inicializo el valor de la aceleracion y del byte mas significativo del Timer1 ( INS ) C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005434   0101     MOVLB     0x1            	ACEL     = _ACEL_INI;                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005436   0e23     MOVLW     0x23                                                                                            
005438   6f04     MOVWF     0x4,0x1                                                                                         
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00543a   0e01     MOVLW     0x1            	VEL_TORQUE_BAJA = _VEL_TORQUE_BAJA_INI;                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00543c   6f08     MOVWF     0x8,0x1                                                                                         
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00543e   0e04     MOVLW     0x4            	MAXPASO_1 = _MAXPASO_INI;                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005440   6f09     MOVWF     0x9,0x1                                                                                         
005442   0e01     MOVLW     0x1            	MINPASO_1 = _MINPASO_INI;                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005444   6f0a     MOVWF     0xa,0x1                                                                                         
005446   0e04     MOVLW     0x4            	MAXPASO_2 = _MAXPASO_INI;                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005448   6f0b     MOVWF     0xb,0x1                                                                                         
00544a   0e01     MOVLW     0x1            	MINPASO_2 = _MINPASO_INI;                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00544c   6f0c     MOVWF     0xc,0x1                                                                                         
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00544e   52e5     MOVF      0xe5,0x1,0x0   }//end UserSkelInit                                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005450   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005452   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
005454   ffd9                                                                                                               
005456   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Function:        MotorISRConfigure(void)                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Overview:        This function sets the specific configuration for the user module, it is called by the framework  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *						                                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           void MotorISRConfigure(void){                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           // Do the configuration                                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005458   728c     BTG       0x8c,0x1,0x0   	mLED_2_Toggle();                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00545a   0012     RETURN    0x0            }                                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Function:        MotorISRProcessIO(void)                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Overview:        This function is registered in the dinamic ISR, who call ir periodically to process the IO interaction C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *					int the PIC, also it can comunicate things to the pc by the USB	          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           void MotorISRProcessIO(void){                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00545c   0100     MOVLB     0x0            		ins --;                                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00545e   07e5     DECF      0xe5,0x1,0x1                                                                                    
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           		// Si está habilitado la cuenta de timepo evalua la variable cuenta, sino no	  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           		// Controla movimiento de motores.                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005460   51e5     MOVF      0xe5,0x0,0x1   		if (ins == 0){                                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005462   e001     BZ        0x5466                                                                                          
005464   d099     BRA       0x5598                                                                                          
005466   0e01     MOVLW     0x1            			ins = _INS;                                                                   C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005468   6fe5     MOVWF     0xe5,0x1                                                                                        
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			//////////////////////////////////////////////////////////////////            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			// motor 1                                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			// ACA SE MANTIENE LA VELOCIDAD ACTUAL                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00546a   07ed     DECF      0xed,0x1,0x1   			tiempoPaso_1--;                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00546c   51ed     MOVF      0xed,0x0,0x1   			if (tiempoPaso_1 == 0){                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00546e   e11b     BNZ       0x54a6                                                                                          
005470   c0e8     MOVFF     0xe8,0xed      				tiempoPaso_1 = velActual_1;                                                  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005472   f0ed                                                                                                               
005474   51e8     MOVF      0xe8,0x0,0x1   				if (velActual_1 != _VELZERO){                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005476   6e10     MOVWF     0x10,0x0                                                                                        
005478   6a11     CLRF      0x11,0x0                                                                                        
00547a   0e96     MOVLW     0x96                                                                                            
00547c   1810     XORWF     0x10,0x0,0x0                                                                                    
00547e   e101     BNZ       0x5482                                                                                          
005480   5011     MOVF      0x11,0x0,0x0                                                                                    
005482   e005     BZ        0x548e                                                                                          
005484   0e01     MOVLW     0x1            					doyPaso(1);                                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005486   6ee6     MOVWF     0xe6,0x0                                                                                        
005488   de45     RCALL     0x5114                                                                                          
00548a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           				}                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00548c   d00c     BRA       0x54a6         				else if (velObjetivo_1 != _VELZERO){                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00548e   51ea     MOVF      0xea,0x0,0x1                                                                                    
005490   6e10     MOVWF     0x10,0x0                                                                                        
005492   6a11     CLRF      0x11,0x0                                                                                        
005494   0e96     MOVLW     0x96                                                                                            
005496   1810     XORWF     0x10,0x0,0x0                                                                                    
005498   e101     BNZ       0x549c                                                                                          
00549a   5011     MOVF      0x11,0x0,0x0                                                                                    
00549c   e004     BZ        0x54a6                                                                                          
00549e   c0ef     MOVFF     0xef,0xee      					dirActual_1 = dirObjetivo_1;                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054a0   f0ee                                                                                                               
0054a2   c0ea     MOVFF     0xea,0xe9      					velNueva_1  = velObjetivo_1;                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054a4   f0e9                                                                                                               
                                           				}                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			}                                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			// ACA SE CAMBIA LA VELOCIDAD SI CORRESPONDE...                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054a6   0100     MOVLB     0x0            			if (velActual_1 != velNueva_1){                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054a8   51e9     MOVF      0xe9,0x0,0x1                                                                                    
0054aa   5de8     SUBWF     0xe8,0x0,0x1                                                                                    
0054ac   e00c     BZ        0x54c6                                                                                          
0054ae   07eb     DECF      0xeb,0x1,0x1   				tiempoAcel_1--;                                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054b0   51eb     MOVF      0xeb,0x0,0x1   				if (tiempoAcel_1 == 0){                                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054b2   e109     BNZ       0x54c6                                                                                          
0054b4   51e9     MOVF      0xe9,0x0,0x1   					if (velActual_1 > velNueva_1)                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054b6   80d8     BSF       0xd8,0x0,0x0                                                                                    
0054b8   55e8     SUBFWB    0xe8,0x0,0x1                                                                                    
0054ba   e202     BC        0x54c0                                                                                          
0054bc   07e8     DECF      0xe8,0x1,0x1   						velActual_1--;                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054be   d001     BRA       0x54c2         					else                                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054c0   2be8     INCF      0xe8,0x1,0x1   						velActual_1++;                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054c2   0e23     MOVLW     0x23           					tiempoAcel_1 = _ACEL_INI;                                                   C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054c4   6feb     MOVWF     0xeb,0x1                                                                                        
                                           				}                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			}                                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			//////////////////////////////////////////////////////////////////            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			//  motor 2                                                                   C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			// ACA SE MANTIENE LA VELOCIDAD ACTUAL                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054c6   07f5     DECF      0xf5,0x1,0x1   			tiempoPaso_2--;                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054c8   51f5     MOVF      0xf5,0x0,0x1   			if (tiempoPaso_2 == 0){                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054ca   e11b     BNZ       0x5502                                                                                          
0054cc   c0f0     MOVFF     0xf0,0xf5      				tiempoPaso_2 = velActual_2;                                                  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054ce   f0f5                                                                                                               
0054d0   51f0     MOVF      0xf0,0x0,0x1   				if (velActual_2 != _VELZERO)                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054d2   6e10     MOVWF     0x10,0x0                                                                                        
0054d4   6a11     CLRF      0x11,0x0                                                                                        
0054d6   0e96     MOVLW     0x96                                                                                            
0054d8   1810     XORWF     0x10,0x0,0x0                                                                                    
0054da   e101     BNZ       0x54de                                                                                          
0054dc   5011     MOVF      0x11,0x0,0x0                                                                                    
0054de   e005     BZ        0x54ea                                                                                          
0054e0   0e02     MOVLW     0x2            					doyPaso(2);                                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054e2   6ee6     MOVWF     0xe6,0x0                                                                                        
0054e4   de17     RCALL     0x5114                                                                                          
0054e6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0054e8   d00c     BRA       0x5502         				else                                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054ea   51f2     MOVF      0xf2,0x0,0x1   					if (velObjetivo_2 != _VELZERO){                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054ec   6e10     MOVWF     0x10,0x0                                                                                        
0054ee   6a11     CLRF      0x11,0x0                                                                                        
0054f0   0e96     MOVLW     0x96                                                                                            
0054f2   1810     XORWF     0x10,0x0,0x0                                                                                    
0054f4   e101     BNZ       0x54f8                                                                                          
0054f6   5011     MOVF      0x11,0x0,0x0                                                                                    
0054f8   e004     BZ        0x5502                                                                                          
0054fa   c0f7     MOVFF     0xf7,0xf6      						dirActual_2 = dirObjetivo_2;                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0054fc   f0f6                                                                                                               
0054fe   c0f2     MOVFF     0xf2,0xf1      						velNueva_2  = velObjetivo_2;                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005500   f0f1                                                                                                               
                                           					}                                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			}                                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			// ACA SE CAMBIA LA VELOCIDAD SI CORRESPONDE...                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005502   0100     MOVLB     0x0            			if (velActual_2 != velNueva_2){                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005504   51f1     MOVF      0xf1,0x0,0x1                                                                                    
005506   5df0     SUBWF     0xf0,0x0,0x1                                                                                    
005508   e00c     BZ        0x5522                                                                                          
00550a   07f3     DECF      0xf3,0x1,0x1   				tiempoAcel_2--;                                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00550c   51f3     MOVF      0xf3,0x0,0x1   				if (tiempoAcel_2 == 0){                                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00550e   e109     BNZ       0x5522                                                                                          
005510   51f1     MOVF      0xf1,0x0,0x1   					if (velActual_2 > velNueva_2)                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005512   80d8     BSF       0xd8,0x0,0x0                                                                                    
005514   55f0     SUBFWB    0xf0,0x0,0x1                                                                                    
005516   e202     BC        0x551c                                                                                          
005518   07f0     DECF      0xf0,0x1,0x1   						velActual_2--;                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00551a   d001     BRA       0x551e         					else                                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00551c   2bf0     INCF      0xf0,0x1,0x1   						velActual_2++;                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00551e   0e23     MOVLW     0x23           					tiempoAcel_2 = _ACEL_INI;                                                   C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005520   6ff3     MOVWF     0xf3,0x1                                                                                        
                                           				}                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			}                                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			// cambia el valor del paso si cambio el torque.                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			//                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005522   05fb     DECF      0xfb,0x0,0x1   			if(CONTROL_TORQUE==ADAPTATIVO) {	                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005524   e102     BNZ       0x552a                                                                                          
005526   de44     RCALL     0x51b0         				controlTorque();                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005528   d003     BRA       0x5530         			} else { // torque constante                                                  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00552a   0e01     MOVLW     0x1            				TORQUE_1=TORQUE_FIJO;                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00552c   6ff8     MOVWF     0xf8,0x1                                                                                        
00552e   6ff9     MOVWF     0xf9,0x1       				TORQUE_2=TORQUE_FIJO;                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			}                                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			// Acomoda el valor del puerto de acuerdo con el torque que tiene.            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005530   c0f8     MOVFF     0xf8,0xfe6     			paso_puerto1 = pasoDoble( paso_1, TORQUE_1 );                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005532   ffe6                                                                                                               
005534   c0ec     MOVFF     0xec,0xfe6                                                                                      
005536   ffe6                                                                                                               
005538   de67     RCALL     0x5208                                                                                          
00553a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00553c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00553e   0101     MOVLB     0x1                                                                                             
005540   6f05     MOVWF     0x5,0x1                                                                                         
005542   c0f9     MOVFF     0xf9,0xfe6     			paso_puerto2 = pasoDoble( paso_2, TORQUE_2 );		                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005544   ffe6                                                                                                               
005546   c0f4     MOVFF     0xf4,0xfe6                                                                                      
005548   ffe6                                                                                                               
00554a   de5e     RCALL     0x5208                                                                                          
00554c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00554e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005550   0101     MOVLB     0x1                                                                                             
005552   6f06     MOVWF     0x6,0x1                                                                                         
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005554   c105     MOVFF     0x105,0xfe6    			paso_puerto1 = invierto( paso_puerto1 );                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005556   ffe6                                                                                                               
005558   dda1     RCALL     0x509c                                                                                          
00555a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00555c   0101     MOVLB     0x1                                                                                             
00555e   6f05     MOVWF     0x5,0x1                                                                                         
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			// Controlo si es necesario energizar los motores o los suelto.               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005560   0100     MOVLB     0x0            			if (( velActual_1 == _VELZERO ) && ( velActual_2 == _VELZERO ) && ( _FRENO_SUELTO == 1 )) C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005562   51e8     MOVF      0xe8,0x0,0x1                                                                                    
005564   6e10     MOVWF     0x10,0x0                                                                                        
005566   6a11     CLRF      0x11,0x0                                                                                        
005568   0e96     MOVLW     0x96                                                                                            
00556a   1810     XORWF     0x10,0x0,0x0                                                                                    
00556c   e101     BNZ       0x5570                                                                                          
00556e   5011     MOVF      0x11,0x0,0x0                                                                                    
005570   e10b     BNZ       0x5588                                                                                          
005572   51f0     MOVF      0xf0,0x0,0x1                                                                                    
005574   6e12     MOVWF     0x12,0x0                                                                                        
005576   6a13     CLRF      0x13,0x0                                                                                        
005578   0e96     MOVLW     0x96                                                                                            
00557a   1812     XORWF     0x12,0x0,0x0                                                                                    
00557c   e101     BNZ       0x5580                                                                                          
00557e   5013     MOVF      0x13,0x0,0x0                                                                                    
005580   e103     BNZ       0x5588                                                                                          
005582   0101     MOVLB     0x1            				puertoAux = 0;                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005584   6b07     CLRF      0x7,0x1                                                                                         
005586   d006     BRA       0x5594         			else                                                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005588   0e10     MOVLW     0x10           				puertoAux = paso_puerto1 + (paso_puerto2 * 16);                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00558a   0101     MOVLB     0x1                                                                                             
00558c   0306     MULWF     0x6,0x1                                                                                         
00558e   50f3     MOVF      0xf3,0x0,0x0                                                                                    
005590   2505     ADDWF     0x5,0x0,0x1                                                                                     
005592   6f07     MOVWF     0x7,0x1                                                                                         
                                           		                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005594   c107     MOVFF     0x107,0xf8c    			MotorPort = puertoAux;		                                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005596   ff8c                                                                                                               
                                           		}                                                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005598   0012     RETURN    0x0            }//end ProcessIO                                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Function:        MotorISRRelease(byte i)                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Overview:        This function release all the resources that the user module used, it is called by the framework  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *					when the module is close	                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00559a   cfd9     MOVFF     0xfd9,0xfe6    void MotorISRRelease(byte i){                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00559c   ffe6                                                                                                               
00559e   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0055a0   ffd9                                                                                                               
                                           	                                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	//apago timer                                                                   C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	//TODO ponerlo en el modulo de ISR y que se ponga cuando hay un tipo colgado y deshabilitar cuando no quedan mas C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	//INTCONbits.GIE = 0; //apago las interrupciones globales                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	                                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0055a2   0efe     MOVLW     0xfe           	unsetHandlerReceiveBuffer(i);                                                   C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0055a4   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0055a6   ffe6                                                                                                               
0055a8   ecac     CALL      0x2358,0x0                                                                                      
0055aa   f011                                                                                                               
0055ac   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0055ae   0efe     MOVLW     0xfe           	unsetHandlerReceiveFunction(i);                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0055b0   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0055b2   ffe6                                                                                                               
0055b4   ecd8     CALL      0x23b0,0x0                                                                                      
0055b6   f011                                                                                                               
0055b8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0055ba   0e5c     MOVLW     0x5c           	removeT0Function(&MotorISRProcessIO);                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0055bc   6ee6     MOVWF     0xe6,0x0                                                                                        
0055be   0e54     MOVLW     0x54                                                                                            
0055c0   6ee6     MOVWF     0xe6,0x0                                                                                        
0055c2   ecf9     CALL      0x21f2,0x0                                                                                      
0055c4   f010                                                                                                               
0055c6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0055c8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0055ca   6895     SETF      0x95,0x0       	mReleaseMotor();                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0055cc   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0055ce   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0055d0   ffd9                                                                                                               
0055d2   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           /******************************************************************************  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Function:        MotorISRReceived(byte* recBuffPtr, byte len)                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * PreCondition:    None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Input:           None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Output:          None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Side Effects:    None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Overview:        This function manages the comunication with the pc           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            * Note:            None                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                            *****************************************************************************/  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0055d4   cfd9     MOVFF     0xfd9,0xfe6    void MotorISRReceived(byte* recBuffPtr, byte len){                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0055d6   ffe6                                                                                                               
0055d8   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0055da   ffd9                                                                                                               
0055dc   0e11     MOVLW     0x11                                                                                            
0055de   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	  byte index;                                                                   C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0055e0   50d9     MOVF      0xd9,0x0,0x0   	  char mens[9] = "testmoti";	                                                   C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0055e2   0f01     ADDLW     0x1                                                                                             
0055e4   6ee9     MOVWF     0xe9,0x0                                                                                        
0055e6   cfda     MOVFF     0xfda,0xfea                                                                                     
0055e8   ffea                                                                                                               
0055ea   0e74     MOVLW     0x74                                                                                            
0055ec   6eee     MOVWF     0xee,0x0                                                                                        
0055ee   0e65     MOVLW     0x65                                                                                            
0055f0   6eee     MOVWF     0xee,0x0                                                                                        
0055f2   0e73     MOVLW     0x73                                                                                            
0055f4   6eee     MOVWF     0xee,0x0                                                                                        
0055f6   0e74     MOVLW     0x74                                                                                            
0055f8   6eee     MOVWF     0xee,0x0                                                                                        
0055fa   0e6d     MOVLW     0x6d                                                                                            
0055fc   6eee     MOVWF     0xee,0x0                                                                                        
0055fe   0e6f     MOVLW     0x6f                                                                                            
005600   6eee     MOVWF     0xee,0x0                                                                                        
005602   0e74     MOVLW     0x74                                                                                            
005604   6eee     MOVWF     0xee,0x0                                                                                        
005606   0e69     MOVLW     0x69                                                                                            
005608   6eee     MOVWF     0xee,0x0                                                                                        
00560a   6aee     CLRF      0xee,0x0                                                                                        
00560c   0e0a     MOVLW     0xa                  byte MotorISRCounter = 0;                                                  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00560e   6adb     CLRF      0xdb,0x0                                                                                        
                                           	  byte dir_1;                                                                   C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	  byte dir_2;                                                                   C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	  byte vel_1;                                                                   C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	  byte vel_2;                                                                   C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	  byte t0_l;                                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           	  byte t0_h;                                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005610   0efd     MOVLW     0xfd                 switch(((MOTORISR_DATA_PACKET*)recBuffPtr)->CMD)                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005612   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
005614   ffe9                                                                                                               
005616   0efe     MOVLW     0xfe                                                                                            
005618   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00561a   ffea                                                                                                               
00561c   50ef     MOVF      0xef,0x0,0x0                                                                                    
00561e   0a05     XORLW     0x5                                                                                             
005620   e101     BNZ       0x5624                                                                                          
005622   d0f6     BRA       0x5810                                                                                          
005624   0afa     XORLW     0xfa                                                                                            
005626   e101     BNZ       0x562a                                                                                          
005628   d0f1     BRA       0x580c                                                                                          
00562a   0afe     XORLW     0xfe                                                                                            
00562c   e101     BNZ       0x5630                                                                                          
00562e   d0b5     BRA       0x579a                                                                                          
005630   0a03     XORLW     0x3                                                                                             
005632   e042     BZ        0x56b8                                                                                          
005634   0a02     XORLW     0x2                                                                                             
005636   e001     BZ        0x563a                                                                                          
005638   d0f9     BRA       0x582c                                                                                          
                                                 {                                                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                   case READ_VERSION:                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                         //dataPacket._byte[1] is len                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00563a   0efd     MOVLW     0xfd           			  ((MOTORISR_DATA_PACKET*)sendBufferMotorISR)->_byte[0] = ((MOTORISR_DATA_PACKET*)recBuffPtr)->_byte[0];  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00563c   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00563e   ffe9                                                                                                               
005640   0efe     MOVLW     0xfe                                                                                            
005642   cfdb     MOVFF     0xfdb,0xfea                                                                                     
005644   ffea                                                                                                               
005646   50ef     MOVF      0xef,0x0,0x0                                                                                    
005648   6ee6     MOVWF     0xe6,0x0                                                                                        
00564a   c101     MOVFF     0x101,0xfe9                                                                                     
00564c   ffe9                                                                                                               
00564e   c102     MOVFF     0x102,0xfea                                                                                     
005650   ffea                                                                                                               
005652   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005654   50e7     MOVF      0xe7,0x0,0x0                                                                                    
005656   6eef     MOVWF     0xef,0x0                                                                                        
005658   0efd     MOVLW     0xfd           			  ((MOTORISR_DATA_PACKET*)sendBufferMotorISR)->_byte[1] = ((MOTORISR_DATA_PACKET*)recBuffPtr)->_byte[1];  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00565a   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00565c   ffe9                                                                                                               
00565e   0efe     MOVLW     0xfe                                                                                            
005660   cfdb     MOVFF     0xfdb,0xfea                                                                                     
005662   ffea                                                                                                               
005664   0e01     MOVLW     0x1                                                                                             
005666   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
005668   0e00     MOVLW     0x0                                                                                             
00566a   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00566c   50ef     MOVF      0xef,0x0,0x0                                                                                    
00566e   6ee6     MOVWF     0xe6,0x0                                                                                        
005670   c101     MOVFF     0x101,0xfe9                                                                                     
005672   ffe9                                                                                                               
005674   c102     MOVFF     0x102,0xfea                                                                                     
005676   ffea                                                                                                               
005678   0e01     MOVLW     0x1                                                                                             
00567a   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
00567c   0e00     MOVLW     0x0                                                                                             
00567e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
005680   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005682   50e7     MOVF      0xe7,0x0,0x0                                                                                    
005684   6eef     MOVWF     0xef,0x0                                                                                        
005686   c101     MOVFF     0x101,0xfe9                  ((MOTORISR_DATA_PACKET*)sendBufferMotorISR)->_byte[2] = MOTOR_ISR_MINOR_VERSION; C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005688   ffe9                                                                                                               
00568a   c102     MOVFF     0x102,0xfea                                                                                     
00568c   ffea                                                                                                               
00568e   0e02     MOVLW     0x2                                                                                             
005690   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
005692   0e00     MOVLW     0x0                                                                                             
005694   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
005696   6aef     CLRF      0xef,0x0                                                                                        
005698   c101     MOVFF     0x101,0xfe9                  ((MOTORISR_DATA_PACKET*)sendBufferMotorISR)->_byte[3] = MOTOR_ISR_MAJOR_VERSION; C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00569a   ffe9                                                                                                               
00569c   c102     MOVFF     0x102,0xfea                                                                                     
00569e   ffea                                                                                                               
0056a0   0e03     MOVLW     0x3                                                                                             
0056a2   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0056a4   0e00     MOVLW     0x0                                                                                             
0056a6   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0056a8   0e01     MOVLW     0x1                                                                                             
0056aa   6eef     MOVWF     0xef,0x0                                                                                        
0056ac   0e04     MOVLW     0x4                          MotorISRCounter=0x04;                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0056ae   6ef3     MOVWF     0xf3,0x0                                                                                        
0056b0   0e0a     MOVLW     0xa                                                                                             
0056b2   cff3     MOVFF     0xff3,0xfdb                                                                                     
0056b4   ffdb                                                                                                               
0056b6   d0bb     BRA       0x582e                       break;                                                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           		case SPEED:                                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0056b8   0efd     MOVLW     0xfd           			 ((MOTORISR_DATA_PACKET*)sendBufferMotorISR)->_byte[0] = ((MOTORISR_DATA_PACKET*)recBuffPtr)->_byte[0];  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0056ba   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0056bc   ffe9                                                                                                               
0056be   0efe     MOVLW     0xfe                                                                                            
0056c0   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0056c2   ffea                                                                                                               
0056c4   50ef     MOVF      0xef,0x0,0x0                                                                                    
0056c6   6ee6     MOVWF     0xe6,0x0                                                                                        
0056c8   c101     MOVFF     0x101,0xfe9                                                                                     
0056ca   ffe9                                                                                                               
0056cc   c102     MOVFF     0x102,0xfea                                                                                     
0056ce   ffea                                                                                                               
0056d0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0056d2   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0056d4   6eef     MOVWF     0xef,0x0                                                                                        
0056d6   0efd     MOVLW     0xfd           			 speed_1 = ((MOTORISR_DATA_PACKET*)recBuffPtr)->_byte[1]; //low byte          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0056d8   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0056da   ffe9                                                                                                               
0056dc   0efe     MOVLW     0xfe                                                                                            
0056de   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0056e0   ffea                                                                                                               
0056e2   0e01     MOVLW     0x1                                                                                             
0056e4   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0056e6   0e00     MOVLW     0x0                                                                                             
0056e8   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0056ea   cfef     MOVFF     0xfef,0xfd                                                                                      
0056ec   f0fd                                                                                                               
0056ee   0efd     MOVLW     0xfd           			 speed_2 = ((MOTORISR_DATA_PACKET*)recBuffPtr)->_byte[2]; //high byte         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0056f0   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0056f2   ffe9                                                                                                               
0056f4   0efe     MOVLW     0xfe                                                                                            
0056f6   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0056f8   ffea                                                                                                               
0056fa   0e02     MOVLW     0x2                                                                                             
0056fc   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0056fe   0e00     MOVLW     0x0                                                                                             
005700   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
005702   cfef     MOVFF     0xfef,0xfe                                                                                      
005704   f0fe                                                                                                               
                                           	                                                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			 // Calculo las direcciones y velocidades...                                  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005706   c0fd     MOVFF     0xfd,0xfe6     		     dir_1 = getDireccion(speed_1);                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005708   ffe6                                                                                                               
00570a   dc90     RCALL     0x502c                                                                                          
00570c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00570e   6ee7     MOVWF     0xe7,0x0                                                                                        
005710   0e0b     MOVLW     0xb                                                                                             
005712   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
005714   ffdb                                                                                                               
005716   c0fd     MOVFF     0xfd,0xfe6     		     vel_1 = getVelocidad(speed_1);                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005718   ffe6                                                                                                               
00571a   dca6     RCALL     0x5068                                                                                          
00571c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00571e   6ee7     MOVWF     0xe7,0x0                                                                                        
005720   0e0d     MOVLW     0xd                                                                                             
005722   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
005724   ffdb                                                                                                               
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005726   c0fe     MOVFF     0xfe,0xfe6     		     dir_2 = getDireccion(speed_2);                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005728   ffe6                                                                                                               
00572a   dc80     RCALL     0x502c                                                                                          
00572c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00572e   6ee7     MOVWF     0xe7,0x0                                                                                        
005730   0e0c     MOVLW     0xc                                                                                             
005732   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
005734   ffdb                                                                                                               
005736   c0fe     MOVFF     0xfe,0xfe6     		     vel_2 = getVelocidad(speed_2);                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005738   ffe6                                                                                                               
00573a   dc96     RCALL     0x5068                                                                                          
00573c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00573e   6ee7     MOVWF     0xe7,0x0                                                                                        
005740   0e0e     MOVLW     0xe                                                                                             
005742   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
005744   ffdb                                                                                                               
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			 // Seteo de velocidades en los dos motores.                                  C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005746   0e0d     MOVLW     0xd            			 vel_1 = mapeo( vel_1 );                                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005748   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
00574a   ffe6                                                                                                               
00574c   de20     RCALL     0x538e                                                                                          
00574e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005750   6ee7     MOVWF     0xe7,0x0                                                                                        
005752   0e0d     MOVLW     0xd                                                                                             
005754   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
005756   ffdb                                                                                                               
005758   0e0d     MOVLW     0xd            		     setVelMotor1( dir_1, vel_1 );	                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00575a   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
00575c   ffe6                                                                                                               
00575e   0e0b     MOVLW     0xb                                                                                             
005760   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
005762   ffe6                                                                                                               
005764   dd90     RCALL     0x5286                                                                                          
005766   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005768   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           			 // La velocidad debe ser mapeada al tiempo real.                             C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00576a   0e0e     MOVLW     0xe            		     vel_2 = mapeo( vel_2 );                                                   C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00576c   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
00576e   ffe6                                                                                                               
005770   de0e     RCALL     0x538e                                                                                          
005772   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005774   6ee7     MOVWF     0xe7,0x0                                                                                        
005776   0e0e     MOVLW     0xe                                                                                             
005778   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
00577a   ffdb                                                                                                               
00577c   0e0e     MOVLW     0xe            		     setVelMotor2( dir_2, vel_2 );	                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00577e   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
005780   ffe6                                                                                                               
005782   0e0c     MOVLW     0xc                                                                                             
005784   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
005786   ffe6                                                                                                               
005788   ddc0     RCALL     0x530a                                                                                          
00578a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00578c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00578e   0e01     MOVLW     0x1            			 MotorISRCounter=0x1;                                                         C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005790   6ef3     MOVWF     0xf3,0x0                                                                                        
005792   0e0a     MOVLW     0xa                                                                                             
005794   cff3     MOVFF     0xff3,0xfdb                                                                                     
005796   ffdb                                                                                                               
005798   d04a     BRA       0x582e                    	 break;                                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           		case T0CFG:                                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00579a   0efd     MOVLW     0xfd           			 ((MOTORISR_DATA_PACKET*)sendBufferMotorISR)->_byte[0] = ((MOTORISR_DATA_PACKET*)recBuffPtr)->_byte[0]; C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00579c   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00579e   ffe9                                                                                                               
0057a0   0efe     MOVLW     0xfe                                                                                            
0057a2   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0057a4   ffea                                                                                                               
0057a6   50ef     MOVF      0xef,0x0,0x0                                                                                    
0057a8   6ee6     MOVWF     0xe6,0x0                                                                                        
0057aa   c101     MOVFF     0x101,0xfe9                                                                                     
0057ac   ffe9                                                                                                               
0057ae   c102     MOVFF     0x102,0xfea                                                                                     
0057b0   ffea                                                                                                               
0057b2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0057b4   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0057b6   6eef     MOVWF     0xef,0x0                                                                                        
0057b8   0efd     MOVLW     0xfd           			 t0_l = ((MOTORISR_DATA_PACKET*)recBuffPtr)->_byte[1];	                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0057ba   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0057bc   ffe9                                                                                                               
0057be   0efe     MOVLW     0xfe                                                                                            
0057c0   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0057c2   ffea                                                                                                               
0057c4   0e01     MOVLW     0x1                                                                                             
0057c6   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0057c8   0e00     MOVLW     0x0                                                                                             
0057ca   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0057cc   0e0f     MOVLW     0xf                                                                                             
0057ce   cfef     MOVFF     0xfef,0xfdb                                                                                     
0057d0   ffdb                                                                                                               
0057d2   0efd     MOVLW     0xfd           			 t0_h = ((MOTORISR_DATA_PACKET*)recBuffPtr)->_byte[2];                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0057d4   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0057d6   ffe9                                                                                                               
0057d8   0efe     MOVLW     0xfe                                                                                            
0057da   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0057dc   ffea                                                                                                               
0057de   0e02     MOVLW     0x2                                                                                             
0057e0   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0057e2   0e00     MOVLW     0x0                                                                                             
0057e4   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0057e6   0e10     MOVLW     0x10                                                                                            
0057e8   cfef     MOVFF     0xfef,0xfdb                                                                                     
0057ea   ffdb                                                                                                               
0057ec   0e10     MOVLW     0x10           			 configT0(t0_l, t0_h);                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
0057ee   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0057f0   ffe6                                                                                                               
0057f2   0e0f     MOVLW     0xf                                                                                             
0057f4   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0057f6   ffe6                                                                                                               
0057f8   ec4e     CALL      0x229c,0x0                                                                                      
0057fa   f011                                                                                                               
0057fc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0057fe   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005800   0e01     MOVLW     0x1            			 MotorISRCounter=0x1;	                                                        C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005802   6ef3     MOVWF     0xf3,0x0                                                                                        
005804   0e0a     MOVLW     0xa                                                                                             
005806   cff3     MOVFF     0xff3,0xfdb                                                                                     
005808   ffdb                                                                                                               
00580a   d011     BRA       0x582e         			 break;                                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           		case RESET:                                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00580c   00ff     RESET                                  Reset();                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00580e   d00f     BRA       0x582e         			  break;                                                                      C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           		                                                                               C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           		case MESS:                                                                     C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005810   0e09     MOVLW     0x9            		 	 sendMes(mens, sizeof(mens));                                                C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005812   6ee6     MOVWF     0xe6,0x0                                                                                        
005814   50d9     MOVF      0xd9,0x0,0x0                                                                                    
005816   0f01     ADDLW     0x1                                                                                             
005818   6ee6     MOVWF     0xe6,0x0                                                                                        
00581a   0e00     MOVLW     0x0                                                                                             
00581c   20da     ADDWFC    0xda,0x0,0x0                                                                                    
00581e   6ee6     MOVWF     0xe6,0x0                                                                                        
005820   ece0     CALL      0x19c0,0x0                                                                                      
005822   f00c                                                                                                               
005824   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005826   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005828   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00582a   d001     BRA       0x582e                      break;                                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           		default:                                                                       C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00582c   d000     BRA       0x582e                      break;                                                              C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                 }//end switch(s)                                                           C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00582e   0e0a     MOVLW     0xa                  if(MotorISRCounter!= 0)                                                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005830   50db     MOVF      0xdb,0x0,0x0                                                                                    
005832   e00c     BZ        0x584c                                                                                          
                                                 {                                                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005834   0104     MOVLB     0x4                      if(!mUSBGenTxIsBusy())                                                 C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
005836   bf0c     BTFSC     0xc,0x7,0x1                                                                                     
005838   d009     BRA       0x584c                                                                                          
00583a   0e0a     MOVLW     0xa                          USBGenWrite2(MotorISRHandler, MotorISRCounter);                    C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00583c   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
00583e   ffe6                                                                                                               
005840   c100     MOVFF     0x100,0xfe6                                                                                     
005842   ffe6                                                                                                               
005844   ec36     CALL      0x266c,0x0                                                                                      
005846   f013                                                                                                               
005848   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00584a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                 }//end if  	  	                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00584c   0e11     MOVLW     0x11           }//end MotorISRReceived                                                          C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
00584e   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
005850   e202     BC        0x5856                                                                                          
005852   6ae1     CLRF      0xe1,0x0                                                                                        
005854   52e5     MOVF      0xe5,0x1,0x0                                                                                    
005856   6ee1     MOVWF     0xe1,0x0                                                                                        
005858   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00585a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00585c   ffd9                                                                                                               
00585e   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                                                                                            C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                           /** EOF stepMotorISR.c ***************************************************************/ C:\usb4all\fw\demo\user\stepMotorSUMBOT.c
                                                   LIST P=18F4550                                                           C:\MCC18\src\traditional\proc\p18F4550.asm
                                                   LIST                                                                     C:\MCC18\src\traditional\proc\p18F4550.asm
                                                   END                                                                      C:\MCC18\src\traditional\proc\p18F4550.asm
                                           /*** Unsigned Integer Division: 16-bit by 16-bit                                 C:\MCC18\src\traditional\math\fxd1616u.c
                                            ***                                                                             C:\MCC18\src\traditional\math\fxd1616u.c
                                            *** Optimized: Dec. 21, 2000                                                    C:\MCC18\src\traditional\math\fxd1616u.c
                                            ***        by: Daniel R. Madill, Quanser Consulting Inc.                        C:\MCC18\src\traditional\math\fxd1616u.c
                                            ***       for: Saved (for the worst case) at least 5*16 = 80 instruction cycles C:\MCC18\src\traditional\math\fxd1616u.c
                                            ***            over the code supplied with MCC18 v1.00.12                       C:\MCC18\src\traditional\math\fxd1616u.c
                                            ***/                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                           void FXD1616U (/*unsigned arg0, unsigned arg1*/)                                 C:\MCC18\src\traditional\math\fxd1616u.c
                                           {                                                                                C:\MCC18\src\traditional\math\fxd1616u.c
                                             // use INDF1 for the counter...                                                C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                                 _asm                                                                       C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                               // REM = 0                                                                   C:\MCC18\src\traditional\math\fxd1616u.c
002ef4   6a03     CLRF      0x3,0x0            clrf __REMB0, 0                                                              C:\MCC18\src\traditional\math\fxd1616u.c
002ef6   6a02     CLRF      0x2,0x0            clrf __REMB1, 0                                                              C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                               // INDF1 = 16                                                                C:\MCC18\src\traditional\math\fxd1616u.c
002ef8   0e10     MOVLW     0x10               movlw 16                                                                     C:\MCC18\src\traditional\math\fxd1616u.c
002efa   6ee7     MOVWF     0xe7,0x0           movwf INDF1, 0                                                               C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                               // Clear the carry                                                           C:\MCC18\src\traditional\math\fxd1616u.c
002efc   90d8     BCF       0xd8,0x0,0x0   	bcf STATUS, 0, 0                                                                C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                           loop:                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                           	//AARG16 <<= 1; Carry is always clear at this point.                            C:\MCC18\src\traditional\math\fxd1616u.c
002efe   3606     RLCF      0x6,0x1,0x0    	rlcf __AARGB1, 1, 0                                                             C:\MCC18\src\traditional\math\fxd1616u.c
002f00   3607     RLCF      0x7,0x1,0x0    	rlcf __AARGB0, 1, 0                                                             C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                           	//PROD = (PROD << 1) | (AARG16 >> 16)                                           C:\MCC18\src\traditional\math\fxd1616u.c
002f02   3602     RLCF      0x2,0x1,0x0    	rlcf __REMB1, 1, 0                                                              C:\MCC18\src\traditional\math\fxd1616u.c
002f04   3603     RLCF      0x3,0x1,0x0    	rlcf __REMB0, 1, 0                                                              C:\MCC18\src\traditional\math\fxd1616u.c
                                           	                                                                                C:\MCC18\src\traditional\math\fxd1616u.c
                                           	//if (PROD >= BARG16)                                                           C:\MCC18\src\traditional\math\fxd1616u.c
002f06   500b     MOVF      0xb,0x0,0x0    	movf __BARGB1, 0, 0                                                             C:\MCC18\src\traditional\math\fxd1616u.c
002f08   5c02     SUBWF     0x2,0x0,0x0    	subwf __REMB1, 0, 0                                                             C:\MCC18\src\traditional\math\fxd1616u.c
002f0a   500c     MOVF      0xc,0x0,0x0    	movf __BARGB0, 0, 0                                                             C:\MCC18\src\traditional\math\fxd1616u.c
002f0c   5803     SUBWFB    0x3,0x0,0x0    	subwfb __REMB0, 0, 0                                                            C:\MCC18\src\traditional\math\fxd1616u.c
002f0e   e305     BNC       0x2f1a         	bnc endloop                                                                     C:\MCC18\src\traditional\math\fxd1616u.c
                                               //{                                                                          C:\MCC18\src\traditional\math\fxd1616u.c
                                           	    //PROD -= BARG16;                                                           C:\MCC18\src\traditional\math\fxd1616u.c
002f10   500b     MOVF      0xb,0x0,0x0    	    movf __BARGB1, 0, 0                                                         C:\MCC18\src\traditional\math\fxd1616u.c
002f12   5e02     SUBWF     0x2,0x1,0x0    	    subwf __REMB1, 1, 0                                                         C:\MCC18\src\traditional\math\fxd1616u.c
002f14   500c     MOVF      0xc,0x0,0x0    	    movf __BARGB0, 0, 0                                                         C:\MCC18\src\traditional\math\fxd1616u.c
002f16   5a03     SUBWFB    0x3,0x1,0x0    	    subwfb __REMB0, 1, 0                                                        C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                           	    //++AARG16; Since AARG16 was shift to the left above, the increment will    C:\MCC18\src\traditional\math\fxd1616u.c
                                                   //          simply set the LSbit. Using incf also clears the carry, which C:\MCC18\src\traditional\math\fxd1616u.c
                                                   //          means we don't have to clear the carry at the top of the loop. C:\MCC18\src\traditional\math\fxd1616u.c
002f18   2a06     INCF      0x6,0x1,0x0            incf __AARGB1, 1, 0                                                      C:\MCC18\src\traditional\math\fxd1616u.c
                                               //}                                                                          C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                           endloop:                                                                         C:\MCC18\src\traditional\math\fxd1616u.c
002f1a   2ee7     DECFSZ    0xe7,0x1,0x0       decfsz INDF1, 1, 0    // does not affect the carry bit                       C:\MCC18\src\traditional\math\fxd1616u.c
002f1c   d7f0     BRA       0x2efe             bra loop                                                                     C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                             _endasm                                                                        C:\MCC18\src\traditional\math\fxd1616u.c
                                                                                                                            C:\MCC18\src\traditional\math\fxd1616u.c
                                             /* result in AARG already... */                                                C:\MCC18\src\traditional\math\fxd1616u.c
002f1e   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\math\fxd1616u.c
                                           #include <p18cxxx.h>                                                             C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           #include <spi.h>                                                                 C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           /********************************************************************            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           *   Function Name:  OpenSPI                                         *            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           *   Return Value:   void                                            *            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           *   Parameters:     SSP peripheral setup bytes                      *            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           *   Description:    This function sets up the SSP module on a       *            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           *                   PIC18Cxxx device for use with a Microchip SPI   *            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           *                   EEPROM device or SPI bus device.                *            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           ********************************************************************/            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           #if defined (SPI_V1)                                                             C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
002e62   cfd9     MOVFF     0xfd9,0xfe6    void OpenSPI( unsigned char sync_mode, unsigned char bus_mode, unsigned char smp_phase) C:\MCC18\src\pmc_common\SPI\spi_open.c
002e64   ffe6                                                                                                               
002e66   cfda     MOVFF     0xfda,0xfe6                                                                                     
002e68   ffe6                                                                                                               
002e6a   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002e6c   ffd9                                                                                                               
002e6e   cfe2     MOVFF     0xfe2,0xfda                                                                                     
002e70   ffda                                                                                                               
                                           {                                                                                C:\MCC18\src\pmc_common\SPI\spi_open.c
002e72   0e3f     MOVLW     0x3f             SSPSTAT &= 0x3F;                // power on state                              C:\MCC18\src\pmc_common\SPI\spi_open.c
002e74   16c7     ANDWF     0xc7,0x1,0x0                                                                                    
002e76   6ac6     CLRF      0xc6,0x0         SSPCON1 = 0x00;                 // power on state                              C:\MCC18\src\pmc_common\SPI\spi_open.c
002e78   0efd     MOVLW     0xfd             SSPCON1 |= sync_mode;           // select serial mode                          C:\MCC18\src\pmc_common\SPI\spi_open.c
002e7a   50db     MOVF      0xdb,0x0,0x0                                                                                    
002e7c   12c6     IORWF     0xc6,0x1,0x0                                                                                    
002e7e   0efb     MOVLW     0xfb             SSPSTAT |= smp_phase;           // select data input sample phase              C:\MCC18\src\pmc_common\SPI\spi_open.c
002e80   50db     MOVF      0xdb,0x0,0x0                                                                                    
002e82   12c7     IORWF     0xc7,0x1,0x0                                                                                    
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
002e84   0efc     MOVLW     0xfc             switch( bus_mode )                                                             C:\MCC18\src\pmc_common\SPI\spi_open.c
002e86   50db     MOVF      0xdb,0x0,0x0                                                                                    
002e88   0a03     XORLW     0x3                                                                                             
002e8a   e009     BZ        0x2e9e                                                                                          
002e8c   0a01     XORLW     0x1                                                                                             
002e8e   e004     BZ        0x2e98                                                                                          
002e90   0a02     XORLW     0x2                                                                                             
002e92   e106     BNZ       0x2ea0                                                                                          
                                             {                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 0:                       // SPI bus mode 0,0                            C:\MCC18\src\pmc_common\SPI\spi_open.c
002e94   8cc7     BSF       0xc7,0x6,0x0         SSPSTATbits.CKE = 1;        // data transmitted on falling edge            C:\MCC18\src\pmc_common\SPI\spi_open.c
002e96   d004     BRA       0x2ea0               break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 2:                       // SPI bus mode 1,0                            C:\MCC18\src\pmc_common\SPI\spi_open.c
002e98   8cc7     BSF       0xc7,0x6,0x0         SSPSTATbits.CKE = 1;        // data transmitted on rising edge             C:\MCC18\src\pmc_common\SPI\spi_open.c
002e9a   88c6     BSF       0xc6,0x4,0x0         SSPCON1bits.CKP = 1;        // clock idle state high                       C:\MCC18\src\pmc_common\SPI\spi_open.c
002e9c   d001     BRA       0x2ea0               break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 3:                       // SPI bus mode 1,1                            C:\MCC18\src\pmc_common\SPI\spi_open.c
002e9e   88c6     BSF       0xc6,0x4,0x0         SSPCON1bits.CKP = 1;        // clock idle state high                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               default:                      // default SPI bus mode 0,1                    C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             }                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
002ea0   0efd     MOVLW     0xfd             switch( sync_mode )                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
002ea2   50db     MOVF      0xdb,0x0,0x0                                                                                    
002ea4   0a05     XORLW     0x5                                                                                             
002ea6   e003     BZ        0x2eae                                                                                          
002ea8   0a01     XORLW     0x1                                                                                             
002eaa   e103     BNZ       0x2eb2                                                                                          
                                             {                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 4:                       // slave mode w /SS enable                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#if defined SPI_IO_V1                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC3 = 1;       // define clock pin as input	                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 	TRISAbits.TRISA5 = 1;       // define /SS1 pin as input                   C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V2 || defined SPI_IO_V4                                 C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISFbits.TRISF7 = 1;       // define /SS pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC3 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V3                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
002eac   8a92     BSF       0x92,0x5,0x0   		TRISAbits.TRISA5 = 1;       // define /SS pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISBbits.TRISB1 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V5	                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC6 = 1;       // define /SS pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V6                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC3 = 1;       // define clock pin as input	                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 	TRISAbits.TRISA5 = 1;       // define /SS1 pin as input                   C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               	ANSEL &= 0b11101111;                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V9                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISBbits.TRISB6 = 1;		// define clock pin as input                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC6 = 1;		// define /SS pin as input                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		break;                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           case 5:                       // slave mode w/o /SS enable                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#if defined (SPI_IO_V1) || defined (SPI_IO_V6) || defined (SPI_IO_V2) || defined (SPI_IO_V4) C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC3 = 1;       // define clock pin as input	                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V3                                                      C:\MCC18\src\pmc_common\SPI\spi_open.c
002eae   8293     BSF       0x93,0x1,0x0   	 	TRISBbits.TRISB1 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V5	                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V9                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISBbits.TRISB6 = 1;		// define clock pin as input		                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
002eb0   d001     BRA       0x2eb4         		break;                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	default:                      // master mode, define clock pin as output        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #if defined (SPI_IO_V1) || defined (SPI_IO_V6) || defined (SPI_IO_V2) || defined (SPI_IO_V4) C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC3 = 0;       // define clock pin as input	                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V3                                                      C:\MCC18\src\pmc_common\SPI\spi_open.c
002eb2   9293     BCF       0x93,0x1,0x0   	 	TRISBbits.TRISB1 = 0;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V5	                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 0;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V9                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISBbits.TRISB6 = 0;		// define clock pin as output		                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif	                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	                                                                                C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 break;                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             }                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#if defined SPI_IO_V3                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
002eb4   8093     BSF       0x93,0x0,0x0   	 	TRISBbits.TRISB0 = 1;       // define SDI pin as input	                       C:\MCC18\src\pmc_common\SPI\spi_open.c
002eb6   9e94     BCF       0x94,0x7,0x0         	TRISCbits.TRISC7 = 0;       // define SDO pin as output                   C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V5                                                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC4 = 1;       // define SDI pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC7 = 0;       // define SDO pin as output                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V9                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC7 = 0;       // define SDO pin as output                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISBbits.TRISB4 = 1;       // define SDI pin as input			                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#else                                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC4 = 1;       // define SDI pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 0;       // define SDO pin as output                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
002eb8   8ac6     BSF       0xc6,0x5,0x0   	SSPCON1 |= SSPENB;              // enable synchronous serial port               C:\MCC18\src\pmc_common\SPI\spi_open.c
002eba   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\MCC18\src\pmc_common\SPI\spi_open.c
002ebc   cfe5     MOVFF     0xfe5,0xfda                                                                                     
002ebe   ffda                                                                                                               
002ec0   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002ec2   ffd9                                                                                                               
002ec4   0012     RETURN    0x0                                                                                             
                                           #endif                                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           #if defined (SPI_V4)                                                             C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           void OpenSPI( unsigned char sync_mode, unsigned char bus_mode, unsigned char smp_phase) C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           {                                                                                C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             SSPSTAT &= 0x3F;                // power on state                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             SSPCON = 0x00;                 // power on state                               C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             SSPCON |= sync_mode;           // select serial mode                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             SSPSTAT |= smp_phase;           // select data input sample phase              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             switch( bus_mode )                                                             C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             {                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 0:                       // SPI bus mode 0,0                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 SSPSTATbits.CKE = 1;        // data transmitted on falling edge            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 2:                       // SPI bus mode 1,0                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 SSPSTATbits.CKE = 1;        // data transmitted on rising edge             C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 SSPCONbits.CKP = 1;        // clock idle state high                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 3:                       // SPI bus mode 1,1                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 SSPCONbits.CKP = 1;        // clock idle state high                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               default:                      // default SPI bus mode 0,1                    C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 break;                                                                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             }                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             switch( sync_mode )                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             {                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               case 4:                       // slave mode w /SS enable                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#if defined SPI_IO_V1                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC3 = 1;       // define clock pin as input	                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 	TRISAbits.TRISA5 = 1;       // define /SS1 pin as input                   C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V2 || defined SPI_IO_V4                                 C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISFbits.TRISF7 = 1;       // define /SS pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC3 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V3                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISAbits.TRISA5 = 1;       // define /SS pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISBbits.TRISB1 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V5	                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC6 = 1;       // define /SS pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V6                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC3 = 1;       // define clock pin as input	                     C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 	TRISAbits.TRISA5 = 1;       // define /SS1 pin as input                   C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               	ANSEL &= 0b11101111;                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		break;                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           case 5:                       // slave mode w/o /SS enable                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#if defined (SPI_IO_V1) || defined (SPI_IO_V6) || defined (SPI_IO_V2) || defined (SPI_IO_V4) C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC3 = 1;       // define clock pin as input	                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V3                                                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISBbits.TRISB1 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V5	                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 1;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		break;                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	default:                      // master mode, define clock pin as output        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #if defined (SPI_IO_V1) || defined (SPI_IO_V6) || defined (SPI_IO_V2) || defined (SPI_IO_V4) C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC3 = 0;       // define clock pin as input	                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V3                                                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISBbits.TRISB1 = 0;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#elif defined SPI_IO_V5	                                                        C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 0;       // define clock pin as input                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	                                                                                C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 break;                                                                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                             }                                                                              C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#if defined SPI_IO_V3                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISBbits.TRISB0 = 1;       // define SDI pin as input	                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                 	TRISCbits.TRISC7 = 0;       // define SDO pin as output                   C:\MCC18\src\pmc_common\SPI\spi_open.c
                                               #elif defined SPI_IO_V5                                                      C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC4 = 1;       // define SDI pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC7 = 0;       // define SDO pin as output                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#else                                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           		TRISCbits.TRISC4 = 1;       // define SDI pin as input                         C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	 	TRISCbits.TRISC5 = 0;       // define SDO pin as output                       C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	#endif                                                                          C:\MCC18\src\pmc_common\SPI\spi_open.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           	SSPCON |= SSPENB;              // enable synchronous serial port                C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           }                                                                                C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           #endif                                                                           C:\MCC18\src\pmc_common\SPI\spi_open.c
                                           #include <p18cxxx.h>                                                             C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           #include <spi.h>                                                                 C:\MCC18\src\pmc_common\SPI\spi_read.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           /********************************************************************            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           *     Function Name:    ReadSPI                                     *            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           *     Return Value:     contents of SSPBUF register                 *            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           *     Parameters:       void                                        *            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           *     Description:      Read single byte from SPI bus.              *            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           ********************************************************************/            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           #if defined (SPI_V1) || defined (SPI_V4)                                         C:\MCC18\src\pmc_common\SPI\spi_read.c
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_read.c
002ec6   cfd9     MOVFF     0xfd9,0xfe6    unsigned char ReadSPI( void )                                                    C:\MCC18\src\pmc_common\SPI\spi_read.c
002ec8   ffe6                                                                                                               
002eca   cfda     MOVFF     0xfda,0xfe6                                                                                     
002ecc   ffe6                                                                                                               
002ece   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002ed0   ffd9                                                                                                               
002ed2   cfe2     MOVFF     0xfe2,0xfda                                                                                     
002ed4   ffda                                                                                                               
002ed6   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\MCC18\src\pmc_common\SPI\spi_read.c
                                             unsigned char TempVar;                                                         C:\MCC18\src\pmc_common\SPI\spi_read.c
002ed8   50c9     MOVF      0xc9,0x0,0x0     TempVar = SSPBUF;        // Clear BF                                           C:\MCC18\src\pmc_common\SPI\spi_read.c
002eda   6edf     MOVWF     0xdf,0x0                                                                                        
002edc   969e     BCF       0x9e,0x3,0x0     PIR1bits.SSPIF = 0;      // Clear interrupt flag                               C:\MCC18\src\pmc_common\SPI\spi_read.c
002ede   6ac9     CLRF      0xc9,0x0         SSPBUF = 0x00;                  // initiate bus cycle                          C:\MCC18\src\pmc_common\SPI\spi_read.c
                                             //while ( !SSPSTATbits.BF );                  // wait until cycle complete     C:\MCC18\src\pmc_common\SPI\spi_read.c
002ee0   a69e     BTFSS     0x9e,0x3,0x0     while(!PIR1bits.SSPIF);  // wait until cycle complete                          C:\MCC18\src\pmc_common\SPI\spi_read.c
002ee2   d7fe     BRA       0x2ee0                                                                                          
002ee4   50c9     MOVF      0xc9,0x0,0x0     return ( SSPBUF );              // return with byte read                       C:\MCC18\src\pmc_common\SPI\spi_read.c
002ee6   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\MCC18\src\pmc_common\SPI\spi_read.c
002ee8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002eea   cfe5     MOVFF     0xfe5,0xfda                                                                                     
002eec   ffda                                                                                                               
002eee   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002ef0   ffd9                                                                                                               
002ef2   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           #endif                                                                           C:\MCC18\src\pmc_common\SPI\spi_read.c
                                           ;	RCS Header $Id: aarg.asm,v 1.3 2006/01/12 23:16:38 rhinec Exp $                C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\aarg.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\src\traditional\math\aarg.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                           __REMB3                                                                          C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB7		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __REMB2                                                                          C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB6		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __REMB1                                                                          C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB5		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __REMB0                                                                          C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB4		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB3		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB2		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB1		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           __AARGB0		RES 1                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                           __AEXP		RES 1       ; 8 bit biased exponent for argument A                       C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                           	GLOBAL	__AARGB0, __AARGB1, __AARGB2, __AARGB3                                   C:\MCC18\src\traditional\math\aarg.asm
                                                   GLOBAL  __AARGB4, __AARGB5, __AARGB6, __AARGB7                           C:\MCC18\src\traditional\math\aarg.asm
                                           	GLOBAL  __AEXP                                                                  C:\MCC18\src\traditional\math\aarg.asm
                                           	GLOBAL  __REMB3, __REMB2, __REMB1, __REMB0                                      C:\MCC18\src\traditional\math\aarg.asm
                                                                                                                            C:\MCC18\src\traditional\math\aarg.asm
                                                   END                                                                      C:\MCC18\src\traditional\math\aarg.asm
                                           ;	RCS Header $Id: barg.asm,v 1.3 2006/01/12 23:16:38 rhinec Exp $                C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\barg.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\src\traditional\math\barg.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                           __BARGB3		RES 1                                                                  C:\MCC18\src\traditional\math\barg.asm
                                           __BARGB2		RES 1                                                                  C:\MCC18\src\traditional\math\barg.asm
                                           __BARGB1		RES 1                                                                  C:\MCC18\src\traditional\math\barg.asm
                                           __BARGB0		RES 1       ; most significant byte of argument B                      C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                           __BEXP		RES 1       ; 8 bit biased exponent for argument B                       C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                                   GLOBAL  __BARGB3, __BARGB2, __BARGB1, __BARGB0                           C:\MCC18\src\traditional\math\barg.asm
                                                   GLOBAL  __BEXP                                                           C:\MCC18\src\traditional\math\barg.asm
                                                                                                                            C:\MCC18\src\traditional\math\barg.asm
                                                   END                                                                      C:\MCC18\src\traditional\math\barg.asm
                                           ;	RCS Header $Id: cmath18.asm,v 1.5 2006/01/12 23:16:38 rhinec Exp $             C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                           ;       CMATH18 DATA DEFINITION FILE                                             C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\cmath18.asm
                                           ;   VARIABLE ALLOCATION - Core math library routines                             C:\MCC18\src\traditional\math\cmath18.asm
                                           ;******************************************************************************* C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                           MATH_DATA      UDATA_ACS                                                         C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                           SIGN		RES 1       ; save location for sign in MSB                                C:\MCC18\src\traditional\math\cmath18.asm
                                           __FPFLAGSbits                                                                    C:\MCC18\src\traditional\math\cmath18.asm
                                           __FPFLAGS		RES 1       ; floating point library exception flags                  C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\math\cmath18.asm
                                                   GLOBAL  SIGN, __FPFLAGS, __FPFLAGSbits                                   C:\MCC18\src\traditional\math\cmath18.asm
                                           	                                                                                C:\MCC18\src\traditional\math\cmath18.asm
                                                   END                                                                      C:\MCC18\src\traditional\math\cmath18.asm
                                                                                                                            C:\MCC18\src\traditional\stdclib\__init.c
                                           /** @name __init                                                                 C:\MCC18\src\traditional\stdclib\__init.c
                                            * The {\bf __init} is called if the linker can not find a                       C:\MCC18\src\traditional\stdclib\__init.c
                                            * user defined version for it                                                   C:\MCC18\src\traditional\stdclib\__init.c
                                            */                                                                              C:\MCC18\src\traditional\stdclib\__init.c
                                                                                                                            C:\MCC18\src\traditional\stdclib\__init.c
                                           void __init (void)                                                               C:\MCC18\src\traditional\stdclib\__init.c
                                           {                                                                                C:\MCC18\src\traditional\stdclib\__init.c
002f4a   0012     RETURN    0x0            }                                                                                C:\MCC18\src\traditional\stdclib\__init.c
                                                                                                                            C:\MCC18\src\traditional\stdclib\__init.c
